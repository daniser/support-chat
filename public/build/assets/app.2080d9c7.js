function _d(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}function pd(e){if(Ot(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Vn(s)?f7(s):pd(s);if(o)for(const a in o)t[a]=o[a]}return t}else{if(Vn(e))return e;if(Bn(e))return e}}const l7=/;(?![^(]*\))/g,c7=/:([^]+)/,u7=/\/\*.*?\*\//gs;function f7(e){const t={};return e.replace(u7,"").split(l7).forEach(n=>{if(n){const s=n.split(c7);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function gd(e){let t="";if(Vn(e))t=e;else if(Ot(e))for(let n=0;n<e.length;n++){const s=gd(e[n]);s&&(t+=s+" ")}else if(Bn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const d7="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",h7=_d(d7);function q_(e){return!!e||e===""}const pn={},_o=[],hs=()=>{},m7=()=>!1,v7=/^on[^a-z]/,n1=e=>v7.test(e),bd=e=>e.startsWith("onUpdate:"),Jn=Object.assign,yd=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},_7=Object.prototype.hasOwnProperty,jt=(e,t)=>_7.call(e,t),Ot=Array.isArray,Al=e=>r1(e)==="[object Map]",p7=e=>r1(e)==="[object Set]",Ft=e=>typeof e=="function",Vn=e=>typeof e=="string",wd=e=>typeof e=="symbol",Bn=e=>e!==null&&typeof e=="object",V_=e=>Bn(e)&&Ft(e.then)&&Ft(e.catch),g7=Object.prototype.toString,r1=e=>g7.call(e),b7=e=>r1(e).slice(8,-1),y7=e=>r1(e)==="[object Object]",xd=e=>Vn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ou=_d(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),s1=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},w7=/-(\w)/g,So=s1(e=>e.replace(w7,(t,n)=>n?n.toUpperCase():"")),x7=/\B([A-Z])/g,Co=s1(e=>e.replace(x7,"-$1").toLowerCase()),z_=s1(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wf=s1(e=>e?`on${z_(e)}`:""),Nl=(e,t)=>!Object.is(e,t),Xf=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},$u=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},K_=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qv;const S7=()=>qv||(qv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ts;class Y_{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ts,!t&&Ts&&(this.index=(Ts.scopes||(Ts.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Ts;try{return Ts=this,t()}finally{Ts=n}}}on(){Ts=this}off(){Ts=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this.active=!1}}}function W_(e){return new Y_(e)}function A7(e,t=Ts){t&&t.active&&t.effects.push(e)}const Sd=e=>{const t=new Set(e);return t.w=0,t.n=0,t},X_=e=>(e.w&zi)>0,G_=e=>(e.n&zi)>0,E7=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=zi},M7=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];X_(o)&&!G_(o)?o.delete(e):t[n++]=o,o.w&=~zi,o.n&=~zi}t.length=n}},M0=new WeakMap;let pl=0,zi=1;const T0=30;let cs;const La=Symbol(""),R0=Symbol("");class Ad{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,A7(this,s)}run(){if(!this.active)return this.fn();let t=cs,n=Pi;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=cs,cs=this,Pi=!0,zi=1<<++pl,pl<=T0?E7(this):Vv(this),this.fn()}finally{pl<=T0&&M7(this),zi=1<<--pl,cs=this.parent,Pi=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){cs===this?this.deferStop=!0:this.active&&(Vv(this),this.onStop&&this.onStop(),this.active=!1)}}function Vv(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Pi=!0;const Z_=[];function Lo(){Z_.push(Pi),Pi=!1}function Bo(){const e=Z_.pop();Pi=e===void 0?!0:e}function Nr(e,t,n){if(Pi&&cs){let s=M0.get(e);s||M0.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=Sd()),Q_(o)}}function Q_(e,t){let n=!1;pl<=T0?G_(e)||(e.n|=zi,n=!X_(e)):n=!e.has(cs),n&&(e.add(cs),cs.deps.push(e))}function ii(e,t,n,s,o,a){const c=M0.get(e);if(!c)return;let f=[];if(t==="clear")f=[...c.values()];else if(n==="length"&&Ot(e)){const m=K_(s);c.forEach((d,p)=>{(p==="length"||p>=m)&&f.push(d)})}else switch(n!==void 0&&f.push(c.get(n)),t){case"add":Ot(e)?xd(n)&&f.push(c.get("length")):(f.push(c.get(La)),Al(e)&&f.push(c.get(R0)));break;case"delete":Ot(e)||(f.push(c.get(La)),Al(e)&&f.push(c.get(R0)));break;case"set":Al(e)&&f.push(c.get(La));break}if(f.length===1)f[0]&&k0(f[0]);else{const m=[];for(const d of f)d&&m.push(...d);k0(Sd(m))}}function k0(e,t){const n=Ot(e)?e:[...e];for(const s of n)s.computed&&zv(s);for(const s of n)s.computed||zv(s)}function zv(e,t){(e!==cs||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const T7=_d("__proto__,__v_isRef,__isVue"),J_=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(wd)),R7=Ed(),k7=Ed(!1,!0),I7=Ed(!0),Kv=O7();function O7(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=zt(this);for(let a=0,c=this.length;a<c;a++)Nr(s,"get",a+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(zt)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Lo();const s=zt(this)[t].apply(this,n);return Bo(),s}}),e}function Ed(e=!1,t=!1){return function(s,o,a){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&a===(e?t?Y7:sp:t?rp:np).get(s))return s;const c=Ot(s);if(!e&&c&&jt(Kv,o))return Reflect.get(Kv,o,a);const f=Reflect.get(s,o,a);return(wd(o)?J_.has(o):T7(o))||(e||Nr(s,"get",o),t)?f:In(f)?c&&xd(o)?f:f.value:Bn(f)?e?ip(f):a1(f):f}}const C7=ep(),L7=ep(!0);function ep(e=!1){return function(n,s,o,a){let c=n[s];if(Ao(c)&&In(c)&&!In(o))return!1;if(!e&&(!qu(o)&&!Ao(o)&&(c=zt(c),o=zt(o)),!Ot(n)&&In(c)&&!In(o)))return c.value=o,!0;const f=Ot(n)&&xd(s)?Number(s)<n.length:jt(n,s),m=Reflect.set(n,s,o,a);return n===zt(a)&&(f?Nl(o,c)&&ii(n,"set",s,o):ii(n,"add",s,o)),m}}function B7(e,t){const n=jt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&ii(e,"delete",t,void 0),s}function N7(e,t){const n=Reflect.has(e,t);return(!wd(t)||!J_.has(t))&&Nr(e,"has",t),n}function F7(e){return Nr(e,"iterate",Ot(e)?"length":La),Reflect.ownKeys(e)}const tp={get:R7,set:C7,deleteProperty:B7,has:N7,ownKeys:F7},P7={get:I7,set(e,t){return!0},deleteProperty(e,t){return!0}},H7=Jn({},tp,{get:k7,set:L7}),Md=e=>e,i1=e=>Reflect.getPrototypeOf(e);function ou(e,t,n=!1,s=!1){e=e.__v_raw;const o=zt(e),a=zt(t);n||(t!==a&&Nr(o,"get",t),Nr(o,"get",a));const{has:c}=i1(o),f=s?Md:n?kd:Fl;if(c.call(o,t))return f(e.get(t));if(c.call(o,a))return f(e.get(a));e!==o&&e.get(t)}function lu(e,t=!1){const n=this.__v_raw,s=zt(n),o=zt(e);return t||(e!==o&&Nr(s,"has",e),Nr(s,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function cu(e,t=!1){return e=e.__v_raw,!t&&Nr(zt(e),"iterate",La),Reflect.get(e,"size",e)}function Yv(e){e=zt(e);const t=zt(this);return i1(t).has.call(t,e)||(t.add(e),ii(t,"add",e,e)),this}function Wv(e,t){t=zt(t);const n=zt(this),{has:s,get:o}=i1(n);let a=s.call(n,e);a||(e=zt(e),a=s.call(n,e));const c=o.call(n,e);return n.set(e,t),a?Nl(t,c)&&ii(n,"set",e,t):ii(n,"add",e,t),this}function Xv(e){const t=zt(this),{has:n,get:s}=i1(t);let o=n.call(t,e);o||(e=zt(e),o=n.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return o&&ii(t,"delete",e,void 0),a}function Gv(){const e=zt(this),t=e.size!==0,n=e.clear();return t&&ii(e,"clear",void 0,void 0),n}function uu(e,t){return function(s,o){const a=this,c=a.__v_raw,f=zt(c),m=t?Md:e?kd:Fl;return!e&&Nr(f,"iterate",La),c.forEach((d,p)=>s.call(o,m(d),m(p),a))}}function fu(e,t,n){return function(...s){const o=this.__v_raw,a=zt(o),c=Al(a),f=e==="entries"||e===Symbol.iterator&&c,m=e==="keys"&&c,d=o[e](...s),p=n?Md:t?kd:Fl;return!t&&Nr(a,"iterate",m?R0:La),{next(){const{value:h,done:w}=d.next();return w?{value:h,done:w}:{value:f?[p(h[0]),p(h[1])]:p(h),done:w}},[Symbol.iterator](){return this}}}}function Ai(e){return function(...t){return e==="delete"?!1:this}}function j7(){const e={get(a){return ou(this,a)},get size(){return cu(this)},has:lu,add:Yv,set:Wv,delete:Xv,clear:Gv,forEach:uu(!1,!1)},t={get(a){return ou(this,a,!1,!0)},get size(){return cu(this)},has:lu,add:Yv,set:Wv,delete:Xv,clear:Gv,forEach:uu(!1,!0)},n={get(a){return ou(this,a,!0)},get size(){return cu(this,!0)},has(a){return lu.call(this,a,!0)},add:Ai("add"),set:Ai("set"),delete:Ai("delete"),clear:Ai("clear"),forEach:uu(!0,!1)},s={get(a){return ou(this,a,!0,!0)},get size(){return cu(this,!0)},has(a){return lu.call(this,a,!0)},add:Ai("add"),set:Ai("set"),delete:Ai("delete"),clear:Ai("clear"),forEach:uu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=fu(a,!1,!1),n[a]=fu(a,!0,!1),t[a]=fu(a,!1,!0),s[a]=fu(a,!0,!0)}),[e,n,t,s]}const[U7,D7,$7,q7]=j7();function Td(e,t){const n=t?e?q7:$7:e?D7:U7;return(s,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(jt(n,o)&&o in s?n:s,o,a)}const V7={get:Td(!1,!1)},z7={get:Td(!1,!0)},K7={get:Td(!0,!1)},np=new WeakMap,rp=new WeakMap,sp=new WeakMap,Y7=new WeakMap;function W7(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function X7(e){return e.__v_skip||!Object.isExtensible(e)?0:W7(b7(e))}function a1(e){return Ao(e)?e:Rd(e,!1,tp,V7,np)}function G7(e){return Rd(e,!1,H7,z7,rp)}function ip(e){return Rd(e,!0,P7,K7,sp)}function Rd(e,t,n,s,o){if(!Bn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const c=X7(e);if(c===0)return e;const f=new Proxy(e,c===2?s:n);return o.set(e,f),f}function Hi(e){return Ao(e)?Hi(e.__v_raw):!!(e&&e.__v_isReactive)}function Ao(e){return!!(e&&e.__v_isReadonly)}function qu(e){return!!(e&&e.__v_isShallow)}function ap(e){return Hi(e)||Ao(e)}function zt(e){const t=e&&e.__v_raw;return t?zt(t):e}function Eo(e){return $u(e,"__v_skip",!0),e}const Fl=e=>Bn(e)?a1(e):e,kd=e=>Bn(e)?ip(e):e;function op(e){Pi&&cs&&(e=zt(e),Q_(e.dep||(e.dep=Sd())))}function lp(e,t){e=zt(e),e.dep&&k0(e.dep)}function In(e){return!!(e&&e.__v_isRef===!0)}function ei(e){return Z7(e,!1)}function Z7(e,t){return In(e)?e:new Q7(e,t)}class Q7{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:zt(t),this._value=n?t:Fl(t)}get value(){return op(this),this._value}set value(t){const n=this.__v_isShallow||qu(t)||Ao(t);t=n?t:zt(t),Nl(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Fl(t),lp(this))}}function En(e){return In(e)?e.value:e}const J7={get:(e,t,n)=>En(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return In(o)&&!In(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function cp(e){return Hi(e)?e:new Proxy(e,J7)}function ew(e){const t=Ot(e)?new Array(e.length):{};for(const n in e)t[n]=nw(e,n);return t}class tw{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function nw(e,t,n){const s=e[t];return In(s)?s:new tw(e,t,n)}var up;class rw{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[up]=!1,this._dirty=!0,this.effect=new Ad(t,()=>{this._dirty||(this._dirty=!0,lp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=zt(this);return op(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}up="__v_isReadonly";function sw(e,t,n=!1){let s,o;const a=Ft(e);return a?(s=e,o=hs):(s=e.get,o=e.set),new rw(s,o,a||!o,n)}function ji(e,t,n,s){let o;try{o=s?e(...s):e()}catch(a){o1(a,t,n)}return o}function Jr(e,t,n,s){if(Ft(e)){const a=ji(e,t,n,s);return a&&V_(a)&&a.catch(c=>{o1(c,t,n)}),a}const o=[];for(let a=0;a<e.length;a++)o.push(Jr(e[a],t,n,s));return o}function o1(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,f=n;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,f)===!1)return}a=a.parent}const m=t.appContext.config.errorHandler;if(m){ji(m,null,10,[e,c,f]);return}}iw(e,n,o,s)}function iw(e,t,n,s=!0){console.error(e)}let Pl=!1,I0=!1;const Zn=[];let Ls=0;const po=[];let Js=null,Aa=0;const fp=Promise.resolve();let Id=null;function dp(e){const t=Id||fp;return e?t.then(this?e.bind(this):e):t}function aw(e){let t=Ls+1,n=Zn.length;for(;t<n;){const s=t+n>>>1;Hl(Zn[s])<e?t=s+1:n=s}return t}function Od(e){(!Zn.length||!Zn.includes(e,Pl&&e.allowRecurse?Ls+1:Ls))&&(e.id==null?Zn.push(e):Zn.splice(aw(e.id),0,e),hp())}function hp(){!Pl&&!I0&&(I0=!0,Id=fp.then(vp))}function ow(e){const t=Zn.indexOf(e);t>Ls&&Zn.splice(t,1)}function lw(e){Ot(e)?po.push(...e):(!Js||!Js.includes(e,e.allowRecurse?Aa+1:Aa))&&po.push(e),hp()}function Zv(e,t=Pl?Ls+1:0){for(;t<Zn.length;t++){const n=Zn[t];n&&n.pre&&(Zn.splice(t,1),t--,n())}}function mp(e){if(po.length){const t=[...new Set(po)];if(po.length=0,Js){Js.push(...t);return}for(Js=t,Js.sort((n,s)=>Hl(n)-Hl(s)),Aa=0;Aa<Js.length;Aa++)Js[Aa]();Js=null,Aa=0}}const Hl=e=>e.id==null?1/0:e.id,cw=(e,t)=>{const n=Hl(e)-Hl(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function vp(e){I0=!1,Pl=!0,Zn.sort(cw);const t=hs;try{for(Ls=0;Ls<Zn.length;Ls++){const n=Zn[Ls];n&&n.active!==!1&&ji(n,null,14)}}finally{Ls=0,Zn.length=0,mp(),Pl=!1,Id=null,(Zn.length||po.length)&&vp()}}function uw(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||pn;let o=n;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const p=`${c==="modelValue"?"model":c}Modifiers`,{number:h,trim:w}=s[p]||pn;w&&(o=n.map(M=>Vn(M)?M.trim():M)),h&&(o=n.map(K_))}let f,m=s[f=Wf(t)]||s[f=Wf(So(t))];!m&&a&&(m=s[f=Wf(Co(t))]),m&&Jr(m,e,6,o);const d=s[f+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,Jr(d,e,6,o)}}function _p(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const a=e.emits;let c={},f=!1;if(!Ft(e)){const m=d=>{const p=_p(d,t,!0);p&&(f=!0,Jn(c,p))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!a&&!f?(Bn(e)&&s.set(e,null),null):(Ot(a)?a.forEach(m=>c[m]=null):Jn(c,a),Bn(e)&&s.set(e,c),c)}function l1(e,t){return!e||!n1(t)?!1:(t=t.slice(2).replace(/Once$/,""),jt(e,t[0].toLowerCase()+t.slice(1))||jt(e,Co(t))||jt(e,t))}let Fs=null,pp=null;function Vu(e){const t=Fs;return Fs=e,pp=e&&e.type.__scopeId||null,t}function fw(e,t=Fs,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&a2(-1);const a=Vu(t);let c;try{c=e(...o)}finally{Vu(a),s._d&&a2(1)}return c};return s._n=!0,s._c=!0,s._d=!0,s}function Gf(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:a,propsOptions:[c],slots:f,attrs:m,emit:d,render:p,renderCache:h,data:w,setupState:M,ctx:u,inheritAttrs:$}=e;let U,D;const b=Vu(e);try{if(n.shapeFlag&4){const F=o||s;U=Os(p.call(F,F,h,a,M,w,u)),D=m}else{const F=t;U=Os(F.length>1?F(a,{attrs:m,slots:f,emit:d}):F(a,null)),D=t.props?m:dw(m)}}catch(F){Tl.length=0,o1(F,e,1),U=ni(ms)}let C=U;if(D&&$!==!1){const F=Object.keys(D),{shapeFlag:L}=C;F.length&&L&7&&(c&&F.some(bd)&&(D=hw(D,c)),C=Ki(C,D))}return n.dirs&&(C=Ki(C),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(C.transition=n.transition),U=C,Vu(b),U}const dw=e=>{let t;for(const n in e)(n==="class"||n==="style"||n1(n))&&((t||(t={}))[n]=e[n]);return t},hw=(e,t)=>{const n={};for(const s in e)(!bd(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function mw(e,t,n){const{props:s,children:o,component:a}=e,{props:c,children:f,patchFlag:m}=t,d=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return s?Qv(s,c,d):!!c;if(m&8){const p=t.dynamicProps;for(let h=0;h<p.length;h++){const w=p[h];if(c[w]!==s[w]&&!l1(d,w))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:s===c?!1:s?c?Qv(s,c,d):!0:!!c;return!1}function Qv(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const a=s[o];if(t[a]!==e[a]&&!l1(n,a))return!0}return!1}function vw({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const _w=e=>e.__isSuspense;function pw(e,t){t&&t.pendingBranch?Ot(e)?t.effects.push(...e):t.effects.push(e):lw(e)}function gw(e,t){if(qn){let n=qn.provides;const s=qn.parent&&qn.parent.provides;s===n&&(n=qn.provides=Object.create(s)),n[e]=t}}function El(e,t,n=!1){const s=qn||Fs;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Ft(t)?t.call(s.proxy):t}}const du={};function Cu(e,t,n){return gp(e,t,n)}function gp(e,t,{immediate:n,deep:s,flush:o,onTrack:a,onTrigger:c}=pn){const f=qn;let m,d=!1,p=!1;if(In(e)?(m=()=>e.value,d=qu(e)):Hi(e)?(m=()=>e,s=!0):Ot(e)?(p=!0,d=e.some(C=>Hi(C)||qu(C)),m=()=>e.map(C=>{if(In(C))return C.value;if(Hi(C))return mo(C);if(Ft(C))return ji(C,f,2)})):Ft(e)?t?m=()=>ji(e,f,2):m=()=>{if(!(f&&f.isUnmounted))return h&&h(),Jr(e,f,3,[w])}:m=hs,t&&s){const C=m;m=()=>mo(C())}let h,w=C=>{h=D.onStop=()=>{ji(C,f,4)}},M;if(Ul)if(w=hs,t?n&&Jr(t,f,3,[m(),p?[]:void 0,w]):m(),o==="sync"){const C=vx();M=C.__watcherHandles||(C.__watcherHandles=[])}else return hs;let u=p?new Array(e.length).fill(du):du;const $=()=>{if(!!D.active)if(t){const C=D.run();(s||d||(p?C.some((F,L)=>Nl(F,u[L])):Nl(C,u)))&&(h&&h(),Jr(t,f,3,[C,u===du||p&&u[0]===du?[]:u,w]),u=C)}else D.run()};$.allowRecurse=!!t;let U;o==="sync"?U=$:o==="post"?U=()=>wr($,f&&f.suspense):($.pre=!0,f&&($.id=f.uid),U=()=>Od($));const D=new Ad(m,U);t?n?$():u=D.run():o==="post"?wr(D.run.bind(D),f&&f.suspense):D.run();const b=()=>{D.stop(),f&&f.scope&&yd(f.scope.effects,D)};return M&&M.push(b),b}function bw(e,t,n){const s=this.proxy,o=Vn(e)?e.includes(".")?bp(s,e):()=>s[e]:e.bind(s,s);let a;Ft(t)?a=t:(a=t.handler,n=t);const c=qn;Mo(this);const f=gp(o,a.bind(s),n);return c?Mo(c):Ba(),f}function bp(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function mo(e,t){if(!Bn(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),In(e))mo(e.value,t);else if(Ot(e))for(let n=0;n<e.length;n++)mo(e[n],t);else if(p7(e)||Al(e))e.forEach(n=>{mo(n,t)});else if(y7(e))for(const n in e)mo(e[n],t);return e}function yw(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cd(()=>{e.isMounted=!0}),Sp(()=>{e.isUnmounting=!0}),e}const Yr=[Function,Array],ww={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yr,onEnter:Yr,onAfterEnter:Yr,onEnterCancelled:Yr,onBeforeLeave:Yr,onLeave:Yr,onAfterLeave:Yr,onLeaveCancelled:Yr,onBeforeAppear:Yr,onAppear:Yr,onAfterAppear:Yr,onAppearCancelled:Yr},setup(e,{slots:t}){const n=Hd(),s=yw();let o;return()=>{const a=t.default&&wp(t.default(),!0);if(!a||!a.length)return;let c=a[0];if(a.length>1){for(const $ of a)if($.type!==ms){c=$;break}}const f=zt(e),{mode:m}=f;if(s.isLeaving)return Zf(c);const d=Jv(c);if(!d)return Zf(c);const p=O0(d,f,s,n);C0(d,p);const h=n.subTree,w=h&&Jv(h);let M=!1;const{getTransitionKey:u}=d.type;if(u){const $=u();o===void 0?o=$:$!==o&&(o=$,M=!0)}if(w&&w.type!==ms&&(!Ea(d,w)||M)){const $=O0(w,f,s,n);if(C0(w,$),m==="out-in")return s.isLeaving=!0,$.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&n.update()},Zf(c);m==="in-out"&&d.type!==ms&&($.delayLeave=(U,D,b)=>{const C=yp(s,w);C[String(w.key)]=w,U._leaveCb=()=>{D(),U._leaveCb=void 0,delete p.delayedLeave},p.delayedLeave=b})}return c}}},xw=ww;function yp(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function O0(e,t,n,s){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:f,onEnter:m,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:h,onLeave:w,onAfterLeave:M,onLeaveCancelled:u,onBeforeAppear:$,onAppear:U,onAfterAppear:D,onAppearCancelled:b}=t,C=String(e.key),F=yp(n,e),L=(E,T)=>{E&&Jr(E,s,9,T)},V=(E,T)=>{const y=T[1];L(E,T),Ot(E)?E.every(A=>A.length<=1)&&y():E.length<=1&&y()},v={mode:a,persisted:c,beforeEnter(E){let T=f;if(!n.isMounted)if(o)T=$||f;else return;E._leaveCb&&E._leaveCb(!0);const y=F[C];y&&Ea(e,y)&&y.el._leaveCb&&y.el._leaveCb(),L(T,[E])},enter(E){let T=m,y=d,A=p;if(!n.isMounted)if(o)T=U||m,y=D||d,A=b||p;else return;let S=!1;const x=E._enterCb=k=>{S||(S=!0,k?L(A,[E]):L(y,[E]),v.delayedLeave&&v.delayedLeave(),E._enterCb=void 0)};T?V(T,[E,x]):x()},leave(E,T){const y=String(e.key);if(E._enterCb&&E._enterCb(!0),n.isUnmounting)return T();L(h,[E]);let A=!1;const S=E._leaveCb=x=>{A||(A=!0,T(),x?L(u,[E]):L(M,[E]),E._leaveCb=void 0,F[y]===e&&delete F[y])};F[y]=e,w?V(w,[E,S]):S()},clone(E){return O0(E,t,n,s)}};return v}function Zf(e){if(c1(e))return e=Ki(e),e.children=null,e}function Jv(e){return c1(e)?e.children?e.children[0]:void 0:e}function C0(e,t){e.shapeFlag&6&&e.component?C0(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function wp(e,t=!1,n){let s=[],o=0;for(let a=0;a<e.length;a++){let c=e[a];const f=n==null?c.key:String(n)+String(c.key!=null?c.key:a);c.type===Is?(c.patchFlag&128&&o++,s=s.concat(wp(c.children,t,f))):(t||c.type!==ms)&&s.push(f!=null?Ki(c,{key:f}):c)}if(o>1)for(let a=0;a<s.length;a++)s[a].patchFlag=-2;return s}const Lu=e=>!!e.type.__asyncLoader,c1=e=>e.type.__isKeepAlive;function Sw(e,t){xp(e,"a",t)}function Aw(e,t){xp(e,"da",t)}function xp(e,t,n=qn){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(u1(t,s,n),n){let o=n.parent;for(;o&&o.parent;)c1(o.parent.vnode)&&Ew(s,t,n,o),o=o.parent}}function Ew(e,t,n,s){const o=u1(t,e,s,!0);Ld(()=>{yd(s[t],o)},n)}function u1(e,t,n=qn,s=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...c)=>{if(n.isUnmounted)return;Lo(),Mo(n);const f=Jr(t,n,e,c);return Ba(),Bo(),f});return s?o.unshift(a):o.push(a),a}}const ci=e=>(t,n=qn)=>(!Ul||e==="sp")&&u1(e,(...s)=>t(...s),n),Mw=ci("bm"),Cd=ci("m"),Tw=ci("bu"),Rw=ci("u"),Sp=ci("bum"),Ld=ci("um"),kw=ci("sp"),Iw=ci("rtg"),Ow=ci("rtc");function Cw(e,t=qn){u1("ec",e,t)}function ua(e,t,n,s){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const f=o[c];a&&(f.oldValue=a[c].value);let m=f.dir[s];m&&(Lo(),Jr(m,n,8,[e.el,f,e,t]),Bo())}}const Lw=Symbol(),L0=e=>e?Fp(e)?jd(e)||e.proxy:L0(e.parent):null,Ml=Jn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>L0(e.parent),$root:e=>L0(e.root),$emit:e=>e.emit,$options:e=>Bd(e),$forceUpdate:e=>e.f||(e.f=()=>Od(e.update)),$nextTick:e=>e.n||(e.n=dp.bind(e.proxy)),$watch:e=>bw.bind(e)}),Bw={get({_:e},t){const{ctx:n,setupState:s,data:o,props:a,accessCache:c,type:f,appContext:m}=e;let d;if(t[0]!=="$"){const M=c[t];if(M!==void 0)switch(M){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(s!==pn&&jt(s,t))return c[t]=1,s[t];if(o!==pn&&jt(o,t))return c[t]=2,o[t];if((d=e.propsOptions[0])&&jt(d,t))return c[t]=3,a[t];if(n!==pn&&jt(n,t))return c[t]=4,n[t];B0&&(c[t]=0)}}const p=Ml[t];let h,w;if(p)return t==="$attrs"&&Nr(e,"get",t),p(e);if((h=f.__cssModules)&&(h=h[t]))return h;if(n!==pn&&jt(n,t))return c[t]=4,n[t];if(w=m.config.globalProperties,jt(w,t))return w[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:a}=e;return o!==pn&&jt(o,t)?(o[t]=n,!0):s!==pn&&jt(s,t)?(s[t]=n,!0):jt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:a}},c){let f;return!!n[c]||e!==pn&&jt(e,c)||t!==pn&&jt(t,c)||(f=a[0])&&jt(f,c)||jt(s,c)||jt(Ml,c)||jt(o.config.globalProperties,c)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:jt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let B0=!0;function Nw(e){const t=Bd(e),n=e.proxy,s=e.ctx;B0=!1,t.beforeCreate&&e2(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:f,provide:m,inject:d,created:p,beforeMount:h,mounted:w,beforeUpdate:M,updated:u,activated:$,deactivated:U,beforeDestroy:D,beforeUnmount:b,destroyed:C,unmounted:F,render:L,renderTracked:V,renderTriggered:v,errorCaptured:E,serverPrefetch:T,expose:y,inheritAttrs:A,components:S,directives:x,filters:k}=t;if(d&&Fw(d,s,null,e.appContext.config.unwrapInjectedRef),c)for(const ne in c){const Y=c[ne];Ft(Y)&&(s[ne]=Y.bind(n))}if(o){const ne=o.call(n,n);Bn(ne)&&(e.data=a1(ne))}if(B0=!0,a)for(const ne in a){const Y=a[ne],te=Ft(Y)?Y.bind(n,n):Ft(Y.get)?Y.get.bind(n,n):hs,g=!Ft(Y)&&Ft(Y.set)?Y.set.bind(n):hs,I=Ma({get:te,set:g});Object.defineProperty(s,ne,{enumerable:!0,configurable:!0,get:()=>I.value,set:le=>I.value=le})}if(f)for(const ne in f)Ap(f[ne],s,n,ne);if(m){const ne=Ft(m)?m.call(n):m;Reflect.ownKeys(ne).forEach(Y=>{gw(Y,ne[Y])})}p&&e2(p,e,"c");function z(ne,Y){Ot(Y)?Y.forEach(te=>ne(te.bind(n))):Y&&ne(Y.bind(n))}if(z(Mw,h),z(Cd,w),z(Tw,M),z(Rw,u),z(Sw,$),z(Aw,U),z(Cw,E),z(Ow,V),z(Iw,v),z(Sp,b),z(Ld,F),z(kw,T),Ot(y))if(y.length){const ne=e.exposed||(e.exposed={});y.forEach(Y=>{Object.defineProperty(ne,Y,{get:()=>n[Y],set:te=>n[Y]=te})})}else e.exposed||(e.exposed={});L&&e.render===hs&&(e.render=L),A!=null&&(e.inheritAttrs=A),S&&(e.components=S),x&&(e.directives=x)}function Fw(e,t,n=hs,s=!1){Ot(e)&&(e=N0(e));for(const o in e){const a=e[o];let c;Bn(a)?"default"in a?c=El(a.from||o,a.default,!0):c=El(a.from||o):c=El(a),In(c)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:f=>c.value=f}):t[o]=c}}function e2(e,t,n){Jr(Ot(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ap(e,t,n,s){const o=s.includes(".")?bp(n,s):()=>n[s];if(Vn(e)){const a=t[e];Ft(a)&&Cu(o,a)}else if(Ft(e))Cu(o,e.bind(n));else if(Bn(e))if(Ot(e))e.forEach(a=>Ap(a,t,n,s));else{const a=Ft(e.handler)?e.handler.bind(n):t[e.handler];Ft(a)&&Cu(o,a,e)}}function Bd(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,f=a.get(t);let m;return f?m=f:!o.length&&!n&&!s?m=t:(m={},o.length&&o.forEach(d=>zu(m,d,c,!0)),zu(m,t,c)),Bn(t)&&a.set(t,m),m}function zu(e,t,n,s=!1){const{mixins:o,extends:a}=t;a&&zu(e,a,n,!0),o&&o.forEach(c=>zu(e,c,n,!0));for(const c in t)if(!(s&&c==="expose")){const f=Pw[c]||n&&n[c];e[c]=f?f(e[c],t[c]):t[c]}return e}const Pw={data:t2,props:xa,emits:xa,methods:xa,computed:xa,beforeCreate:cr,created:cr,beforeMount:cr,mounted:cr,beforeUpdate:cr,updated:cr,beforeDestroy:cr,beforeUnmount:cr,destroyed:cr,unmounted:cr,activated:cr,deactivated:cr,errorCaptured:cr,serverPrefetch:cr,components:xa,directives:xa,watch:jw,provide:t2,inject:Hw};function t2(e,t){return t?e?function(){return Jn(Ft(e)?e.call(this,this):e,Ft(t)?t.call(this,this):t)}:t:e}function Hw(e,t){return xa(N0(e),N0(t))}function N0(e){if(Ot(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function cr(e,t){return e?[...new Set([].concat(e,t))]:t}function xa(e,t){return e?Jn(Jn(Object.create(null),e),t):t}function jw(e,t){if(!e)return t;if(!t)return e;const n=Jn(Object.create(null),e);for(const s in t)n[s]=cr(e[s],t[s]);return n}function Uw(e,t,n,s=!1){const o={},a={};$u(a,f1,1),e.propsDefaults=Object.create(null),Ep(e,t,o,a);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);n?e.props=s?o:G7(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Dw(e,t,n,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,f=zt(o),[m]=e.propsOptions;let d=!1;if((s||c>0)&&!(c&16)){if(c&8){const p=e.vnode.dynamicProps;for(let h=0;h<p.length;h++){let w=p[h];if(l1(e.emitsOptions,w))continue;const M=t[w];if(m)if(jt(a,w))M!==a[w]&&(a[w]=M,d=!0);else{const u=So(w);o[u]=F0(m,f,u,M,e,!1)}else M!==a[w]&&(a[w]=M,d=!0)}}}else{Ep(e,t,o,a)&&(d=!0);let p;for(const h in f)(!t||!jt(t,h)&&((p=Co(h))===h||!jt(t,p)))&&(m?n&&(n[h]!==void 0||n[p]!==void 0)&&(o[h]=F0(m,f,h,void 0,e,!0)):delete o[h]);if(a!==f)for(const h in a)(!t||!jt(t,h)&&!0)&&(delete a[h],d=!0)}d&&ii(e,"set","$attrs")}function Ep(e,t,n,s){const[o,a]=e.propsOptions;let c=!1,f;if(t)for(let m in t){if(Ou(m))continue;const d=t[m];let p;o&&jt(o,p=So(m))?!a||!a.includes(p)?n[p]=d:(f||(f={}))[p]=d:l1(e.emitsOptions,m)||(!(m in s)||d!==s[m])&&(s[m]=d,c=!0)}if(a){const m=zt(n),d=f||pn;for(let p=0;p<a.length;p++){const h=a[p];n[h]=F0(o,m,h,d[h],e,!jt(d,h))}}return c}function F0(e,t,n,s,o,a){const c=e[n];if(c!=null){const f=jt(c,"default");if(f&&s===void 0){const m=c.default;if(c.type!==Function&&Ft(m)){const{propsDefaults:d}=o;n in d?s=d[n]:(Mo(o),s=d[n]=m.call(null,t),Ba())}else s=m}c[0]&&(a&&!f?s=!1:c[1]&&(s===""||s===Co(n))&&(s=!0))}return s}function Mp(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const a=e.props,c={},f=[];let m=!1;if(!Ft(e)){const p=h=>{m=!0;const[w,M]=Mp(h,t,!0);Jn(c,w),M&&f.push(...M)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!a&&!m)return Bn(e)&&s.set(e,_o),_o;if(Ot(a))for(let p=0;p<a.length;p++){const h=So(a[p]);n2(h)&&(c[h]=pn)}else if(a)for(const p in a){const h=So(p);if(n2(h)){const w=a[p],M=c[h]=Ot(w)||Ft(w)?{type:w}:Object.assign({},w);if(M){const u=i2(Boolean,M.type),$=i2(String,M.type);M[0]=u>-1,M[1]=$<0||u<$,(u>-1||jt(M,"default"))&&f.push(h)}}}const d=[c,f];return Bn(e)&&s.set(e,d),d}function n2(e){return e[0]!=="$"}function r2(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function s2(e,t){return r2(e)===r2(t)}function i2(e,t){return Ot(t)?t.findIndex(n=>s2(n,e)):Ft(t)&&s2(t,e)?0:-1}const Tp=e=>e[0]==="_"||e==="$stable",Nd=e=>Ot(e)?e.map(Os):[Os(e)],$w=(e,t,n)=>{if(t._n)return t;const s=fw((...o)=>Nd(t(...o)),n);return s._c=!1,s},Rp=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Tp(o))continue;const a=e[o];if(Ft(a))t[o]=$w(o,a,s);else if(a!=null){const c=Nd(a);t[o]=()=>c}}},kp=(e,t)=>{const n=Nd(t);e.slots.default=()=>n},qw=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=zt(t),$u(t,"_",n)):Rp(t,e.slots={})}else e.slots={},t&&kp(e,t);$u(e.slots,f1,1)},Vw=(e,t,n)=>{const{vnode:s,slots:o}=e;let a=!0,c=pn;if(s.shapeFlag&32){const f=t._;f?n&&f===1?a=!1:(Jn(o,t),!n&&f===1&&delete o._):(a=!t.$stable,Rp(t,o)),c=t}else t&&(kp(e,t),c={default:1});if(a)for(const f in o)!Tp(f)&&!(f in c)&&delete o[f]};function Ip(){return{app:null,config:{isNativeTag:m7,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zw=0;function Kw(e,t){return function(s,o=null){Ft(s)||(s=Object.assign({},s)),o!=null&&!Bn(o)&&(o=null);const a=Ip(),c=new Set;let f=!1;const m=a.app={_uid:zw++,_component:s,_props:o,_container:null,_context:a,_instance:null,version:_x,get config(){return a.config},set config(d){},use(d,...p){return c.has(d)||(d&&Ft(d.install)?(c.add(d),d.install(m,...p)):Ft(d)&&(c.add(d),d(m,...p))),m},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),m},component(d,p){return p?(a.components[d]=p,m):a.components[d]},directive(d,p){return p?(a.directives[d]=p,m):a.directives[d]},mount(d,p,h){if(!f){const w=ni(s,o);return w.appContext=a,p&&t?t(w,d):e(w,d,h),f=!0,m._container=d,d.__vue_app__=m,jd(w.component)||w.component.proxy}},unmount(){f&&(e(null,m._container),delete m._container.__vue_app__)},provide(d,p){return a.provides[d]=p,m}};return m}}function P0(e,t,n,s,o=!1){if(Ot(e)){e.forEach((w,M)=>P0(w,t&&(Ot(t)?t[M]:t),n,s,o));return}if(Lu(s)&&!o)return;const a=s.shapeFlag&4?jd(s.component)||s.component.proxy:s.el,c=o?null:a,{i:f,r:m}=e,d=t&&t.r,p=f.refs===pn?f.refs={}:f.refs,h=f.setupState;if(d!=null&&d!==m&&(Vn(d)?(p[d]=null,jt(h,d)&&(h[d]=null)):In(d)&&(d.value=null)),Ft(m))ji(m,f,12,[c,p]);else{const w=Vn(m),M=In(m);if(w||M){const u=()=>{if(e.f){const $=w?jt(h,m)?h[m]:p[m]:m.value;o?Ot($)&&yd($,a):Ot($)?$.includes(a)||$.push(a):w?(p[m]=[a],jt(h,m)&&(h[m]=p[m])):(m.value=[a],e.k&&(p[e.k]=m.value))}else w?(p[m]=c,jt(h,m)&&(h[m]=c)):M&&(m.value=c,e.k&&(p[e.k]=c))};c?(u.id=-1,wr(u,n)):u()}}}const wr=pw;function Yw(e){return Ww(e)}function Ww(e,t){const n=S7();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:f,createComment:m,setText:d,setElementText:p,parentNode:h,nextSibling:w,setScopeId:M=hs,insertStaticContent:u}=e,$=(X,O,P,G=null,ee=null,re=null,pe=!1,ve=null,ce=!!O.dynamicChildren)=>{if(X===O)return;X&&!Ea(X,O)&&(G=oe(X),le(X,ee,re,!0),X=null),O.patchFlag===-2&&(ce=!1,O.dynamicChildren=null);const{type:ae,ref:ge,shapeFlag:Be}=O;switch(ae){case Fd:U(X,O,P,G);break;case ms:D(X,O,P,G);break;case Qf:X==null&&b(O,P,G,pe);break;case Is:S(X,O,P,G,ee,re,pe,ve,ce);break;default:Be&1?L(X,O,P,G,ee,re,pe,ve,ce):Be&6?x(X,O,P,G,ee,re,pe,ve,ce):(Be&64||Be&128)&&ae.process(X,O,P,G,ee,re,pe,ve,ce,Se)}ge!=null&&ee&&P0(ge,X&&X.ref,re,O||X,!O)},U=(X,O,P,G)=>{if(X==null)s(O.el=f(O.children),P,G);else{const ee=O.el=X.el;O.children!==X.children&&d(ee,O.children)}},D=(X,O,P,G)=>{X==null?s(O.el=m(O.children||""),P,G):O.el=X.el},b=(X,O,P,G)=>{[X.el,X.anchor]=u(X.children,O,P,G,X.el,X.anchor)},C=({el:X,anchor:O},P,G)=>{let ee;for(;X&&X!==O;)ee=w(X),s(X,P,G),X=ee;s(O,P,G)},F=({el:X,anchor:O})=>{let P;for(;X&&X!==O;)P=w(X),o(X),X=P;o(O)},L=(X,O,P,G,ee,re,pe,ve,ce)=>{pe=pe||O.type==="svg",X==null?V(O,P,G,ee,re,pe,ve,ce):T(X,O,ee,re,pe,ve,ce)},V=(X,O,P,G,ee,re,pe,ve)=>{let ce,ae;const{type:ge,props:Be,shapeFlag:Ce,transition:Pe,dirs:We}=X;if(ce=X.el=c(X.type,re,Be&&Be.is,Be),Ce&8?p(ce,X.children):Ce&16&&E(X.children,ce,null,G,ee,re&&ge!=="foreignObject",pe,ve),We&&ua(X,null,G,"created"),Be){for(const be in Be)be!=="value"&&!Ou(be)&&a(ce,be,null,Be[be],re,X.children,G,ee,qe);"value"in Be&&a(ce,"value",null,Be.value),(ae=Be.onVnodeBeforeMount)&&Ss(ae,G,X)}v(ce,X,X.scopeId,pe,G),We&&ua(X,null,G,"beforeMount");const nt=(!ee||ee&&!ee.pendingBranch)&&Pe&&!Pe.persisted;nt&&Pe.beforeEnter(ce),s(ce,O,P),((ae=Be&&Be.onVnodeMounted)||nt||We)&&wr(()=>{ae&&Ss(ae,G,X),nt&&Pe.enter(ce),We&&ua(X,null,G,"mounted")},ee)},v=(X,O,P,G,ee)=>{if(P&&M(X,P),G)for(let re=0;re<G.length;re++)M(X,G[re]);if(ee){let re=ee.subTree;if(O===re){const pe=ee.vnode;v(X,pe,pe.scopeId,pe.slotScopeIds,ee.parent)}}},E=(X,O,P,G,ee,re,pe,ve,ce=0)=>{for(let ae=ce;ae<X.length;ae++){const ge=X[ae]=ve?Bi(X[ae]):Os(X[ae]);$(null,ge,O,P,G,ee,re,pe,ve)}},T=(X,O,P,G,ee,re,pe)=>{const ve=O.el=X.el;let{patchFlag:ce,dynamicChildren:ae,dirs:ge}=O;ce|=X.patchFlag&16;const Be=X.props||pn,Ce=O.props||pn;let Pe;P&&fa(P,!1),(Pe=Ce.onVnodeBeforeUpdate)&&Ss(Pe,P,O,X),ge&&ua(O,X,P,"beforeUpdate"),P&&fa(P,!0);const We=ee&&O.type!=="foreignObject";if(ae?y(X.dynamicChildren,ae,ve,P,G,We,re):pe||Y(X,O,ve,null,P,G,We,re,!1),ce>0){if(ce&16)A(ve,O,Be,Ce,P,G,ee);else if(ce&2&&Be.class!==Ce.class&&a(ve,"class",null,Ce.class,ee),ce&4&&a(ve,"style",Be.style,Ce.style,ee),ce&8){const nt=O.dynamicProps;for(let be=0;be<nt.length;be++){const Ne=nt[be],me=Be[Ne],Ze=Ce[Ne];(Ze!==me||Ne==="value")&&a(ve,Ne,me,Ze,ee,X.children,P,G,qe)}}ce&1&&X.children!==O.children&&p(ve,O.children)}else!pe&&ae==null&&A(ve,O,Be,Ce,P,G,ee);((Pe=Ce.onVnodeUpdated)||ge)&&wr(()=>{Pe&&Ss(Pe,P,O,X),ge&&ua(O,X,P,"updated")},G)},y=(X,O,P,G,ee,re,pe)=>{for(let ve=0;ve<O.length;ve++){const ce=X[ve],ae=O[ve],ge=ce.el&&(ce.type===Is||!Ea(ce,ae)||ce.shapeFlag&70)?h(ce.el):P;$(ce,ae,ge,null,G,ee,re,pe,!0)}},A=(X,O,P,G,ee,re,pe)=>{if(P!==G){if(P!==pn)for(const ve in P)!Ou(ve)&&!(ve in G)&&a(X,ve,P[ve],null,pe,O.children,ee,re,qe);for(const ve in G){if(Ou(ve))continue;const ce=G[ve],ae=P[ve];ce!==ae&&ve!=="value"&&a(X,ve,ae,ce,pe,O.children,ee,re,qe)}"value"in G&&a(X,"value",P.value,G.value)}},S=(X,O,P,G,ee,re,pe,ve,ce)=>{const ae=O.el=X?X.el:f(""),ge=O.anchor=X?X.anchor:f("");let{patchFlag:Be,dynamicChildren:Ce,slotScopeIds:Pe}=O;Pe&&(ve=ve?ve.concat(Pe):Pe),X==null?(s(ae,P,G),s(ge,P,G),E(O.children,P,ge,ee,re,pe,ve,ce)):Be>0&&Be&64&&Ce&&X.dynamicChildren?(y(X.dynamicChildren,Ce,P,ee,re,pe,ve),(O.key!=null||ee&&O===ee.subTree)&&Op(X,O,!0)):Y(X,O,P,ge,ee,re,pe,ve,ce)},x=(X,O,P,G,ee,re,pe,ve,ce)=>{O.slotScopeIds=ve,X==null?O.shapeFlag&512?ee.ctx.activate(O,P,G,pe,ce):k(O,P,G,ee,re,pe,ce):R(X,O,ce)},k=(X,O,P,G,ee,re,pe)=>{const ve=X.component=lx(X,G,ee);if(c1(X)&&(ve.ctx.renderer=Se),cx(ve),ve.asyncDep){if(ee&&ee.registerDep(ve,z),!X.el){const ce=ve.subTree=ni(ms);D(null,ce,O,P)}return}z(ve,X,O,P,ee,re,pe)},R=(X,O,P)=>{const G=O.component=X.component;if(mw(X,O,P))if(G.asyncDep&&!G.asyncResolved){ne(G,O,P);return}else G.next=O,ow(G.update),G.update();else O.el=X.el,G.vnode=O},z=(X,O,P,G,ee,re,pe)=>{const ve=()=>{if(X.isMounted){let{next:ge,bu:Be,u:Ce,parent:Pe,vnode:We}=X,nt=ge,be;fa(X,!1),ge?(ge.el=We.el,ne(X,ge,pe)):ge=We,Be&&Xf(Be),(be=ge.props&&ge.props.onVnodeBeforeUpdate)&&Ss(be,Pe,ge,We),fa(X,!0);const Ne=Gf(X),me=X.subTree;X.subTree=Ne,$(me,Ne,h(me.el),oe(me),X,ee,re),ge.el=Ne.el,nt===null&&vw(X,Ne.el),Ce&&wr(Ce,ee),(be=ge.props&&ge.props.onVnodeUpdated)&&wr(()=>Ss(be,Pe,ge,We),ee)}else{let ge;const{el:Be,props:Ce}=O,{bm:Pe,m:We,parent:nt}=X,be=Lu(O);if(fa(X,!1),Pe&&Xf(Pe),!be&&(ge=Ce&&Ce.onVnodeBeforeMount)&&Ss(ge,nt,O),fa(X,!0),Be&&Xe){const Ne=()=>{X.subTree=Gf(X),Xe(Be,X.subTree,X,ee,null)};be?O.type.__asyncLoader().then(()=>!X.isUnmounted&&Ne()):Ne()}else{const Ne=X.subTree=Gf(X);$(null,Ne,P,G,X,ee,re),O.el=Ne.el}if(We&&wr(We,ee),!be&&(ge=Ce&&Ce.onVnodeMounted)){const Ne=O;wr(()=>Ss(ge,nt,Ne),ee)}(O.shapeFlag&256||nt&&Lu(nt.vnode)&&nt.vnode.shapeFlag&256)&&X.a&&wr(X.a,ee),X.isMounted=!0,O=P=G=null}},ce=X.effect=new Ad(ve,()=>Od(ae),X.scope),ae=X.update=()=>ce.run();ae.id=X.uid,fa(X,!0),ae()},ne=(X,O,P)=>{O.component=X;const G=X.vnode.props;X.vnode=O,X.next=null,Dw(X,O.props,G,P),Vw(X,O.children,P),Lo(),Zv(),Bo()},Y=(X,O,P,G,ee,re,pe,ve,ce=!1)=>{const ae=X&&X.children,ge=X?X.shapeFlag:0,Be=O.children,{patchFlag:Ce,shapeFlag:Pe}=O;if(Ce>0){if(Ce&128){g(ae,Be,P,G,ee,re,pe,ve,ce);return}else if(Ce&256){te(ae,Be,P,G,ee,re,pe,ve,ce);return}}Pe&8?(ge&16&&qe(ae,ee,re),Be!==ae&&p(P,Be)):ge&16?Pe&16?g(ae,Be,P,G,ee,re,pe,ve,ce):qe(ae,ee,re,!0):(ge&8&&p(P,""),Pe&16&&E(Be,P,G,ee,re,pe,ve,ce))},te=(X,O,P,G,ee,re,pe,ve,ce)=>{X=X||_o,O=O||_o;const ae=X.length,ge=O.length,Be=Math.min(ae,ge);let Ce;for(Ce=0;Ce<Be;Ce++){const Pe=O[Ce]=ce?Bi(O[Ce]):Os(O[Ce]);$(X[Ce],Pe,P,null,ee,re,pe,ve,ce)}ae>ge?qe(X,ee,re,!0,!1,Be):E(O,P,G,ee,re,pe,ve,ce,Be)},g=(X,O,P,G,ee,re,pe,ve,ce)=>{let ae=0;const ge=O.length;let Be=X.length-1,Ce=ge-1;for(;ae<=Be&&ae<=Ce;){const Pe=X[ae],We=O[ae]=ce?Bi(O[ae]):Os(O[ae]);if(Ea(Pe,We))$(Pe,We,P,null,ee,re,pe,ve,ce);else break;ae++}for(;ae<=Be&&ae<=Ce;){const Pe=X[Be],We=O[Ce]=ce?Bi(O[Ce]):Os(O[Ce]);if(Ea(Pe,We))$(Pe,We,P,null,ee,re,pe,ve,ce);else break;Be--,Ce--}if(ae>Be){if(ae<=Ce){const Pe=Ce+1,We=Pe<ge?O[Pe].el:G;for(;ae<=Ce;)$(null,O[ae]=ce?Bi(O[ae]):Os(O[ae]),P,We,ee,re,pe,ve,ce),ae++}}else if(ae>Ce)for(;ae<=Be;)le(X[ae],ee,re,!0),ae++;else{const Pe=ae,We=ae,nt=new Map;for(ae=We;ae<=Ce;ae++){const Q=O[ae]=ce?Bi(O[ae]):Os(O[ae]);Q.key!=null&&nt.set(Q.key,ae)}let be,Ne=0;const me=Ce-We+1;let Ze=!1,N=0;const j=new Array(me);for(ae=0;ae<me;ae++)j[ae]=0;for(ae=Pe;ae<=Be;ae++){const Q=X[ae];if(Ne>=me){le(Q,ee,re,!0);continue}let se;if(Q.key!=null)se=nt.get(Q.key);else for(be=We;be<=Ce;be++)if(j[be-We]===0&&Ea(Q,O[be])){se=be;break}se===void 0?le(Q,ee,re,!0):(j[se-We]=ae+1,se>=N?N=se:Ze=!0,$(Q,O[se],P,null,ee,re,pe,ve,ce),Ne++)}const Z=Ze?Xw(j):_o;for(be=Z.length-1,ae=me-1;ae>=0;ae--){const Q=We+ae,se=O[Q],W=Q+1<ge?O[Q+1].el:G;j[ae]===0?$(null,se,P,W,ee,re,pe,ve,ce):Ze&&(be<0||ae!==Z[be]?I(se,P,W,2):be--)}}},I=(X,O,P,G,ee=null)=>{const{el:re,type:pe,transition:ve,children:ce,shapeFlag:ae}=X;if(ae&6){I(X.component.subTree,O,P,G);return}if(ae&128){X.suspense.move(O,P,G);return}if(ae&64){pe.move(X,O,P,Se);return}if(pe===Is){s(re,O,P);for(let Be=0;Be<ce.length;Be++)I(ce[Be],O,P,G);s(X.anchor,O,P);return}if(pe===Qf){C(X,O,P);return}if(G!==2&&ae&1&&ve)if(G===0)ve.beforeEnter(re),s(re,O,P),wr(()=>ve.enter(re),ee);else{const{leave:Be,delayLeave:Ce,afterLeave:Pe}=ve,We=()=>s(re,O,P),nt=()=>{Be(re,()=>{We(),Pe&&Pe()})};Ce?Ce(re,We,nt):nt()}else s(re,O,P)},le=(X,O,P,G=!1,ee=!1)=>{const{type:re,props:pe,ref:ve,children:ce,dynamicChildren:ae,shapeFlag:ge,patchFlag:Be,dirs:Ce}=X;if(ve!=null&&P0(ve,null,P,X,!0),ge&256){O.ctx.deactivate(X);return}const Pe=ge&1&&Ce,We=!Lu(X);let nt;if(We&&(nt=pe&&pe.onVnodeBeforeUnmount)&&Ss(nt,O,X),ge&6)Ke(X.component,P,G);else{if(ge&128){X.suspense.unmount(P,G);return}Pe&&ua(X,null,O,"beforeUnmount"),ge&64?X.type.remove(X,O,P,ee,Se,G):ae&&(re!==Is||Be>0&&Be&64)?qe(ae,O,P,!1,!0):(re===Is&&Be&384||!ee&&ge&16)&&qe(ce,O,P),G&&he(X)}(We&&(nt=pe&&pe.onVnodeUnmounted)||Pe)&&wr(()=>{nt&&Ss(nt,O,X),Pe&&ua(X,null,O,"unmounted")},P)},he=X=>{const{type:O,el:P,anchor:G,transition:ee}=X;if(O===Is){He(P,G);return}if(O===Qf){F(X);return}const re=()=>{o(P),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(X.shapeFlag&1&&ee&&!ee.persisted){const{leave:pe,delayLeave:ve}=ee,ce=()=>pe(P,re);ve?ve(X.el,re,ce):ce()}else re()},He=(X,O)=>{let P;for(;X!==O;)P=w(X),o(X),X=P;o(O)},Ke=(X,O,P)=>{const{bum:G,scope:ee,update:re,subTree:pe,um:ve}=X;G&&Xf(G),ee.stop(),re&&(re.active=!1,le(pe,X,O,P)),ve&&wr(ve,O),wr(()=>{X.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&X.asyncDep&&!X.asyncResolved&&X.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},qe=(X,O,P,G=!1,ee=!1,re=0)=>{for(let pe=re;pe<X.length;pe++)le(X[pe],O,P,G,ee)},oe=X=>X.shapeFlag&6?oe(X.component.subTree):X.shapeFlag&128?X.suspense.next():w(X.anchor||X.el),ke=(X,O,P)=>{X==null?O._vnode&&le(O._vnode,null,null,!0):$(O._vnode||null,X,O,null,null,null,P),Zv(),mp(),O._vnode=X},Se={p:$,um:le,m:I,r:he,mt:k,mc:E,pc:Y,pbc:y,n:oe,o:e};let Ae,Xe;return t&&([Ae,Xe]=t(Se)),{render:ke,hydrate:Ae,createApp:Kw(ke,Ae)}}function fa({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Op(e,t,n=!1){const s=e.children,o=t.children;if(Ot(s)&&Ot(o))for(let a=0;a<s.length;a++){const c=s[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=Bi(o[a]),f.el=c.el),n||Op(c,f))}}function Xw(e){const t=e.slice(),n=[0];let s,o,a,c,f;const m=e.length;for(s=0;s<m;s++){const d=e[s];if(d!==0){if(o=n[n.length-1],e[o]<d){t[s]=o,n.push(s);continue}for(a=0,c=n.length-1;a<c;)f=a+c>>1,e[n[f]]<d?a=f+1:c=f;d<e[n[a]]&&(a>0&&(t[s]=n[a-1]),n[a]=s)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=t[c];return n}const Gw=e=>e.__isTeleport,Is=Symbol(void 0),Fd=Symbol(void 0),ms=Symbol(void 0),Qf=Symbol(void 0),Tl=[];let fs=null;function Cp(e=!1){Tl.push(fs=e?null:[])}function Zw(){Tl.pop(),fs=Tl[Tl.length-1]||null}let jl=1;function a2(e){jl+=e}function Lp(e){return e.dynamicChildren=jl>0?fs||_o:null,Zw(),jl>0&&fs&&fs.push(e),e}function Qw(e,t,n,s,o,a){return Lp(Np(e,t,n,s,o,a,!0))}function Jw(e,t,n,s,o){return Lp(ni(e,t,n,s,o,!0))}function ex(e){return e?e.__v_isVNode===!0:!1}function Ea(e,t){return e.type===t.type&&e.key===t.key}const f1="__vInternal",Bp=({key:e})=>e!=null?e:null,Bu=({ref:e,ref_key:t,ref_for:n})=>e!=null?Vn(e)||In(e)||Ft(e)?{i:Fs,r:e,k:t,f:!!n}:e:null;function Np(e,t=null,n=null,s=0,o=null,a=e===Is?0:1,c=!1,f=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Bp(t),ref:t&&Bu(t),scopeId:pp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return f?(Pd(m,n),a&128&&e.normalize(m)):n&&(m.shapeFlag|=Vn(n)?8:16),jl>0&&!c&&fs&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&fs.push(m),m}const ni=tx;function tx(e,t=null,n=null,s=0,o=null,a=!1){if((!e||e===Lw)&&(e=ms),ex(e)){const f=Ki(e,t,!0);return n&&Pd(f,n),jl>0&&!a&&fs&&(f.shapeFlag&6?fs[fs.indexOf(e)]=f:fs.push(f)),f.patchFlag|=-2,f}if(hx(e)&&(e=e.__vccOpts),t){t=nx(t);let{class:f,style:m}=t;f&&!Vn(f)&&(t.class=gd(f)),Bn(m)&&(ap(m)&&!Ot(m)&&(m=Jn({},m)),t.style=pd(m))}const c=Vn(e)?1:_w(e)?128:Gw(e)?64:Bn(e)?4:Ft(e)?2:0;return Np(e,t,n,s,o,c,a,!0)}function nx(e){return e?ap(e)||f1 in e?Jn({},e):e:null}function Ki(e,t,n=!1){const{props:s,ref:o,patchFlag:a,children:c}=e,f=t?ix(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Bp(f),ref:t&&t.ref?n&&o?Ot(o)?o.concat(Bu(t)):[o,Bu(t)]:Bu(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Is?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ki(e.ssContent),ssFallback:e.ssFallback&&Ki(e.ssFallback),el:e.el,anchor:e.anchor}}function rx(e=" ",t=0){return ni(Fd,null,e,t)}function sx(e="",t=!1){return t?(Cp(),Jw(ms,null,e)):ni(ms,null,e)}function Os(e){return e==null||typeof e=="boolean"?ni(ms):Ot(e)?ni(Is,null,e.slice()):typeof e=="object"?Bi(e):ni(Fd,null,String(e))}function Bi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ki(e)}function Pd(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Ot(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Pd(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(f1 in t)?t._ctx=Fs:o===3&&Fs&&(Fs.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ft(t)?(t={default:t,_ctx:Fs},n=32):(t=String(t),s&64?(n=16,t=[rx(t)]):n=8);e.children=t,e.shapeFlag|=n}function ix(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=gd([t.class,s.class]));else if(o==="style")t.style=pd([t.style,s.style]);else if(n1(o)){const a=t[o],c=s[o];c&&a!==c&&!(Ot(a)&&a.includes(c))&&(t[o]=a?[].concat(a,c):c)}else o!==""&&(t[o]=s[o])}return t}function Ss(e,t,n,s=null){Jr(e,t,7,[n,s])}const ax=Ip();let ox=0;function lx(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||ax,a={uid:ox++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Y_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mp(s,o),emitsOptions:_p(s,o),emit:null,emitted:null,propsDefaults:pn,inheritAttrs:s.inheritAttrs,ctx:pn,data:pn,props:pn,attrs:pn,slots:pn,refs:pn,setupState:pn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=uw.bind(null,a),e.ce&&e.ce(a),a}let qn=null;const Hd=()=>qn||Fs,Mo=e=>{qn=e,e.scope.on()},Ba=()=>{qn&&qn.scope.off(),qn=null};function Fp(e){return e.vnode.shapeFlag&4}let Ul=!1;function cx(e,t=!1){Ul=t;const{props:n,children:s}=e.vnode,o=Fp(e);Uw(e,n,o,t),qw(e,s);const a=o?ux(e,t):void 0;return Ul=!1,a}function ux(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Eo(new Proxy(e.ctx,Bw));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?dx(e):null;Mo(e),Lo();const a=ji(s,e,0,[e.props,o]);if(Bo(),Ba(),V_(a)){if(a.then(Ba,Ba),t)return a.then(c=>{o2(e,c,t)}).catch(c=>{o1(c,e,0)});e.asyncDep=a}else o2(e,a,t)}else Pp(e,t)}function o2(e,t,n){Ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Bn(t)&&(e.setupState=cp(t)),Pp(e,n)}let l2;function Pp(e,t,n){const s=e.type;if(!e.render){if(!t&&l2&&!s.render){const o=s.template||Bd(e).template;if(o){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:f,compilerOptions:m}=s,d=Jn(Jn({isCustomElement:a,delimiters:f},c),m);s.render=l2(o,d)}}e.render=s.render||hs}Mo(e),Lo(),Nw(e),Bo(),Ba()}function fx(e){return new Proxy(e.attrs,{get(t,n){return Nr(e,"get","$attrs"),t[n]}})}function dx(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=fx(e))},slots:e.slots,emit:e.emit,expose:t}}function jd(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(cp(Eo(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ml)return Ml[n](e)},has(t,n){return n in t||n in Ml}}))}function hx(e){return Ft(e)&&"__vccOpts"in e}const Ma=(e,t)=>sw(e,t,Ul),mx=Symbol(""),vx=()=>El(mx),_x="3.2.43",px="http://www.w3.org/2000/svg",Ta=typeof document<"u"?document:null,c2=Ta&&Ta.createElement("template"),gx={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?Ta.createElementNS(px,e):Ta.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Ta.createTextNode(e),createComment:e=>Ta.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ta.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,a){const c=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{c2.innerHTML=s?`<svg>${e}</svg>`:e;const f=c2.content;if(s){const m=f.firstChild;for(;m.firstChild;)f.appendChild(m.firstChild);f.removeChild(m)}t.insertBefore(f,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function bx(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function yx(e,t,n){const s=e.style,o=Vn(n);if(n&&!o){for(const a in n)H0(s,a,n[a]);if(t&&!Vn(t))for(const a in t)n[a]==null&&H0(s,a,"")}else{const a=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=a)}}const u2=/\s*!important$/;function H0(e,t,n){if(Ot(n))n.forEach(s=>H0(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=wx(e,t);u2.test(n)?e.setProperty(Co(s),n.replace(u2,""),"important"):e[s]=n}}const f2=["Webkit","Moz","ms"],Jf={};function wx(e,t){const n=Jf[t];if(n)return n;let s=So(t);if(s!=="filter"&&s in e)return Jf[t]=s;s=z_(s);for(let o=0;o<f2.length;o++){const a=f2[o]+s;if(a in e)return Jf[t]=a}return t}const d2="http://www.w3.org/1999/xlink";function xx(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(d2,t.slice(6,t.length)):e.setAttributeNS(d2,t,n);else{const a=h7(t);n==null||a&&!q_(n)?e.removeAttribute(t):e.setAttribute(t,a?"":n)}}function Sx(e,t,n,s,o,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,o,a),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const m=n==null?"":n;(e.value!==m||e.tagName==="OPTION")&&(e.value=m),n==null&&e.removeAttribute(t);return}let f=!1;if(n===""||n==null){const m=typeof e[t];m==="boolean"?n=q_(n):n==null&&m==="string"?(n="",f=!0):m==="number"&&(n=0,f=!0)}try{e[t]=n}catch{}f&&e.removeAttribute(t)}function Ax(e,t,n,s){e.addEventListener(t,n,s)}function Ex(e,t,n,s){e.removeEventListener(t,n,s)}function Mx(e,t,n,s,o=null){const a=e._vei||(e._vei={}),c=a[t];if(s&&c)c.value=s;else{const[f,m]=Tx(t);if(s){const d=a[t]=Ix(s,o);Ax(e,f,d,m)}else c&&(Ex(e,f,c,m),a[t]=void 0)}}const h2=/(?:Once|Passive|Capture)$/;function Tx(e){let t;if(h2.test(e)){t={};let s;for(;s=e.match(h2);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Co(e.slice(2)),t]}let e0=0;const Rx=Promise.resolve(),kx=()=>e0||(Rx.then(()=>e0=0),e0=Date.now());function Ix(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Jr(Ox(s,n.value),t,5,[s])};return n.value=e,n.attached=kx(),n}function Ox(e,t){if(Ot(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const m2=/^on[a-z]/,Cx=(e,t,n,s,o=!1,a,c,f,m)=>{t==="class"?bx(e,s,o):t==="style"?yx(e,n,s):n1(t)?bd(t)||Mx(e,t,n,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Lx(e,t,s,o))?Sx(e,t,s,a,c,f,m):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),xx(e,t,s,o))};function Lx(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&m2.test(t)&&Ft(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||m2.test(t)&&Vn(n)?!1:t in e}const Bx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};xw.props;const Nx=Jn({patchProp:Cx},gx);let v2;function Fx(){return v2||(v2=Yw(Nx))}const Px=(...e)=>{const t=Fx().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=Hx(s);if(!o)return;const a=t._component;!Ft(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t};function Hx(e){return Vn(e)?document.querySelector(e):e}var jx=!1;/*!
  * pinia v2.0.23
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let Hp;const d1=e=>Hp=e,jp=Symbol();function j0(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Rl;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Rl||(Rl={}));function Ux(){const e=W_(!0),t=e.run(()=>ei({}));let n=[],s=[];const o=Eo({install(a){d1(o),o._a=a,a.provide(jp,o),a.config.globalProperties.$pinia=o,s.forEach(c=>n.push(c)),s=[]},use(a){return!this._a&&!jx?s.push(a):n.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Up=()=>{};function _2(e,t,n,s=Up){e.push(t);const o=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),s())};return!n&&Hd()&&Ld(o),o}function ao(e,...t){e.slice().forEach(n=>{n(...t)})}function U0(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,s)=>e.set(s,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],o=e[n];j0(o)&&j0(s)&&e.hasOwnProperty(n)&&!In(s)&&!Hi(s)?e[n]=U0(o,s):e[n]=s}return e}const Dx=Symbol();function $x(e){return!j0(e)||!e.hasOwnProperty(Dx)}const{assign:Ni}=Object;function qx(e){return!!(In(e)&&e.effect)}function Vx(e,t,n,s){const{state:o,actions:a,getters:c}=t,f=n.state.value[e];let m;function d(){f||(n.state.value[e]=o?o():{});const p=ew(n.state.value[e]);return Ni(p,a,Object.keys(c||{}).reduce((h,w)=>(h[w]=Eo(Ma(()=>{d1(n);const M=n._s.get(e);return c[w].call(M,M)})),h),{}))}return m=Dp(e,d,t,n,s,!0),m.$reset=function(){const h=o?o():{};this.$patch(w=>{Ni(w,h)})},m}function Dp(e,t,n={},s,o,a){let c;const f=Ni({actions:{}},n),m={deep:!0};let d,p,h=Eo([]),w=Eo([]),M;const u=s.state.value[e];!a&&!u&&(s.state.value[e]={}),ei({});let $;function U(v){let E;d=p=!1,typeof v=="function"?(v(s.state.value[e]),E={type:Rl.patchFunction,storeId:e,events:M}):(U0(s.state.value[e],v),E={type:Rl.patchObject,payload:v,storeId:e,events:M});const T=$=Symbol();dp().then(()=>{$===T&&(d=!0)}),p=!0,ao(h,E,s.state.value[e])}const D=Up;function b(){c.stop(),h=[],w=[],s._s.delete(e)}function C(v,E){return function(){d1(s);const T=Array.from(arguments),y=[],A=[];function S(R){y.push(R)}function x(R){A.push(R)}ao(w,{args:T,name:v,store:L,after:S,onError:x});let k;try{k=E.apply(this&&this.$id===e?this:L,T)}catch(R){throw ao(A,R),R}return k instanceof Promise?k.then(R=>(ao(y,R),R)).catch(R=>(ao(A,R),Promise.reject(R))):(ao(y,k),k)}}const F={_p:s,$id:e,$onAction:_2.bind(null,w),$patch:U,$reset:D,$subscribe(v,E={}){const T=_2(h,v,E.detached,()=>y()),y=c.run(()=>Cu(()=>s.state.value[e],A=>{(E.flush==="sync"?p:d)&&v({storeId:e,type:Rl.direct,events:M},A)},Ni({},m,E)));return T},$dispose:b},L=a1(F);s._s.set(e,L);const V=s._e.run(()=>(c=W_(),c.run(()=>t())));for(const v in V){const E=V[v];if(In(E)&&!qx(E)||Hi(E))a||(u&&$x(E)&&(In(E)?E.value=u[v]:U0(E,u[v])),s.state.value[e][v]=E);else if(typeof E=="function"){const T=C(v,E);V[v]=T,f.actions[v]=E}}return Ni(L,V),Ni(zt(L),V),Object.defineProperty(L,"$state",{get:()=>s.state.value[e],set:v=>{U(E=>{Ni(E,v)})}}),s._p.forEach(v=>{Ni(L,c.run(()=>v({store:L,app:s._a,pinia:s,options:f})))}),u&&a&&n.hydrate&&n.hydrate(L.$state,u),d=!0,p=!0,L}function zx(e,t,n){let s,o;const a=typeof t=="function";typeof e=="string"?(s=e,o=a?n:t):(o=e,s=e.id);function c(f,m){const d=Hd();return f=f||d&&El(jp),f&&d1(f),f=Hp,f._s.has(s)||(a?Dp(s,t,o,f):Vx(s,o,f)),f._s.get(s)}return c.$id=s,c}function Kx(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const Yx=()=>{},Wx=Object.assign,Xx=Object.prototype.hasOwnProperty,h1=(e,t)=>Xx.call(e,t),Ui=Array.isArray,Nu=e=>$p(e)==="[object Map]",Gx=e=>typeof e=="function",Zx=e=>typeof e=="string",Ud=e=>typeof e=="symbol",m1=e=>e!==null&&typeof e=="object",Qx=Object.prototype.toString,$p=e=>Qx.call(e),Jx=e=>$p(e).slice(8,-1),Dd=e=>Zx(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qp=(e,t)=>!Object.is(e,t),eS=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};let Rs;class tS{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Rs&&(this.parent=Rs,this.index=(Rs.scopes||(Rs.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Rs;try{return Rs=this,t()}finally{Rs=n}}}on(){Rs=this}off(){Rs=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function nS(e,t=Rs){t&&t.active&&t.effects.push(e)}const $d=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Vp=e=>(e.w&Yi)>0,zp=e=>(e.n&Yi)>0,rS=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Yi},sS=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];Vp(o)&&!zp(o)?o.delete(e):t[n++]=o,o.w&=~Yi,o.n&=~Yi}t.length=n}},D0=new WeakMap;let gl=0,Yi=1;const $0=30;let us;const Na=Symbol(""),q0=Symbol("");class qd{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,nS(this,s)}run(){if(!this.active)return this.fn();let t=us,n=Di;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=us,us=this,Di=!0,Yi=1<<++gl,gl<=$0?rS(this):p2(this),this.fn()}finally{gl<=$0&&sS(this),Yi=1<<--gl,us=this.parent,Di=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){us===this?this.deferStop=!0:this.active&&(p2(this),this.onStop&&this.onStop(),this.active=!1)}}function p2(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Di=!0;const Kp=[];function No(){Kp.push(Di),Di=!1}function Fo(){const e=Kp.pop();Di=e===void 0?!0:e}function Fr(e,t,n){if(Di&&us){let s=D0.get(e);s||D0.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=$d()),Yp(o)}}function Yp(e,t){let n=!1;gl<=$0?zp(e)||(e.n|=Yi,n=!Vp(e)):n=!e.has(us),n&&(e.add(us),us.deps.push(e))}function ai(e,t,n,s,o,a){const c=D0.get(e);if(!c)return;let f=[];if(t==="clear")f=[...c.values()];else if(n==="length"&&Ui(e))c.forEach((m,d)=>{(d==="length"||d>=s)&&f.push(m)});else switch(n!==void 0&&f.push(c.get(n)),t){case"add":Ui(e)?Dd(n)&&f.push(c.get("length")):(f.push(c.get(Na)),Nu(e)&&f.push(c.get(q0)));break;case"delete":Ui(e)||(f.push(c.get(Na)),Nu(e)&&f.push(c.get(q0)));break;case"set":Nu(e)&&f.push(c.get(Na));break}if(f.length===1)f[0]&&V0(f[0]);else{const m=[];for(const d of f)d&&m.push(...d);V0($d(m))}}function V0(e,t){const n=Ui(e)?e:[...e];for(const s of n)s.computed&&g2(s);for(const s of n)s.computed||g2(s)}function g2(e,t){(e!==us||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const iS=Kx("__proto__,__v_isRef,__isVue"),Wp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ud)),aS=Vd(),oS=Vd(!1,!0),lS=Vd(!0),b2=cS();function cS(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=Zt(this);for(let a=0,c=this.length;a<c;a++)Fr(s,"get",a+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(Zt)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){No();const s=Zt(this)[t].apply(this,n);return Fo(),s}}),e}function Vd(e=!1,t=!1){return function(s,o,a){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&a===(e?t?ES:Jp:t?Qp:Zp).get(s))return s;const c=Ui(s);if(!e&&c&&h1(b2,o))return Reflect.get(b2,o,a);const f=Reflect.get(s,o,a);return(Ud(o)?Wp.has(o):iS(o))||(e||Fr(s,"get",o),t)?f:fr(f)?c&&Dd(o)?f:f.value:m1(f)?e?eg(f):Yd(f):f}}const uS=Xp(),fS=Xp(!0);function Xp(e=!1){return function(n,s,o,a){let c=n[s];if(Dl(c)&&fr(c)&&!fr(o))return!1;if(!e&&!Dl(o)&&(z0(o)||(o=Zt(o),c=Zt(c)),!Ui(n)&&fr(c)&&!fr(o)))return c.value=o,!0;const f=Ui(n)&&Dd(s)?Number(s)<n.length:h1(n,s),m=Reflect.set(n,s,o,a);return n===Zt(a)&&(f?qp(o,c)&&ai(n,"set",s,o):ai(n,"add",s,o)),m}}function dS(e,t){const n=h1(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&ai(e,"delete",t,void 0),s}function hS(e,t){const n=Reflect.has(e,t);return(!Ud(t)||!Wp.has(t))&&Fr(e,"has",t),n}function mS(e){return Fr(e,"iterate",Ui(e)?"length":Na),Reflect.ownKeys(e)}const Gp={get:aS,set:uS,deleteProperty:dS,has:hS,ownKeys:mS},vS={get:lS,set(e,t){return!0},deleteProperty(e,t){return!0}},_S=Wx({},Gp,{get:oS,set:fS}),zd=e=>e,v1=e=>Reflect.getPrototypeOf(e);function hu(e,t,n=!1,s=!1){e=e.__v_raw;const o=Zt(e),a=Zt(t);n||(t!==a&&Fr(o,"get",t),Fr(o,"get",a));const{has:c}=v1(o),f=s?zd:n?Gd:Xd;if(c.call(o,t))return f(e.get(t));if(c.call(o,a))return f(e.get(a));e!==o&&e.get(t)}function mu(e,t=!1){const n=this.__v_raw,s=Zt(n),o=Zt(e);return t||(e!==o&&Fr(s,"has",e),Fr(s,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function vu(e,t=!1){return e=e.__v_raw,!t&&Fr(Zt(e),"iterate",Na),Reflect.get(e,"size",e)}function y2(e){e=Zt(e);const t=Zt(this);return v1(t).has.call(t,e)||(t.add(e),ai(t,"add",e,e)),this}function w2(e,t){t=Zt(t);const n=Zt(this),{has:s,get:o}=v1(n);let a=s.call(n,e);a||(e=Zt(e),a=s.call(n,e));const c=o.call(n,e);return n.set(e,t),a?qp(t,c)&&ai(n,"set",e,t):ai(n,"add",e,t),this}function x2(e){const t=Zt(this),{has:n,get:s}=v1(t);let o=n.call(t,e);o||(e=Zt(e),o=n.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return o&&ai(t,"delete",e,void 0),a}function S2(){const e=Zt(this),t=e.size!==0,n=e.clear();return t&&ai(e,"clear",void 0,void 0),n}function _u(e,t){return function(s,o){const a=this,c=a.__v_raw,f=Zt(c),m=t?zd:e?Gd:Xd;return!e&&Fr(f,"iterate",Na),c.forEach((d,p)=>s.call(o,m(d),m(p),a))}}function pu(e,t,n){return function(...s){const o=this.__v_raw,a=Zt(o),c=Nu(a),f=e==="entries"||e===Symbol.iterator&&c,m=e==="keys"&&c,d=o[e](...s),p=n?zd:t?Gd:Xd;return!t&&Fr(a,"iterate",m?q0:Na),{next(){const{value:h,done:w}=d.next();return w?{value:h,done:w}:{value:f?[p(h[0]),p(h[1])]:p(h),done:w}},[Symbol.iterator](){return this}}}}function Ei(e){return function(...t){return e==="delete"?!1:this}}function pS(){const e={get(a){return hu(this,a)},get size(){return vu(this)},has:mu,add:y2,set:w2,delete:x2,clear:S2,forEach:_u(!1,!1)},t={get(a){return hu(this,a,!1,!0)},get size(){return vu(this)},has:mu,add:y2,set:w2,delete:x2,clear:S2,forEach:_u(!1,!0)},n={get(a){return hu(this,a,!0)},get size(){return vu(this,!0)},has(a){return mu.call(this,a,!0)},add:Ei("add"),set:Ei("set"),delete:Ei("delete"),clear:Ei("clear"),forEach:_u(!0,!1)},s={get(a){return hu(this,a,!0,!0)},get size(){return vu(this,!0)},has(a){return mu.call(this,a,!0)},add:Ei("add"),set:Ei("set"),delete:Ei("delete"),clear:Ei("clear"),forEach:_u(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=pu(a,!1,!1),n[a]=pu(a,!0,!1),t[a]=pu(a,!1,!0),s[a]=pu(a,!0,!0)}),[e,n,t,s]}const[gS,bS,yS,wS]=pS();function Kd(e,t){const n=t?e?wS:yS:e?bS:gS;return(s,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(h1(n,o)&&o in s?n:s,o,a)}const xS={get:Kd(!1,!1)},SS={get:Kd(!1,!0)},AS={get:Kd(!0,!1)},Zp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,ES=new WeakMap;function MS(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function TS(e){return e.__v_skip||!Object.isExtensible(e)?0:MS(Jx(e))}function Yd(e){return Dl(e)?e:Wd(e,!1,Gp,xS,Zp)}function RS(e){return Wd(e,!1,_S,SS,Qp)}function eg(e){return Wd(e,!0,vS,AS,Jp)}function Wd(e,t,n,s,o){if(!m1(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const c=TS(e);if(c===0)return e;const f=new Proxy(e,c===2?s:n);return o.set(e,f),f}function go(e){return Dl(e)?go(e.__v_raw):!!(e&&e.__v_isReactive)}function Dl(e){return!!(e&&e.__v_isReadonly)}function z0(e){return!!(e&&e.__v_isShallow)}function tg(e){return go(e)||Dl(e)}function Zt(e){const t=e&&e.__v_raw;return t?Zt(t):e}function ng(e){return eS(e,"__v_skip",!0),e}const Xd=e=>m1(e)?Yd(e):e,Gd=e=>m1(e)?eg(e):e;function kS(e){Di&&us&&(e=Zt(e),Yp(e.dep||(e.dep=$d())))}function IS(e,t){e=Zt(e),e.dep&&V0(e.dep)}function fr(e){return!!(e&&e.__v_isRef===!0)}function OS(e){return fr(e)?e.value:e}const CS={get:(e,t,n)=>OS(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return fr(o)&&!fr(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function rg(e){return go(e)?e:new Proxy(e,CS)}class LS{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new qd(t,()=>{this._dirty||(this._dirty=!0,IS(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=Zt(this);return kS(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function BS(e,t,n=!1){let s,o;const a=Gx(e);return a?(s=e,o=Yx):(s=e.get,o=e.set),new LS(s,o,a||!o,n)}function NS(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}function Wt(e){if($t(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=dr(s)?HS(s):Wt(s);if(o)for(const a in o)t[a]=o[a]}return t}else{if(dr(e))return e;if(hr(e))return e}}const FS=/;(?![^(]*\))/g,PS=/:(.+)/;function HS(e){const t={};return e.split(FS).forEach(n=>{if(n){const s=n.split(PS);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function It(e){let t="";if(dr(e))t=e;else if($t(e))for(let n=0;n<e.length;n++){const s=It(e[n]);s&&(t+=s+" ")}else if(hr(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function sn(e){if(!e)return null;let{class:t,style:n}=e;return t&&!dr(t)&&(e.class=It(t)),n&&(e.style=Wt(n)),e}const xt=e=>dr(e)?e:e==null?"":$t(e)||hr(e)&&(e.toString===cg||!Bt(e.toString))?JSON.stringify(e,sg,2):String(e),sg=(e,t)=>t&&t.__v_isRef?sg(e,t.value):ag(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:og(t)?{[`Set(${t.size})`]:[...t.values()]}:hr(t)&&!$t(t)&&!ug(t)?String(t):t,dn={},bo=[],ri=()=>{},jS=()=>!1,US=/^on[^a-z]/,Zd=e=>US.test(e),ig=e=>e.startsWith("onUpdate:"),Pr=Object.assign,Qd=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},DS=Object.prototype.hasOwnProperty,Gt=(e,t)=>DS.call(e,t),$t=Array.isArray,ag=e=>Jd(e)==="[object Map]",og=e=>Jd(e)==="[object Set]",Bt=e=>typeof e=="function",dr=e=>typeof e=="string",hr=e=>e!==null&&typeof e=="object",lg=e=>hr(e)&&Bt(e.then)&&Bt(e.catch),cg=Object.prototype.toString,Jd=e=>cg.call(e),ug=e=>Jd(e)==="[object Object]",Fu=NS(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_1=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},$S=/-(\w)/g,js=_1(e=>e.replace($S,(t,n)=>n?n.toUpperCase():"")),qS=/\B([A-Z])/g,p1=_1(e=>e.replace(qS,"-$1").toLowerCase()),eh=_1(e=>e.charAt(0).toUpperCase()+e.slice(1)),t0=_1(e=>e?`on${eh(e)}`:""),A2=(e,t)=>!Object.is(e,t),n0=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},K0=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},VS=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let E2;const zS=()=>E2||(E2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $i(e,t,n,s){let o;try{o=s?e(...s):e()}catch(a){g1(a,t,n)}return o}function es(e,t,n,s){if(Bt(e)){const a=$i(e,t,n,s);return a&&lg(a)&&a.catch(c=>{g1(c,t,n)}),a}const o=[];for(let a=0;a<e.length;a++)o.push(es(e[a],t,n,s));return o}function g1(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,f=n;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,f)===!1)return}a=a.parent}const m=t.appContext.config.errorHandler;if(m){$i(m,null,10,[e,c,f]);return}}KS(e,n,o,s)}function KS(e,t,n,s=!0){console.error(e)}let Ku=!1,Y0=!1;const Br=[];let ti=0;const kl=[];let bl=null,fo=0;const Il=[];let Ci=null,ho=0;const fg=Promise.resolve();let th=null,W0=null;function dg(e){const t=th||fg;return e?t.then(this?e.bind(this):e):t}function YS(e){let t=ti+1,n=Br.length;for(;t<n;){const s=t+n>>>1;$l(Br[s])<e?t=s+1:n=s}return t}function hg(e){(!Br.length||!Br.includes(e,Ku&&e.allowRecurse?ti+1:ti))&&e!==W0&&(e.id==null?Br.push(e):Br.splice(YS(e.id),0,e),mg())}function mg(){!Ku&&!Y0&&(Y0=!0,th=fg.then(pg))}function WS(e){const t=Br.indexOf(e);t>ti&&Br.splice(t,1)}function vg(e,t,n,s){$t(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),mg()}function XS(e){vg(e,bl,kl,fo)}function GS(e){vg(e,Ci,Il,ho)}function b1(e,t=null){if(kl.length){for(W0=t,bl=[...new Set(kl)],kl.length=0,fo=0;fo<bl.length;fo++)bl[fo]();bl=null,fo=0,W0=null,b1(e,t)}}function _g(e){if(b1(),Il.length){const t=[...new Set(Il)];if(Il.length=0,Ci){Ci.push(...t);return}for(Ci=t,Ci.sort((n,s)=>$l(n)-$l(s)),ho=0;ho<Ci.length;ho++)Ci[ho]();Ci=null,ho=0}}const $l=e=>e.id==null?1/0:e.id;function pg(e){Y0=!1,Ku=!0,b1(e),Br.sort((t,n)=>$l(t)-$l(n));try{for(ti=0;ti<Br.length;ti++){const t=Br[ti];t&&t.active!==!1&&$i(t,null,14)}}finally{ti=0,Br.length=0,_g(),Ku=!1,th=null,(Br.length||kl.length||Il.length)&&pg(e)}}function ZS(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||dn;let o=n;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const p=`${c==="modelValue"?"model":c}Modifiers`,{number:h,trim:w}=s[p]||dn;w&&(o=n.map(M=>M.trim())),h&&(o=n.map(VS))}let f,m=s[f=t0(t)]||s[f=t0(js(t))];!m&&a&&(m=s[f=t0(p1(t))]),m&&es(m,e,6,o);const d=s[f+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,es(d,e,6,o)}}function gg(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const a=e.emits;let c={},f=!1;if(!Bt(e)){const m=d=>{const p=gg(d,t,!0);p&&(f=!0,Pr(c,p))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!a&&!f?(s.set(e,null),null):($t(a)?a.forEach(m=>c[m]=null):Pr(c,a),s.set(e,c),c)}function y1(e,t){return!e||!Zd(t)?!1:(t=t.slice(2).replace(/Once$/,""),Gt(e,t[0].toLowerCase()+t.slice(1))||Gt(e,p1(t))||Gt(e,t))}let Qn=null,bg=null;function Yu(e){const t=Qn;return Qn=e,bg=e&&e.type.__scopeId||null,t}function mt(e,t=Qn,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&F2(-1);const a=Yu(t),c=e(...o);return Yu(a),s._d&&F2(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function r0(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:a,propsOptions:[c],slots:f,attrs:m,emit:d,render:p,renderCache:h,data:w,setupState:M,ctx:u,inheritAttrs:$}=e;let U,D;const b=Yu(e);try{if(n.shapeFlag&4){const F=o||s;U=Cs(p.call(F,F,h,a,M,w,u)),D=m}else{const F=t;U=Cs(F.length>1?F(a,{attrs:m,slots:f,emit:d}):F(a,null)),D=t.props?m:QS(m)}}catch(F){Cl.length=0,g1(F,e,1),U=rt(ts)}let C=U;if(D&&$!==!1){const F=Object.keys(D),{shapeFlag:L}=C;F.length&&L&7&&(c&&F.some(ig)&&(D=JS(D,c)),C=Wi(C,D))}return n.dirs&&(C=Wi(C),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(C.transition=n.transition),U=C,Yu(b),U}const QS=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zd(n))&&((t||(t={}))[n]=e[n]);return t},JS=(e,t)=>{const n={};for(const s in e)(!ig(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function eA(e,t,n){const{props:s,children:o,component:a}=e,{props:c,children:f,patchFlag:m}=t,d=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return s?M2(s,c,d):!!c;if(m&8){const p=t.dynamicProps;for(let h=0;h<p.length;h++){const w=p[h];if(c[w]!==s[w]&&!y1(d,w))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:s===c?!1:s?c?M2(s,c,d):!0:!!c;return!1}function M2(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const a=s[o];if(t[a]!==e[a]&&!y1(n,a))return!0}return!1}function tA({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const nA=e=>e.__isSuspense;function rA(e,t){t&&t.pendingBranch?$t(e)?t.effects.push(...e):t.effects.push(e):GS(e)}function sA(e,t){if(jn){let n=jn.provides;const s=jn.parent&&jn.parent.provides;s===n&&(n=jn.provides=Object.create(s)),n[e]=t}}function s0(e,t,n=!1){const s=jn||Qn;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Bt(t)?t.call(s.proxy):t}}const T2={};function i0(e,t,n){return yg(e,t,n)}function yg(e,t,{immediate:n,deep:s,flush:o,onTrack:a,onTrigger:c}=dn){const f=jn;let m,d=!1,p=!1;if(fr(e)?(m=()=>e.value,d=z0(e)):go(e)?(m=()=>e,s=!0):$t(e)?(p=!0,d=e.some(D=>go(D)||z0(D)),m=()=>e.map(D=>{if(fr(D))return D.value;if(go(D))return Oa(D);if(Bt(D))return $i(D,f,2)})):Bt(e)?t?m=()=>$i(e,f,2):m=()=>{if(!(f&&f.isUnmounted))return h&&h(),es(e,f,3,[w])}:m=ri,t&&s){const D=m;m=()=>Oa(D())}let h,w=D=>{h=U.onStop=()=>{$i(D,f,4)}};if(Kl)return w=ri,t?n&&es(t,f,3,[m(),p?[]:void 0,w]):m(),ri;let M=p?[]:T2;const u=()=>{if(!!U.active)if(t){const D=U.run();(s||d||(p?D.some((b,C)=>A2(b,M[C])):A2(D,M)))&&(h&&h(),es(t,f,3,[D,M===T2?void 0:M,w]),M=D)}else U.run()};u.allowRecurse=!!t;let $;o==="sync"?$=u:o==="post"?$=()=>xr(u,f&&f.suspense):$=()=>XS(u);const U=new qd(m,$);return t?n?u():M=U.run():o==="post"?xr(U.run.bind(U),f&&f.suspense):U.run(),()=>{U.stop(),f&&f.scope&&Qd(f.scope.effects,U)}}function iA(e,t,n){const s=this.proxy,o=dr(e)?e.includes(".")?wg(s,e):()=>s[e]:e.bind(s,s);let a;Bt(t)?a=t:(a=t.handler,n=t);const c=jn;To(this);const f=yg(o,a.bind(s),n);return c?To(c):Fa(),f}function wg(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function Oa(e,t){if(!hr(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),fr(e))Oa(e.value,t);else if($t(e))for(let n=0;n<e.length;n++)Oa(e[n],t);else if(og(e)||ag(e))e.forEach(n=>{Oa(n,t)});else if(ug(e))for(const n in e)Oa(e[n],t);return e}function xg(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mg(()=>{e.isMounted=!0}),Rg(()=>{e.isUnmounting=!0}),e}const Wr=[Function,Array],aA={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Wr,onEnter:Wr,onAfterEnter:Wr,onEnterCancelled:Wr,onBeforeLeave:Wr,onLeave:Wr,onAfterLeave:Wr,onLeaveCancelled:Wr,onBeforeAppear:Wr,onAppear:Wr,onAfterAppear:Wr,onAppearCancelled:Wr},setup(e,{slots:t}){const n=qg(),s=xg();let o;return()=>{const a=t.default&&nh(t.default(),!0);if(!a||!a.length)return;let c=a[0];if(a.length>1){for(const $ of a)if($.type!==ts){c=$;break}}const f=Zt(e),{mode:m}=f;if(s.isLeaving)return a0(c);const d=R2(c);if(!d)return a0(c);const p=ql(d,f,s,n);Vl(d,p);const h=n.subTree,w=h&&R2(h);let M=!1;const{getTransitionKey:u}=d.type;if(u){const $=u();o===void 0?o=$:$!==o&&(o=$,M=!0)}if(w&&w.type!==ts&&(!Ra(d,w)||M)){const $=ql(w,f,s,n);if(Vl(w,$),m==="out-in")return s.isLeaving=!0,$.afterLeave=()=>{s.isLeaving=!1,n.update()},a0(c);m==="in-out"&&d.type!==ts&&($.delayLeave=(U,D,b)=>{const C=Ag(s,w);C[String(w.key)]=w,U._leaveCb=()=>{D(),U._leaveCb=void 0,delete p.delayedLeave},p.delayedLeave=b})}return c}}},Sg=aA;function Ag(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ql(e,t,n,s){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:f,onEnter:m,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:h,onLeave:w,onAfterLeave:M,onLeaveCancelled:u,onBeforeAppear:$,onAppear:U,onAfterAppear:D,onAppearCancelled:b}=t,C=String(e.key),F=Ag(n,e),L=(E,T)=>{E&&es(E,s,9,T)},V=(E,T)=>{const y=T[1];L(E,T),$t(E)?E.every(A=>A.length<=1)&&y():E.length<=1&&y()},v={mode:a,persisted:c,beforeEnter(E){let T=f;if(!n.isMounted)if(o)T=$||f;else return;E._leaveCb&&E._leaveCb(!0);const y=F[C];y&&Ra(e,y)&&y.el._leaveCb&&y.el._leaveCb(),L(T,[E])},enter(E){let T=m,y=d,A=p;if(!n.isMounted)if(o)T=U||m,y=D||d,A=b||p;else return;let S=!1;const x=E._enterCb=k=>{S||(S=!0,k?L(A,[E]):L(y,[E]),v.delayedLeave&&v.delayedLeave(),E._enterCb=void 0)};T?V(T,[E,x]):x()},leave(E,T){const y=String(e.key);if(E._enterCb&&E._enterCb(!0),n.isUnmounting)return T();L(h,[E]);let A=!1;const S=E._leaveCb=x=>{A||(A=!0,T(),x?L(u,[E]):L(M,[E]),E._leaveCb=void 0,F[y]===e&&delete F[y])};F[y]=e,w?V(w,[E,S]):S()},clone(E){return ql(E,t,n,s)}};return v}function a0(e){if(w1(e))return e=Wi(e),e.children=null,e}function R2(e){return w1(e)?e.children?e.children[0]:void 0:e}function Vl(e,t){e.shapeFlag&6&&e.component?Vl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function nh(e,t=!1,n){let s=[],o=0;for(let a=0;a<e.length;a++){let c=e[a];const f=n==null?c.key:String(n)+String(c.key!=null?c.key:a);c.type===Vt?(c.patchFlag&128&&o++,s=s.concat(nh(c.children,t,f))):(t||c.type!==ts)&&s.push(f!=null?Wi(c,{key:f}):c)}if(o>1)for(let a=0;a<s.length;a++)s[a].patchFlag=-2;return s}function oA(e){return Bt(e)?{setup:e,name:e.name}:e}const Ol=e=>!!e.type.__asyncLoader,w1=e=>e.type.__isKeepAlive;function lA(e,t){Eg(e,"a",t)}function cA(e,t){Eg(e,"da",t)}function Eg(e,t,n=jn){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(x1(t,s,n),n){let o=n.parent;for(;o&&o.parent;)w1(o.parent.vnode)&&uA(s,t,n,o),o=o.parent}}function uA(e,t,n,s){const o=x1(t,e,s,!0);kg(()=>{Qd(s[t],o)},n)}function x1(e,t,n=jn,s=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...c)=>{if(n.isUnmounted)return;No(),To(n);const f=es(t,n,e,c);return Fa(),Fo(),f});return s?o.unshift(a):o.push(a),a}}const ui=e=>(t,n=jn)=>(!Kl||e==="sp")&&x1(e,t,n),fA=ui("bm"),Mg=ui("m"),dA=ui("bu"),Tg=ui("u"),Rg=ui("bum"),kg=ui("um"),hA=ui("sp"),mA=ui("rtg"),vA=ui("rtc");function _A(e,t=jn){x1("ec",e,t)}function oi(e,t){const n=Qn;if(n===null)return e;const s=E1(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[c,f,m,d=dn]=t[a];Bt(c)&&(c={mounted:c,updated:c}),c.deep&&Oa(f),o.push({dir:c,instance:s,value:f,oldValue:void 0,arg:m,modifiers:d})}return e}function da(e,t,n,s){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const f=o[c];a&&(f.oldValue=a[c].value);let m=f.dir[s];m&&(No(),es(m,n,8,[e.el,f,e,t]),Fo())}}const rh="components",pA="directives";function vt(e,t){return sh(rh,e,!0,t)||e}const Ig=Symbol();function gA(e){return dr(e)?sh(rh,e,!1)||e:e||Ig}function S1(e){return sh(pA,e)}function sh(e,t,n=!0,s=!1){const o=Qn||jn;if(o){const a=o.type;if(e===rh){const f=zA(a,!1);if(f&&(f===t||f===js(t)||f===eh(js(t))))return a}const c=k2(o[e]||a[e],t)||k2(o.appContext[e],t);return!c&&s?a:c}}function k2(e,t){return e&&(e[t]||e[js(t)]||e[eh(js(t))])}function Tt(e,t,n,s){let o;const a=n&&n[s];if($t(e)||dr(e)){o=new Array(e.length);for(let c=0,f=e.length;c<f;c++)o[c]=t(e[c],c,void 0,a&&a[c])}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,a&&a[c])}else if(hr(e))if(e[Symbol.iterator])o=Array.from(e,(c,f)=>t(c,f,void 0,a&&a[f]));else{const c=Object.keys(e);o=new Array(c.length);for(let f=0,m=c.length;f<m;f++){const d=c[f];o[f]=t(e[d],d,f,a&&a[f])}}else o=[];return n&&(n[s]=o),o}function an(e,t){for(let n=0;n<t.length;n++){const s=t[n];if($t(s))for(let o=0;o<s.length;o++)e[s[o].name]=s[o].fn;else s&&(e[s.name]=s.fn)}return e}function tt(e,t,n={},s,o){if(Qn.isCE||Qn.parent&&Ol(Qn.parent)&&Qn.parent.isCE)return rt("slot",t==="default"?null:{name:t},s&&s());let a=e[t];a&&a._c&&(a._d=!1),xe();const c=a&&Og(a(n)),f=en(Vt,{key:n.key||`_${t}`},c||(s?s():[]),c&&e._===1?64:-2);return!o&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),a&&a._c&&(a._d=!0),f}function Og(e){return e.some(t=>Gu(t)?!(t.type===ts||t.type===Vt&&!Og(t.children)):!0)?e:null}const X0=e=>e?Vg(e)?E1(e)||e.proxy:X0(e.parent):null,Wu=Pr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>X0(e.parent),$root:e=>X0(e.root),$emit:e=>e.emit,$options:e=>Lg(e),$forceUpdate:e=>e.f||(e.f=()=>hg(e.update)),$nextTick:e=>e.n||(e.n=dg.bind(e.proxy)),$watch:e=>iA.bind(e)}),bA={get({_:e},t){const{ctx:n,setupState:s,data:o,props:a,accessCache:c,type:f,appContext:m}=e;let d;if(t[0]!=="$"){const M=c[t];if(M!==void 0)switch(M){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(s!==dn&&Gt(s,t))return c[t]=1,s[t];if(o!==dn&&Gt(o,t))return c[t]=2,o[t];if((d=e.propsOptions[0])&&Gt(d,t))return c[t]=3,a[t];if(n!==dn&&Gt(n,t))return c[t]=4,n[t];G0&&(c[t]=0)}}const p=Wu[t];let h,w;if(p)return t==="$attrs"&&Fr(e,"get",t),p(e);if((h=f.__cssModules)&&(h=h[t]))return h;if(n!==dn&&Gt(n,t))return c[t]=4,n[t];if(w=m.config.globalProperties,Gt(w,t))return w[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:a}=e;return o!==dn&&Gt(o,t)?(o[t]=n,!0):s!==dn&&Gt(s,t)?(s[t]=n,!0):Gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:a}},c){let f;return!!n[c]||e!==dn&&Gt(e,c)||t!==dn&&Gt(t,c)||(f=a[0])&&Gt(f,c)||Gt(s,c)||Gt(Wu,c)||Gt(o.config.globalProperties,c)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let G0=!0;function yA(e){const t=Lg(e),n=e.proxy,s=e.ctx;G0=!1,t.beforeCreate&&I2(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:f,provide:m,inject:d,created:p,beforeMount:h,mounted:w,beforeUpdate:M,updated:u,activated:$,deactivated:U,beforeDestroy:D,beforeUnmount:b,destroyed:C,unmounted:F,render:L,renderTracked:V,renderTriggered:v,errorCaptured:E,serverPrefetch:T,expose:y,inheritAttrs:A,components:S,directives:x,filters:k}=t;if(d&&wA(d,s,null,e.appContext.config.unwrapInjectedRef),c)for(const ne in c){const Y=c[ne];Bt(Y)&&(s[ne]=Y.bind(n))}if(o){const ne=o.call(n,n);hr(ne)&&(e.data=Yd(ne))}if(G0=!0,a)for(const ne in a){const Y=a[ne],te=Bt(Y)?Y.bind(n,n):Bt(Y.get)?Y.get.bind(n,n):ri,g=!Bt(Y)&&Bt(Y.set)?Y.set.bind(n):ri,I=YA({get:te,set:g});Object.defineProperty(s,ne,{enumerable:!0,configurable:!0,get:()=>I.value,set:le=>I.value=le})}if(f)for(const ne in f)Cg(f[ne],s,n,ne);if(m){const ne=Bt(m)?m.call(n):m;Reflect.ownKeys(ne).forEach(Y=>{sA(Y,ne[Y])})}p&&I2(p,e,"c");function z(ne,Y){$t(Y)?Y.forEach(te=>ne(te.bind(n))):Y&&ne(Y.bind(n))}if(z(fA,h),z(Mg,w),z(dA,M),z(Tg,u),z(lA,$),z(cA,U),z(_A,E),z(vA,V),z(mA,v),z(Rg,b),z(kg,F),z(hA,T),$t(y))if(y.length){const ne=e.exposed||(e.exposed={});y.forEach(Y=>{Object.defineProperty(ne,Y,{get:()=>n[Y],set:te=>n[Y]=te})})}else e.exposed||(e.exposed={});L&&e.render===ri&&(e.render=L),A!=null&&(e.inheritAttrs=A),S&&(e.components=S),x&&(e.directives=x)}function wA(e,t,n=ri,s=!1){$t(e)&&(e=Z0(e));for(const o in e){const a=e[o];let c;hr(a)?"default"in a?c=s0(a.from||o,a.default,!0):c=s0(a.from||o):c=s0(a),fr(c)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:f=>c.value=f}):t[o]=c}}function I2(e,t,n){es($t(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Cg(e,t,n,s){const o=s.includes(".")?wg(n,s):()=>n[s];if(dr(e)){const a=t[e];Bt(a)&&i0(o,a)}else if(Bt(e))i0(o,e.bind(n));else if(hr(e))if($t(e))e.forEach(a=>Cg(a,t,n,s));else{const a=Bt(e.handler)?e.handler.bind(n):t[e.handler];Bt(a)&&i0(o,a,e)}}function Lg(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,f=a.get(t);let m;return f?m=f:!o.length&&!n&&!s?m=t:(m={},o.length&&o.forEach(d=>Xu(m,d,c,!0)),Xu(m,t,c)),a.set(t,m),m}function Xu(e,t,n,s=!1){const{mixins:o,extends:a}=t;a&&Xu(e,a,n,!0),o&&o.forEach(c=>Xu(e,c,n,!0));for(const c in t)if(!(s&&c==="expose")){const f=xA[c]||n&&n[c];e[c]=f?f(e[c],t[c]):t[c]}return e}const xA={data:O2,props:Sa,emits:Sa,methods:Sa,computed:Sa,beforeCreate:ur,created:ur,beforeMount:ur,mounted:ur,beforeUpdate:ur,updated:ur,beforeDestroy:ur,beforeUnmount:ur,destroyed:ur,unmounted:ur,activated:ur,deactivated:ur,errorCaptured:ur,serverPrefetch:ur,components:Sa,directives:Sa,watch:AA,provide:O2,inject:SA};function O2(e,t){return t?e?function(){return Pr(Bt(e)?e.call(this,this):e,Bt(t)?t.call(this,this):t)}:t:e}function SA(e,t){return Sa(Z0(e),Z0(t))}function Z0(e){if($t(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ur(e,t){return e?[...new Set([].concat(e,t))]:t}function Sa(e,t){return e?Pr(Pr(Object.create(null),e),t):t}function AA(e,t){if(!e)return t;if(!t)return e;const n=Pr(Object.create(null),e);for(const s in t)n[s]=ur(e[s],t[s]);return n}function EA(e,t,n,s=!1){const o={},a={};K0(a,A1,1),e.propsDefaults=Object.create(null),Bg(e,t,o,a);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);n?e.props=s?o:RS(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function MA(e,t,n,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,f=Zt(o),[m]=e.propsOptions;let d=!1;if((s||c>0)&&!(c&16)){if(c&8){const p=e.vnode.dynamicProps;for(let h=0;h<p.length;h++){let w=p[h];if(y1(e.emitsOptions,w))continue;const M=t[w];if(m)if(Gt(a,w))M!==a[w]&&(a[w]=M,d=!0);else{const u=js(w);o[u]=Q0(m,f,u,M,e,!1)}else M!==a[w]&&(a[w]=M,d=!0)}}}else{Bg(e,t,o,a)&&(d=!0);let p;for(const h in f)(!t||!Gt(t,h)&&((p=p1(h))===h||!Gt(t,p)))&&(m?n&&(n[h]!==void 0||n[p]!==void 0)&&(o[h]=Q0(m,f,h,void 0,e,!0)):delete o[h]);if(a!==f)for(const h in a)(!t||!Gt(t,h)&&!0)&&(delete a[h],d=!0)}d&&ai(e,"set","$attrs")}function Bg(e,t,n,s){const[o,a]=e.propsOptions;let c=!1,f;if(t)for(let m in t){if(Fu(m))continue;const d=t[m];let p;o&&Gt(o,p=js(m))?!a||!a.includes(p)?n[p]=d:(f||(f={}))[p]=d:y1(e.emitsOptions,m)||(!(m in s)||d!==s[m])&&(s[m]=d,c=!0)}if(a){const m=Zt(n),d=f||dn;for(let p=0;p<a.length;p++){const h=a[p];n[h]=Q0(o,m,h,d[h],e,!Gt(d,h))}}return c}function Q0(e,t,n,s,o,a){const c=e[n];if(c!=null){const f=Gt(c,"default");if(f&&s===void 0){const m=c.default;if(c.type!==Function&&Bt(m)){const{propsDefaults:d}=o;n in d?s=d[n]:(To(o),s=d[n]=m.call(null,t),Fa())}else s=m}c[0]&&(a&&!f?s=!1:c[1]&&(s===""||s===p1(n))&&(s=!0))}return s}function Ng(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const a=e.props,c={},f=[];let m=!1;if(!Bt(e)){const p=h=>{m=!0;const[w,M]=Ng(h,t,!0);Pr(c,w),M&&f.push(...M)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!a&&!m)return s.set(e,bo),bo;if($t(a))for(let p=0;p<a.length;p++){const h=js(a[p]);C2(h)&&(c[h]=dn)}else if(a)for(const p in a){const h=js(p);if(C2(h)){const w=a[p],M=c[h]=$t(w)||Bt(w)?{type:w}:w;if(M){const u=N2(Boolean,M.type),$=N2(String,M.type);M[0]=u>-1,M[1]=$<0||u<$,(u>-1||Gt(M,"default"))&&f.push(h)}}}const d=[c,f];return s.set(e,d),d}function C2(e){return e[0]!=="$"}function L2(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function B2(e,t){return L2(e)===L2(t)}function N2(e,t){return $t(t)?t.findIndex(n=>B2(n,e)):Bt(t)&&B2(t,e)?0:-1}const Fg=e=>e[0]==="_"||e==="$stable",ih=e=>$t(e)?e.map(Cs):[Cs(e)],TA=(e,t,n)=>{if(t._n)return t;const s=mt((...o)=>ih(t(...o)),n);return s._c=!1,s},Pg=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Fg(o))continue;const a=e[o];if(Bt(a))t[o]=TA(o,a,s);else if(a!=null){const c=ih(a);t[o]=()=>c}}},Hg=(e,t)=>{const n=ih(t);e.slots.default=()=>n},RA=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Zt(t),K0(t,"_",n)):Pg(t,e.slots={})}else e.slots={},t&&Hg(e,t);K0(e.slots,A1,1)},kA=(e,t,n)=>{const{vnode:s,slots:o}=e;let a=!0,c=dn;if(s.shapeFlag&32){const f=t._;f?n&&f===1?a=!1:(Pr(o,t),!n&&f===1&&delete o._):(a=!t.$stable,Pg(t,o)),c=t}else t&&(Hg(e,t),c={default:1});if(a)for(const f in o)!Fg(f)&&!(f in c)&&delete o[f]};function jg(){return{app:null,config:{isNativeTag:jS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IA=0;function OA(e,t){return function(s,o=null){Bt(s)||(s=Object.assign({},s)),o!=null&&!hr(o)&&(o=null);const a=jg(),c=new Set;let f=!1;const m=a.app={_uid:IA++,_component:s,_props:o,_container:null,_context:a,_instance:null,version:XA,get config(){return a.config},set config(d){},use(d,...p){return c.has(d)||(d&&Bt(d.install)?(c.add(d),d.install(m,...p)):Bt(d)&&(c.add(d),d(m,...p))),m},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),m},component(d,p){return p?(a.components[d]=p,m):a.components[d]},directive(d,p){return p?(a.directives[d]=p,m):a.directives[d]},mount(d,p,h){if(!f){const w=rt(s,o);return w.appContext=a,p&&t?t(w,d):e(w,d,h),f=!0,m._container=d,d.__vue_app__=m,E1(w.component)||w.component.proxy}},unmount(){f&&(e(null,m._container),delete m._container.__vue_app__)},provide(d,p){return a.provides[d]=p,m}};return m}}function J0(e,t,n,s,o=!1){if($t(e)){e.forEach((w,M)=>J0(w,t&&($t(t)?t[M]:t),n,s,o));return}if(Ol(s)&&!o)return;const a=s.shapeFlag&4?E1(s.component)||s.component.proxy:s.el,c=o?null:a,{i:f,r:m}=e,d=t&&t.r,p=f.refs===dn?f.refs={}:f.refs,h=f.setupState;if(d!=null&&d!==m&&(dr(d)?(p[d]=null,Gt(h,d)&&(h[d]=null)):fr(d)&&(d.value=null)),Bt(m))$i(m,f,12,[c,p]);else{const w=dr(m),M=fr(m);if(w||M){const u=()=>{if(e.f){const $=w?p[m]:m.value;o?$t($)&&Qd($,a):$t($)?$.includes(a)||$.push(a):w?(p[m]=[a],Gt(h,m)&&(h[m]=p[m])):(m.value=[a],e.k&&(p[e.k]=m.value))}else w?(p[m]=c,Gt(h,m)&&(h[m]=c)):M&&(m.value=c,e.k&&(p[e.k]=c))};c?(u.id=-1,xr(u,n)):u()}}}const xr=rA;function CA(e){return LA(e)}function LA(e,t){const n=zS();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:f,createComment:m,setText:d,setElementText:p,parentNode:h,nextSibling:w,setScopeId:M=ri,cloneNode:u,insertStaticContent:$}=e,U=(O,P,G,ee=null,re=null,pe=null,ve=!1,ce=null,ae=!!P.dynamicChildren)=>{if(O===P)return;O&&!Ra(O,P)&&(ee=ke(O),he(O,re,pe,!0),O=null),P.patchFlag===-2&&(ae=!1,P.dynamicChildren=null);const{type:ge,ref:Be,shapeFlag:Ce}=P;switch(ge){case ah:D(O,P,G,ee);break;case ts:b(O,P,G,ee);break;case o0:O==null&&C(P,G,ee,ve);break;case Vt:x(O,P,G,ee,re,pe,ve,ce,ae);break;default:Ce&1?V(O,P,G,ee,re,pe,ve,ce,ae):Ce&6?k(O,P,G,ee,re,pe,ve,ce,ae):(Ce&64||Ce&128)&&ge.process(O,P,G,ee,re,pe,ve,ce,ae,Ae)}Be!=null&&re&&J0(Be,O&&O.ref,pe,P||O,!P)},D=(O,P,G,ee)=>{if(O==null)s(P.el=f(P.children),G,ee);else{const re=P.el=O.el;P.children!==O.children&&d(re,P.children)}},b=(O,P,G,ee)=>{O==null?s(P.el=m(P.children||""),G,ee):P.el=O.el},C=(O,P,G,ee)=>{[O.el,O.anchor]=$(O.children,P,G,ee,O.el,O.anchor)},F=({el:O,anchor:P},G,ee)=>{let re;for(;O&&O!==P;)re=w(O),s(O,G,ee),O=re;s(P,G,ee)},L=({el:O,anchor:P})=>{let G;for(;O&&O!==P;)G=w(O),o(O),O=G;o(P)},V=(O,P,G,ee,re,pe,ve,ce,ae)=>{ve=ve||P.type==="svg",O==null?v(P,G,ee,re,pe,ve,ce,ae):y(O,P,re,pe,ve,ce,ae)},v=(O,P,G,ee,re,pe,ve,ce)=>{let ae,ge;const{type:Be,props:Ce,shapeFlag:Pe,transition:We,patchFlag:nt,dirs:be}=O;if(O.el&&u!==void 0&&nt===-1)ae=O.el=u(O.el);else{if(ae=O.el=c(O.type,pe,Ce&&Ce.is,Ce),Pe&8?p(ae,O.children):Pe&16&&T(O.children,ae,null,ee,re,pe&&Be!=="foreignObject",ve,ce),be&&da(O,null,ee,"created"),Ce){for(const me in Ce)me!=="value"&&!Fu(me)&&a(ae,me,null,Ce[me],pe,O.children,ee,re,oe);"value"in Ce&&a(ae,"value",null,Ce.value),(ge=Ce.onVnodeBeforeMount)&&As(ge,ee,O)}E(ae,O,O.scopeId,ve,ee)}be&&da(O,null,ee,"beforeMount");const Ne=(!re||re&&!re.pendingBranch)&&We&&!We.persisted;Ne&&We.beforeEnter(ae),s(ae,P,G),((ge=Ce&&Ce.onVnodeMounted)||Ne||be)&&xr(()=>{ge&&As(ge,ee,O),Ne&&We.enter(ae),be&&da(O,null,ee,"mounted")},re)},E=(O,P,G,ee,re)=>{if(G&&M(O,G),ee)for(let pe=0;pe<ee.length;pe++)M(O,ee[pe]);if(re){let pe=re.subTree;if(P===pe){const ve=re.vnode;E(O,ve,ve.scopeId,ve.slotScopeIds,re.parent)}}},T=(O,P,G,ee,re,pe,ve,ce,ae=0)=>{for(let ge=ae;ge<O.length;ge++){const Be=O[ge]=ce?Fi(O[ge]):Cs(O[ge]);U(null,Be,P,G,ee,re,pe,ve,ce)}},y=(O,P,G,ee,re,pe,ve)=>{const ce=P.el=O.el;let{patchFlag:ae,dynamicChildren:ge,dirs:Be}=P;ae|=O.patchFlag&16;const Ce=O.props||dn,Pe=P.props||dn;let We;G&&ha(G,!1),(We=Pe.onVnodeBeforeUpdate)&&As(We,G,P,O),Be&&da(P,O,G,"beforeUpdate"),G&&ha(G,!0);const nt=re&&P.type!=="foreignObject";if(ge?A(O.dynamicChildren,ge,ce,G,ee,nt,pe):ve||te(O,P,ce,null,G,ee,nt,pe,!1),ae>0){if(ae&16)S(ce,P,Ce,Pe,G,ee,re);else if(ae&2&&Ce.class!==Pe.class&&a(ce,"class",null,Pe.class,re),ae&4&&a(ce,"style",Ce.style,Pe.style,re),ae&8){const be=P.dynamicProps;for(let Ne=0;Ne<be.length;Ne++){const me=be[Ne],Ze=Ce[me],N=Pe[me];(N!==Ze||me==="value")&&a(ce,me,Ze,N,re,O.children,G,ee,oe)}}ae&1&&O.children!==P.children&&p(ce,P.children)}else!ve&&ge==null&&S(ce,P,Ce,Pe,G,ee,re);((We=Pe.onVnodeUpdated)||Be)&&xr(()=>{We&&As(We,G,P,O),Be&&da(P,O,G,"updated")},ee)},A=(O,P,G,ee,re,pe,ve)=>{for(let ce=0;ce<P.length;ce++){const ae=O[ce],ge=P[ce],Be=ae.el&&(ae.type===Vt||!Ra(ae,ge)||ae.shapeFlag&70)?h(ae.el):G;U(ae,ge,Be,null,ee,re,pe,ve,!0)}},S=(O,P,G,ee,re,pe,ve)=>{if(G!==ee){for(const ce in ee){if(Fu(ce))continue;const ae=ee[ce],ge=G[ce];ae!==ge&&ce!=="value"&&a(O,ce,ge,ae,ve,P.children,re,pe,oe)}if(G!==dn)for(const ce in G)!Fu(ce)&&!(ce in ee)&&a(O,ce,G[ce],null,ve,P.children,re,pe,oe);"value"in ee&&a(O,"value",G.value,ee.value)}},x=(O,P,G,ee,re,pe,ve,ce,ae)=>{const ge=P.el=O?O.el:f(""),Be=P.anchor=O?O.anchor:f("");let{patchFlag:Ce,dynamicChildren:Pe,slotScopeIds:We}=P;We&&(ce=ce?ce.concat(We):We),O==null?(s(ge,G,ee),s(Be,G,ee),T(P.children,G,Be,re,pe,ve,ce,ae)):Ce>0&&Ce&64&&Pe&&O.dynamicChildren?(A(O.dynamicChildren,Pe,G,re,pe,ve,ce),(P.key!=null||re&&P===re.subTree)&&Ug(O,P,!0)):te(O,P,G,Be,re,pe,ve,ce,ae)},k=(O,P,G,ee,re,pe,ve,ce,ae)=>{P.slotScopeIds=ce,O==null?P.shapeFlag&512?re.ctx.activate(P,G,ee,ve,ae):R(P,G,ee,re,pe,ve,ae):z(O,P,ae)},R=(O,P,G,ee,re,pe,ve)=>{const ce=O.component=UA(O,ee,re);if(w1(O)&&(ce.ctx.renderer=Ae),DA(ce),ce.asyncDep){if(re&&re.registerDep(ce,ne),!O.el){const ae=ce.subTree=rt(ts);b(null,ae,P,G)}return}ne(ce,O,P,G,re,pe,ve)},z=(O,P,G)=>{const ee=P.component=O.component;if(eA(O,P,G))if(ee.asyncDep&&!ee.asyncResolved){Y(ee,P,G);return}else ee.next=P,WS(ee.update),ee.update();else P.el=O.el,ee.vnode=P},ne=(O,P,G,ee,re,pe,ve)=>{const ce=()=>{if(O.isMounted){let{next:Be,bu:Ce,u:Pe,parent:We,vnode:nt}=O,be=Be,Ne;ha(O,!1),Be?(Be.el=nt.el,Y(O,Be,ve)):Be=nt,Ce&&n0(Ce),(Ne=Be.props&&Be.props.onVnodeBeforeUpdate)&&As(Ne,We,Be,nt),ha(O,!0);const me=r0(O),Ze=O.subTree;O.subTree=me,U(Ze,me,h(Ze.el),ke(Ze),O,re,pe),Be.el=me.el,be===null&&tA(O,me.el),Pe&&xr(Pe,re),(Ne=Be.props&&Be.props.onVnodeUpdated)&&xr(()=>As(Ne,We,Be,nt),re)}else{let Be;const{el:Ce,props:Pe}=P,{bm:We,m:nt,parent:be}=O,Ne=Ol(P);if(ha(O,!1),We&&n0(We),!Ne&&(Be=Pe&&Pe.onVnodeBeforeMount)&&As(Be,be,P),ha(O,!0),Ce&&X){const me=()=>{O.subTree=r0(O),X(Ce,O.subTree,O,re,null)};Ne?P.type.__asyncLoader().then(()=>!O.isUnmounted&&me()):me()}else{const me=O.subTree=r0(O);U(null,me,G,ee,O,re,pe),P.el=me.el}if(nt&&xr(nt,re),!Ne&&(Be=Pe&&Pe.onVnodeMounted)){const me=P;xr(()=>As(Be,be,me),re)}(P.shapeFlag&256||be&&Ol(be.vnode)&&be.vnode.shapeFlag&256)&&O.a&&xr(O.a,re),O.isMounted=!0,P=G=ee=null}},ae=O.effect=new qd(ce,()=>hg(ge),O.scope),ge=O.update=()=>ae.run();ge.id=O.uid,ha(O,!0),ge()},Y=(O,P,G)=>{P.component=O;const ee=O.vnode.props;O.vnode=P,O.next=null,MA(O,P.props,ee,G),kA(O,P.children,G),No(),b1(void 0,O.update),Fo()},te=(O,P,G,ee,re,pe,ve,ce,ae=!1)=>{const ge=O&&O.children,Be=O?O.shapeFlag:0,Ce=P.children,{patchFlag:Pe,shapeFlag:We}=P;if(Pe>0){if(Pe&128){I(ge,Ce,G,ee,re,pe,ve,ce,ae);return}else if(Pe&256){g(ge,Ce,G,ee,re,pe,ve,ce,ae);return}}We&8?(Be&16&&oe(ge,re,pe),Ce!==ge&&p(G,Ce)):Be&16?We&16?I(ge,Ce,G,ee,re,pe,ve,ce,ae):oe(ge,re,pe,!0):(Be&8&&p(G,""),We&16&&T(Ce,G,ee,re,pe,ve,ce,ae))},g=(O,P,G,ee,re,pe,ve,ce,ae)=>{O=O||bo,P=P||bo;const ge=O.length,Be=P.length,Ce=Math.min(ge,Be);let Pe;for(Pe=0;Pe<Ce;Pe++){const We=P[Pe]=ae?Fi(P[Pe]):Cs(P[Pe]);U(O[Pe],We,G,null,re,pe,ve,ce,ae)}ge>Be?oe(O,re,pe,!0,!1,Ce):T(P,G,ee,re,pe,ve,ce,ae,Ce)},I=(O,P,G,ee,re,pe,ve,ce,ae)=>{let ge=0;const Be=P.length;let Ce=O.length-1,Pe=Be-1;for(;ge<=Ce&&ge<=Pe;){const We=O[ge],nt=P[ge]=ae?Fi(P[ge]):Cs(P[ge]);if(Ra(We,nt))U(We,nt,G,null,re,pe,ve,ce,ae);else break;ge++}for(;ge<=Ce&&ge<=Pe;){const We=O[Ce],nt=P[Pe]=ae?Fi(P[Pe]):Cs(P[Pe]);if(Ra(We,nt))U(We,nt,G,null,re,pe,ve,ce,ae);else break;Ce--,Pe--}if(ge>Ce){if(ge<=Pe){const We=Pe+1,nt=We<Be?P[We].el:ee;for(;ge<=Pe;)U(null,P[ge]=ae?Fi(P[ge]):Cs(P[ge]),G,nt,re,pe,ve,ce,ae),ge++}}else if(ge>Pe)for(;ge<=Ce;)he(O[ge],re,pe,!0),ge++;else{const We=ge,nt=ge,be=new Map;for(ge=nt;ge<=Pe;ge++){const se=P[ge]=ae?Fi(P[ge]):Cs(P[ge]);se.key!=null&&be.set(se.key,ge)}let Ne,me=0;const Ze=Pe-nt+1;let N=!1,j=0;const Z=new Array(Ze);for(ge=0;ge<Ze;ge++)Z[ge]=0;for(ge=We;ge<=Ce;ge++){const se=O[ge];if(me>=Ze){he(se,re,pe,!0);continue}let W;if(se.key!=null)W=be.get(se.key);else for(Ne=nt;Ne<=Pe;Ne++)if(Z[Ne-nt]===0&&Ra(se,P[Ne])){W=Ne;break}W===void 0?he(se,re,pe,!0):(Z[W-nt]=ge+1,W>=j?j=W:N=!0,U(se,P[W],G,null,re,pe,ve,ce,ae),me++)}const Q=N?BA(Z):bo;for(Ne=Q.length-1,ge=Ze-1;ge>=0;ge--){const se=nt+ge,W=P[se],fe=se+1<Be?P[se+1].el:ee;Z[ge]===0?U(null,W,G,fe,re,pe,ve,ce,ae):N&&(Ne<0||ge!==Q[Ne]?le(W,G,fe,2):Ne--)}}},le=(O,P,G,ee,re=null)=>{const{el:pe,type:ve,transition:ce,children:ae,shapeFlag:ge}=O;if(ge&6){le(O.component.subTree,P,G,ee);return}if(ge&128){O.suspense.move(P,G,ee);return}if(ge&64){ve.move(O,P,G,Ae);return}if(ve===Vt){s(pe,P,G);for(let Ce=0;Ce<ae.length;Ce++)le(ae[Ce],P,G,ee);s(O.anchor,P,G);return}if(ve===o0){F(O,P,G);return}if(ee!==2&&ge&1&&ce)if(ee===0)ce.beforeEnter(pe),s(pe,P,G),xr(()=>ce.enter(pe),re);else{const{leave:Ce,delayLeave:Pe,afterLeave:We}=ce,nt=()=>s(pe,P,G),be=()=>{Ce(pe,()=>{nt(),We&&We()})};Pe?Pe(pe,nt,be):be()}else s(pe,P,G)},he=(O,P,G,ee=!1,re=!1)=>{const{type:pe,props:ve,ref:ce,children:ae,dynamicChildren:ge,shapeFlag:Be,patchFlag:Ce,dirs:Pe}=O;if(ce!=null&&J0(ce,null,G,O,!0),Be&256){P.ctx.deactivate(O);return}const We=Be&1&&Pe,nt=!Ol(O);let be;if(nt&&(be=ve&&ve.onVnodeBeforeUnmount)&&As(be,P,O),Be&6)qe(O.component,G,ee);else{if(Be&128){O.suspense.unmount(G,ee);return}We&&da(O,null,P,"beforeUnmount"),Be&64?O.type.remove(O,P,G,re,Ae,ee):ge&&(pe!==Vt||Ce>0&&Ce&64)?oe(ge,P,G,!1,!0):(pe===Vt&&Ce&384||!re&&Be&16)&&oe(ae,P,G),ee&&He(O)}(nt&&(be=ve&&ve.onVnodeUnmounted)||We)&&xr(()=>{be&&As(be,P,O),We&&da(O,null,P,"unmounted")},G)},He=O=>{const{type:P,el:G,anchor:ee,transition:re}=O;if(P===Vt){Ke(G,ee);return}if(P===o0){L(O);return}const pe=()=>{o(G),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(O.shapeFlag&1&&re&&!re.persisted){const{leave:ve,delayLeave:ce}=re,ae=()=>ve(G,pe);ce?ce(O.el,pe,ae):ae()}else pe()},Ke=(O,P)=>{let G;for(;O!==P;)G=w(O),o(O),O=G;o(P)},qe=(O,P,G)=>{const{bum:ee,scope:re,update:pe,subTree:ve,um:ce}=O;ee&&n0(ee),re.stop(),pe&&(pe.active=!1,he(ve,O,P,G)),ce&&xr(ce,P),xr(()=>{O.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},oe=(O,P,G,ee=!1,re=!1,pe=0)=>{for(let ve=pe;ve<O.length;ve++)he(O[ve],P,G,ee,re)},ke=O=>O.shapeFlag&6?ke(O.component.subTree):O.shapeFlag&128?O.suspense.next():w(O.anchor||O.el),Se=(O,P,G)=>{O==null?P._vnode&&he(P._vnode,null,null,!0):U(P._vnode||null,O,P,null,null,null,G),_g(),P._vnode=O},Ae={p:U,um:he,m:le,r:He,mt:R,mc:T,pc:te,pbc:A,n:ke,o:e};let Xe,X;return t&&([Xe,X]=t(Ae)),{render:Se,hydrate:Xe,createApp:OA(Se,Xe)}}function ha({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Ug(e,t,n=!1){const s=e.children,o=t.children;if($t(s)&&$t(o))for(let a=0;a<s.length;a++){const c=s[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=Fi(o[a]),f.el=c.el),n||Ug(c,f))}}function BA(e){const t=e.slice(),n=[0];let s,o,a,c,f;const m=e.length;for(s=0;s<m;s++){const d=e[s];if(d!==0){if(o=n[n.length-1],e[o]<d){t[s]=o,n.push(s);continue}for(a=0,c=n.length-1;a<c;)f=a+c>>1,e[n[f]]<d?a=f+1:c=f;d<e[n[a]]&&(a>0&&(t[s]=n[a-1]),n[a]=s)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=t[c];return n}const NA=e=>e.__isTeleport,Vt=Symbol(void 0),ah=Symbol(void 0),ts=Symbol(void 0),o0=Symbol(void 0),Cl=[];let ds=null;function xe(e=!1){Cl.push(ds=e?null:[])}function FA(){Cl.pop(),ds=Cl[Cl.length-1]||null}let zl=1;function F2(e){zl+=e}function Dg(e){return e.dynamicChildren=zl>0?ds||bo:null,FA(),zl>0&&ds&&ds.push(e),e}function Le(e,t,n,s,o,a){return Dg(ze(e,t,n,s,o,a,!0))}function en(e,t,n,s,o){return Dg(rt(e,t,n,s,o,!0))}function Gu(e){return e?e.__v_isVNode===!0:!1}function Ra(e,t){return e.type===t.type&&e.key===t.key}const A1="__vInternal",$g=({key:e})=>e!=null?e:null,Pu=({ref:e,ref_key:t,ref_for:n})=>e!=null?dr(e)||fr(e)||Bt(e)?{i:Qn,r:e,k:t,f:!!n}:e:null;function ze(e,t=null,n=null,s=0,o=null,a=e===Vt?0:1,c=!1,f=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$g(t),ref:t&&Pu(t),scopeId:bg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return f?(oh(m,n),a&128&&e.normalize(m)):n&&(m.shapeFlag|=dr(n)?8:16),zl>0&&!c&&ds&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&ds.push(m),m}const rt=PA;function PA(e,t=null,n=null,s=0,o=null,a=!1){if((!e||e===Ig)&&(e=ts),Gu(e)){const f=Wi(e,t,!0);return n&&oh(f,n),zl>0&&!a&&ds&&(f.shapeFlag&6?ds[ds.indexOf(e)]=f:ds.push(f)),f.patchFlag|=-2,f}if(KA(e)&&(e=e.__vccOpts),t){t=Jt(t);let{class:f,style:m}=t;f&&!dr(f)&&(t.class=It(f)),hr(m)&&(tg(m)&&!$t(m)&&(m=Pr({},m)),t.style=Wt(m))}const c=dr(e)?1:nA(e)?128:NA(e)?64:hr(e)?4:Bt(e)?2:0;return ze(e,t,n,s,o,c,a,!0)}function Jt(e){return e?tg(e)||A1 in e?Pr({},e):e:null}function Wi(e,t,n=!1){const{props:s,ref:o,patchFlag:a,children:c}=e,f=t?lh(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&$g(f),ref:t&&t.ref?n&&o?$t(o)?o.concat(Pu(t)):[o,Pu(t)]:Pu(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Vt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wi(e.ssContent),ssFallback:e.ssFallback&&Wi(e.ssFallback),el:e.el,anchor:e.anchor}}function Xi(e=" ",t=0){return rt(ah,null,e,t)}function st(e="",t=!1){return t?(xe(),en(ts,null,e)):rt(ts,null,e)}function Cs(e){return e==null||typeof e=="boolean"?rt(ts):$t(e)?rt(Vt,null,e.slice()):typeof e=="object"?Fi(e):rt(ah,null,String(e))}function Fi(e){return e.el===null||e.memo?e:Wi(e)}function oh(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if($t(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),oh(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(A1 in t)?t._ctx=Qn:o===3&&Qn&&(Qn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Bt(t)?(t={default:t,_ctx:Qn},n=32):(t=String(t),s&64?(n=16,t=[Xi(t)]):n=8);e.children=t,e.shapeFlag|=n}function lh(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=It([t.class,s.class]));else if(o==="style")t.style=Wt([t.style,s.style]);else if(Zd(o)){const a=t[o],c=s[o];c&&a!==c&&!($t(a)&&a.includes(c))&&(t[o]=a?[].concat(a,c):c)}else o!==""&&(t[o]=s[o])}return t}function As(e,t,n,s=null){es(e,t,7,[n,s])}const HA=jg();let jA=0;function UA(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||HA,a={uid:jA++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new tS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ng(s,o),emitsOptions:gg(s,o),emit:null,emitted:null,propsDefaults:dn,inheritAttrs:s.inheritAttrs,ctx:dn,data:dn,props:dn,attrs:dn,slots:dn,refs:dn,setupState:dn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=ZS.bind(null,a),e.ce&&e.ce(a),a}let jn=null;const qg=()=>jn||Qn,To=e=>{jn=e,e.scope.on()},Fa=()=>{jn&&jn.scope.off(),jn=null};function Vg(e){return e.vnode.shapeFlag&4}let Kl=!1;function DA(e,t=!1){Kl=t;const{props:n,children:s}=e.vnode,o=Vg(e);EA(e,n,o,t),RA(e,s);const a=o?$A(e,t):void 0;return Kl=!1,a}function $A(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ng(new Proxy(e.ctx,bA));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?VA(e):null;To(e),No();const a=$i(s,e,0,[e.props,o]);if(Fo(),Fa(),lg(a)){if(a.then(Fa,Fa),t)return a.then(c=>{P2(e,c,t)}).catch(c=>{g1(c,e,0)});e.asyncDep=a}else P2(e,a,t)}else zg(e,t)}function P2(e,t,n){Bt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:hr(t)&&(e.setupState=rg(t)),zg(e,n)}let H2;function zg(e,t,n){const s=e.type;if(!e.render){if(!t&&H2&&!s.render){const o=s.template;if(o){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:f,compilerOptions:m}=s,d=Pr(Pr({isCustomElement:a,delimiters:f},c),m);s.render=H2(o,d)}}e.render=s.render||ri}To(e),No(),yA(e),Fo(),Fa()}function qA(e){return new Proxy(e.attrs,{get(t,n){return Fr(e,"get","$attrs"),t[n]}})}function VA(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=qA(e))},slots:e.slots,emit:e.emit,expose:t}}function E1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(rg(ng(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Wu)return Wu[n](e)}}))}function zA(e,t=!0){return Bt(e)?e.displayName||e.name:e.name||t&&e.__name}function KA(e){return Bt(e)&&"__vccOpts"in e}const YA=(e,t)=>BS(e,t,Kl);function WA(e,t,n){const s=arguments.length;return s===2?hr(t)&&!$t(t)?Gu(t)?rt(e,null,[t]):rt(e,t):rt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Gu(n)&&(n=[n]),rt(e,t,n))}const XA="3.2.37";function GA(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const ZA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",QA=GA(ZA);function Kg(e){return!!e||e===""}const JA=/^on[^a-z]/,eE=e=>JA.test(e),tE=e=>e.startsWith("onUpdate:"),rc=Object.assign,sc=Array.isArray,nE=e=>typeof e=="function",ed=e=>typeof e=="string",rE=e=>e!==null&&typeof e=="object",ch=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},sE=/-(\w)/g,j2=ch(e=>e.replace(sE,(t,n)=>n?n.toUpperCase():"")),iE=/\B([A-Z])/g,yo=ch(e=>e.replace(iE,"-$1").toLowerCase()),aE=ch(e=>e.charAt(0).toUpperCase()+e.slice(1)),td=e=>{const t=parseFloat(e);return isNaN(t)?e:t},oE="http://www.w3.org/2000/svg",ka=typeof document<"u"?document:null,U2=ka&&ka.createElement("template"),lE={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?ka.createElementNS(oE,e):ka.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>ka.createTextNode(e),createComment:e=>ka.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ka.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,s,o,a){const c=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{U2.innerHTML=s?`<svg>${e}</svg>`:e;const f=U2.content;if(s){const m=f.firstChild;for(;m.firstChild;)f.appendChild(m.firstChild);f.removeChild(m)}t.insertBefore(f,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function cE(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function uE(e,t,n){const s=e.style,o=ed(n);if(n&&!o){for(const a in n)nd(s,a,n[a]);if(t&&!ed(t))for(const a in t)n[a]==null&&nd(s,a,"")}else{const a=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=a)}}const D2=/\s*!important$/;function nd(e,t,n){if(sc(n))n.forEach(s=>nd(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=fE(e,t);D2.test(n)?e.setProperty(yo(s),n.replace(D2,""),"important"):e[s]=n}}const $2=["Webkit","Moz","ms"],l0={};function fE(e,t){const n=l0[t];if(n)return n;let s=js(t);if(s!=="filter"&&s in e)return l0[t]=s;s=aE(s);for(let o=0;o<$2.length;o++){const a=$2[o]+s;if(a in e)return l0[t]=a}return t}const q2="http://www.w3.org/1999/xlink";function dE(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(q2,t.slice(6,t.length)):e.setAttributeNS(q2,t,n);else{const a=QA(t);n==null||a&&!Kg(n)?e.removeAttribute(t):e.setAttribute(t,a?"":n)}}function hE(e,t,n,s,o,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,o,a),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const m=n==null?"":n;(e.value!==m||e.tagName==="OPTION")&&(e.value=m),n==null&&e.removeAttribute(t);return}let f=!1;if(n===""||n==null){const m=typeof e[t];m==="boolean"?n=Kg(n):n==null&&m==="string"?(n="",f=!0):m==="number"&&(n=0,f=!0)}try{e[t]=n}catch{}f&&e.removeAttribute(t)}const[Yg,mE]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let rd=0;const vE=Promise.resolve(),_E=()=>{rd=0},pE=()=>rd||(vE.then(_E),rd=Yg());function gE(e,t,n,s){e.addEventListener(t,n,s)}function bE(e,t,n,s){e.removeEventListener(t,n,s)}function yE(e,t,n,s,o=null){const a=e._vei||(e._vei={}),c=a[t];if(s&&c)c.value=s;else{const[f,m]=wE(t);if(s){const d=a[t]=xE(s,o);gE(e,f,d,m)}else c&&(bE(e,f,c,m),a[t]=void 0)}}const V2=/(?:Once|Passive|Capture)$/;function wE(e){let t;if(V2.test(e)){t={};let n;for(;n=e.match(V2);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[yo(e.slice(2)),t]}function xE(e,t){const n=s=>{const o=s.timeStamp||Yg();(mE||o>=n.attached-1)&&es(SE(s,n.value),t,5,[s])};return n.value=e,n.attached=pE(),n}function SE(e,t){if(sc(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const z2=/^on[a-z]/,AE=(e,t,n,s,o=!1,a,c,f,m)=>{t==="class"?cE(e,s,o):t==="style"?uE(e,n,s):eE(t)?tE(t)||yE(e,t,n,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):EE(e,t,s,o))?hE(e,t,s,a,c,f,m):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),dE(e,t,s,o))};function EE(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&z2.test(t)&&nE(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||z2.test(t)&&ed(n)?!1:t in e}function ME(e,t){const n=oA(e);class s extends uh{constructor(a){super(n,a,t)}}return s.def=n,s}const TE=typeof HTMLElement<"u"?HTMLElement:class{};class uh extends TE{constructor(t,n={},s){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&s?s(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,dg(()=>{this._connected||(Q2(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);new MutationObserver(s=>{for(const o of s)this._setAttr(o.attributeName)}).observe(this,{attributes:!0});const t=s=>{const{props:o,styles:a}=s,c=!sc(o),f=o?c?Object.keys(o):o:[];let m;if(c)for(const d in this._props){const p=o[d];(p===Number||p&&p.type===Number)&&(this._props[d]=td(this._props[d]),(m||(m=Object.create(null)))[d]=!0)}this._numberProps=m;for(const d of Object.keys(this))d[0]!=="_"&&this._setProp(d,this[d],!0,!1);for(const d of f.map(j2))Object.defineProperty(this,d,{get(){return this._getProp(d)},set(p){this._setProp(d,p)}});this._applyStyles(a),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=td(n)),this._setProp(j2(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,s=!0,o=!0){n!==this._props[t]&&(this._props[t]=n,o&&this._instance&&this._update(),s&&(n===!0?this.setAttribute(yo(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(yo(t),n+""):n||this.removeAttribute(yo(t))))}_update(){Q2(this._createVNode(),this.shadowRoot)}_createVNode(){const t=rt(this._def,rc({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(o,...a)=>{this.dispatchEvent(new CustomEvent(o,{detail:a}))};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof uh){n.parent=s._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const s=document.createElement("style");s.textContent=n,this.shadowRoot.appendChild(s)})}}const Mi="transition",ol="animation",On=(e,{slots:t})=>WA(Sg,Xg(e),t);On.displayName="Transition";const Wg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},RE=On.props=rc({},Sg.props,Wg),ma=(e,t=[])=>{sc(e)?e.forEach(n=>n(...t)):e&&e(...t)},K2=e=>e?sc(e)?e.some(t=>t.length>1):e.length>1:!1;function Xg(e){const t={};for(const S in e)S in Wg||(t[S]=e[S]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:c=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:m=a,appearActiveClass:d=c,appearToClass:p=f,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:w=`${n}-leave-active`,leaveToClass:M=`${n}-leave-to`}=e,u=kE(o),$=u&&u[0],U=u&&u[1],{onBeforeEnter:D,onEnter:b,onEnterCancelled:C,onLeave:F,onLeaveCancelled:L,onBeforeAppear:V=D,onAppear:v=b,onAppearCancelled:E=C}=t,T=(S,x,k)=>{Li(S,x?p:f),Li(S,x?d:c),k&&k()},y=(S,x)=>{S._isLeaving=!1,Li(S,h),Li(S,M),Li(S,w),x&&x()},A=S=>(x,k)=>{const R=S?v:b,z=()=>T(x,S,k);ma(R,[x,z]),Y2(()=>{Li(x,S?m:a),Zs(x,S?p:f),K2(R)||W2(x,s,$,z)})};return rc(t,{onBeforeEnter(S){ma(D,[S]),Zs(S,a),Zs(S,c)},onBeforeAppear(S){ma(V,[S]),Zs(S,m),Zs(S,d)},onEnter:A(!1),onAppear:A(!0),onLeave(S,x){S._isLeaving=!0;const k=()=>y(S,x);Zs(S,h),Zg(),Zs(S,w),Y2(()=>{!S._isLeaving||(Li(S,h),Zs(S,M),K2(F)||W2(S,s,U,k))}),ma(F,[S,k])},onEnterCancelled(S){T(S,!1),ma(C,[S])},onAppearCancelled(S){T(S,!0),ma(E,[S])},onLeaveCancelled(S){y(S),ma(L,[S])}})}function kE(e){if(e==null)return null;if(rE(e))return[c0(e.enter),c0(e.leave)];{const t=c0(e);return[t,t]}}function c0(e){return td(e)}function Zs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function Li(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Y2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let IE=0;function W2(e,t,n,s){const o=e._endId=++IE,a=()=>{o===e._endId&&s()};if(n)return setTimeout(a,n);const{type:c,timeout:f,propCount:m}=Gg(e,t);if(!c)return s();const d=c+"end";let p=0;const h=()=>{e.removeEventListener(d,w),a()},w=M=>{M.target===e&&++p>=m&&h()};setTimeout(()=>{p<m&&h()},f+1),e.addEventListener(d,w)}function Gg(e,t){const n=window.getComputedStyle(e),s=u=>(n[u]||"").split(", "),o=s(Mi+"Delay"),a=s(Mi+"Duration"),c=X2(o,a),f=s(ol+"Delay"),m=s(ol+"Duration"),d=X2(f,m);let p=null,h=0,w=0;t===Mi?c>0&&(p=Mi,h=c,w=a.length):t===ol?d>0&&(p=ol,h=d,w=m.length):(h=Math.max(c,d),p=h>0?c>d?Mi:ol:null,w=p?p===Mi?a.length:m.length:0);const M=p===Mi&&/\b(transform|all)(,|$)/.test(n[Mi+"Property"]);return{type:p,timeout:h,propCount:w,hasTransform:M}}function X2(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>G2(n)+G2(e[s])))}function G2(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Zg(){return document.body.offsetHeight}const Qg=new WeakMap,Jg=new WeakMap,OE={name:"TransitionGroup",props:rc({},RE,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=qg(),s=xg();let o,a;return Tg(()=>{if(!o.length)return;const c=e.moveClass||`${e.name||"v"}-move`;if(!NE(o[0].el,n.vnode.el,c))return;o.forEach(CE),o.forEach(LE);const f=o.filter(BE);Zg(),f.forEach(m=>{const d=m.el,p=d.style;Zs(d,c),p.transform=p.webkitTransform=p.transitionDuration="";const h=d._moveCb=w=>{w&&w.target!==d||(!w||/transform$/.test(w.propertyName))&&(d.removeEventListener("transitionend",h),d._moveCb=null,Li(d,c))};d.addEventListener("transitionend",h)})}),()=>{const c=Zt(e),f=Xg(c);let m=c.tag||Vt;o=a,a=t.default?nh(t.default()):[];for(let d=0;d<a.length;d++){const p=a[d];p.key!=null&&Vl(p,ql(p,f,s,n))}if(o)for(let d=0;d<o.length;d++){const p=o[d];Vl(p,ql(p,f,s,n)),Qg.set(p,p.el.getBoundingClientRect())}return rt(m,null,a)}}},fh=OE;function CE(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function LE(e){Jg.set(e,e.el.getBoundingClientRect())}function BE(e){const t=Qg.get(e),n=Jg.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${s}px,${o}px)`,a.transitionDuration="0s",e}}function NE(e,t,n){const s=e.cloneNode();e._vtc&&e._vtc.forEach(c=>{c.split(/\s+/).forEach(f=>f&&s.classList.remove(f))}),n.split(/\s+/).forEach(c=>c&&s.classList.add(c)),s.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(s);const{hasTransform:a}=Gg(s);return o.removeChild(s),a}const FE=["ctrl","shift","alt","meta"],PE={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>FE.some(n=>e[`${n}Key`]&&!t.includes(n))},Qr=(e,t)=>(n,...s)=>{for(let o=0;o<t.length;o++){const a=PE[t[o]];if(a&&a(n,t))return}return e(n,...s)},HE={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qs=(e,t)=>n=>{if(!("key"in n))return;const s=yo(n.key);if(t.some(o=>o===s||HE[o]===s))return e(n)},M1={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ll(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),ll(e,!0),s.enter(e)):s.leave(e,()=>{ll(e,!1)}):ll(e,t))},beforeUnmount(e,{value:t}){ll(e,t)}};function ll(e,t){e.style.display=t?e._vod:"none"}const jE=rc({patchProp:AE},lE);let Z2;function UE(){return Z2||(Z2=CA(jE))}const Q2=(...e)=>{UE().render(...e)};var hn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const DE={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},$E=ze("div",{id:"vac-circle"},null,-1),qE=ze("div",{id:"vac-circle"},null,-1),VE=ze("div",{id:"vac-circle"},null,-1),zE=ze("div",{id:"vac-circle"},null,-1),KE=ze("div",{id:"vac-circle"},null,-1),YE=ze("div",{id:"vac-circle"},null,-1);function WE(e,t,n,s,o,a){return xe(),en(On,{name:"vac-fade-spinner",appear:""},{default:mt(()=>[n.show?(xe(),Le("div",{key:0,class:It(["vac-loader-wrapper",{"vac-container-center":!n.infinite,"vac-container-top":n.infinite}])},[n.type==="rooms"?tt(e.$slots,"spinner-icon-rooms",{key:0},()=>[$E]):st("",!0),n.type==="infinite-rooms"?tt(e.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[qE]):st("",!0),n.type==="message-file"?tt(e.$slots,"spinner-icon-message-file_"+n.messageId,{key:2},()=>[VE]):st("",!0),n.type==="room-file"?tt(e.$slots,"spinner-icon-room-file",{key:3},()=>[zE]):st("",!0),n.type==="messages"?tt(e.$slots,"spinner-icon-messages",{key:4},()=>[KE]):st("",!0),n.type==="infinite-messages"?tt(e.$slots,"spinner-icon-infinite-messages",{key:5},()=>[YE]):st("",!0)],2)):st("",!0)]),_:3})}var T1=hn(DE,[["render",WE]]);const XE={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const e=this.param?"-"+this.param:"";return`vac-icon-${this.name}${e}`},size(){const e=this.svgItem[this.name];return e.size==="large"?512:e.size==="medium"?48:24}}},GE=["viewBox"],ZE=["id","d"],QE=["id","d"];function JE(e,t,n,s,o,a){return xe(),Le("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${a.size} ${a.size}`},[ze("path",{id:a.svgId,d:o.svgItem[n.name].path},null,8,ZE),o.svgItem[n.name].path2?(xe(),Le("path",{key:0,id:a.svgId,d:o.svgItem[n.name].path2},null,8,QE)):st("",!0)],8,GE)}var zn=hn(XE,[["render",JE]]);const eM={name:"RoomsSearch",components:{SvgIcon:zn},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},tM={key:0,class:"vac-icon-search"},nM=["placeholder"];function rM(e,t,n,s,o,a){const c=vt("svg-icon");return xe(),Le("div",{class:It({"vac-box-search":a.showSearchBar,"vac-box-empty":!a.showSearchBar})},[n.showSearch?(xe(),Le(Vt,{key:0},[!n.loadingRooms&&n.rooms.length?(xe(),Le("div",tM,[tt(e.$slots,"search-icon",{},()=>[rt(c,{name:"search"})])])):st("",!0),!n.loadingRooms&&n.rooms.length?(xe(),Le("input",{key:1,type:"search",placeholder:n.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=f=>e.$emit("search-room",f))},null,40,nM)):st("",!0)],64)):st("",!0),n.showAddRoom?(xe(),Le("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=f=>e.$emit("add-room"))},[tt(e.$slots,"add-icon",{},()=>[rt(c,{name:"add"})])])):st("",!0)],2)}var sM=hn(eM,[["render",rM]]),Xn={},Po={};Po.__esModule=!0;Po.inherits=iM;function iM(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Object.create(e.prototype);for(var o in n)s[o]=n[o];return s.constructor=t,t.prototype=s,t}var ic={};ic.__esModule=!0;var aM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr={defaultProtocol:"http",events:null,format:J2,formatHref:J2,nl2br:!1,tagName:"a",target:lM,validate:!0,ignoreTags:[],attributes:null,className:"linkified"};ic.defaults=Lr;ic.Options=e3;ic.contains=oM;function e3(e){e=e||{},this.defaultProtocol=e.hasOwnProperty("defaultProtocol")?e.defaultProtocol:Lr.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:Lr.events,this.format=e.hasOwnProperty("format")?e.format:Lr.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:Lr.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:Lr.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:Lr.tagName,this.target=e.hasOwnProperty("target")?e.target:Lr.target,this.validate=e.hasOwnProperty("validate")?e.validate:Lr.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||Lr.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||Lr.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:Lr.ignoreTags,n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}e3.prototype={resolve:function(t){var n=t.toHref(this.defaultProtocol);return{formatted:this.get("format",t.toString(),t),formattedHref:this.get("formatHref",n,t),tagName:this.get("tagName",n,t),className:this.get("className",n,t),target:this.get("target",n,t),events:this.getObject("events",n,t),attributes:this.getObject("attributes",n,t)}},check:function(t){return this.get("validate",t.toString(),t)},get:function(t,n,s){var o=void 0,a=this[t];if(!a)return a;switch(typeof a>"u"?"undefined":aM(a)){case"function":return a(n,s.type);case"object":return o=a.hasOwnProperty(s.type)?a[s.type]:Lr[t],typeof o=="function"?o(n,s.type):o}return a},getObject:function(t,n,s){var o=this[t];return typeof o=="function"?o(n,s.type):o}};function oM(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function J2(e){return e}function lM(e,t){return t==="url"?"_blank":null}var Ps={},si={};si.__esModule=!0;si.stateify=si.TokenState=si.CharacterState=void 0;var t3=Po;function dh(){return function(e){this.j=[],this.T=e||null}}var hh=dh();hh.prototype={defaultTransition:!1,on:function(t,n){if(t instanceof Array){for(var s=0;s<t.length;s++)this.j.push([t[s],n]);return this}return this.j.push([t,n]),this},next:function(t){for(var n=0;n<this.j.length;n++){var s=this.j[n],o=s[0],a=s[1];if(this.test(t,o))return a}return this.defaultTransition},accepts:function(){return!!this.T},test:function(t,n){return t===n},emit:function(){return this.T}};var sd=(0,t3.inherits)(hh,dh(),{test:function(t,n){return t===n||n instanceof RegExp&&n.test(t)}}),cM=(0,t3.inherits)(hh,dh(),{jump:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=this.next(new t(""));return s===this.defaultTransition?(s=new this.constructor(n),this.on(t,s)):n&&(s.T=n),s},test:function(t,n){return t instanceof n}});function uM(e,t,n,s){for(var o=0,a=e.length,c=t,f=[],m=void 0;o<a&&(m=c.next(e[o]));)c=m,o++;if(o>=a)return[];for(;o<a-1;)m=new sd(s),f.push(m),c.on(e[o],m),c=m,o++;return m=new sd(n),f.push(m),c.on(e[a-1],m),f}si.CharacterState=sd;si.TokenState=cM;si.stateify=uM;var ht={},R1={};R1.__esModule=!0;function fM(){return function(e){e&&(this.v=e)}}R1.createTokenClass=fM;ht.__esModule=!0;ht.AMPERSAND=ht.CLOSEPAREN=ht.CLOSEANGLEBRACKET=ht.CLOSEBRACKET=ht.CLOSEBRACE=ht.OPENPAREN=ht.OPENANGLEBRACKET=ht.OPENBRACKET=ht.OPENBRACE=ht.WS=ht.TLD=ht.SYM=ht.UNDERSCORE=ht.SLASH=ht.MAILTO=ht.PROTOCOL=ht.QUERY=ht.POUND=ht.PLUS=ht.NUM=ht.NL=ht.LOCALHOST=ht.PUNCTUATION=ht.DOT=ht.COLON=ht.AT=ht.DOMAIN=ht.Base=void 0;var n3=R1,dM=Po,mh=(0,n3.createTokenClass)();mh.prototype={toString:function(){return this.v+""}};function mn(e){var t=e?{v:e}:{};return(0,dM.inherits)(mh,(0,n3.createTokenClass)(),t)}var hM=mn(),mM=mn("@"),vM=mn(":"),_M=mn("."),pM=mn(),gM=mn(),bM=mn(`
`),yM=mn(),wM=mn("+"),xM=mn("#"),SM=mn(),AM=mn("mailto:"),EM=mn("?"),MM=mn("/"),TM=mn("_"),RM=mn(),kM=mn(),IM=mn(),OM=mn("{"),CM=mn("["),LM=mn("<"),BM=mn("("),NM=mn("}"),FM=mn("]"),PM=mn(">"),HM=mn(")"),jM=mn("&");ht.Base=mh;ht.DOMAIN=hM;ht.AT=mM;ht.COLON=vM;ht.DOT=_M;ht.PUNCTUATION=pM;ht.LOCALHOST=gM;ht.NL=bM;ht.NUM=yM;ht.PLUS=wM;ht.POUND=xM;ht.QUERY=EM;ht.PROTOCOL=SM;ht.MAILTO=AM;ht.SLASH=MM;ht.UNDERSCORE=TM;ht.SYM=RM;ht.TLD=kM;ht.WS=IM;ht.OPENBRACE=OM;ht.OPENBRACKET=CM;ht.OPENANGLEBRACKET=LM;ht.OPENPAREN=BM;ht.CLOSEBRACE=NM;ht.CLOSEBRACKET=FM;ht.CLOSEANGLEBRACKET=PM;ht.CLOSEPAREN=HM;ht.AMPERSAND=jM;Ps.__esModule=!0;Ps.start=Ps.run=Ps.TOKENS=Ps.State=void 0;var Gi=si,Lt=ht,UM=DM(Lt);function DM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var e_="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),vh="0123456789".split(""),k1="0123456789abcdefghijklmnopqrstuvwxyz".split(""),r3=[" ","\f","\r","	","\v","\xA0","\u1680","\u180E"],mr=[],rn=function(t){return new Gi.CharacterState(t)},ns=rn(),id=rn(Lt.NUM),Ro=rn(Lt.DOMAIN),Yl=rn(),ad=rn(Lt.WS);ns.on("@",rn(Lt.AT)).on(".",rn(Lt.DOT)).on("+",rn(Lt.PLUS)).on("#",rn(Lt.POUND)).on("?",rn(Lt.QUERY)).on("/",rn(Lt.SLASH)).on("_",rn(Lt.UNDERSCORE)).on(":",rn(Lt.COLON)).on("{",rn(Lt.OPENBRACE)).on("[",rn(Lt.OPENBRACKET)).on("<",rn(Lt.OPENANGLEBRACKET)).on("(",rn(Lt.OPENPAREN)).on("}",rn(Lt.CLOSEBRACE)).on("]",rn(Lt.CLOSEBRACKET)).on(">",rn(Lt.CLOSEANGLEBRACKET)).on(")",rn(Lt.CLOSEPAREN)).on("&",rn(Lt.AMPERSAND)).on([",",";","!",'"',"'"],rn(Lt.PUNCTUATION));ns.on(`
`,rn(Lt.NL)).on(r3,ad);ad.on(r3,ad);for(var u0=0;u0<e_.length;u0++){var $M=(0,Gi.stateify)(e_[u0],ns,Lt.TLD,Lt.DOMAIN);mr.push.apply(mr,$M)}var s3=(0,Gi.stateify)("file",ns,Lt.DOMAIN,Lt.DOMAIN),i3=(0,Gi.stateify)("ftp",ns,Lt.DOMAIN,Lt.DOMAIN),a3=(0,Gi.stateify)("http",ns,Lt.DOMAIN,Lt.DOMAIN),o3=(0,Gi.stateify)("mailto",ns,Lt.DOMAIN,Lt.DOMAIN);mr.push.apply(mr,s3);mr.push.apply(mr,i3);mr.push.apply(mr,a3);mr.push.apply(mr,o3);var qM=s3.pop(),VM=i3.pop(),zM=a3.pop(),KM=o3.pop(),I1=rn(Lt.DOMAIN),O1=rn(Lt.PROTOCOL),YM=rn(Lt.MAILTO);VM.on("s",I1).on(":",O1);zM.on("s",I1).on(":",O1);mr.push(I1);qM.on(":",O1);I1.on(":",O1);KM.on(":",YM);var WM=(0,Gi.stateify)("localhost",ns,Lt.LOCALHOST,Lt.DOMAIN);mr.push.apply(mr,WM);ns.on(vh,id);id.on("-",Yl).on(vh,id).on(k1,Ro);Ro.on("-",Yl).on(k1,Ro);for(var f0=0;f0<mr.length;f0++)mr[f0].on("-",Yl).on(k1,Ro);Yl.on("-",Yl).on(vh,Ro).on(k1,Ro);ns.defaultTransition=rn(Lt.SYM);var XM=function(t){for(var n=t.replace(/[A-Z]/g,function(w){return w.toLowerCase()}),s=t.length,o=[],a=0;a<s;){for(var c=ns,f=null,m=0,d=null,p=-1;a<s&&(f=c.next(n[a]));)c=f,c.accepts()?(p=0,d=c):p>=0&&p++,m++,a++;if(!(p<0)){a-=p,m-=p;var h=d.emit();o.push(new h(t.substr(a-m,m)))}}return o},GM=ns;Ps.State=Gi.CharacterState;Ps.TOKENS=UM;Ps.run=XM;Ps.start=GM;var Hs={},Sr={};Sr.__esModule=!0;Sr.URL=Sr.TEXT=Sr.NL=Sr.EMAIL=Sr.MAILTOEMAIL=Sr.Base=void 0;var Ho=R1,ac=Po,Ll=ht;function ZM(e){return e instanceof Ll.DOMAIN||e instanceof Ll.TLD}var $a=(0,Ho.createTokenClass)();$a.prototype={type:"token",isLink:!1,toString:function(){for(var t=[],n=0;n<this.v.length;n++)t.push(this.v[n].toString());return t.join("")},toHref:function(){return this.toString()},toObject:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(t)}}};var QM=(0,ac.inherits)($a,(0,Ho.createTokenClass)(),{type:"email",isLink:!0}),JM=(0,ac.inherits)($a,(0,Ho.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),eT=(0,ac.inherits)($a,(0,Ho.createTokenClass)(),{type:"text"}),tT=(0,ac.inherits)($a,(0,Ho.createTokenClass)(),{type:"nl"}),nT=(0,ac.inherits)($a,(0,Ho.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",n=!1,s=!1,o=this.v,a=[],c=0;o[c]instanceof Ll.PROTOCOL;)n=!0,a.push(o[c].toString().toLowerCase()),c++;for(;o[c]instanceof Ll.SLASH;)s=!0,a.push(o[c].toString()),c++;for(;ZM(o[c]);)a.push(o[c].toString().toLowerCase()),c++;for(;c<o.length;c++)a.push(o[c].toString());return a=a.join(""),n||s||(a=t+"://"+a),a},hasProtocol:function(){return this.v[0]instanceof Ll.PROTOCOL}});Sr.Base=$a;Sr.MAILTOEMAIL=QM;Sr.EMAIL=JM;Sr.NL=tT;Sr.TEXT=eT;Sr.URL=nT;Hs.__esModule=!0;Hs.start=Hs.run=Hs.TOKENS=Hs.State=void 0;var l3=si,Ar=Sr,rT=sT(Ar),Ge=ht;function sT(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var Ut=function(t){return new l3.TokenState(t)},C1=Ut(),c3=Ut(),u3=Ut(),_h=Ut(),f3=Ut(),qi=Ut(),L1=Ut(),oc=Ut(Ar.URL),d3=Ut(),h3=Ut(Ar.URL),xn=Ut(Ar.URL),Wl=Ut(),lc=Ut(),cc=Ut(),uc=Ut(),fc=Ut(),Pa=Ut(Ar.URL),Ha=Ut(Ar.URL),ja=Ut(Ar.URL),Ua=Ut(Ar.URL),Xl=Ut(),Gl=Ut(),Zl=Ut(),Ql=Ut(),wo=Ut(),ph=Ut(),B1=Ut(Ar.EMAIL),m3=Ut(),iT=Ut(Ar.EMAIL),Ca=Ut(Ar.MAILTOEMAIL),od=Ut(),ko=Ut(),N1=Ut(),v3=Ut(),aT=Ut(Ar.NL);C1.on(Ge.NL,aT).on(Ge.PROTOCOL,c3).on(Ge.MAILTO,u3).on(Ge.SLASH,_h);c3.on(Ge.SLASH,_h);_h.on(Ge.SLASH,f3);C1.on(Ge.TLD,qi).on(Ge.DOMAIN,qi).on(Ge.LOCALHOST,oc).on(Ge.NUM,qi);f3.on(Ge.TLD,xn).on(Ge.DOMAIN,xn).on(Ge.NUM,xn).on(Ge.LOCALHOST,xn);qi.on(Ge.DOT,L1);wo.on(Ge.DOT,ph);L1.on(Ge.TLD,oc).on(Ge.DOMAIN,qi).on(Ge.NUM,qi).on(Ge.LOCALHOST,qi);ph.on(Ge.TLD,B1).on(Ge.DOMAIN,wo).on(Ge.NUM,wo).on(Ge.LOCALHOST,wo);oc.on(Ge.DOT,L1);B1.on(Ge.DOT,ph);oc.on(Ge.COLON,d3).on(Ge.SLASH,xn);d3.on(Ge.NUM,h3);h3.on(Ge.SLASH,xn);B1.on(Ge.COLON,m3);m3.on(Ge.NUM,iT);var er=[Ge.DOMAIN,Ge.AT,Ge.LOCALHOST,Ge.NUM,Ge.PLUS,Ge.POUND,Ge.PROTOCOL,Ge.SLASH,Ge.TLD,Ge.UNDERSCORE,Ge.SYM,Ge.AMPERSAND],tr=[Ge.COLON,Ge.DOT,Ge.QUERY,Ge.PUNCTUATION,Ge.CLOSEBRACE,Ge.CLOSEBRACKET,Ge.CLOSEANGLEBRACKET,Ge.CLOSEPAREN,Ge.OPENBRACE,Ge.OPENBRACKET,Ge.OPENANGLEBRACKET,Ge.OPENPAREN];xn.on(Ge.OPENBRACE,lc).on(Ge.OPENBRACKET,cc).on(Ge.OPENANGLEBRACKET,uc).on(Ge.OPENPAREN,fc);Wl.on(Ge.OPENBRACE,lc).on(Ge.OPENBRACKET,cc).on(Ge.OPENANGLEBRACKET,uc).on(Ge.OPENPAREN,fc);lc.on(Ge.CLOSEBRACE,xn);cc.on(Ge.CLOSEBRACKET,xn);uc.on(Ge.CLOSEANGLEBRACKET,xn);fc.on(Ge.CLOSEPAREN,xn);Pa.on(Ge.CLOSEBRACE,xn);Ha.on(Ge.CLOSEBRACKET,xn);ja.on(Ge.CLOSEANGLEBRACKET,xn);Ua.on(Ge.CLOSEPAREN,xn);Xl.on(Ge.CLOSEBRACE,xn);Gl.on(Ge.CLOSEBRACKET,xn);Zl.on(Ge.CLOSEANGLEBRACKET,xn);Ql.on(Ge.CLOSEPAREN,xn);lc.on(er,Pa);cc.on(er,Ha);uc.on(er,ja);fc.on(er,Ua);lc.on(tr,Xl);cc.on(tr,Gl);uc.on(tr,Zl);fc.on(tr,Ql);Pa.on(er,Pa);Ha.on(er,Ha);ja.on(er,ja);Ua.on(er,Ua);Pa.on(tr,Pa);Ha.on(tr,Ha);ja.on(tr,ja);Ua.on(tr,Ua);Xl.on(er,Pa);Gl.on(er,Ha);Zl.on(er,ja);Ql.on(er,Ua);Xl.on(tr,Xl);Gl.on(tr,Gl);Zl.on(tr,Zl);Ql.on(tr,Ql);xn.on(er,xn);Wl.on(er,xn);xn.on(tr,Wl);Wl.on(tr,Wl);u3.on(Ge.TLD,Ca).on(Ge.DOMAIN,Ca).on(Ge.NUM,Ca).on(Ge.LOCALHOST,Ca);Ca.on(er,Ca).on(tr,od);od.on(er,Ca).on(tr,od);var dc=[Ge.DOMAIN,Ge.NUM,Ge.PLUS,Ge.POUND,Ge.QUERY,Ge.UNDERSCORE,Ge.SYM,Ge.AMPERSAND,Ge.TLD];qi.on(dc,ko).on(Ge.AT,N1);oc.on(dc,ko).on(Ge.AT,N1);L1.on(dc,ko);ko.on(dc,ko).on(Ge.AT,N1).on(Ge.DOT,v3);v3.on(dc,ko);N1.on(Ge.TLD,wo).on(Ge.DOMAIN,wo).on(Ge.LOCALHOST,B1);var oT=function(t){for(var n=t.length,s=0,o=[],a=[];s<n;){for(var c=C1,f=null,m=null,d=0,p=null,h=-1;s<n&&!(f=c.next(t[s]));)a.push(t[s++]);for(;s<n&&(m=f||c.next(t[s]));)f=null,c=m,c.accepts()?(h=0,p=c):h>=0&&h++,s++,d++;if(h<0)for(var w=s-d;w<s;w++)a.push(t[w]);else{a.length>0&&(o.push(new Ar.TEXT(a)),a=[]),s-=h,d-=h;var M=p.emit();o.push(new M(t.slice(s-d,s)))}}return a.length>0&&o.push(new Ar.TEXT(a)),o};Hs.State=l3.TokenState;Hs.TOKENS=rT;Hs.run=oT;Hs.start=C1;Xn.__esModule=!0;Xn.tokenize=Xn.test=Xn.scanner=Xn.parser=Xn.options=Xn.inherits=Xn.find=void 0;var lT=Po,cT=ic,uT=gh(cT),fT=Ps,_3=gh(fT),dT=Hs,p3=gh(dT);function gh(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"});var bh=function(t){return p3.run(_3.run(t))},hT=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=bh(t),o=[],a=0;a<s.length;a++){var c=s[a];c.isLink&&(!n||c.type===n)&&o.push(c.toObject())}return o},mT=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=bh(t);return s.length===1&&s[0].isLink&&(!n||s[0].type===n)};Xn.find=hT;Xn.inherits=lT.inherits;Xn.options=uT;Xn.parser=p3;Xn.scanner=_3;Xn.test=mT;Xn.tokenize=bh;var g3=Xn,vT=(e,t,n)=>{const s={bold:n.bold,italic:n.italic,strike:n.strike,underline:n.underline,multilineCode:n.multilineCode,inlineCode:n.inlineCode},o={[s.bold]:{end:"\\"+s.bold,allowed_chars:".",type:"bold"},[s.italic]:{end:s.italic,allowed_chars:".",type:"italic"},[s.strike]:{end:s.strike,allowed_chars:".",type:"strike"},[s.underline]:{end:s.underline,allowed_chars:".",type:"underline"},[s.multilineCode]:{end:s.multilineCode,allowed_chars:`(.|
)`,type:"multiline-code"},[s.inlineCode]:{end:s.inlineCode,allowed_chars:".",type:"inline-code"},"<usertag>":{allowed_chars:".",end:"</usertag>",type:"tag"}},a=Hu(e,o),c=_T(a,o),f=[].concat.apply([],c);return t&&gT(f),f};function Hu(e,t){let n=[],s=-1,o=null,a=g3.find(e),c=!1;if(a.length>0&&(s=e.indexOf(a[0].value),c=!0),Object.keys(t).forEach(f=>{const m=e.indexOf(f);m>=0&&(s<0||m<s)&&(s=m,o=f,c=!1)}),c&&o!==-1){let f=e.substr(0,s),m=e.substr(s,a[0].value.length),d=e.substr(s+a[0].value.length);return n.push(f),n.push(m),n=n.concat(Hu(d,t)),n}if(o){let f=e.substr(0,s);const m=o;let d=e.substr(s+m.length);if(e.replace(/\s/g,"").length===m.length*2)return[e];const p=d.match(new RegExp("^("+(t[m].allowed_chars||".")+"*"+(t[m].end?"?":"")+")"+(t[m].end?"("+t[m].end+")":""),"m"));if(!p||!p[1])f=f+m,n.push(f);else{f&&n.push(f);const h={start:m,content:Hu(p[1],t),end:p[2],type:t[m].type};n.push(h),d=d.substr(p[0].length)}return n=n.concat(Hu(d,t)),n}else return e?[e]:[]}function _T(e,t){const n=[];return e.forEach(s=>{typeof s=="string"?n.push({types:[],value:s}):t[s.start]&&n.push(pT(s))}),n}function pT(e){const t=[];return b3(e,t,[]),t}function b3(e,t,n){e.content.forEach(s=>{typeof s=="string"?t.push({types:t_(n.concat([e.type])),value:s}):b3(s,t,t_([s.type].concat([e.type]).concat(n)))})}function t_(e){return[...new Set(e)]}function gT(e){const t=[];return e.forEach(n=>{const s=g3.find(n.value);if(s.length){const o=n.value.replace(s[0].value,"");t.push({types:n.types,value:o}),n.types=["url"].concat(n.types),n.href=s[0].href,n.value=s[0].value}t.push(n)}),t}const yh=["png","jpg","jpeg","webp","svg","gif"],y3=["mp4","video/ogg","webm","quicktime"],bT=["mp3","audio/ogg","wav","mpeg"],yT={name:"FormatMessage",components:{SvgIcon:zn},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{linkifiedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];const e=vT(this.formatTags(this.content),this.linkify&&!this.linkOptions.disabled,this.textFormatting);return e.forEach(t=>{t.url=this.checkType(t,"url"),t.bold=this.checkType(t,"bold"),t.italic=this.checkType(t,"italic"),t.strike=this.checkType(t,"strike"),t.underline=this.checkType(t,"underline"),t.inline=this.checkType(t,"inline-code"),t.multiline=this.checkType(t,"multiline-code"),t.tag=this.checkType(t,"tag"),t.image=this.checkImageType(t),t.value=this.replaceEmojiByElement(t.value)}),e},formattedContent(){return this.deleted?this.textMessages.MESSAGE_DELETED:this.formatTags(this.content)}},methods:{checkType(e,t){return e.types&&e.types.indexOf(t)!==-1},checkImageType(e){let t=e.value.lastIndexOf(".");e.value.lastIndexOf("/")>t&&(t=-1);const s=e.value.substring(t+1,e.value.length),o=t>0&&yh.some(a=>s.toLowerCase().includes(a));return o&&this.setImageSize(e),o},setImageSize(e){const t=new Image;t.src=e.value,t.addEventListener("load",n);function n(s){const o=s.path[0].width/150;e.height=Math.round(s.path[0].height/o)+"px",t.removeEventListener("load",n)}},formatTags(e){const t="<usertag>",n="</usertag>",s=[...e.matchAll(new RegExp(t,"gi"))].map(a=>a.index),o=e;return s.forEach(a=>{const c=o.substring(a+t.length,o.indexOf(n,a)),f=this.users.find(m=>m._id===c);e=e.replaceAll(c,`@${(f==null?void 0:f.username)||"unknown"}`)}),e},openTag(e){if(!this.singleLine&&this.checkType(e,"tag")){const t=this.users.find(n=>e.value.indexOf(n.username)!==-1);this.$emit("open-user-tag",t)}},replaceEmojiByElement(e){let t;return this.singleLine?t=16:t=this.containsOnlyEmojis()?28:20,e.replaceAll(/[\p{Extended_Pictographic}\u{1F3FB}-\u{1F3FF}\u{1F9B0}-\u{1F9B3}]/gu,n=>`<span style="font-size: ${t}px">${n}</span>`)},containsOnlyEmojis(){const e=this.content.replace(new RegExp("[\0-\u1EEFf]","g"),""),t=this.content.replace(new RegExp(`[
\rs]+|( )+`,"g"),"");return e.length===t.length}}},wT={class:"vac-image-link-container"},xT={class:"vac-image-link-message"},ST=["innerHTML"],AT=["innerHTML"];function ET(e,t,n,s,o,a){const c=vt("svg-icon");return xe(),Le("div",{class:It(["vac-format-message-wrapper",{"vac-text-ellipsis":n.singleLine}])},[n.textFormatting.disabled?(xe(),Le("div",{key:1,innerHTML:a.formattedContent},null,8,AT)):(xe(),Le("div",{key:0,class:It({"vac-text-ellipsis":n.singleLine})},[(xe(!0),Le(Vt,null,Tt(a.linkifiedMessage,(f,m)=>(xe(),Le("div",{key:m,class:"vac-format-container"},[(xe(),en(gA(f.url?"a":"span"),{class:It({"vac-text-ellipsis":n.singleLine,"vac-text-bold":f.bold,"vac-text-italic":n.deleted||f.italic,"vac-text-strike":f.strike,"vac-text-underline":f.underline,"vac-text-inline-code":!n.singleLine&&f.inline,"vac-text-multiline-code":!n.singleLine&&f.multiline,"vac-text-tag":!n.singleLine&&!n.reply&&f.tag}),href:f.href,target:f.href?n.linkOptions.target:null,rel:f.href?n.linkOptions.rel:null,onClick:d=>a.openTag(f)},{default:mt(()=>[n.deleted?(xe(),Le(Vt,{key:0},[tt(e.$slots,n.roomList?"deleted-icon-room_"+n.roomId:"deleted-icon_"+n.messageId,{},()=>[rt(c,{name:"deleted",class:It(["vac-icon-deleted",{"vac-icon-deleted-room":n.roomList}])},null,8,["class"])]),Xi(" "+xt(n.textMessages.MESSAGE_DELETED),1)],64)):f.url&&f.image?(xe(),Le(Vt,{key:1},[ze("div",wT,[ze("div",{class:"vac-image-link",style:Wt({"background-image":`url('${f.value}')`,height:f.height})},null,4)]),ze("div",xT,[ze("span",null,xt(f.value),1)])],64)):(xe(),Le("span",{key:2,innerHTML:f.value},null,8,ST))]),_:2},1032,["class","href","target","rel","onClick"]))]))),128))],2))],2)}var hc=hn(yT,[["render",ET]]);const Ia="__v-click-outside",w3=typeof window<"u",MT=typeof navigator<"u",TT=w3&&("ontouchstart"in window||MT&&navigator.msMaxTouchPoints>0),RT=TT?["touchstart"]:["click"],kT=e=>{const t=typeof e=="function";if(!t&&typeof e!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||(n=>n),events:e.events||RT,isActive:e.isActive!==!1,detectIframe:e.detectIframe!==!1,capture:Boolean(e.capture)}},x3=({event:e,handler:t,middleware:n})=>{n(e)&&t(e)},IT=({el:e,event:t,handler:n,middleware:s})=>{setTimeout(()=>{const{activeElement:o}=document;o&&o.tagName==="IFRAME"&&!e.contains(o)&&x3({event:t,handler:n,middleware:s})},0)},OT=({el:e,event:t,handler:n,middleware:s})=>{const o=t.path||t.composedPath&&t.composedPath();(o?o.indexOf(e)<0:!e.contains(t.target))&&x3({event:t,handler:n,middleware:s})},S3=(e,{value:t})=>{const{events:n,handler:s,middleware:o,isActive:a,detectIframe:c,capture:f}=kT(t);if(!!a){if(e[Ia]=n.map(m=>({event:m,srcTarget:document.documentElement,handler:d=>OT({el:e,event:d,handler:s,middleware:o}),capture:f})),c){const m={event:"blur",srcTarget:window,handler:d=>IT({el:e,event:d,handler:s,middleware:o}),capture:f};e[Ia]=[...e[Ia],m]}e[Ia].forEach(({event:m,srcTarget:d,handler:p})=>setTimeout(()=>{!e[Ia]||d.addEventListener(m,p,f)},0))}},A3=e=>{(e[Ia]||[]).forEach(({event:n,srcTarget:s,handler:o,capture:a})=>s.removeEventListener(n,o,a)),delete e[Ia]},CT=(e,{value:t,oldValue:n})=>{JSON.stringify(t)!==JSON.stringify(n)&&(A3(e),S3(e,{value:t}))},LT={beforeMount:S3,updated:CT,unmounted:A3};var F1=w3?LT:{},E3=(e,t,n)=>{if(e.typingUsers&&e.typingUsers.length){const s=e.users.filter(o=>{if(o._id!==t&&e.typingUsers.indexOf(o._id)!==-1&&!(o.status&&o.status.state==="offline"))return!0});return s.length?e.users.length===2?n.IS_TYPING:s.map(o=>o.username).join(", ")+" "+n.IS_TYPING:void 0}};function Jl(e,t){if(!(!t||!t.type))return e.some(n=>t.type.toLowerCase().includes(n))}function Io(e){return Jl(yh,e)}function mc(e){return Jl(y3,e)}function n_(e){return Jl(yh,e)||Jl(y3,e)}function P1(e){return Jl(bT,e)}const BT={name:"RoomsContent",components:{SvgIcon:zn,FormatMessage:hc},directives:{clickOutside:F1},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null}},computed:{getLastMessage(){const e=this.typingUsers;if(e)return e;const t=this.room.lastMessage.content;if(this.room.users.length<=2)return t;const n=this.room.users.find(s=>s._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${t}`:!n||n._id===this.currentUserId?t:`${n.username} - ${t}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(t=>t._id!==this.currentUserId);return e&&e.status?e.status.state:null},typingUsers(){return E3(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var e,t;const n=(t=(e=this.room.lastMessage)==null?void 0:e.files)==null?void 0:t[0];if(n){if(!n.duration)return`${n.name}.${n.extension}`;let s=Math.floor(n.duration);return(s-(s%=60))/60+(s>9?":":":0")+s}return""},isAudio(){return this.room.lastMessage.files?P1(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(e){this.closeRoomMenu(),this.$emit("room-action-handler",{action:e,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},NT={class:"vac-room-container"},FT={class:"vac-name-container vac-text-ellipsis"},PT={class:"vac-title-container"},HT={class:"vac-room-name vac-text-ellipsis"},jT={key:1,class:"vac-text-date"},UT={key:0},DT={key:1,class:"vac-text-ellipsis"},$T={key:3,class:"vac-text-ellipsis"},qT={class:"vac-room-options-container"},VT={key:0,class:"vac-badge-counter vac-room-badge"},zT={key:0,class:"vac-menu-options"},KT={class:"vac-menu-list"},YT=["onClick"];function WT(e,t,n,s,o,a){const c=vt("svg-icon"),f=vt("format-message"),m=S1("click-outside");return xe(),Le("div",NT,[tt(e.$slots,"room-list-item_"+n.room.roomId,{},()=>[tt(e.$slots,"room-list-avatar_"+n.room.roomId,{},()=>[n.room.avatar?(xe(),Le("div",{key:0,class:"vac-avatar",style:Wt({"background-image":`url('${n.room.avatar}')`})},null,4)):st("",!0)]),ze("div",FT,[ze("div",PT,[a.userStatus?(xe(),Le("div",{key:0,class:It(["vac-state-circle",{"vac-state-online":a.userStatus==="online"}])},null,2)):st("",!0),ze("div",HT,xt(n.room.roomName),1),n.room.lastMessage?(xe(),Le("div",jT,xt(n.room.lastMessage.timestamp),1)):st("",!0)]),ze("div",{class:It(["vac-text-last",{"vac-message-new":n.room.lastMessage&&n.room.lastMessage.new&&!a.typingUsers}])},[a.isMessageCheckmarkVisible?(xe(),Le("span",UT,[tt(e.$slots,"checkmark-icon_"+n.room.roomId,{},()=>[rt(c,{name:n.room.lastMessage.distributed?"double-checkmark":"checkmark",param:n.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):st("",!0),n.room.lastMessage&&!n.room.lastMessage.deleted&&a.isAudio?(xe(),Le("div",DT,[tt(e.$slots,"microphone-icon_"+n.room.roomId,{},()=>[rt(c,{name:"microphone",class:"vac-icon-microphone"})]),Xi(" "+xt(a.formattedDuration),1)])):n.room.lastMessage?(xe(),en(f,{key:2,"message-id":n.room.lastMessage._id,"room-id":n.room.roomId,"room-list":!0,content:a.getLastMessage,deleted:!!n.room.lastMessage.deleted&&!a.typingUsers,users:n.room.users,"text-messages":n.textMessages,linkify:!1,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"single-line":!0},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):st("",!0),!n.room.lastMessage&&a.typingUsers?(xe(),Le("div",$T,xt(a.typingUsers),1)):st("",!0),ze("div",qT,[n.room.unreadCount?(xe(),Le("div",VT,xt(n.room.unreadCount),1)):st("",!0),tt(e.$slots,"room-list-options_"+n.room.roomId,{},()=>[n.roomActions.length?(xe(),Le("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=Qr(d=>o.roomMenuOpened=n.room.roomId,["stop"]))},[tt(e.$slots,"room-list-options-icon_"+n.room.roomId,{},()=>[rt(c,{name:"dropdown",param:"room"})])])):st("",!0),n.roomActions.length?(xe(),en(On,{key:1,name:"vac-slide-left"},{default:mt(()=>[o.roomMenuOpened===n.room.roomId?oi((xe(),Le("div",zT,[ze("div",KT,[(xe(!0),Le(Vt,null,Tt(n.roomActions,d=>(xe(),Le("div",{key:d.name},[ze("div",{class:"vac-menu-item",onClick:Qr(p=>a.roomActionHandler(d),["stop"])},xt(d.title),9,YT)]))),128))])])),[[m,a.closeRoomMenu]]):st("",!0)]),_:1})):st("",!0)])])],2)])])])}var XT=hn(BT,[["render",WT]]),ld=(e,t,n,s=!1)=>!n||n===""?e:e.filter(o=>s?gu(o[t]).startsWith(gu(n)):gu(o[t]).includes(gu(n)));function gu(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const GT={name:"RoomsList",components:{Loader:T1,RoomsSearch:sM,RoomContent:XT},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler(e,t){this.filteredRooms=e,(e.length!==t.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms(e){e||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(e){this.$emit("loading-more-rooms",e)},roomsLoaded:{immediate:!0,handler(e){e&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(e){e&&!this.isMobile&&(this.selectedRoomId=e.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("infinite-loader-rooms");if(e){const t={root:document.querySelector("vue-advanced-chat").shadowRoot.getElementById("rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreRooms()},t),this.observer.observe(e)}},searchRoom(e){this.customSearchRoomEnabled?this.$emit("search-room",e.target.value):this.filteredRooms=ld(this.rooms,"roomName",e.target.value)},openRoom(e){e.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=e.roomId),this.$emit("fetch-room",{room:e}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},ZT={key:0,class:"vac-rooms-empty"},QT={key:1,id:"rooms-list",class:"vac-room-list"},JT=["id","onClick"],eR={key:0,id:"infinite-loader-rooms"};function tR(e,t,n,s,o,a){const c=vt("rooms-search"),f=vt("loader"),m=vt("room-content");return oi((xe(),Le("div",{class:It(["vac-rooms-container",{"vac-rooms-container-full":n.isMobile,"vac-app-border-r":!n.isMobile}])},[tt(e.$slots,"rooms-header"),tt(e.$slots,"rooms-list-search",{},()=>[rt(c,{rooms:n.rooms,"loading-rooms":n.loadingRooms,"text-messages":n.textMessages,"show-search":n.showSearch,"show-add-room":n.showAddRoom,onSearchRoom:a.searchRoom,onAddRoom:t[0]||(t[0]=d=>e.$emit("add-room"))},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),rt(f,{show:n.loadingRooms,type:"rooms"},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["show"]),!n.loadingRooms&&!n.rooms.length?(xe(),Le("div",ZT,[tt(e.$slots,"rooms-empty",{},()=>[Xi(xt(n.textMessages.ROOMS_EMPTY),1)])])):st("",!0),n.loadingRooms?st("",!0):(xe(),Le("div",QT,[(xe(!0),Le(Vt,null,Tt(o.filteredRooms,d=>(xe(),Le("div",{id:d.roomId,key:d.roomId,class:It(["vac-room-item",{"vac-room-selected":o.selectedRoomId===d.roomId}]),onClick:p=>a.openRoom(d)},[rt(m,{"current-user-id":n.currentUserId,room:d,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"text-messages":n.textMessages,"room-actions":n.roomActions,onRoomActionHandler:t[1]||(t[1]=p=>e.$emit("room-action-handler",p))},an({_:2},[Tt(e.$slots,(p,h)=>({name:h,fn:mt(w=>[tt(e.$slots,h,sn(Jt(w)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,JT))),128)),rt(On,{name:"vac-fade-message"},{default:mt(()=>[n.rooms.length&&!n.loadingRooms?(xe(),Le("div",eR,[rt(f,{show:o.showLoader,infinite:!0,type:"infinite-rooms"},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["show"])])):st("",!0)]),_:3})]))],2)),[[M1,n.showRoomsList]])}var nR=hn(GT,[["render",tR]]);const rR={name:"RoomHeader",components:{SvgIcon:zn},directives:{clickOutside:F1},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers(){return E3(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(n=>n._id!==this.currentUserId);if(!e.status)return;let t="";return e.status.state==="online"?t=this.textMessages.IS_ONLINE:e.status.lastChanged&&(t=this.textMessages.LAST_SEEN+e.status.lastChanged),t}},watch:{messageSelectionEnabled(e){e?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(e){this.closeMenu(),this.$emit("menu-action-handler",e)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",e)}}},sR={class:"vac-room-header vac-app-border-b"},iR={class:"vac-room-wrapper"},aR={key:0,class:"vac-room-selection"},oR=["id"],lR=["onClick"],cR={class:"vac-selection-button-count"},uR={class:"vac-text-ellipsis"},fR={class:"vac-room-name vac-text-ellipsis"},dR={key:0,class:"vac-room-info vac-text-ellipsis"},hR={key:1,class:"vac-room-info vac-text-ellipsis"},mR={key:0,class:"vac-menu-options"},vR={class:"vac-menu-list"},_R=["onClick"];function pR(e,t,n,s,o,a){const c=vt("svg-icon"),f=S1("click-outside");return xe(),Le("div",sR,[tt(e.$slots,"room-header",{},()=>[ze("div",iR,[rt(On,{name:"vac-slide-up"},{default:mt(()=>[n.messageSelectionEnabled?(xe(),Le("div",aR,[(xe(!0),Le(Vt,null,Tt(n.messageSelectionActions,m=>(xe(),Le("div",{id:m.name,key:m.name},[ze("div",{class:"vac-selection-button",onClick:d=>a.messageSelectionActionHandler(m)},[Xi(xt(m.title)+" ",1),ze("span",cR,xt(n.selectedMessagesTotal),1)],8,lR)],8,oR))),128)),ze("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=m=>e.$emit("cancel-message-selection"))},xt(n.textMessages.CANCEL_SELECT_MESSAGE),1)])):st("",!0)]),_:1}),!n.messageSelectionEnabled&&o.messageSelectionAnimationEnded?(xe(),Le(Vt,{key:0},[n.singleRoom?st("",!0):(xe(),Le("div",{key:0,class:It(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!n.isMobile,"vac-rotate-icon":!n.showRoomsList&&!n.isMobile}]),onClick:t[1]||(t[1]=m=>e.$emit("toggle-rooms-list"))},[tt(e.$slots,"toggle-icon",{},()=>[rt(c,{name:"toggle"})])],2)),ze("div",{class:It(["vac-info-wrapper",{"vac-item-clickable":n.roomInfoEnabled}]),onClick:t[2]||(t[2]=m=>e.$emit("room-info"))},[tt(e.$slots,"room-header-avatar",{},()=>[n.room.avatar?(xe(),Le("div",{key:0,class:"vac-avatar",style:Wt({"background-image":`url('${n.room.avatar}')`})},null,4)):st("",!0)]),tt(e.$slots,"room-header-info",{},()=>[ze("div",uR,[ze("div",fR,xt(n.room.roomName),1),a.typingUsers?(xe(),Le("div",dR,xt(a.typingUsers),1)):(xe(),Le("div",hR,xt(a.userStatus),1))])])],2),n.room.roomId?tt(e.$slots,"room-options",{key:1},()=>[n.menuActions.length?(xe(),Le("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=m=>o.menuOpened=!o.menuOpened)},[tt(e.$slots,"menu-icon",{},()=>[rt(c,{name:"menu"})])])):st("",!0),n.menuActions.length?(xe(),en(On,{key:1,name:"vac-slide-left"},{default:mt(()=>[o.menuOpened?oi((xe(),Le("div",mR,[ze("div",vR,[(xe(!0),Le(Vt,null,Tt(n.menuActions,m=>(xe(),Le("div",{key:m.name},[ze("div",{class:"vac-menu-item",onClick:d=>a.menuActionHandler(m)},xt(m.title),9,_R)]))),128))])])),[[f,a.closeMenu]]):st("",!0)]),_:1})):st("",!0)]):st("",!0)],64)):st("",!0)])])])}var gR=hn(rR,[["render",pR]]);function bu(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function d0(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}const bR=1,yR=1,qa="emoji",Oo="keyvalue",wh="favorites",wR="tokens",M3="tokens",xR="unicode",T3="count",SR="group",AR="order",R3="group-order",cd="eTag",Zu="url",r_="skinTone",jo="readonly",xh="readwrite",k3="skinUnicodes",ER="skinUnicodes",MR="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",TR="en";function RR(e,t){const n=new Set,s=[];for(const o of e){const a=t(o);n.has(a)||(n.add(a),s.push(o))}return s}function s_(e){return RR(e,t=>t.unicode)}function kR(e){function t(n,s,o){const a=s?e.createObjectStore(n,{keyPath:s}):e.createObjectStore(n);if(o)for(const[c,[f,m]]of Object.entries(o))a.createIndex(c,f,{multiEntry:m});return a}t(Oo),t(qa,xR,{[M3]:[wR,!0],[R3]:[[SR,AR]],[k3]:[ER,!0]}),t(wh,void 0,{[T3]:[""]})}const ud={},ju={},Qu={};function I3(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function IR(e){const t=await new Promise((n,s)=>{const o=indexedDB.open(e,bR);ud[e]=o,o.onupgradeneeded=a=>{a.oldVersion<yR&&kR(o.result)},I3(n,s,o)});return t.onclose=()=>Sh(e),t}function OR(e){return ju[e]||(ju[e]=IR(e)),ju[e]}function fi(e,t,n,s){return new Promise((o,a)=>{const c=e.transaction(t,n,{durability:"relaxed"}),f=typeof t=="string"?c.objectStore(t):t.map(d=>c.objectStore(d));let m;s(f,c,d=>{m=d}),c.oncomplete=()=>o(m),c.onerror=()=>a(c.error)})}function Sh(e){const t=ud[e],n=t&&t.result;if(n){n.close();const s=Qu[e];if(s)for(const o of s)o()}delete ud[e],delete ju[e],delete Qu[e]}function CR(e){return new Promise((t,n)=>{Sh(e);const s=indexedDB.deleteDatabase(e);I3(t,n,s)})}function LR(e,t){let n=Qu[e];n||(n=Qu[e]=[]),n.push(t)}const BR=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function xo(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||BR.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}const NR=2;function O3(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=NR)}function FR(e){return e.map(({annotation:n,emoticon:s,group:o,order:a,shortcodes:c,skins:f,tags:m,emoji:d,version:p})=>{const h=[...new Set(O3([...(c||[]).map(xo).flat(),...m.map(xo).flat(),...xo(n),s]))].sort(),w={annotation:n,group:o,order:a,tags:m,tokens:h,unicode:d,version:p};if(s&&(w.emoticon=s),c&&(w.shortcodes=c),f){w.skinTones=[],w.skinUnicodes=[],w.skinVersions=[];for(const{tone:M,emoji:u,version:$}of f)w.skinTones.push(M),w.skinUnicodes.push(u),w.skinVersions.push($)}return w})}function C3(e,t,n,s){e[t](n).onsuccess=o=>s&&s(o.target.result)}function Da(e,t,n){C3(e,"get",t,n)}function L3(e,t,n){C3(e,"getAll",t,n)}function Ah(e){e.commit&&e.commit()}function PR(e,t){let n=e[0];for(let s=1;s<e.length;s++){const o=e[s];t(n)>t(o)&&(n=o)}return n}function B3(e,t){const n=PR(e,o=>o.length),s=[];for(const o of n)e.some(a=>a.findIndex(c=>t(c)===t(o))===-1)||s.push(o);return s}async function HR(e){return!await Eh(e,Oo,Zu)}async function jR(e,t,n){const[s,o]=await Promise.all([cd,Zu].map(a=>Eh(e,Oo,a)));return s===n&&o===t}async function UR(e,t){return fi(e,qa,jo,(s,o,a)=>{let c;const f=()=>{s.getAll(c&&IDBKeyRange.lowerBound(c,!0),50).onsuccess=m=>{const d=m.target.result;for(const p of d)if(c=p.unicode,t(p))return a(p);if(d.length<50)return a();f()}};f()})}async function N3(e,t,n,s){try{const o=FR(t);await fi(e,[qa,Oo],xh,([a,c],f)=>{let m,d,p=0;function h(){++p===2&&w()}function w(){if(!(m===s&&d===n)){a.clear();for(const M of o)a.put(M);c.put(s,cd),c.put(n,Zu),Ah(f)}}Da(c,cd,M=>{m=M,h()}),Da(c,Zu,M=>{d=M,h()})})}finally{}}async function DR(e,t){return fi(e,qa,jo,(n,s,o)=>{const a=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);L3(n.index(R3),a,o)})}async function F3(e,t){const n=O3(xo(t));return n.length?fi(e,qa,jo,(s,o,a)=>{const c=[],f=()=>{c.length===n.length&&m()},m=()=>{const d=B3(c,p=>p.unicode);a(d.sort((p,h)=>p.order<h.order?-1:1))};for(let d=0;d<n.length;d++){const p=n[d],h=d===n.length-1?IDBKeyRange.bound(p,p+"\uFFFF",!1,!0):IDBKeyRange.only(p);L3(s.index(M3),h,w=>{c.push(w),f()})}}):[]}async function $R(e,t){const n=await F3(e,t);return n.length?n.filter(s=>(s.shortcodes||[]).map(a=>a.toLowerCase()).includes(t.toLowerCase()))[0]||null:await UR(e,o=>(o.shortcodes||[]).includes(t.toLowerCase()))||null}async function qR(e,t){return fi(e,qa,jo,(n,s,o)=>Da(n,t,a=>{if(a)return o(a);Da(n.index(k3),t,c=>o(c||null))}))}function Eh(e,t,n){return fi(e,t,jo,(s,o,a)=>Da(s,n,a))}function VR(e,t,n,s){return fi(e,t,xh,(o,a)=>{o.put(s,n),Ah(a)})}function zR(e,t){return fi(e,wh,xh,(n,s)=>Da(n,t,o=>{n.put((o||0)+1,t),Ah(s)}))}function KR(e,t,n){return n===0?[]:fi(e,[wh,qa],jo,([s,o],a,c)=>{const f=[];s.index(T3).openCursor(void 0,"prev").onsuccess=m=>{const d=m.target.result;if(!d)return c(f);function p(M){if(f.push(M),f.length===n)return c(f);d.continue()}const h=d.primaryKey,w=t.byName(h);if(w)return p(w);Da(o,h,M=>{if(M)return p(M);d.continue()})}})}const yu="";function YR(e,t){const n=new Map;for(const o of e){const a=t(o);for(const c of a){let f=n;for(let d=0;d<c.length;d++){const p=c.charAt(d);let h=f.get(p);h||(h=new Map,f.set(p,h)),f=h}let m=f.get(yu);m||(m=[],f.set(yu,m)),m.push(o)}}return(o,a)=>{let c=n;for(let d=0;d<o.length;d++){const p=o.charAt(d),h=c.get(p);if(h)c=h;else return[]}if(a)return c.get(yu)||[];const f=[],m=[c];for(;m.length;){const p=[...m.shift().entries()].sort((h,w)=>h[0]<w[0]?-1:1);for(const[h,w]of p)h===yu?f.push(...w):m.push(w)}return f}}const WR=["name","url"];function XR(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||WR.some(s=>!(s in e[0])));if(!t||n)throw new Error("Custom emojis are in the wrong format")}function i_(e){XR(e);const t=(w,M)=>w.name.toLowerCase()<M.name.toLowerCase()?-1:1,n=e.sort(t),o=YR(e,w=>[...new Set((w.shortcodes||[]).map(M=>xo(M)).flat())]),a=w=>o(w,!0),c=w=>o(w,!1),f=w=>{const M=xo(w),u=M.map(($,U)=>(U<M.length-1?a:c)($));return B3(u,$=>$.name).sort(t)},m=new Map,d=new Map;for(const w of e){d.set(w.name.toLowerCase(),w);for(const M of w.shortcodes||[])m.set(M.toLowerCase(),w)}return{all:n,search:f,byShortcode:w=>m.get(w.toLowerCase()),byName:w=>d.get(w.toLowerCase())}}function cl(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function P3(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const GR=["annotation","emoji","group","order","tags","version"];function ZR(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||GR.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function H3(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function QR(e){const t=await fetch(e,{method:"HEAD"});H3(t,e);const n=t.headers.get("etag");return P3(n),n}async function fd(e){const t=await fetch(e);H3(t,e);const n=t.headers.get("etag");P3(n);const s=await t.json();return ZR(s),[n,s]}function JR(e){for(var t="",n=new Uint8Array(e),s=n.byteLength,o=-1;++o<s;)t+=String.fromCharCode(n[o]);return t}function ek(e){for(var t=e.length,n=new ArrayBuffer(t),s=new Uint8Array(n),o=-1;++o<t;)s[o]=e.charCodeAt(o);return n}async function j3(e){const t=JSON.stringify(e),n=ek(t),s=await crypto.subtle.digest("SHA-1",n),o=JR(s);return btoa(o)}async function tk(e,t){let n,s=await QR(t);if(!s){const o=await fd(t);s=o[0],n=o[1],s||(s=await j3(n))}await jR(e,t,s)||(n||(n=(await fd(t))[1]),await N3(e,n,t,s))}async function nk(e,t){let[n,s]=await fd(t);n||(n=await j3(s)),await N3(e,s,t,n)}class U3{constructor({dataSource:t=MR,locale:n=TR,customEmoji:s=[]}={}){this.dataSource=t,this.locale=n,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=i_(s),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await OR(this._dbName);LR(this._dbName,this._clear);const n=this.dataSource;await HR(t)?await nk(t,n):this._lazyUpdate=tk(t,n)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return d0(t),await this.ready(),s_(await DR(this._db,t)).map(cl)}async getEmojiBySearchQuery(t){bu(t),await this.ready();const n=this._custom.search(t),s=s_(await F3(this._db,t)).map(cl);return[...n,...s]}async getEmojiByShortcode(t){bu(t),await this.ready();const n=this._custom.byShortcode(t);return n||cl(await $R(this._db,t))}async getEmojiByUnicodeOrName(t){bu(t),await this.ready();const n=this._custom.byName(t);return n||cl(await qR(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await Eh(this._db,Oo,r_)||0}async setPreferredSkinTone(t){return d0(t),await this.ready(),VR(this._db,Oo,r_,t)}async incrementFavoriteEmojiCount(t){return bu(t),await this.ready(),zR(this._db,t)}async getTopFavoriteEmoji(t){return d0(t),await this.ready(),(await KR(this._db,this._custom,t)).map(cl)}set customEmoji(t){this._custom=i_(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await Sh(this._dbName)}async delete(){await this._shutdown(),await CR(this._dbName)}}function ec(){}function D3(e){return e()}function a_(){return Object.create(null)}function vc(e){e.forEach(D3)}function $3(e){return typeof e=="function"}function rk(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let wu;function Ju(e,t){return wu||(wu=document.createElement("a")),wu.href=t,e===wu.href}function sk(e){return Object.keys(e).length===0}function ik(e){return e&&$3(e.destroy)?e.destroy:ec}function fn(e,t){e.appendChild(t)}function vs(e,t,n){e.insertBefore(t,n||null)}function _s(e){e.parentNode.removeChild(e)}function nn(e){return document.createElement(e)}function Bs(e){return document.createTextNode(e)}function ls(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function Ee(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ns(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function o_(e,t){e.value=t==null?"":t}function Ti(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}let Mh;function Bl(e){Mh=e}const yl=[],vo=[],Uu=[],l_=[],q3=Promise.resolve();let dd=!1;function V3(){dd||(dd=!0,q3.then(z3))}function ak(){return V3(),q3}function hd(e){Uu.push(e)}const h0=new Set;let xu=0;function z3(){const e=Mh;do{for(;xu<yl.length;){const t=yl[xu];xu++,Bl(t),ok(t.$$)}for(Bl(null),yl.length=0,xu=0;vo.length;)vo.pop()();for(let t=0;t<Uu.length;t+=1){const n=Uu[t];h0.has(n)||(h0.add(n),n())}Uu.length=0}while(yl.length);for(;l_.length;)l_.pop()();dd=!1,h0.clear(),Bl(e)}function ok(e){if(e.fragment!==null){e.update(),vc(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(hd)}}const lk=new Set;function ck(e,t){e&&e.i&&(lk.delete(e),e.i(t))}const uk=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function wl(e,t){e.d(1),t.delete(e.key)}function xl(e,t,n,s,o,a,c,f,m,d,p,h){let w=e.length,M=a.length,u=w;const $={};for(;u--;)$[e[u].key]=u;const U=[],D=new Map,b=new Map;for(u=M;u--;){const V=h(o,a,u),v=n(V);let E=c.get(v);E?s&&E.p(V,t):(E=d(v,V),E.c()),D.set(v,U[u]=E),v in $&&b.set(v,Math.abs(u-$[v]))}const C=new Set,F=new Set;function L(V){ck(V,1),V.m(f,p),c.set(V.key,V),p=V.first,M--}for(;w&&M;){const V=U[M-1],v=e[w-1],E=V.key,T=v.key;V===v?(p=V.first,w--,M--):D.has(T)?!c.has(E)||C.has(E)?L(V):F.has(T)?w--:b.get(E)>b.get(T)?(F.add(E),L(V)):(C.add(T),w--):(m(v,c),w--)}for(;w--;){const V=e[w];D.has(V.key)||m(V,c)}for(;M;)L(U[M-1]);return U}function fk(e,t,n,s){const{fragment:o,on_mount:a,on_destroy:c,after_update:f}=e.$$;o&&o.m(t,n),s||hd(()=>{const m=a.map(D3).filter($3);c?c.push(...m):vc(m),e.$$.on_mount=[]}),f.forEach(hd)}function dk(e,t){const n=e.$$;n.fragment!==null&&(vc(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function hk(e,t){e.$$.dirty[0]===-1&&(yl.push(e),V3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function mk(e,t,n,s,o,a,c,f=[-1]){const m=Mh;Bl(e);const d=e.$$={fragment:null,ctx:null,props:a,update:ec,not_equal:o,bound:a_(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:[]),callbacks:a_(),dirty:f,skip_bound:!1,root:t.target||m.$$.root};c&&c(d.root);let p=!1;d.ctx=n?n(e,t.props||{},(h,w,...M)=>{const u=M.length?M[0]:w;return d.ctx&&o(d.ctx[h],d.ctx[h]=u)&&(!d.skip_bound&&d.bound[h]&&d.bound[h](u),p&&hk(e,h)),w}):[],d.update(),p=!0,vc(d.before_update),d.fragment=s?s(d.ctx):!1,t.target&&(d.fragment&&d.fragment.c(),fk(e,t.target,void 0,void 0),z3()),Bl(m)}class vk{$destroy(){dk(this,1),this.$destroy=ec}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!sk(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const K3=[[-1,"\u2728","custom"],[0,"\u{1F600}","smileys-emotion"],[1,"\u{1F44B}","people-body"],[3,"\u{1F431}","animals-nature"],[4,"\u{1F34E}","food-drink"],[5,"\u{1F3E0}\uFE0F","travel-places"],[6,"\u26BD","activities"],[7,"\u{1F4DD}","objects"],[8,"\u26D4\uFE0F","symbols"],[9,"\u{1F3C1}","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),Su=K3.slice(1),_k=K3[0],pk=2,c_=6,Y3=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function u_(e){return e.unicode.includes("\u200D")}const gk={"\u{1FAE0}":14,"\u{1F972}":13.1,"\u{1F97B}":12.1,"\u{1F970}":11,"\u{1F929}":5,"\u{1F471}\u200D\u2640\uFE0F":4,"\u{1F923}":3,"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F":2,"\u{1F600}":1,"\u{1F610}\uFE0F":.7,"\u{1F603}":.6},bk=1e3,yk="\u{1F590}\uFE0F",wk=8,xk=["\u{1F60A}","\u{1F612}","\u2665\uFE0F","\u{1F44D}\uFE0F","\u{1F60D}","\u{1F602}","\u{1F62D}","\u263A\uFE0F","\u{1F614}","\u{1F629}","\u{1F60F}","\u{1F495}","\u{1F64C}","\u{1F618}"],W3='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',Sk=(e,t)=>e<t?-1:e>t?1:0,f_=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const s=n.getContext("2d");return s.textBaseline="top",s.font=`100px ${W3}`,s.fillStyle=t,s.scale(.01,.01),s.fillText(e,0,0),s.getImageData(0,0,1,1).data},Ak=(e,t)=>{const n=[...e].join(","),s=[...t].join(",");return n===s&&!n.startsWith("0,0,0,")};function Ek(e){const t=f_(e,"#000"),n=f_(e,"#fff");return t&&n&&Ak(t,n)}function Mk(){const e=Object.entries(gk);try{for(const[t,n]of e)if(Ek(t))return n}catch{}finally{}return e[0][1]}const m0=new Promise(e=>Y3(()=>e(Mk()))),md=new Map,Tk="\uFE0F",Rk="\uD83C",kk="\u200D",Ik=127995,Ok=57339;function Ck(e,t){if(t===0)return e;const n=e.indexOf(kk);return n!==-1?e.substring(0,n)+String.fromCodePoint(Ik+t-1)+e.substring(n):(e.endsWith(Tk)&&(e=e.substring(0,e.length-1)),e+Rk+String.fromCodePoint(Ok+t-1))}function Ri(e){e.preventDefault(),e.stopPropagation()}function v0(e,t,n){return t+=e?-1:1,t<0?t=n.length-1:t>=n.length&&(t=0),t}function X3(e,t){const n=new Set,s=[];for(const o of e){const a=t(o);n.has(a)||(n.add(a),s.push(o))}return s}function Lk(e,t){const n=s=>{const o={};for(const a of s)typeof a.tone=="number"&&a.version<=t&&(o[a.tone]=a.unicode);return o};return e.map(({unicode:s,skins:o,shortcodes:a,url:c,name:f,category:m})=>({unicode:s,name:f,shortcodes:a,url:c,category:m,id:s||f,skins:o&&n(o),title:(a||[]).join(", ")}))}const Du=requestAnimationFrame;let Bk=typeof ResizeObserver=="function";function Nk(e,t){let n;return Bk?(n=new ResizeObserver(s=>t(s[0].contentRect.width)),n.observe(e)):Du(()=>t(e.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}}function d_(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}let _0;function Fk(e,t,n){for(const s of e){const o=n(s),a=d_(o);typeof _0>"u"&&(_0=d_(t));const c=a/1.8<_0;md.set(s.unicode,c)}}function Pk(e){return X3(e,t=>t)}const{Map:Sl}=uk;function h_(e,t,n){const s=e.slice();return s[63]=t[n],s[65]=n,s}function m_(e,t,n){const s=e.slice();return s[66]=t[n],s[65]=n,s}function v_(e,t,n){const s=e.slice();return s[63]=t[n],s[65]=n,s}function __(e,t,n){const s=e.slice();return s[69]=t[n],s}function p_(e,t,n){const s=e.slice();return s[72]=t[n],s[65]=n,s}function g_(e,t){let n,s=t[72]+"",o,a,c,f,m,d;return{key:e,first:null,c(){n=nn("div"),o=Bs(s),Ee(n,"id",a="skintone-"+t[65]),Ee(n,"class",c="emoji hide-focus "+(t[65]===t[20]?"active":"")),Ee(n,"aria-selected",f=t[65]===t[20]),Ee(n,"role","option"),Ee(n,"title",m=t[0].skinTones[t[65]]),Ee(n,"tabindex","-1"),Ee(n,"aria-label",d=t[0].skinTones[t[65]]),this.first=n},m(p,h){vs(p,n,h),fn(n,o)},p(p,h){t=p,h[0]&512&&s!==(s=t[72]+"")&&Ns(o,s),h[0]&512&&a!==(a="skintone-"+t[65])&&Ee(n,"id",a),h[0]&1049088&&c!==(c="emoji hide-focus "+(t[65]===t[20]?"active":""))&&Ee(n,"class",c),h[0]&1049088&&f!==(f=t[65]===t[20])&&Ee(n,"aria-selected",f),h[0]&513&&m!==(m=t[0].skinTones[t[65]])&&Ee(n,"title",m),h[0]&513&&d!==(d=t[0].skinTones[t[65]])&&Ee(n,"aria-label",d)},d(p){p&&_s(n)}}}function b_(e,t){let n,s,o=t[69].emoji+"",a,c,f,m,d,p,h;function w(){return t[49](t[69])}return{key:e,first:null,c(){n=nn("button"),s=nn("div"),a=Bs(o),Ee(s,"class","nav-emoji emoji"),Ee(n,"role","tab"),Ee(n,"class","nav-button"),Ee(n,"aria-controls",c="tab-"+t[69].id),Ee(n,"aria-label",f=t[0].categories[t[69].name]),Ee(n,"aria-selected",m=!t[4]&&t[13].id===t[69].id),Ee(n,"title",d=t[0].categories[t[69].name]),this.first=n},m(M,u){vs(M,n,u),fn(n,s),fn(s,a),p||(h=ls(n,"click",w),p=!0)},p(M,u){t=M,u[0]&4096&&o!==(o=t[69].emoji+"")&&Ns(a,o),u[0]&4096&&c!==(c="tab-"+t[69].id)&&Ee(n,"aria-controls",c),u[0]&4097&&f!==(f=t[0].categories[t[69].name])&&Ee(n,"aria-label",f),u[0]&12304&&m!==(m=!t[4]&&t[13].id===t[69].id)&&Ee(n,"aria-selected",m),u[0]&4097&&d!==(d=t[0].categories[t[69].name])&&Ee(n,"title",d)},d(M){M&&_s(n),p=!1,h()}}}function Hk(e){let t,n;return{c(){t=nn("img"),Ee(t,"class","custom-emoji"),Ju(t.src,n=e[63].url)||Ee(t,"src",n),Ee(t,"alt",""),Ee(t,"loading","lazy")},m(s,o){vs(s,t,o)},p(s,o){o[0]&32768&&!Ju(t.src,n=s[63].url)&&Ee(t,"src",n)},d(s){s&&_s(t)}}}function jk(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Bs(t)},m(s,o){vs(s,n,o)},p(s,o){o[0]&33024&&t!==(t=s[27](s[63],s[8])+"")&&Ns(n,t)},d(s){s&&_s(n)}}}function y_(e,t){let n,s,o,a,c,f,m;function d(w,M){return w[63].unicode?jk:Hk}let p=d(t),h=p(t);return{key:e,first:null,c(){n=nn("button"),h.c(),Ee(n,"role",s=t[4]?"option":"menuitem"),Ee(n,"aria-selected",o=t[4]?t[65]==t[5]:""),Ee(n,"aria-label",a=t[28](t[63],t[8])),Ee(n,"title",c=t[63].title),Ee(n,"class",f="emoji "+(t[4]&&t[65]===t[5]?"active":"")),Ee(n,"id",m="emo-"+t[63].id),this.first=n},m(w,M){vs(w,n,M),h.m(n,null)},p(w,M){t=w,p===(p=d(t))&&h?h.p(t,M):(h.d(1),h=p(t),h&&(h.c(),h.m(n,null))),M[0]&16&&s!==(s=t[4]?"option":"menuitem")&&Ee(n,"role",s),M[0]&32816&&o!==(o=t[4]?t[65]==t[5]:"")&&Ee(n,"aria-selected",o),M[0]&33024&&a!==(a=t[28](t[63],t[8]))&&Ee(n,"aria-label",a),M[0]&32768&&c!==(c=t[63].title)&&Ee(n,"title",c),M[0]&32816&&f!==(f="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&Ee(n,"class",f),M[0]&32768&&m!==(m="emo-"+t[63].id)&&Ee(n,"id",m)},d(w){w&&_s(n),h.d()}}}function w_(e,t){let n,s=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",o,a,c,f,m=[],d=new Sl,p,h,w,M=t[66].emojis;const u=$=>$[63].id;for(let $=0;$<M.length;$+=1){let U=v_(t,M,$),D=u(U);d.set(D,m[$]=y_(D,U))}return{key:e,first:null,c(){n=nn("div"),o=Bs(s),f=nn("div");for(let $=0;$<m.length;$+=1)m[$].c();Ee(n,"id",a="menu-label-"+t[65]),Ee(n,"class",c="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),Ee(n,"aria-hidden","true"),Ee(f,"class","emoji-menu"),Ee(f,"role",p=t[4]?"listbox":"menu"),Ee(f,"aria-labelledby",h="menu-label-"+t[65]),Ee(f,"id",w=t[4]?"search-results":""),this.first=n},m($,U){vs($,n,U),fn(n,o),vs($,f,U);for(let D=0;D<m.length;D+=1)m[D].m(f,null)},p($,U){t=$,U[0]&40977&&s!==(s=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&Ns(o,s),U[0]&32768&&a!==(a="menu-label-"+t[65])&&Ee(n,"id",a),U[0]&32768&&c!==(c="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&Ee(n,"class",c),U[0]&402686256&&(M=t[66].emojis,m=xl(m,U,u,1,t,M,d,f,wl,y_,null,v_)),U[0]&16&&p!==(p=t[4]?"listbox":"menu")&&Ee(f,"role",p),U[0]&32768&&h!==(h="menu-label-"+t[65])&&Ee(f,"aria-labelledby",h),U[0]&16&&w!==(w=t[4]?"search-results":"")&&Ee(f,"id",w)},d($){$&&_s(n),$&&_s(f);for(let U=0;U<m.length;U+=1)m[U].d()}}}function Uk(e){let t,n;return{c(){t=nn("img"),Ee(t,"class","custom-emoji"),Ju(t.src,n=e[63].url)||Ee(t,"src",n),Ee(t,"alt",""),Ee(t,"loading","lazy")},m(s,o){vs(s,t,o)},p(s,o){o[0]&1024&&!Ju(t.src,n=s[63].url)&&Ee(t,"src",n)},d(s){s&&_s(t)}}}function Dk(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Bs(t)},m(s,o){vs(s,n,o)},p(s,o){o[0]&1280&&t!==(t=s[27](s[63],s[8])+"")&&Ns(n,t)},d(s){s&&_s(n)}}}function x_(e,t){let n,s,o,a;function c(d,p){return d[63].unicode?Dk:Uk}let f=c(t),m=f(t);return{key:e,first:null,c(){n=nn("button"),m.c(),Ee(n,"role","menuitem"),Ee(n,"aria-label",s=t[28](t[63],t[8])),Ee(n,"title",o=t[63].title),Ee(n,"class","emoji"),Ee(n,"id",a="fav-"+t[63].id),this.first=n},m(d,p){vs(d,n,p),m.m(n,null)},p(d,p){t=d,f===(f=c(t))&&m?m.p(t,p):(m.d(1),m=f(t),m&&(m.c(),m.m(n,null))),p[0]&1280&&s!==(s=t[28](t[63],t[8]))&&Ee(n,"aria-label",s),p[0]&1024&&o!==(o=t[63].title)&&Ee(n,"title",o),p[0]&1024&&a!==(a="fav-"+t[63].id)&&Ee(n,"id",a)},d(d){d&&_s(n),m.d()}}}function $k(e){let t,n,s,o,a,c,f,m,d,p=e[0].searchLabel+"",h,w,M=e[0].searchDescription+"",u,$,U,D,b,C,F,L=e[0].skinToneDescription+"",V,v,E=[],T=new Sl,y,A,S,x,k,R=[],z=new Sl,ne,Y,te,g,I,le,he,He,Ke=[],qe=new Sl,oe,ke,Se,Ae,Xe,X=[],O=new Sl,P,G,ee,re,pe,ve,ce=e[9];const ae=be=>be[72];for(let be=0;be<ce.length;be+=1){let Ne=p_(e,ce,be),me=ae(Ne);T.set(me,E[be]=g_(me,Ne))}let ge=e[12];const Be=be=>be[69].id;for(let be=0;be<ge.length;be+=1){let Ne=__(e,ge,be),me=Be(Ne);z.set(me,R[be]=b_(me,Ne))}let Ce=e[15];const Pe=be=>be[66].category;for(let be=0;be<Ce.length;be+=1){let Ne=m_(e,Ce,be),me=Pe(Ne);qe.set(me,Ke[be]=w_(me,Ne))}let We=e[10];const nt=be=>be[63].id;for(let be=0;be<We.length;be+=1){let Ne=h_(e,We,be),me=nt(Ne);O.set(me,X[be]=x_(me,Ne))}return{c(){t=nn("section"),n=nn("div"),s=nn("div"),o=nn("div"),a=nn("input"),d=nn("label"),h=Bs(p),w=nn("span"),u=Bs(M),$=nn("div"),U=nn("button"),D=Bs(e[21]),F=nn("span"),V=Bs(L),v=nn("div");for(let be=0;be<E.length;be+=1)E[be].c();k=nn("div");for(let be=0;be<R.length;be+=1)R[be].c();Y=nn("div"),te=nn("div"),g=nn("div"),I=Bs(e[18]),he=nn("div"),He=nn("div");for(let be=0;be<Ke.length;be+=1)Ke[be].c();Xe=nn("div");for(let be=0;be<X.length;be+=1)X[be].c();ee=nn("button"),ee.textContent="\u{1F600}",Ee(n,"class","pad-top"),Ee(a,"id","search"),Ee(a,"class","search"),Ee(a,"type","search"),Ee(a,"role","combobox"),Ee(a,"enterkeyhint","search"),Ee(a,"placeholder",c=e[0].searchLabel),Ee(a,"autocapitalize","none"),Ee(a,"autocomplete","off"),Ee(a,"spellcheck","true"),Ee(a,"aria-expanded",f=!!(e[4]&&e[1].length)),Ee(a,"aria-controls","search-results"),Ee(a,"aria-describedby","search-description"),Ee(a,"aria-autocomplete","list"),Ee(a,"aria-activedescendant",m=e[26]?`emo-${e[26]}`:""),Ee(d,"class","sr-only"),Ee(d,"for","search"),Ee(w,"id","search-description"),Ee(w,"class","sr-only"),Ee(o,"class","search-wrapper"),Ee(U,"id","skintone-button"),Ee(U,"class",b="emoji "+(e[6]?"hide-focus":"")),Ee(U,"aria-label",e[23]),Ee(U,"title",e[23]),Ee(U,"aria-describedby","skintone-description"),Ee(U,"aria-haspopup","listbox"),Ee(U,"aria-expanded",e[6]),Ee(U,"aria-controls","skintone-list"),Ee($,"class",C="skintone-button-wrapper "+(e[19]?"expanded":"")),Ee(F,"id","skintone-description"),Ee(F,"class","sr-only"),Ee(v,"id","skintone-list"),Ee(v,"class",y="skintone-list "+(e[6]?"":"hidden no-animate")),Ti(v,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Ee(v,"role","listbox"),Ee(v,"aria-label",A=e[0].skinTonesLabel),Ee(v,"aria-activedescendant",S="skintone-"+e[20]),Ee(v,"aria-hidden",x=!e[6]),Ee(s,"class","search-row"),Ee(k,"class","nav"),Ee(k,"role","tablist"),Ti(k,"grid-template-columns","repeat("+e[12].length+", 1fr)"),Ee(k,"aria-label",ne=e[0].categoriesLabel),Ee(te,"class","indicator"),Ti(te,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),Ee(Y,"class","indicator-wrapper"),Ee(g,"class",le="message "+(e[18]?"":"gone")),Ee(g,"role","alert"),Ee(g,"aria-live","polite"),Ee(he,"class",oe="tabpanel "+(!e[14]||e[18]?"gone":"")),Ee(he,"role",ke=e[4]?"region":"tabpanel"),Ee(he,"aria-label",Se=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),Ee(he,"id",Ae=e[4]?"":`tab-${e[13].id}`),Ee(he,"tabindex","0"),Ee(Xe,"class",P="favorites emoji-menu "+(e[18]?"gone":"")),Ee(Xe,"role","menu"),Ee(Xe,"aria-label",G=e[0].favoritesLabel),Ti(Xe,"padding-inline-end",e[25]+"px"),Ee(ee,"aria-hidden","true"),Ee(ee,"tabindex","-1"),Ee(ee,"class","abs-pos hidden emoji"),Ee(t,"class","picker"),Ee(t,"aria-label",re=e[0].regionLabel),Ee(t,"style",e[22])},m(be,Ne){vs(be,t,Ne),fn(t,n),fn(t,s),fn(s,o),fn(o,a),o_(a,e[2]),fn(o,d),fn(d,h),fn(o,w),fn(w,u),fn(s,$),fn($,U),fn(U,D),fn(s,F),fn(F,V),fn(s,v);for(let me=0;me<E.length;me+=1)E[me].m(v,null);e[48](v),fn(t,k);for(let me=0;me<R.length;me+=1)R[me].m(k,null);fn(t,Y),fn(Y,te),fn(t,g),fn(g,I),fn(t,he),fn(he,He);for(let me=0;me<Ke.length;me+=1)Ke[me].m(He,null);e[50](he),fn(t,Xe);for(let me=0;me<X.length;me+=1)X[me].m(Xe,null);fn(t,ee),e[51](ee),e[52](t),pe||(ve=[ls(a,"input",e[47]),ls(a,"keydown",e[30]),ls(U,"click",e[35]),ls(v,"focusout",e[38]),ls(v,"click",e[34]),ls(v,"keydown",e[36]),ls(v,"keyup",e[37]),ls(k,"keydown",e[32]),ik(e[29].call(null,He)),ls(he,"click",e[33]),ls(Xe,"click",e[33])],pe=!0)},p(be,Ne){Ne[0]&1&&c!==(c=be[0].searchLabel)&&Ee(a,"placeholder",c),Ne[0]&18&&f!==(f=!!(be[4]&&be[1].length))&&Ee(a,"aria-expanded",f),Ne[0]&67108864&&m!==(m=be[26]?`emo-${be[26]}`:"")&&Ee(a,"aria-activedescendant",m),Ne[0]&4&&o_(a,be[2]),Ne[0]&1&&p!==(p=be[0].searchLabel+"")&&Ns(h,p),Ne[0]&1&&M!==(M=be[0].searchDescription+"")&&Ns(u,M),Ne[0]&2097152&&Ns(D,be[21]),Ne[0]&64&&b!==(b="emoji "+(be[6]?"hide-focus":""))&&Ee(U,"class",b),Ne[0]&8388608&&Ee(U,"aria-label",be[23]),Ne[0]&8388608&&Ee(U,"title",be[23]),Ne[0]&64&&Ee(U,"aria-expanded",be[6]),Ne[0]&524288&&C!==(C="skintone-button-wrapper "+(be[19]?"expanded":""))&&Ee($,"class",C),Ne[0]&1&&L!==(L=be[0].skinToneDescription+"")&&Ns(V,L),Ne[0]&1049089&&(ce=be[9],E=xl(E,Ne,ae,1,be,ce,T,v,wl,g_,null,p_)),Ne[0]&64&&y!==(y="skintone-list "+(be[6]?"":"hidden no-animate"))&&Ee(v,"class",y),Ne[0]&64&&Ti(v,"transform","translateY("+(be[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Ne[0]&1&&A!==(A=be[0].skinTonesLabel)&&Ee(v,"aria-label",A),Ne[0]&1048576&&S!==(S="skintone-"+be[20])&&Ee(v,"aria-activedescendant",S),Ne[0]&64&&x!==(x=!be[6])&&Ee(v,"aria-hidden",x),Ne[0]&12305|Ne[1]&1&&(ge=be[12],R=xl(R,Ne,Be,1,be,ge,z,k,wl,b_,null,__)),Ne[0]&4096&&Ti(k,"grid-template-columns","repeat("+be[12].length+", 1fr)"),Ne[0]&1&&ne!==(ne=be[0].categoriesLabel)&&Ee(k,"aria-label",ne),Ne[0]&16779264&&Ti(te,"transform","translateX("+(be[24]?-1:1)*be[11]*100+"%)"),Ne[0]&262144&&Ns(I,be[18]),Ne[0]&262144&&le!==(le="message "+(be[18]?"":"gone"))&&Ee(g,"class",le),Ne[0]&402694449&&(Ce=be[15],Ke=xl(Ke,Ne,Pe,1,be,Ce,qe,He,wl,w_,null,m_)),Ne[0]&278528&&oe!==(oe="tabpanel "+(!be[14]||be[18]?"gone":""))&&Ee(he,"class",oe),Ne[0]&16&&ke!==(ke=be[4]?"region":"tabpanel")&&Ee(he,"role",ke),Ne[0]&8209&&Se!==(Se=be[4]?be[0].searchResultsLabel:be[0].categories[be[13].name])&&Ee(he,"aria-label",Se),Ne[0]&8208&&Ae!==(Ae=be[4]?"":`tab-${be[13].id}`)&&Ee(he,"id",Ae),Ne[0]&402654464&&(We=be[10],X=xl(X,Ne,nt,1,be,We,O,Xe,wl,x_,null,h_)),Ne[0]&262144&&P!==(P="favorites emoji-menu "+(be[18]?"gone":""))&&Ee(Xe,"class",P),Ne[0]&1&&G!==(G=be[0].favoritesLabel)&&Ee(Xe,"aria-label",G),Ne[0]&33554432&&Ti(Xe,"padding-inline-end",be[25]+"px"),Ne[0]&1&&re!==(re=be[0].regionLabel)&&Ee(t,"aria-label",re),Ne[0]&4194304&&Ee(t,"style",be[22])},i:ec,o:ec,d(be){be&&_s(t);for(let Ne=0;Ne<E.length;Ne+=1)E[Ne].d();e[48](null);for(let Ne=0;Ne<R.length;Ne+=1)R[Ne].d();for(let Ne=0;Ne<Ke.length;Ne+=1)Ke[Ne].d();e[50](null);for(let Ne=0;Ne<X.length;Ne+=1)X[Ne].d();e[51](null),e[52](null),pe=!1,vc(ve)}}}function qk(e,t,n){let{skinToneEmoji:s}=t,{i18n:o}=t,{database:a}=t,{customEmoji:c}=t,{customCategorySorting:f}=t,m=!0,d=[],p=[],h="",w="",M,u,$,U=!1,D=-1,b,C=!1,F=!1,L,V=0,v=0,E,T,y="",A=[],S=[],x,k=wk,R=!1,z=0,ne=0,Y=Su,te,g=!1,I;const le=me=>{M.getRootNode().getElementById(me).focus()},he=(me,Ze)=>{M.dispatchEvent(new CustomEvent(me,{detail:Ze,bubbles:!0,composed:!0}))},He=(me,Ze)=>Ze&&me.skins&&me.skins[Ze]||me.unicode,Ke=(me,Ze)=>Pk([me.name||He(me,Ze),...me.shortcodes||[]]).join(", "),qe=me=>/^skintone-/.test(me.id);m0.then(me=>{me||n(18,b=o.emojiUnsupportedMessage)});function oe(me){return Nk(me,Ze=>{{const N=getComputedStyle(M),j=parseInt(N.getPropertyValue("--num-columns"),10),Z=N.getPropertyValue("direction")==="rtl",se=me.parentElement.getBoundingClientRect().width-Ze;n(46,k=j),n(25,z=se),n(24,R=Z)}})}function ke(me){const Ze=M.getRootNode();Fk(me,u,j=>Ze.getElementById(`emo-${j.id}`)),n(1,d=d)}function Se(me){return!me.unicode||!u_(me)||md.get(me.unicode)}async function Ae(me){const Ze=await m0;return me.filter(({version:N})=>!N||N<=Ze)}async function Xe(me){return Lk(me,await m0)}async function X(me){if(typeof me>"u")return[];const Ze=me===-1?c:await a.getEmojiByGroup(me);return Xe(await Ae(Ze))}async function O(me){return Xe(await Ae(await a.getEmojiBySearchQuery(me)))}function P(me){if(!U||!d.length)return;const Ze=N=>{Ri(me),n(5,D=v0(N,D,d))};switch(me.key){case"ArrowDown":return Ze(!1);case"ArrowUp":return Ze(!0);case"Enter":if(D!==-1)return Ri(me),re(d[D].id);d.length&&n(5,D=0)}}function G(me){n(2,h=""),n(44,w=""),n(5,D=-1),n(11,ne=Y.findIndex(Ze=>Ze.id===me.id))}function ee(me){const{target:Ze,key:N}=me,j=Z=>{Z&&(Ri(me),Z.focus())};switch(N){case"ArrowLeft":return j(Ze.previousSibling);case"ArrowRight":return j(Ze.nextSibling);case"Home":return j(Ze.parentElement.firstChild);case"End":return j(Ze.parentElement.lastChild)}}async function re(me){const Ze=await a.getEmojiByUnicodeOrName(me),N=[...d,...S].find(Z=>Z.id===me),j=N.unicode&&He(N,V);await a.incrementFavoriteEmojiCount(me),he("emoji-click",{emoji:Ze,skinTone:V,...j&&{unicode:j},...N.name&&{name:N.name}})}async function pe(me){const{target:Ze}=me;if(!Ze.classList.contains("emoji"))return;Ri(me);const N=Ze.id.substring(4);re(N)}async function ve(me){const{target:Ze}=me;if(!qe(Ze))return;Ri(me);const N=parseInt(Ze.id.slice(9),10);n(8,V=N),n(6,C=!1),le("skintone-button"),he("skin-tone-change",{skinTone:N}),a.setPreferredSkinTone(N)}async function ce(me){n(6,C=!C),n(20,v=V),C&&(Ri(me),Du(()=>le(`skintone-${v}`)))}function ae(me){if(!C)return;const Ze=async N=>{Ri(me),n(20,v=N),await ak(),le(`skintone-${v}`)};switch(me.key){case"ArrowUp":return Ze(v0(!0,v,A));case"ArrowDown":return Ze(v0(!1,v,A));case"Home":return Ze(0);case"End":return Ze(A.length-1);case"Enter":return ve(me);case"Escape":return Ri(me),n(6,C=!1),le("skintone-button")}}function ge(me){if(!!C)switch(me.key){case" ":return ve(me)}}async function Be(me){const{relatedTarget:Ze}=me;(!Ze||!qe(Ze))&&n(6,C=!1)}function Ce(){h=this.value,n(2,h)}function Pe(me){vo[me?"unshift":"push"](()=>{L=me,n(7,L)})}const We=me=>G(me);function nt(me){vo[me?"unshift":"push"](()=>{$=me,n(3,$)})}function be(me){vo[me?"unshift":"push"](()=>{u=me,n(17,u)})}function Ne(me){vo[me?"unshift":"push"](()=>{M=me,n(16,M)})}return e.$$set=me=>{"skinToneEmoji"in me&&n(40,s=me.skinToneEmoji),"i18n"in me&&n(0,o=me.i18n),"database"in me&&n(39,a=me.database),"customEmoji"in me&&n(41,c=me.customEmoji),"customCategorySorting"in me&&n(42,f=me.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&c&&a&&n(39,a.customEmoji=c,a),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function me(){let Ze=!1;const N=setTimeout(()=>{Ze=!0,n(18,b=o.loadingMessage)},bk);try{await a.ready(),n(14,g=!0)}catch(j){console.error(j),n(18,b=o.networkErrorMessage)}finally{clearTimeout(N),Ze&&(Ze=!1,n(18,b=""))}}a&&me()}if(e.$$.dirty[0]&6144|e.$$.dirty[1]&1024&&(c&&c.length?n(12,Y=[_k,...Su]):Y!==Su&&(ne&&n(11,ne--,ne),n(12,Y=Su))),e.$$.dirty[0]&4&&Y3(()=>{n(44,w=(h||"").trim()),n(5,D=-1)}),e.$$.dirty[0]&6144&&n(13,te=Y[ne]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function me(){if(!g)n(1,d=[]),n(4,U=!1);else if(w.length>=pk){const Ze=w,N=await O(Ze);Ze===w&&(n(1,d=N),n(4,U=!0))}else if(te){const Ze=te.id,N=await X(Ze);Ze===te.id&&(n(1,d=N),n(4,U=!1))}}me()}if(e.$$.dirty[0]&4112&&n(22,T=`
  --font-family: ${W3};
  --num-groups: ${Y.length}; 
  --indicator-opacity: ${U?0:1}; 
  --num-skintones: ${c_};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function me(){g&&n(8,V=await a.getPreferredSkinTone())}me()}if(e.$$.dirty[1]&512&&n(9,A=Array(c_).fill().map((me,Ze)=>Ck(s,Ze))),e.$$.dirty[0]&768&&n(21,E=A[V]),e.$$.dirty[0]&257&&n(23,y=o.skinToneLabel.replace("{skinTone}",o.skinTones[V])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function me(){n(45,x=(await Promise.all(xk.map(Ze=>a.getEmojiByUnicodeOrName(Ze)))).filter(Boolean))}g&&me()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function me(){const Ze=await a.getTopFavoriteEmoji(k),N=await Xe(X3([...Ze,...x],j=>j.unicode||j.name).slice(0,k));n(10,S=N)}g&&x&&me()}if(e.$$.dirty[0]&10){const me=d.filter(Ze=>Ze.unicode).filter(Ze=>u_(Ze)&&!md.has(Ze.unicode));me.length?Du(()=>ke(me)):(n(1,d=d.filter(Se)),Du(()=>{($||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&n(15,p=function(){if(U)return[{category:"",emojis:d}];const Ze=new Map;for(const N of d){const j=N.category||"";let Z=Ze.get(j);Z||(Z=[],Ze.set(j,Z)),Z.push(N)}return[...Ze.entries()].map(([N,j])=>({category:N,emojis:j})).sort((N,j)=>f(N.category,j.category))}()),e.$$.dirty[0]&34&&n(26,I=D!==-1&&d[D].id),e.$$.dirty[0]&192&&(C?L.addEventListener("transitionend",()=>{n(19,F=!0)},{once:!0}):n(19,F=!1))},[o,d,h,$,U,D,C,L,V,A,S,ne,Y,te,g,p,M,u,b,F,v,E,T,y,R,z,I,He,Ke,oe,P,G,ee,pe,ve,ce,ae,ge,Be,a,s,c,f,m,w,x,k,Ce,Pe,We,nt,be,Ne]}class Vk extends vk{constructor(t){super(),mk(this,t,qk,$k,rk,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const zk="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Kk="en";var Yk={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const G3=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class Z3 extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const n=document.createElement("style");n.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(n),this._ctx={locale:Kk,dataSource:zk,skinToneEmoji:yk,customCategorySorting:Sk,customEmoji:null,i18n:Yk,...t};for(const s of G3)s!=="database"&&Object.prototype.hasOwnProperty.call(this,s)&&(this._ctx[s]=this[s],delete this[s]);this._dbFlush()}connectedCallback(){this._cmp=new Vk({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(n=>console.error(n))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,n,s){this._set(t.replace(/-([a-z])/g,(o,a)=>a.toUpperCase()),s)}_set(t,n){this._ctx[t]=n,this._cmp&&this._cmp.$set({[t]:n}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:n,database:s}=this._ctx;(!s||s.locale!==t||s.dataSource!==n)&&this._set("database",new U3({locale:t,dataSource:n}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const Q3={};for(const e of G3)Q3[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(Z3.prototype,Q3);customElements.get("emoji-picker")||customElements.define("emoji-picker",Z3);const Wk={name:"EmojiPickerContainer",components:{SvgIcon:zn},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(e){e&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:t})=>{this.$emit("add-emoji",{unicode:t.unicode})})},0)}},methods:{addCustomStyling(){const e=`.picker {
				border: none;
			}`,t=`.nav {
				overflow-x: auto;
			}`,n=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,s=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,o=document.createElement("style");o.textContent=e+t+n+s,this.$refs.emojiPicker.shadowRoot.appendChild(o)},openEmoji(e){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(e.clientY,e.view.innerWidth,e.view.innerHeight)},setEmojiPickerPosition(e,t,n){const s=t<500||n<700,o=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer");if(!o){s&&(this.emojiPickerRight="-50px");return}s?(this.emojiPickerRight=t/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=n-200):(o.getBoundingClientRect().top-e>this.emojiPickerHeight-50?this.emojiPickerTop=e+10:this.emojiPickerTop=e-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},Xk={class:"vac-emoji-wrapper"},Gk={ref:"emojiPicker","v-if":"emojiOpened"};function Zk(e,t,n,s,o,a){const c=vt("svg-icon");return xe(),Le("div",Xk,[ze("div",{class:It(["vac-svg-button",{"vac-emoji-reaction":n.emojiReaction}]),onClick:t[0]||(t[0]=(...f)=>a.openEmoji&&a.openEmoji(...f))},[tt(e.$slots,n.messageId?"emoji-picker-reaction-icon_"+n.messageId:"emoji-picker-icon",{},()=>[rt(c,{name:"emoji",param:n.emojiReaction?"reaction":""},null,8,["param"])])],2),n.emojiOpened?(xe(),en(On,{key:0,name:"vac-slide-up",appear:""},{default:mt(()=>[ze("div",{class:It(["vac-emoji-picker",{"vac-picker-reaction":n.emojiReaction}]),style:Wt({height:`${o.emojiPickerHeight}px`,top:n.positionTop?o.emojiPickerHeight:`${o.emojiPickerTop}px`,right:o.emojiPickerRight,display:o.emojiPickerTop||!n.emojiReaction?"initial":"none"})},[ze("emoji-picker",Gk,null,512)],6)]),_:1})):st("",!0)])}var J3=hn(Wk,[["render",Zk]]);const Qk={name:"RoomFiles",components:{Loader:T1,SvgIcon:zn},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return Io(this.file)},isVideo(){return mc(this.file)}}},Jk={class:"vac-room-file-container"},eI=["src"],tI={class:"vac-text-ellipsis"},nI={key:0,class:"vac-text-ellipsis vac-text-extension"};function rI(e,t,n,s,o,a){const c=vt("loader"),f=vt("svg-icon");return xe(),Le("div",Jk,[rt(c,{show:n.file.loading,type:"room-file"},an({_:2},[Tt(e.$slots,(m,d)=>({name:d,fn:mt(p=>[tt(e.$slots,d,sn(Jt(p)))])}))]),1032,["show"]),ze("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=m=>e.$emit("remove-file",n.index))},[tt(e.$slots,"image-close-icon",{},()=>[rt(f,{name:"close",param:"image"})])]),a.isImage?(xe(),Le("div",{key:0,class:It(["vac-message-image",{"vac-blur-loading":n.file.loading}]),style:Wt({"background-image":`url('${n.file.localUrl||n.file.url}')`})},null,6)):a.isVideo?(xe(),Le("video",{key:1,controls:"",class:It({"vac-blur-loading":n.file.loading})},[ze("source",{src:n.file.localUrl||n.file.url},null,8,eI)],2)):(xe(),Le("div",{key:2,class:It(["vac-file-container",{"vac-blur-loading":n.file.loading}])},[ze("div",null,[tt(e.$slots,"file-icon",{},()=>[rt(f,{name:"file"})])]),ze("div",tI,xt(n.file.name),1),n.file.extension?(xe(),Le("div",nI,xt(n.file.extension),1)):st("",!0)],2))])}var sI=hn(Qk,[["render",rI]]);const iI={name:"RoomFiles",components:{SvgIcon:zn,RoomFile:sI},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}}},aI={class:"vac-files-box"},oI={class:"vac-icon-close"};function lI(e,t,n,s,o,a){const c=vt("room-file"),f=vt("svg-icon");return xe(),en(On,{name:"vac-slide-up"},{default:mt(()=>[n.files.length?(xe(),Le("div",{key:0,class:"vac-room-files-container",style:Wt({bottom:`${a.footerHeight}px`})},[ze("div",aI,[(xe(!0),Le(Vt,null,Tt(n.files,(m,d)=>(xe(),Le("div",{key:d},[rt(c,{file:m,index:d,onRemoveFile:t[0]||(t[0]=p=>e.$emit("remove-file",p))},an({_:2},[Tt(e.$slots,(p,h)=>({name:h,fn:mt(w=>[tt(e.$slots,h,sn(Jt(w)))])}))]),1032,["file","index"])]))),128))]),ze("div",oI,[ze("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=m=>e.$emit("reset-message"))},[tt(e.$slots,"files-close-icon",{},()=>[rt(f,{name:"close-outline"})])])])],4)):st("",!0)]),_:3})}var cI=hn(iI,[["render",lI]]);const uI={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data(){return{isMouseDown:!1}},methods:{onMouseDown(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!0;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},onMouseMove(e){if(this.messageSelectionEnabled)return;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},calculateLineHeadPosition(e,t){const n=t.getBoundingClientRect().width,s=t.getBoundingClientRect().left;let o=(e.clientX-s)/n;return o=o<0?0:o,o=o>1?1:o,o}}},fI={class:"vac-player-progress"},dI={class:"vac-line-container"};function hI(e,t,n,s,o,a){return xe(),Le("div",{ref:"progress",class:"vac-player-bar",onMousedown:t[0]||(t[0]=(...c)=>a.onMouseDown&&a.onMouseDown(...c)),onMouseover:t[1]||(t[1]=c=>e.$emit("hover-audio-progress",!0)),onMouseout:t[2]||(t[2]=c=>e.$emit("hover-audio-progress",!1))},[ze("div",fI,[ze("div",dI,[ze("div",{class:"vac-line-progress",style:Wt({width:`${n.percentage}%`})},null,4),ze("div",{class:It(["vac-line-dot",{"vac-line-dot__active":o.isMouseDown}]),style:Wt({left:`${n.percentage}%`})},null,6)])])],544)}var mI=hn(uI,[["render",hI]]);const vI={name:"AudioPlayer",components:{SvgIcon:zn,AudioControl:mI},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:(this.resetProgress(),null)}},mounted(){this.player=document.querySelector("vue-advanced-chat").shadowRoot.getElementById(this.playerUniqId),this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",()=>{this.resetProgress(),this.duration=this.convertTimeMMSS(this.player.duration),this.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS(e){return new Date(e*1e3).toISOString().substr(14,5)},playback(){this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>this.player.play()),this.isPlaying=!this.isPlaying)},resetProgress(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress(e){e&&(this.player.currentTime=e*this.player.duration)},updateProgressTime(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},_I={class:"vac-audio-player"},pI=["id","src"];function gI(e,t,n,s,o,a){const c=vt("svg-icon"),f=vt("audio-control");return xe(),Le("div",null,[ze("div",_I,[ze("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=(...m)=>a.playback&&a.playback(...m))},[o.isPlaying?tt(e.$slots,"audio-pause-icon_"+n.messageId,{key:0},()=>[rt(c,{name:"audio-pause"})]):tt(e.$slots,"audio-play-icon_"+n.messageId,{key:1},()=>[rt(c,{name:"audio-play"})])]),rt(f,{percentage:o.progress,"message-selection-enabled":n.messageSelectionEnabled,onChangeLinehead:a.onUpdateProgress,onHoverAudioProgress:t[1]||(t[1]=m=>e.$emit("hover-audio-progress",m))},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),ze("audio",{id:a.playerUniqId,src:a.audioSource},null,8,pI)])])}var Th=hn(vI,[["render",gI]]);const bI={name:"RoomMessageReply",components:{SvgIcon:zn,FormatMessage:hc,AudioPlayer:Th},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight},firstFile(){var e,t;return(t=(e=this.messageReply)==null?void 0:e.files)!=null&&t.length?this.messageReply.files[0]:{}},isImage(){return Io(this.firstFile)},isVideo(){return mc(this.firstFile)},isAudio(){return P1(this.firstFile)},isOtherFile(){var e,t;return((t=(e=this.messageReply)==null?void 0:e.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},yI={class:"vac-reply-box"},wI={class:"vac-reply-info"},xI={class:"vac-reply-username"},SI={class:"vac-reply-content"},AI=["src"],EI={key:1,controls:"",class:"vac-image-reply"},MI=["src"],TI={key:3,class:"vac-image-reply vac-file-container"},RI={class:"vac-text-ellipsis"},kI={key:0,class:"vac-text-ellipsis vac-text-extension"},II={class:"vac-icon-reply"};function OI(e,t,n,s,o,a){const c=vt("format-message"),f=vt("audio-player"),m=vt("svg-icon");return xe(),en(On,{name:"vac-slide-up"},{default:mt(()=>[n.messageReply?(xe(),Le("div",{key:0,class:"vac-reply-container",style:Wt({bottom:`${a.footerHeight}px`})},[ze("div",yI,[ze("div",wI,[ze("div",xI,xt(n.messageReply.username),1),ze("div",SI,[rt(c,{"message-id":n.messageReply._id,content:n.messageReply.content,users:n.room.users,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),a.isImage?(xe(),Le("img",{key:0,src:a.firstFile.url,class:"vac-image-reply"},null,8,AI)):a.isVideo?(xe(),Le("video",EI,[ze("source",{src:a.firstFile.url},null,8,MI)])):a.isAudio?(xe(),en(f,{key:2,src:a.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["src"])):a.isOtherFile?(xe(),Le("div",TI,[ze("div",null,[tt(e.$slots,"file-icon",{},()=>[rt(m,{name:"file"})])]),ze("div",RI,xt(a.firstFile.name),1),a.firstFile.extension?(xe(),Le("div",kI,xt(a.firstFile.extension),1)):st("",!0)])):st("",!0)]),ze("div",II,[ze("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=d=>e.$emit("reset-message"))},[tt(e.$slots,"reply-close-icon",{},()=>[rt(m,{name:"close-outline"})])])])],4)):st("",!0)]),_:3})}var CI=hn(bI,[["render",OI]]);const LI={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredUsersTag(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},BI=["onMouseover","onClick"],NI={class:"vac-tags-info"},FI={class:"vac-tags-username"};function PI(e,t,n,s,o,a){return xe(),en(On,{name:"vac-slide-up"},{default:mt(()=>[n.filteredUsersTag.length?(xe(),Le("div",{key:0,class:"vac-tags-container",style:Wt({bottom:`${a.footerHeight}px`})},[(xe(!0),Le(Vt,null,Tt(n.filteredUsersTag,(c,f)=>(xe(),Le("div",{key:c._id,class:It(["vac-tags-box",{"vac-tags-box-active":f===o.activeItem}]),onMouseover:m=>o.activeItem=f,onClick:m=>e.$emit("select-user-tag",c)},[ze("div",NI,[c.avatar?(xe(),Le("div",{key:0,class:"vac-avatar vac-tags-avatar",style:Wt({"background-image":`url('${c.avatar}')`})},null,4)):st("",!0),ze("div",FI,xt(c.username),1)])],42,BI))),128))],4)):st("",!0)]),_:1})}var HI=hn(LI,[["render",PI]]);const jI={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredEmojis(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},UI=["onMouseover","onClick"];function DI(e,t,n,s,o,a){return xe(),en(On,{name:"vac-slide-up"},{default:mt(()=>[n.filteredEmojis.length?(xe(),Le("div",{key:0,class:"vac-emojis-container",style:Wt({bottom:`${a.footerHeight}px`})},[(xe(!0),Le(Vt,null,Tt(n.filteredEmojis,(c,f)=>(xe(),Le("div",{key:c,class:It(["vac-emoji-element",{"vac-emoji-element-active":f===o.activeItem}]),onMouseover:m=>o.activeItem=f,onClick:m=>e.$emit("select-emoji",c)},xt(c),43,UI))),128))],4)):st("",!0)]),_:1})}var $I=hn(jI,[["render",DI]]);const qI={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredTemplatesText(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},VI=["onMouseover","onClick"],zI={class:"vac-template-info"},KI={class:"vac-template-tag"},YI={class:"vac-template-text"};function WI(e,t,n,s,o,a){return xe(),en(On,{name:"vac-slide-up"},{default:mt(()=>[n.filteredTemplatesText.length?(xe(),Le("div",{key:0,class:"vac-template-container vac-app-box-shadow",style:Wt({bottom:`${a.footerHeight}px`})},[(xe(!0),Le(Vt,null,Tt(n.filteredTemplatesText,(c,f)=>(xe(),Le("div",{key:f,class:It(["vac-template-box",{"vac-template-active":f===o.activeItem}]),onMouseover:m=>o.activeItem=f,onClick:m=>e.$emit("select-template-text",c)},[ze("div",zI,[ze("div",KI," /"+xt(c.tag),1),ze("div",YI,xt(c.text),1)])],42,VI))),128))],4)):st("",!0)]),_:1})}var XI=hn(qI,[["render",WI]]);function GI(e){return new Int8Array(e)}function e4(e){return new Int16Array(e)}function t4(e){return new Int32Array(e)}function n4(e){return new Float32Array(e)}function ZI(e){return new Float64Array(e)}function r4(e){if(e.length==1)return n4(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(r4(e));return n}function s4(e){if(e.length==1)return t4(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(s4(e));return n}function i4(e){if(e.length==1)return e4(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(i4(e));return n}function a4(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(a4(e));return n}var o4={};o4.fill=function(e,t,n,s){if(arguments.length==2)for(var o=0;o<e.length;o++)e[o]=arguments[1];else for(var o=t;o<n;o++)e[o]=s};var _c={};_c.arraycopy=function(e,t,n,s,o){for(var a=t+o;t<a;)n[s++]=e[t++]};_c.out={};_c.out.println=function(e){console.log(e)};_c.out.printf=function(){console.log.apply(console,arguments)};var H1={};H1.SQRT2=1.4142135623730951;H1.FAST_LOG10=function(e){return Math.log10(e)};H1.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function li(e){this.ordinal=e}li.short_block_allowed=new li(0);li.short_block_coupled=new li(1);li.short_block_dispensed=new li(2);li.short_block_forced=new li(3);var l4={};l4.MAX_VALUE=34028235e31;function Hr(e){this.ordinal=e}Hr.vbr_off=new Hr(0);Hr.vbr_mt=new Hr(1);Hr.vbr_rh=new Hr(2);Hr.vbr_abr=new Hr(3);Hr.vbr_mtrh=new Hr(4);Hr.vbr_default=Hr.vbr_mtrh;var QI=function(e){},Je={System:_c,VbrMode:Hr,Float:l4,ShortBlock:li,Util:H1,Arrays:o4,new_array_n:a4,new_byte:GI,new_double:ZI,new_float:n4,new_float_n:r4,new_int:t4,new_int_n:s4,new_short:e4,new_short_n:i4,assert:QI},JI=Je.System,An=Je.Util,eO=Je.Arrays,tO=Je.new_float;function nO(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*An.SQRT2*.5/2384e-9,.017876148*An.SQRT2*.5/2384e-9,.003134727*An.SQRT2*.5/2384e-9,.002457142*An.SQRT2*.5/2384e-9,971317e-9*An.SQRT2*.5/2384e-9,218868e-9*An.SQRT2*.5/2384e-9,101566e-9*An.SQRT2*.5/2384e-9,13828e-9*An.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=12,n=36,s=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],o=s[H.SHORT_TYPE],a=s[H.SHORT_TYPE],c=s[H.SHORT_TYPE],f=s[H.SHORT_TYPE],m=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function d(w,M,u){for(var $=10,U=M+238-14-286,D=-15;D<0;D++){var b,C,F;b=e[$+-10],C=w[U+-224]*b,F=w[M+224]*b,b=e[$+-9],C+=w[U+-160]*b,F+=w[M+160]*b,b=e[$+-8],C+=w[U+-96]*b,F+=w[M+96]*b,b=e[$+-7],C+=w[U+-32]*b,F+=w[M+32]*b,b=e[$+-6],C+=w[U+32]*b,F+=w[M+-32]*b,b=e[$+-5],C+=w[U+96]*b,F+=w[M+-96]*b,b=e[$+-4],C+=w[U+160]*b,F+=w[M+-160]*b,b=e[$+-3],C+=w[U+224]*b,F+=w[M+-224]*b,b=e[$+-2],C+=w[M+-256]*b,F-=w[U+256]*b,b=e[$+-1],C+=w[M+-192]*b,F-=w[U+192]*b,b=e[$+0],C+=w[M+-128]*b,F-=w[U+128]*b,b=e[$+1],C+=w[M+-64]*b,F-=w[U+64]*b,b=e[$+2],C+=w[M+0]*b,F-=w[U+0]*b,b=e[$+3],C+=w[M+64]*b,F-=w[U+-64]*b,b=e[$+4],C+=w[M+128]*b,F-=w[U+-128]*b,b=e[$+5],C+=w[M+192]*b,F-=w[U+-192]*b,C*=e[$+6],b=F-C,u[30+D*2]=F+C,u[31+D*2]=e[$+7]*b,$+=18,M--,U++}{var C,F,L,V;F=w[M+-16]*e[$+-10],C=w[M+-32]*e[$+-2],F+=(w[M+-48]-w[M+16])*e[$+-9],C+=w[M+-96]*e[$+-1],F+=(w[M+-80]+w[M+48])*e[$+-8],C+=w[M+-160]*e[$+0],F+=(w[M+-112]-w[M+80])*e[$+-7],C+=w[M+-224]*e[$+1],F+=(w[M+-144]+w[M+112])*e[$+-6],C-=w[M+32]*e[$+2],F+=(w[M+-176]-w[M+144])*e[$+-5],C-=w[M+96]*e[$+3],F+=(w[M+-208]+w[M+176])*e[$+-4],C-=w[M+160]*e[$+4],F+=(w[M+-240]-w[M+208])*e[$+-3],C-=w[M+224],L=C-F,V=C+F,F=u[14],C=u[15]-F,u[31]=V+F,u[30]=L+C,u[15]=L-C,u[14]=V-F}{var v;v=u[28]-u[0],u[0]+=u[28],u[28]=v*e[$+-2*18+7],v=u[29]-u[1],u[1]+=u[29],u[29]=v*e[$+-2*18+7],v=u[26]-u[2],u[2]+=u[26],u[26]=v*e[$+-4*18+7],v=u[27]-u[3],u[3]+=u[27],u[27]=v*e[$+-4*18+7],v=u[24]-u[4],u[4]+=u[24],u[24]=v*e[$+-6*18+7],v=u[25]-u[5],u[5]+=u[25],u[25]=v*e[$+-6*18+7],v=u[22]-u[6],u[6]+=u[22],u[22]=v*An.SQRT2,v=u[23]-u[7],u[7]+=u[23],u[23]=v*An.SQRT2-u[7],u[7]-=u[6],u[22]-=u[7],u[23]-=u[22],v=u[6],u[6]=u[31]-v,u[31]=u[31]+v,v=u[7],u[7]=u[30]-v,u[30]=u[30]+v,v=u[22],u[22]=u[15]-v,u[15]=u[15]+v,v=u[23],u[23]=u[14]-v,u[14]=u[14]+v,v=u[20]-u[8],u[8]+=u[20],u[20]=v*e[$+-10*18+7],v=u[21]-u[9],u[9]+=u[21],u[21]=v*e[$+-10*18+7],v=u[18]-u[10],u[10]+=u[18],u[18]=v*e[$+-12*18+7],v=u[19]-u[11],u[11]+=u[19],u[19]=v*e[$+-12*18+7],v=u[16]-u[12],u[12]+=u[16],u[16]=v*e[$+-14*18+7],v=u[17]-u[13],u[13]+=u[17],u[17]=v*e[$+-14*18+7],v=-u[20]+u[24],u[20]+=u[24],u[24]=v*e[$+-12*18+7],v=-u[21]+u[25],u[21]+=u[25],u[25]=v*e[$+-12*18+7],v=u[4]-u[8],u[4]+=u[8],u[8]=v*e[$+-12*18+7],v=u[5]-u[9],u[5]+=u[9],u[9]=v*e[$+-12*18+7],v=u[0]-u[12],u[0]+=u[12],u[12]=v*e[$+-4*18+7],v=u[1]-u[13],u[1]+=u[13],u[13]=v*e[$+-4*18+7],v=u[16]-u[28],u[16]+=u[28],u[28]=v*e[$+-4*18+7],v=-u[17]+u[29],u[17]+=u[29],u[29]=v*e[$+-4*18+7],v=An.SQRT2*(u[2]-u[10]),u[2]+=u[10],u[10]=v,v=An.SQRT2*(u[3]-u[11]),u[3]+=u[11],u[11]=v,v=An.SQRT2*(-u[18]+u[26]),u[18]+=u[26],u[26]=v-u[18],v=An.SQRT2*(-u[19]+u[27]),u[19]+=u[27],u[27]=v-u[19],v=u[2],u[19]-=u[3],u[3]-=v,u[2]=u[31]-v,u[31]+=v,v=u[3],u[11]-=u[19],u[18]-=v,u[3]=u[30]-v,u[30]+=v,v=u[18],u[27]-=u[11],u[19]-=v,u[18]=u[15]-v,u[15]+=v,v=u[19],u[10]-=v,u[19]=u[14]-v,u[14]+=v,v=u[10],u[11]-=v,u[10]=u[23]-v,u[23]+=v,v=u[11],u[26]-=v,u[11]=u[22]-v,u[22]+=v,v=u[26],u[27]-=v,u[26]=u[7]-v,u[7]+=v,v=u[27],u[27]=u[6]-v,u[6]+=v,v=An.SQRT2*(u[0]-u[4]),u[0]+=u[4],u[4]=v,v=An.SQRT2*(u[1]-u[5]),u[1]+=u[5],u[5]=v,v=An.SQRT2*(u[16]-u[20]),u[16]+=u[20],u[20]=v,v=An.SQRT2*(u[17]-u[21]),u[17]+=u[21],u[21]=v,v=-An.SQRT2*(u[8]-u[12]),u[8]+=u[12],u[12]=v-u[8],v=-An.SQRT2*(u[9]-u[13]),u[9]+=u[13],u[13]=v-u[9],v=-An.SQRT2*(u[25]-u[29]),u[25]+=u[29],u[29]=v-u[25],v=-An.SQRT2*(u[24]+u[28]),u[24]-=u[28],u[28]=v-u[24],v=u[24]-u[16],u[24]=v,v=u[20]-v,u[20]=v,v=u[28]-v,u[28]=v,v=u[25]-u[17],u[25]=v,v=u[21]-v,u[21]=v,v=u[29]-v,u[29]=v,v=u[17]-u[1],u[17]=v,v=u[9]-v,u[9]=v,v=u[25]-v,u[25]=v,v=u[5]-v,u[5]=v,v=u[21]-v,u[21]=v,v=u[13]-v,u[13]=v,v=u[29]-v,u[29]=v,v=u[1]-u[0],u[1]=v,v=u[16]-v,u[16]=v,v=u[17]-v,u[17]=v,v=u[8]-v,u[8]=v,v=u[9]-v,u[9]=v,v=u[24]-v,u[24]=v,v=u[25]-v,u[25]=v,v=u[4]-v,u[4]=v,v=u[5]-v,u[5]=v,v=u[20]-v,u[20]=v,v=u[21]-v,u[21]=v,v=u[12]-v,u[12]=v,v=u[13]-v,u[13]=v,v=u[28]-v,u[28]=v,v=u[29]-v,u[29]=v,v=u[0],u[0]+=u[31],u[31]-=v,v=u[1],u[1]+=u[30],u[30]-=v,v=u[16],u[16]+=u[15],u[15]-=v,v=u[17],u[17]+=u[14],u[14]-=v,v=u[8],u[8]+=u[23],u[23]-=v,v=u[9],u[9]+=u[22],u[22]-=v,v=u[24],u[24]+=u[7],u[7]-=v,v=u[25],u[25]+=u[6],u[6]-=v,v=u[4],u[4]+=u[27],u[27]-=v,v=u[5],u[5]+=u[26],u[26]-=v,v=u[20],u[20]+=u[11],u[11]-=v,v=u[21],u[21]+=u[10],u[10]-=v,v=u[12],u[12]+=u[19],u[19]-=v,v=u[13],u[13]+=u[18],u[18]-=v,v=u[28],u[28]+=u[3],u[3]-=v,v=u[29],u[29]+=u[2],u[2]-=v}}function p(w,M){for(var u=0;u<3;u++){var $,U,D,b,C,F;b=w[M+2*3]*s[H.SHORT_TYPE][0]-w[M+5*3],$=w[M+0*3]*s[H.SHORT_TYPE][2]-w[M+3*3],U=b+$,D=b-$,b=w[M+5*3]*s[H.SHORT_TYPE][0]+w[M+2*3],$=w[M+3*3]*s[H.SHORT_TYPE][2]+w[M+0*3],C=b+$,F=-b+$,$=(w[M+1*3]*s[H.SHORT_TYPE][1]-w[M+4*3])*2069978111953089e-26,b=(w[M+4*3]*s[H.SHORT_TYPE][1]+w[M+1*3])*2069978111953089e-26,w[M+3*0]=U*190752519173728e-25+$,w[M+3*5]=-C*190752519173728e-25+b,D=D*.8660254037844387*1907525191737281e-26,C=C*.5*1907525191737281e-26+b,w[M+3*1]=D-C,w[M+3*2]=D+C,U=U*.5*1907525191737281e-26-$,F=F*.8660254037844387*1907525191737281e-26,w[M+3*3]=U+F,w[M+3*4]=U-F,M++}}function h(w,M,u){var $,U;{var D,b,C,F,L,V,v,E;D=u[17]-u[9],C=u[15]-u[11],F=u[14]-u[12],L=u[0]+u[8],V=u[1]+u[7],v=u[2]+u[6],E=u[3]+u[5],w[M+17]=L+v-E-(V-u[4]),U=(L+v-E)*a[12+7]+(V-u[4]),$=(D-C-F)*a[12+6],w[M+5]=$+U,w[M+6]=$-U,b=(u[16]-u[10])*a[12+6],V=V*a[12+7]+u[4],$=D*a[12+0]+b+C*a[12+1]+F*a[12+2],U=-L*a[12+4]+V-v*a[12+5]+E*a[12+3],w[M+1]=$+U,w[M+2]=$-U,$=D*a[12+1]-b-C*a[12+2]+F*a[12+0],U=-L*a[12+5]+V-v*a[12+3]+E*a[12+4],w[M+9]=$+U,w[M+10]=$-U,$=D*a[12+2]-b+C*a[12+0]-F*a[12+1],U=L*a[12+3]-V+v*a[12+4]-E*a[12+5],w[M+13]=$+U,w[M+14]=$-U}{var T,y,A,S,x,k,R,z;T=u[8]-u[0],A=u[6]-u[2],S=u[5]-u[3],x=u[17]+u[9],k=u[16]+u[10],R=u[15]+u[11],z=u[14]+u[12],w[M+0]=x+R+z+(k+u[13]),$=(x+R+z)*a[12+7]-(k+u[13]),U=(T-A+S)*a[12+6],w[M+11]=$+U,w[M+12]=$-U,y=(u[7]-u[1])*a[12+6],k=u[13]-k*a[12+7],$=x*a[12+3]-k+R*a[12+4]+z*a[12+5],U=T*a[12+2]+y+A*a[12+0]+S*a[12+1],w[M+3]=$+U,w[M+4]=$-U,$=-x*a[12+5]+k-R*a[12+3]-z*a[12+4],U=T*a[12+1]+y-A*a[12+2]-S*a[12+0],w[M+7]=$+U,w[M+8]=$-U,$=-x*a[12+4]+k-R*a[12+5]-z*a[12+3],U=T*a[12+0]-y+A*a[12+1]-S*a[12+2],w[M+15]=$+U,w[M+16]=$-U}}this.mdct_sub48=function(w,M,u){for(var $=M,U=286,D=0;D<w.channels_out;D++){for(var b=0;b<w.mode_gr;b++){for(var C,F=w.l3_side.tt[b][D],L=F.xr,V=0,v=w.sb_sample[D][1-b],E=0,T=0;T<18/2;T++)for(d($,U,v[E]),d($,U+32,v[E+1]),E+=2,U+=64,C=1;C<32;C+=2)v[E-1][C]*=-1;for(C=0;C<32;C++,V+=18){var y=F.block_type,A=w.sb_sample[D][b],S=w.sb_sample[D][1-b];if(F.mixed_block_flag!=0&&C<2&&(y=0),w.amp_filter[C]<1e-12)eO.fill(L,V+0,V+18,0);else{if(w.amp_filter[C]<1)for(var T=0;T<18;T++)S[T][m[C]]*=w.amp_filter[C];if(y==H.SHORT_TYPE){for(var T=-t/4;T<0;T++){var x=s[H.SHORT_TYPE][T+3];L[V+T*3+9]=A[9+T][m[C]]*x-A[8-T][m[C]],L[V+T*3+18]=A[14-T][m[C]]*x+A[15+T][m[C]],L[V+T*3+10]=A[15+T][m[C]]*x-A[14-T][m[C]],L[V+T*3+19]=S[2-T][m[C]]*x+S[3+T][m[C]],L[V+T*3+11]=S[3+T][m[C]]*x-S[2-T][m[C]],L[V+T*3+20]=S[8-T][m[C]]*x+S[9+T][m[C]]}p(L,V)}else{for(var k=tO(18),T=-n/4;T<0;T++){var R,z;R=s[y][T+27]*S[T+9][m[C]]+s[y][T+36]*S[8-T][m[C]],z=s[y][T+9]*A[T+9][m[C]]-s[y][T+18]*A[8-T][m[C]],k[T+9]=R-z*o[3+T+9],k[T+18]=R*o[3+T+9]+z}h(L,V,k)}}if(y!=H.SHORT_TYPE&&C!=0)for(var T=7;T>=0;--T){var ne,Y;ne=L[V+T]*c[20+T]+L[V+-1-T]*f[28+T],Y=L[V+T]*f[28+T]-L[V+-1-T]*c[20+T],L[V+-1-T]=ne,L[V+T]=Y}}}if($=u,U=286,w.mode_gr==1)for(var te=0;te<18;te++)JI.arraycopy(w.sb_sample[D][1][te],0,w.sb_sample[D][0][te],0,32)}}}var rO=Je.System,sO=Je.new_float,iO=Je.new_float_n;function e1(){this.l=sO(H.SBMAX_l),this.s=iO([H.SBMAX_s,3]);var e=this;this.assign=function(t){rO.arraycopy(t.l,0,e.l,0,H.SBMAX_l);for(var n=0;n<H.SBMAX_s;n++)for(var s=0;s<3;s++)e.s[n][s]=t.s[n][s]}}function ki(){this.thm=new e1,this.en=new e1}function Yt(e){var t=e;this.ordinal=function(){return t}}Yt.STEREO=new Yt(0);Yt.JOINT_STEREO=new Yt(1);Yt.DUAL_CHANNEL=new Yt(2);Yt.MONO=new Yt(3);Yt.NOT_SET=new Yt(4);var S_=Je.System,Au=Je.VbrMode,A_=Je.new_array_n,E_=Je.new_float,aO=Je.new_float_n,oO=Je.new_int,Eu=Je.assert;H.ENCDELAY=576;H.POSTDELAY=1152;H.MDCTDELAY=48;H.FFTOFFSET=224+H.MDCTDELAY;H.DECDELAY=528;H.SBLIMIT=32;H.CBANDS=64;H.SBPSY_l=21;H.SBPSY_s=12;H.SBMAX_l=22;H.SBMAX_s=13;H.PSFB21=6;H.PSFB12=6;H.BLKSIZE=1024;H.HBLKSIZE=H.BLKSIZE/2+1;H.BLKSIZE_s=256;H.HBLKSIZE_s=H.BLKSIZE_s/2+1;H.NORM_TYPE=0;H.START_TYPE=1;H.SHORT_TYPE=2;H.STOP_TYPE=3;H.MPG_MD_LR_LR=0;H.MPG_MD_LR_I=1;H.MPG_MD_MS_LR=2;H.MPG_MD_MS_I=3;H.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function H(){var e=H.FFTOFFSET,t=H.MPG_MD_MS_LR,n=null;this.psy=null;var s=null,o=null,a=null;this.setModules=function(p,h,w,M){n=p,this.psy=h,s=h,o=M,a=w};var c=new nO;function f(p){var h,w;if(p.ATH.useAdjust==0){p.ATH.adjust=1;return}if(w=p.loudness_sq[0][0],h=p.loudness_sq[1][0],p.channels_out==2?(w+=p.loudness_sq[0][1],h+=p.loudness_sq[1][1]):(w+=w,h+=h),p.mode_gr==2&&(w=Math.max(w,h)),w*=.5,w*=p.ATH.aaSensitivityP,w>.03125)p.ATH.adjust>=1?p.ATH.adjust=1:p.ATH.adjust<p.ATH.adjustLimit&&(p.ATH.adjust=p.ATH.adjustLimit),p.ATH.adjustLimit=1;else{var M=31.98*w+625e-6;p.ATH.adjust>=M?(p.ATH.adjust*=M*.075+.925,p.ATH.adjust<M&&(p.ATH.adjust=M)):p.ATH.adjustLimit>=M?p.ATH.adjust=M:p.ATH.adjust<p.ATH.adjustLimit&&(p.ATH.adjust=p.ATH.adjustLimit),p.ATH.adjustLimit=M}}function m(p){var h,w;for(Eu(p.bitrate_index>=0&&p.bitrate_index<16),Eu(p.mode_ext>=0&&p.mode_ext<4),p.bitrate_stereoMode_Hist[p.bitrate_index][4]++,p.bitrate_stereoMode_Hist[15][4]++,p.channels_out==2&&(p.bitrate_stereoMode_Hist[p.bitrate_index][p.mode_ext]++,p.bitrate_stereoMode_Hist[15][p.mode_ext]++),h=0;h<p.mode_gr;++h)for(w=0;w<p.channels_out;++w){var M=p.l3_side.tt[h][w].block_type|0;p.l3_side.tt[h][w].mixed_block_flag!=0&&(M=4),p.bitrate_blockType_Hist[p.bitrate_index][M]++,p.bitrate_blockType_Hist[p.bitrate_index][5]++,p.bitrate_blockType_Hist[15][M]++,p.bitrate_blockType_Hist[15][5]++}}function d(p,h){var w=p.internal_flags,M,u;if(w.lame_encode_frame_init==0){var $,U,D=E_(2014),b=E_(286+1152+576);for(w.lame_encode_frame_init=1,$=0,U=0;$<286+576*(1+w.mode_gr);++$)$<576*w.mode_gr?(D[$]=0,w.channels_out==2&&(b[$]=0)):(D[$]=h[0][U],w.channels_out==2&&(b[$]=h[1][U]),++U);for(u=0;u<w.mode_gr;u++)for(M=0;M<w.channels_out;M++)w.l3_side.tt[u][M].block_type=H.SHORT_TYPE;c.mdct_sub48(w,D,b),Eu(w.mf_size>=H.BLKSIZE+p.framesize-H.FFTOFFSET),Eu(w.mf_size>=512+p.framesize-32)}}this.lame_encode_mp3_frame=function(p,h,w,M,u,$){var U,D=A_([2,2]);D[0][0]=new ki,D[0][1]=new ki,D[1][0]=new ki,D[1][1]=new ki;var b=A_([2,2]);b[0][0]=new ki,b[0][1]=new ki,b[1][0]=new ki,b[1][1]=new ki;var C,F=[null,null],L=p.internal_flags,V=aO([2,4]),v=[.5,.5],E=[[0,0],[0,0]],T=[[0,0],[0,0]],y,A,S;if(F[0]=h,F[1]=w,L.lame_encode_frame_init==0&&d(p,F),L.padding=0,(L.slot_lag-=L.frac_SpF)<0&&(L.slot_lag+=p.out_samplerate,L.padding=1),L.psymodel!=0){var x,k=[null,null],R=0,z=oO(2);for(S=0;S<L.mode_gr;S++){for(A=0;A<L.channels_out;A++)k[A]=F[A],R=576+S*576-H.FFTOFFSET;if(p.VBR==Au.vbr_mtrh||p.VBR==Au.vbr_mt?x=s.L3psycho_anal_vbr(p,k,R,S,D,b,E[S],T[S],V[S],z):x=s.L3psycho_anal_ns(p,k,R,S,D,b,E[S],T[S],V[S],z),x!=0)return-4;for(p.mode==Yt.JOINT_STEREO&&(v[S]=V[S][2]+V[S][3],v[S]>0&&(v[S]=V[S][3]/v[S])),A=0;A<L.channels_out;A++){var ne=L.l3_side.tt[S][A];ne.block_type=z[A],ne.mixed_block_flag=0}}}else for(S=0;S<L.mode_gr;S++)for(A=0;A<L.channels_out;A++)L.l3_side.tt[S][A].block_type=H.NORM_TYPE,L.l3_side.tt[S][A].mixed_block_flag=0,T[S][A]=E[S][A]=700;if(f(L),c.mdct_sub48(L,F[0],F[1]),L.mode_ext=H.MPG_MD_LR_LR,p.force_ms)L.mode_ext=H.MPG_MD_MS_LR;else if(p.mode==Yt.JOINT_STEREO){var Y=0,te=0;for(S=0;S<L.mode_gr;S++)for(A=0;A<L.channels_out;A++)Y+=T[S][A],te+=E[S][A];if(Y<=1*te){var g=L.l3_side.tt[0],I=L.l3_side.tt[L.mode_gr-1];g[0].block_type==g[1].block_type&&I[0].block_type==I[1].block_type&&(L.mode_ext=H.MPG_MD_MS_LR)}}if(L.mode_ext==t?(C=b,y=T):(C=D,y=E),p.analysis&&L.pinfo!=null)for(S=0;S<L.mode_gr;S++)for(A=0;A<L.channels_out;A++)L.pinfo.ms_ratio[S]=L.ms_ratio[S],L.pinfo.ms_ener_ratio[S]=v[S],L.pinfo.blocktype[S][A]=L.l3_side.tt[S][A].block_type,L.pinfo.pe[S][A]=y[S][A],S_.arraycopy(L.l3_side.tt[S][A].xr,0,L.pinfo.xr[S][A],0,576),L.mode_ext==t&&(L.pinfo.ers[S][A]=L.pinfo.ers[S][A+2],S_.arraycopy(L.pinfo.energy[S][A+2],0,L.pinfo.energy[S][A],0,L.pinfo.energy[S][A].length));if(p.VBR==Au.vbr_off||p.VBR==Au.vbr_abr){var le,he;for(le=0;le<18;le++)L.nsPsy.pefirbuf[le]=L.nsPsy.pefirbuf[le+1];for(he=0,S=0;S<L.mode_gr;S++)for(A=0;A<L.channels_out;A++)he+=y[S][A];for(L.nsPsy.pefirbuf[18]=he,he=L.nsPsy.pefirbuf[9],le=0;le<9;le++)he+=(L.nsPsy.pefirbuf[le]+L.nsPsy.pefirbuf[18-le])*H.fircoef[le];for(he=670*5*L.mode_gr*L.channels_out/he,S=0;S<L.mode_gr;S++)for(A=0;A<L.channels_out;A++)y[S][A]*=he}if(L.iteration_loop.iteration_loop(p,y,v,C),n.format_bitstream(p),U=n.copy_buffer(L,M,u,$,1),p.bWriteVbrTag&&o.addVbrFrame(p),p.analysis&&L.pinfo!=null){for(A=0;A<L.channels_out;A++){var He;for(He=0;He<e;He++)L.pinfo.pcmdata[A][He]=L.pinfo.pcmdata[A][He+p.framesize];for(He=e;He<1600;He++)L.pinfo.pcmdata[A][He]=F[A][He-e]}a.set_frame_pinfo(p,C)}return m(L),U}}var M_=Je.Util,T_=Je.new_float;function lO(){var e=T_(H.BLKSIZE),t=T_(H.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function s(a,c,f){var m=0,d,p,h;f<<=1;var w=c+f;d=4;do{var M,u,$,U,D,b,C;C=d>>1,U=d,D=d<<1,b=D+U,d=D<<1,p=c,h=p+C;do{var F,L,V,v;L=a[p+0]-a[p+U],F=a[p+0]+a[p+U],v=a[p+D]-a[p+b],V=a[p+D]+a[p+b],a[p+D]=F-V,a[p+0]=F+V,a[p+b]=L-v,a[p+U]=L+v,L=a[h+0]-a[h+U],F=a[h+0]+a[h+U],v=M_.SQRT2*a[h+b],V=M_.SQRT2*a[h+D],a[h+D]=F-V,a[h+0]=F+V,a[h+b]=L-v,a[h+U]=L+v,h+=d,p+=d}while(p<w);for(u=n[m+0],M=n[m+1],$=1;$<C;$++){var E,T;E=1-2*M*M,T=2*M*u,p=c+$,h=c+U-$;do{var y,A,S,F,L,x,V,k,v,R;A=T*a[p+U]-E*a[h+U],y=E*a[p+U]+T*a[h+U],L=a[p+0]-y,F=a[p+0]+y,x=a[h+0]-A,S=a[h+0]+A,A=T*a[p+b]-E*a[h+b],y=E*a[p+b]+T*a[h+b],v=a[p+D]-y,V=a[p+D]+y,R=a[h+D]-A,k=a[h+D]+A,A=M*V-u*R,y=u*V+M*R,a[p+D]=F-y,a[p+0]=F+y,a[h+b]=x-A,a[h+U]=x+A,A=u*k-M*v,y=M*k+u*v,a[h+D]=S-y,a[h+0]=S+y,a[p+b]=L-A,a[p+U]=L+A,h+=d,p+=d}while(p<w);E=u,u=E*n[m+0]-M*n[m+1],M=E*n[m+1]+M*n[m+0]}m+=2}while(d<f)}var o=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(a,c,f,m,d){for(var p=0;p<3;p++){var h=H.BLKSIZE_s/2,w=65535&576/3*(p+1),M=H.BLKSIZE_s/8-1;do{var u,$,U,D,b,C=o[M<<2]&255;u=t[C]*m[f][d+C+w],b=t[127-C]*m[f][d+C+w+128],$=u-b,u=u+b,U=t[C+64]*m[f][d+C+w+64],b=t[63-C]*m[f][d+C+w+192],D=U-b,U=U+b,h-=4,c[p][h+0]=u+U,c[p][h+2]=u-U,c[p][h+1]=$+D,c[p][h+3]=$-D,u=t[C+1]*m[f][d+C+w+1],b=t[126-C]*m[f][d+C+w+129],$=u-b,u=u+b,U=t[C+65]*m[f][d+C+w+65],b=t[62-C]*m[f][d+C+w+193],D=U-b,U=U+b,c[p][h+H.BLKSIZE_s/2+0]=u+U,c[p][h+H.BLKSIZE_s/2+2]=u-U,c[p][h+H.BLKSIZE_s/2+1]=$+D,c[p][h+H.BLKSIZE_s/2+3]=$-D}while(--M>=0);s(c[p],h,H.BLKSIZE_s/2)}},this.fft_long=function(a,c,f,m,d){var p=H.BLKSIZE/8-1,h=H.BLKSIZE/2;do{var w,M,u,$,U,D=o[p]&255;w=e[D]*m[f][d+D],U=e[D+512]*m[f][d+D+512],M=w-U,w=w+U,u=e[D+256]*m[f][d+D+256],U=e[D+768]*m[f][d+D+768],$=u-U,u=u+U,h-=4,c[h+0]=w+u,c[h+2]=w-u,c[h+1]=M+$,c[h+3]=M-$,w=e[D+1]*m[f][d+D+1],U=e[D+513]*m[f][d+D+513],M=w-U,w=w+U,u=e[D+257]*m[f][d+D+257],U=e[D+769]*m[f][d+D+769],$=u-U,u=u+U,c[h+H.BLKSIZE/2+0]=w+u,c[h+H.BLKSIZE/2+2]=w-u,c[h+H.BLKSIZE/2+1]=M+$,c[h+H.BLKSIZE/2+3]=M-$}while(--p>=0);s(c,h,H.BLKSIZE/2)},this.init_fft=function(a){for(var c=0;c<H.BLKSIZE;c++)e[c]=.42-.5*Math.cos(2*Math.PI*(c+.5)/H.BLKSIZE)+.08*Math.cos(4*Math.PI*(c+.5)/H.BLKSIZE);for(var c=0;c<H.BLKSIZE_s/2;c++)t[c]=.5*(1-Math.cos(2*Math.PI*(c+.5)/H.BLKSIZE_s))}}var oo=Je.VbrMode,R_=Je.Float,lo=Je.ShortBlock,br=Je.Util,cO=Je.Arrays,Cn=Je.new_float,Xr=Je.new_float_n,va=Je.new_int,Mt=Je.assert;function p0(){var e=new lO,t=2.302585092994046,n=2,s=16,o=2,a=16,c=.34,f=1/(14752*14752)/(H.BLKSIZE/2),m=.01,d=.8,p=.6,h=.3,w=3.5,M=21,u=.2302585093;function $(N){return N}function U(N,j){for(var Z=0,Q=0;Q<H.BLKSIZE/2;++Q)Z+=N[Q]*j.ATH.eql_w[Q];return Z*=f,Z}function D(N,j,Z,Q,se,W,fe,ye,ue,Ie,we){var Oe=N.internal_flags;if(ue<2)e.fft_long(Oe,Q[se],ue,Ie,we),e.fft_short(Oe,W[fe],ue,Ie,we);else if(ue==2){for(var Qe=H.BLKSIZE-1;Qe>=0;--Qe){var ut=Q[se+0][Qe],Ve=Q[se+1][Qe];Q[se+0][Qe]=(ut+Ve)*br.SQRT2*.5,Q[se+1][Qe]=(ut-Ve)*br.SQRT2*.5}for(var ct=2;ct>=0;--ct)for(var Qe=H.BLKSIZE_s-1;Qe>=0;--Qe){var ut=W[fe+0][ct][Qe],Ve=W[fe+1][ct][Qe];W[fe+0][ct][Qe]=(ut+Ve)*br.SQRT2*.5,W[fe+1][ct][Qe]=(ut-Ve)*br.SQRT2*.5}}j[0]=Q[se+0][0],j[0]*=j[0];for(var Qe=H.BLKSIZE/2-1;Qe>=0;--Qe){var Me=Q[se+0][H.BLKSIZE/2-Qe],it=Q[se+0][H.BLKSIZE/2+Qe];j[H.BLKSIZE/2-Qe]=(Me*Me+it*it)*.5}for(var ct=2;ct>=0;--ct){Z[ct][0]=W[fe+0][ct][0],Z[ct][0]*=Z[ct][0];for(var Qe=H.BLKSIZE_s/2-1;Qe>=0;--Qe){var Me=W[fe+0][ct][H.BLKSIZE_s/2-Qe],it=W[fe+0][ct][H.BLKSIZE_s/2+Qe];Z[ct][H.BLKSIZE_s/2-Qe]=(Me*Me+it*it)*.5}}{for(var yt=0,Qe=11;Qe<H.HBLKSIZE;Qe++)yt+=j[Qe];Oe.tot_ener[ue]=yt}if(N.analysis){for(var Qe=0;Qe<H.HBLKSIZE;Qe++)Oe.pinfo.energy[ye][ue][Qe]=Oe.pinfo.energy_save[ue][Qe],Oe.pinfo.energy_save[ue][Qe]=j[Qe];Oe.pinfo.pe[ye][ue]=Oe.pe[ue]}N.athaa_loudapprox==2&&ue<2&&(Oe.loudness_sq[ye][ue]=Oe.loudness_sq_save[ue],Oe.loudness_sq_save[ue]=U(j,Oe))}var b=8,C=23,F=15,L,V,v,E=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function T(){L=Math.pow(10,(b+1)/16),V=Math.pow(10,(C+1)/16),v=Math.pow(10,F/10)}var y=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],A=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],S=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function x(N,j,Z,Q,se,W){var fe;if(j>N)if(j<N*V)fe=j/N;else return N+j;else{if(N>=j*V)return N+j;fe=N/j}if(N+=j,Q+3<=3+3){if(fe>=L)return N;var ye=0|br.FAST_LOG10_X(fe,16);return N*A[ye]}var ye=0|br.FAST_LOG10_X(fe,16);if(W!=0?j=se.ATH.cb_s[Z]*se.ATH.adjust:j=se.ATH.cb_l[Z]*se.ATH.adjust,N<v*j){if(N>j){var ue,Ie;return ue=1,ye<=13&&(ue=S[ye]),Ie=br.FAST_LOG10_X(N/j,10/15),N*((y[ye]-ue)*Ie+ue)}return ye>13?N:N*S[ye]}return N*y[ye]}var k=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function R(N,j,Z){var Q;if(N<0&&(N=0),j<0&&(j=0),N<=0)return j;if(j<=0)return N;if(j>N?Q=j/N:Q=N/j,Z>=-2&&Z<=2){if(Q>=L)return N+j;var se=0|br.FAST_LOG10_X(Q,16);return(N+j)*k[se]}return Q<V?N+j:(N<j&&(N=j),N)}function z(N,j){var Z=N.internal_flags;if(Z.channels_out>1){for(var Q=0;Q<H.SBMAX_l;Q++){var se=Z.thm[0].l[Q],W=Z.thm[1].l[Q];Z.thm[0].l[Q]+=W*j,Z.thm[1].l[Q]+=se*j}for(var Q=0;Q<H.SBMAX_s;Q++)for(var fe=0;fe<3;fe++){var se=Z.thm[0].s[Q][fe],W=Z.thm[1].s[Q][fe];Z.thm[0].s[Q][fe]+=W*j,Z.thm[1].s[Q][fe]+=se*j}}}function ne(N){for(var j=0;j<H.SBMAX_l;j++)if(!(N.thm[0].l[j]>1.58*N.thm[1].l[j]||N.thm[1].l[j]>1.58*N.thm[0].l[j])){var Z=N.mld_l[j]*N.en[3].l[j],Q=Math.max(N.thm[2].l[j],Math.min(N.thm[3].l[j],Z));Z=N.mld_l[j]*N.en[2].l[j];var se=Math.max(N.thm[3].l[j],Math.min(N.thm[2].l[j],Z));N.thm[2].l[j]=Q,N.thm[3].l[j]=se}for(var j=0;j<H.SBMAX_s;j++)for(var W=0;W<3;W++)if(!(N.thm[0].s[j][W]>1.58*N.thm[1].s[j][W]||N.thm[1].s[j][W]>1.58*N.thm[0].s[j][W])){var Z=N.mld_s[j]*N.en[3].s[j][W],Q=Math.max(N.thm[2].s[j][W],Math.min(N.thm[3].s[j][W],Z));Z=N.mld_s[j]*N.en[2].s[j][W];var se=Math.max(N.thm[3].s[j][W],Math.min(N.thm[2].s[j][W],Z));N.thm[2].s[j][W]=Q,N.thm[3].s[j][W]=se}}function Y(N,j,Z){var Q=j,se=Math.pow(10,Z);j*=2,Q*=2;for(var W=0;W<H.SBMAX_l;W++){var fe,ye,ue,Ie;if(Ie=N.ATH.cb_l[N.bm_l[W]]*se,fe=Math.min(Math.max(N.thm[0].l[W],Ie),Math.max(N.thm[1].l[W],Ie)),ye=Math.max(N.thm[2].l[W],Ie),ue=Math.max(N.thm[3].l[W],Ie),fe*j<ye+ue){var we=fe*Q/(ye+ue);ye*=we,ue*=we}N.thm[2].l[W]=Math.min(ye,N.thm[2].l[W]),N.thm[3].l[W]=Math.min(ue,N.thm[3].l[W])}se*=H.BLKSIZE_s/H.BLKSIZE;for(var W=0;W<H.SBMAX_s;W++)for(var Oe=0;Oe<3;Oe++){var fe,ye,ue,Ie;if(Ie=N.ATH.cb_s[N.bm_s[W]]*se,fe=Math.min(Math.max(N.thm[0].s[W][Oe],Ie),Math.max(N.thm[1].s[W][Oe],Ie)),ye=Math.max(N.thm[2].s[W][Oe],Ie),ue=Math.max(N.thm[3].s[W][Oe],Ie),fe*j<ye+ue){var we=fe*j/(ye+ue);ye*=we,ue*=we}N.thm[2].s[W][Oe]=Math.min(N.thm[2].s[W][Oe],ye),N.thm[3].s[W][Oe]=Math.min(N.thm[3].s[W][Oe],ue)}}function te(N,j,Z,Q,se){var W,fe,ye=0,ue=0;for(W=fe=0;W<H.SBMAX_s;++fe,++W){for(var Ie=N.bo_s[W],we=N.npart_s,Oe=Ie<we?Ie:we;fe<Oe;)Mt(j[fe]>=0),Mt(Z[fe]>=0),ye+=j[fe],ue+=Z[fe],fe++;if(N.en[Q].s[W][se]=ye,N.thm[Q].s[W][se]=ue,fe>=we){++W;break}Mt(j[fe]>=0),Mt(Z[fe]>=0);{var Qe=N.PSY.bo_s_weight[W],ut=1-Qe;ye=Qe*j[fe],ue=Qe*Z[fe],N.en[Q].s[W][se]+=ye,N.thm[Q].s[W][se]+=ue,ye=ut*j[fe],ue=ut*Z[fe]}}for(;W<H.SBMAX_s;++W)N.en[Q].s[W][se]=0,N.thm[Q].s[W][se]=0}function g(N,j,Z,Q){var se,W,fe=0,ye=0;for(se=W=0;se<H.SBMAX_l;++W,++se){for(var ue=N.bo_l[se],Ie=N.npart_l,we=ue<Ie?ue:Ie;W<we;)Mt(j[W]>=0),Mt(Z[W]>=0),fe+=j[W],ye+=Z[W],W++;if(N.en[Q].l[se]=fe,N.thm[Q].l[se]=ye,W>=Ie){++se;break}Mt(j[W]>=0),Mt(Z[W]>=0);{var Oe=N.PSY.bo_l_weight[se],Qe=1-Oe;fe=Oe*j[W],ye=Oe*Z[W],N.en[Q].l[se]+=fe,N.thm[Q].l[se]+=ye,fe=Qe*j[W],ye=Qe*Z[W]}}for(;se<H.SBMAX_l;++se)N.en[Q].l[se]=0,N.thm[Q].l[se]=0}function I(N,j,Z,Q,se,W){var fe=N.internal_flags,ye,ue;for(ue=ye=0;ue<fe.npart_s;++ue){for(var Ie=0,we=fe.numlines_s[ue],Oe=0;Oe<we;++Oe,++ye){var Qe=j[W][ye];Ie+=Qe}Z[ue]=Ie}for(Mt(ue==fe.npart_s),ye=ue=0;ue<fe.npart_s;ue++){var ut=fe.s3ind_s[ue][0],Ve=fe.s3_ss[ye++]*Z[ut];for(++ut;ut<=fe.s3ind_s[ue][1];)Ve+=fe.s3_ss[ye]*Z[ut],++ye,++ut;{var ct=o*fe.nb_s1[se][ue];Q[ue]=Math.min(Ve,ct)}if(fe.blocktype_old[se&1]==H.SHORT_TYPE){var ct=a*fe.nb_s2[se][ue],Me=Q[ue];Q[ue]=Math.min(ct,Me)}fe.nb_s2[se][ue]=fe.nb_s1[se][ue],fe.nb_s1[se][ue]=Ve,Mt(Q[ue]>=0)}for(;ue<=H.CBANDS;++ue)Z[ue]=0,Q[ue]=0}function le(N,j,Z,Q){var se=N.internal_flags;N.short_blocks==lo.short_block_coupled&&!(j[0]!=0&&j[1]!=0)&&(j[0]=j[1]=0);for(var W=0;W<se.channels_out;W++)Q[W]=H.NORM_TYPE,N.short_blocks==lo.short_block_dispensed&&(j[W]=1),N.short_blocks==lo.short_block_forced&&(j[W]=0),j[W]!=0?(Mt(se.blocktype_old[W]!=H.START_TYPE),se.blocktype_old[W]==H.SHORT_TYPE&&(Q[W]=H.STOP_TYPE)):(Q[W]=H.SHORT_TYPE,se.blocktype_old[W]==H.NORM_TYPE&&(se.blocktype_old[W]=H.START_TYPE),se.blocktype_old[W]==H.STOP_TYPE&&(se.blocktype_old[W]=H.SHORT_TYPE)),Z[W]=se.blocktype_old[W],se.blocktype_old[W]=Q[W]}function he(N,j,Z){return Z>=1?N:Z<=0?j:j>0?Math.pow(N/j,Z)*j:0}var He=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function Ke(N,j){for(var Z=309.07,Q=0;Q<H.SBMAX_s-1;Q++)for(var se=0;se<3;se++){var W=N.thm.s[Q][se];if(W>0){var fe=W*j,ye=N.en.s[Q][se];ye>fe&&(ye>fe*1e10?Z+=He[Q]*(10*t):Z+=He[Q]*br.FAST_LOG10(ye/fe))}}return Z}var qe=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function oe(N,j){for(var Z=281.0575,Q=0;Q<H.SBMAX_l-1;Q++){var se=N.thm.l[Q];if(se>0){var W=se*j,fe=N.en.l[Q];fe>W&&(fe>W*1e10?Z+=qe[Q]*(10*t):Z+=qe[Q]*br.FAST_LOG10(fe/W))}}return Z}function ke(N,j,Z,Q,se){var W,fe;for(W=fe=0;W<N.npart_l;++W){var ye=0,ue=0,Ie;for(Ie=0;Ie<N.numlines_l[W];++Ie,++fe){var we=j[fe];ye+=we,ue<we&&(ue=we)}Z[W]=ye,Q[W]=ue,se[W]=ye*N.rnumlines_l[W],Mt(N.rnumlines_l[W]>=0),Mt(Z[W]>=0),Mt(Q[W]>=0),Mt(se[W]>=0)}}function Se(N,j,Z,Q){var se=E.length-1,W=0,fe=Z[W]+Z[W+1];if(fe>0){var ye=j[W];ye<j[W+1]&&(ye=j[W+1]),Mt(N.numlines_l[W]+N.numlines_l[W+1]-1>0),fe=20*(ye*2-fe)/(fe*(N.numlines_l[W]+N.numlines_l[W+1]-1));var ue=0|fe;ue>se&&(ue=se),Q[W]=ue}else Q[W]=0;for(W=1;W<N.npart_l-1;W++)if(fe=Z[W-1]+Z[W]+Z[W+1],fe>0){var ye=j[W-1];ye<j[W]&&(ye=j[W]),ye<j[W+1]&&(ye=j[W+1]),Mt(N.numlines_l[W-1]+N.numlines_l[W]+N.numlines_l[W+1]-1>0),fe=20*(ye*3-fe)/(fe*(N.numlines_l[W-1]+N.numlines_l[W]+N.numlines_l[W+1]-1));var ue=0|fe;ue>se&&(ue=se),Q[W]=ue}else Q[W]=0;if(Mt(W==N.npart_l-1),fe=Z[W-1]+Z[W],fe>0){var ye=j[W-1];ye<j[W]&&(ye=j[W]),Mt(N.numlines_l[W-1]+N.numlines_l[W]-1>0),fe=20*(ye*2-fe)/(fe*(N.numlines_l[W-1]+N.numlines_l[W]-1));var ue=0|fe;ue>se&&(ue=se),Q[W]=ue}else Q[W]=0;Mt(W==N.npart_l-1)}var Ae=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(N,j,Z,Q,se,W,fe,ye,ue,Ie){var we=N.internal_flags,Oe=Xr([2,H.BLKSIZE]),Qe=Xr([2,3,H.BLKSIZE_s]),ut=Cn(H.CBANDS+1),Ve=Cn(H.CBANDS+1),ct=Cn(H.CBANDS+2),Me=va(2),it=va(2),yt,De,ot,$e,ft,tn,et,pt,St=Xr([2,576]),vn,nr=va(H.CBANDS+2),yn=va(H.CBANDS+2);for(cO.fill(yn,0),yt=we.channels_out,N.mode==Yt.JOINT_STEREO&&(yt=4),N.VBR==oo.vbr_off?vn=we.ResvMax==0?0:we.ResvSize/we.ResvMax*.5:N.VBR==oo.vbr_rh||N.VBR==oo.vbr_mtrh||N.VBR==oo.vbr_mt?vn=.6:vn=1,De=0;De<we.channels_out;De++){var on=j[De],Kn=Z+576-350-M+192;for($e=0;$e<576;$e++){var rr,sr;for(rr=on[Kn+$e+10],sr=0,ft=0;ft<(M-1)/2-1;ft+=2)rr+=Ae[ft]*(on[Kn+$e+ft]+on[Kn+$e+M-ft]),sr+=Ae[ft+1]*(on[Kn+$e+ft+1]+on[Kn+$e+M-ft-1]);St[De][$e]=rr+sr}se[Q][De].en.assign(we.en[De]),se[Q][De].thm.assign(we.thm[De]),yt>2&&(W[Q][De].en.assign(we.en[De+2]),W[Q][De].thm.assign(we.thm[De+2]))}for(De=0;De<yt;De++){var Er,Mr,Pn=Cn(12),ir=[0,0,0,0],di=Cn(12),hi=1,pc,gc=Cn(H.CBANDS),bc=Cn(H.CBANDS),ln=[0,0,0,0],Uo=Cn(H.HBLKSIZE),Do=Xr([3,H.HBLKSIZE_s]);for(Mt(we.npart_s<=H.CBANDS),Mt(we.npart_l<=H.CBANDS),$e=0;$e<3;$e++)Pn[$e]=we.nsPsy.last_en_subshort[De][$e+6],Mt(we.nsPsy.last_en_subshort[De][$e+4]>0),di[$e]=Pn[$e]/we.nsPsy.last_en_subshort[De][$e+4],ir[0]+=Pn[$e];if(De==2)for($e=0;$e<576;$e++){var $o,qo;$o=St[0][$e],qo=St[1][$e],St[0][$e]=$o+qo,St[1][$e]=$o-qo}{var yc=St[De&1],Zi=0;for($e=0;$e<9;$e++){for(var wc=Zi+64,Tn=1;Zi<wc;Zi++)Tn<Math.abs(yc[Zi])&&(Tn=Math.abs(yc[Zi]));we.nsPsy.last_en_subshort[De][$e]=Pn[$e+3]=Tn,ir[1+$e/3]+=Tn,Tn>Pn[$e+3-2]?(Mt(Pn[$e+3-2]>0),Tn=Tn/Pn[$e+3-2]):Pn[$e+3-2]>Tn*10?Tn=Pn[$e+3-2]/(Tn*10):Tn=0,di[$e+3]=Tn}}if(N.analysis){var Va=di[0];for($e=1;$e<12;$e++)Va<di[$e]&&(Va=di[$e]);we.pinfo.ers[Q][De]=we.pinfo.ers_save[De],we.pinfo.ers_save[De]=Va}for(pc=De==3?we.nsPsy.attackthre_s:we.nsPsy.attackthre,$e=0;$e<12;$e++)ln[$e/3]==0&&di[$e]>pc&&(ln[$e/3]=$e%3+1);for($e=1;$e<4;$e++){var Qi;ir[$e-1]>ir[$e]?(Mt(ir[$e]>0),Qi=ir[$e-1]/ir[$e]):(Mt(ir[$e-1]>0),Qi=ir[$e]/ir[$e-1]),Qi<1.7&&(ln[$e]=0,$e==1&&(ln[0]=0))}for(ln[0]!=0&&we.nsPsy.lastAttacks[De]!=0&&(ln[0]=0),(we.nsPsy.lastAttacks[De]==3||ln[0]+ln[1]+ln[2]+ln[3]!=0)&&(hi=0,ln[1]!=0&&ln[0]!=0&&(ln[1]=0),ln[2]!=0&&ln[1]!=0&&(ln[2]=0),ln[3]!=0&&ln[2]!=0&&(ln[3]=0)),De<2?it[De]=hi:hi==0&&(it[0]=it[1]=0),ue[De]=we.tot_ener[De],Mr=Qe,Er=Oe,D(N,Uo,Do,Er,De&1,Mr,De&1,Q,De,j,Z),ke(we,Uo,ut,gc,bc),Se(we,gc,bc,nr),pt=0;pt<3;pt++){var Vo,Un;for(I(N,Do,Ve,ct,De,pt),te(we,Ve,ct,De,pt),et=0;et<H.SBMAX_s;et++){if(Un=we.thm[De].s[et][pt],Un*=d,ln[pt]>=2||ln[pt+1]==1){var ps=pt!=0?pt-1:2,Tn=he(we.thm[De].s[et][ps],Un,p*vn);Un=Math.min(Un,Tn)}if(ln[pt]==1){var ps=pt!=0?pt-1:2,Tn=he(we.thm[De].s[et][ps],Un,h*vn);Un=Math.min(Un,Tn)}else if(pt!=0&&ln[pt-1]==3||pt==0&&we.nsPsy.lastAttacks[De]==3){var ps=pt!=2?pt+1:0,Tn=he(we.thm[De].s[et][ps],Un,h*vn);Un=Math.min(Un,Tn)}Vo=Pn[pt*3+3]+Pn[pt*3+4]+Pn[pt*3+5],Pn[pt*3+5]*6<Vo&&(Un*=.5,Pn[pt*3+4]*6<Vo&&(Un*=.5)),we.thm[De].s[et][pt]=Un}}for(we.nsPsy.lastAttacks[De]=ln[2],tn=0,ot=0;ot<we.npart_l;ot++){for(var gs=we.s3ind[ot][0],zo=ut[gs]*E[nr[gs]],bs=we.s3_ll[tn++]*zo;++gs<=we.s3ind[ot][1];)zo=ut[gs]*E[nr[gs]],bs=x(bs,we.s3_ll[tn++]*zo,gs,gs-ot,we,0);bs*=.158489319246111,we.blocktype_old[De&1]==H.SHORT_TYPE?ct[ot]=bs:ct[ot]=he(Math.min(bs,Math.min(n*we.nb_1[De][ot],s*we.nb_2[De][ot])),bs,vn),we.nb_2[De][ot]=we.nb_1[De][ot],we.nb_1[De][ot]=bs}for(;ot<=H.CBANDS;++ot)ut[ot]=0,ct[ot]=0;g(we,ut,ct,De)}if((N.mode==Yt.STEREO||N.mode==Yt.JOINT_STEREO)&&N.interChRatio>0&&z(N,N.interChRatio),N.mode==Yt.JOINT_STEREO){var za;ne(we),za=N.msfix,Math.abs(za)>0&&Y(we,za,N.ATHlower*we.ATH.adjust)}for(le(N,it,Ie,Me),De=0;De<yt;De++){var Us,Ji=0,ea,mi;De>1?(Us=ye,Ji=-2,ea=H.NORM_TYPE,(Ie[0]==H.SHORT_TYPE||Ie[1]==H.SHORT_TYPE)&&(ea=H.SHORT_TYPE),mi=W[Q][De-2]):(Us=fe,Ji=0,ea=Ie[De],mi=se[Q][De]),ea==H.SHORT_TYPE?Us[Ji+De]=Ke(mi,we.masking_lower):Us[Ji+De]=oe(mi,we.masking_lower),N.analysis&&(we.pinfo.pe[Q][De]=Us[Ji+De])}return 0};function Xe(N,j,Z,Q,se,W,fe,ye){var ue=N.internal_flags;if(Q<2)e.fft_long(ue,fe[ye],Q,j,Z);else if(Q==2)for(var Ie=H.BLKSIZE-1;Ie>=0;--Ie){var we=fe[ye+0][Ie],Oe=fe[ye+1][Ie];fe[ye+0][Ie]=(we+Oe)*br.SQRT2*.5,fe[ye+1][Ie]=(we-Oe)*br.SQRT2*.5}W[0]=fe[ye+0][0],W[0]*=W[0];for(var Ie=H.BLKSIZE/2-1;Ie>=0;--Ie){var Qe=fe[ye+0][H.BLKSIZE/2-Ie],ut=fe[ye+0][H.BLKSIZE/2+Ie];W[H.BLKSIZE/2-Ie]=(Qe*Qe+ut*ut)*.5}{for(var Ve=0,Ie=11;Ie<H.HBLKSIZE;Ie++)Ve+=W[Ie];ue.tot_ener[Q]=Ve}if(N.analysis){for(var Ie=0;Ie<H.HBLKSIZE;Ie++)ue.pinfo.energy[se][Q][Ie]=ue.pinfo.energy_save[Q][Ie],ue.pinfo.energy_save[Q][Ie]=W[Ie];ue.pinfo.pe[se][Q]=ue.pe[Q]}}function X(N,j,Z,Q,se,W,fe,ye){var ue=N.internal_flags;if(se==0&&Q<2&&e.fft_short(ue,fe[ye],Q,j,Z),Q==2)for(var Ie=H.BLKSIZE_s-1;Ie>=0;--Ie){var we=fe[ye+0][se][Ie],Oe=fe[ye+1][se][Ie];fe[ye+0][se][Ie]=(we+Oe)*br.SQRT2*.5,fe[ye+1][se][Ie]=(we-Oe)*br.SQRT2*.5}W[se][0]=fe[ye+0][se][0],W[se][0]*=W[se][0];for(var Ie=H.BLKSIZE_s/2-1;Ie>=0;--Ie){var Qe=fe[ye+0][se][H.BLKSIZE_s/2-Ie],ut=fe[ye+0][se][H.BLKSIZE_s/2+Ie];W[se][H.BLKSIZE_s/2-Ie]=(Qe*Qe+ut*ut)*.5}}function O(N,j,Z,Q){var se=N.internal_flags;N.athaa_loudapprox==2&&Z<2&&(se.loudness_sq[j][Z]=se.loudness_sq_save[Z],se.loudness_sq_save[Z]=U(Q,se))}var P=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function G(N,j,Z,Q,se,W,fe,ye,ue,Ie){for(var we=Xr([2,576]),Oe=N.internal_flags,Qe=Oe.channels_out,ut=N.mode==Yt.JOINT_STEREO?4:Qe,Ve=0;Ve<Qe;Ve++){firbuf=j[Ve];for(var ct=Z+576-350-M+192,Me=0;Me<576;Me++){var it,yt;it=firbuf[ct+Me+10],yt=0;for(var De=0;De<(M-1)/2-1;De+=2)it+=P[De]*(firbuf[ct+Me+De]+firbuf[ct+Me+M-De]),yt+=P[De+1]*(firbuf[ct+Me+De+1]+firbuf[ct+Me+M-De-1]);we[Ve][Me]=it+yt}se[Q][Ve].en.assign(Oe.en[Ve]),se[Q][Ve].thm.assign(Oe.thm[Ve]),ut>2&&(W[Q][Ve].en.assign(Oe.en[Ve+2]),W[Q][Ve].thm.assign(Oe.thm[Ve+2]))}for(var Ve=0;Ve<ut;Ve++){var ot=Cn(12),$e=Cn(12),ft=[0,0,0,0],tn=we[Ve&1],et=0,pt=Ve==3?Oe.nsPsy.attackthre_s:Oe.nsPsy.attackthre,St=1;if(Ve==2)for(var Me=0,De=576;De>0;++Me,--De){var vn=we[0][Me],nr=we[1][Me];we[0][Me]=vn+nr,we[1][Me]=vn-nr}for(var Me=0;Me<3;Me++)$e[Me]=Oe.nsPsy.last_en_subshort[Ve][Me+6],Mt(Oe.nsPsy.last_en_subshort[Ve][Me+4]>0),ot[Me]=$e[Me]/Oe.nsPsy.last_en_subshort[Ve][Me+4],ft[0]+=$e[Me];for(var Me=0;Me<9;Me++){for(var yn=et+64,on=1;et<yn;et++)on<Math.abs(tn[et])&&(on=Math.abs(tn[et]));Oe.nsPsy.last_en_subshort[Ve][Me]=$e[Me+3]=on,ft[1+Me/3]+=on,on>$e[Me+3-2]?(Mt($e[Me+3-2]>0),on=on/$e[Me+3-2]):$e[Me+3-2]>on*10?on=$e[Me+3-2]/(on*10):on=0,ot[Me+3]=on}for(var Me=0;Me<3;++Me){var Kn=$e[Me*3+3]+$e[Me*3+4]+$e[Me*3+5],rr=1;$e[Me*3+5]*6<Kn&&(rr*=.5,$e[Me*3+4]*6<Kn&&(rr*=.5)),ye[Ve][Me]=rr}if(N.analysis){for(var sr=ot[0],Me=1;Me<12;Me++)sr<ot[Me]&&(sr=ot[Me]);Oe.pinfo.ers[Q][Ve]=Oe.pinfo.ers_save[Ve],Oe.pinfo.ers_save[Ve]=sr}for(var Me=0;Me<12;Me++)ue[Ve][Me/3]==0&&ot[Me]>pt&&(ue[Ve][Me/3]=Me%3+1);for(var Me=1;Me<4;Me++){var Er=ft[Me-1],Mr=ft[Me],Pn=Math.max(Er,Mr);Pn<4e4&&Er<1.7*Mr&&Mr<1.7*Er&&(Me==1&&ue[Ve][0]<=ue[Ve][Me]&&(ue[Ve][0]=0),ue[Ve][Me]=0)}ue[Ve][0]<=Oe.nsPsy.lastAttacks[Ve]&&(ue[Ve][0]=0),(Oe.nsPsy.lastAttacks[Ve]==3||ue[Ve][0]+ue[Ve][1]+ue[Ve][2]+ue[Ve][3]!=0)&&(St=0,ue[Ve][1]!=0&&ue[Ve][0]!=0&&(ue[Ve][1]=0),ue[Ve][2]!=0&&ue[Ve][1]!=0&&(ue[Ve][2]=0),ue[Ve][3]!=0&&ue[Ve][2]!=0&&(ue[Ve][3]=0)),Ve<2?Ie[Ve]=St:St==0&&(Ie[0]=Ie[1]=0),fe[Ve]=Oe.tot_ener[Ve]}}function ee(N,j,Z){if(Z==0)for(var Q=0;Q<N.npart_s;Q++)N.nb_s2[j][Q]=N.nb_s1[j][Q],N.nb_s1[j][Q]=0}function re(N,j){for(var Z=0;Z<N.npart_l;Z++)N.nb_2[j][Z]=N.nb_1[j][Z],N.nb_1[j][Z]=0}function pe(N,j,Z,Q){var se=E.length-1,W=0,fe=Z[W]+Z[W+1];if(fe>0){var ye=j[W];ye<j[W+1]&&(ye=j[W+1]),Mt(N.numlines_s[W]+N.numlines_s[W+1]-1>0),fe=20*(ye*2-fe)/(fe*(N.numlines_s[W]+N.numlines_s[W+1]-1));var ue=0|fe;ue>se&&(ue=se),Q[W]=ue}else Q[W]=0;for(W=1;W<N.npart_s-1;W++)if(fe=Z[W-1]+Z[W]+Z[W+1],Mt(W+1<N.npart_s),fe>0){var ye=j[W-1];ye<j[W]&&(ye=j[W]),ye<j[W+1]&&(ye=j[W+1]),Mt(N.numlines_s[W-1]+N.numlines_s[W]+N.numlines_s[W+1]-1>0),fe=20*(ye*3-fe)/(fe*(N.numlines_s[W-1]+N.numlines_s[W]+N.numlines_s[W+1]-1));var ue=0|fe;ue>se&&(ue=se),Q[W]=ue}else Q[W]=0;if(Mt(W==N.npart_s-1),fe=Z[W-1]+Z[W],fe>0){var ye=j[W-1];ye<j[W]&&(ye=j[W]),Mt(N.numlines_s[W-1]+N.numlines_s[W]-1>0),fe=20*(ye*2-fe)/(fe*(N.numlines_s[W-1]+N.numlines_s[W]-1));var ue=0|fe;ue>se&&(ue=se),Q[W]=ue}else Q[W]=0;Mt(W==N.npart_s-1)}function ve(N,j,Z,Q,se,W){var fe=N.internal_flags,ye=new float[H.CBANDS],ue=Cn(H.CBANDS),Ie,we,Oe,Qe=new int[H.CBANDS];for(Oe=we=0;Oe<fe.npart_s;++Oe){var ut=0,Ve=0,ct=fe.numlines_s[Oe];for(Ie=0;Ie<ct;++Ie,++we){var Me=j[W][we];ut+=Me,Ve<Me&&(Ve=Me)}Z[Oe]=ut,ye[Oe]=Ve,ue[Oe]=ut/ct,Mt(ue[Oe]>=0)}for(Mt(Oe==fe.npart_s);Oe<H.CBANDS;++Oe)ye[Oe]=0,ue[Oe]=0;for(pe(fe,ye,ue,Qe),we=Oe=0;Oe<fe.npart_s;Oe++){var it=fe.s3ind_s[Oe][0],yt=fe.s3ind_s[Oe][1],De,ot,$e,ft,tn;for(De=Qe[it],ot=1,ft=fe.s3_ss[we]*Z[it]*E[Qe[it]],++we,++it;it<=yt;)De+=Qe[it],ot+=1,$e=fe.s3_ss[we]*Z[it]*E[Qe[it]],ft=R(ft,$e,it-Oe),++we,++it;De=(1+2*De)/(2*ot),tn=E[De]*.5,ft*=tn,Q[Oe]=ft,fe.nb_s2[se][Oe]=fe.nb_s1[se][Oe],fe.nb_s1[se][Oe]=ft,$e=ye[Oe],$e*=fe.minval_s[Oe],$e*=tn,Q[Oe]>$e&&(Q[Oe]=$e),fe.masking_lower>1&&(Q[Oe]*=fe.masking_lower),Q[Oe]>Z[Oe]&&(Q[Oe]=Z[Oe]),fe.masking_lower<1&&(Q[Oe]*=fe.masking_lower),Mt(Q[Oe]>=0)}for(;Oe<H.CBANDS;++Oe)Z[Oe]=0,Q[Oe]=0}function ce(N,j,Z,Q,se){var W=Cn(H.CBANDS),fe=Cn(H.CBANDS),ye=va(H.CBANDS+2),ue;ke(N,j,Z,W,fe),Se(N,W,fe,ye);var Ie=0;for(ue=0;ue<N.npart_l;ue++){var we,Oe,Qe,ut,Ve=N.s3ind[ue][0],ct=N.s3ind[ue][1],Me=0,it=0;for(Me=ye[Ve],it+=1,Oe=N.s3_ll[Ie]*Z[Ve]*E[ye[Ve]],++Ie,++Ve;Ve<=ct;)Me+=ye[Ve],it+=1,we=N.s3_ll[Ie]*Z[Ve]*E[ye[Ve]],ut=R(Oe,we,Ve-ue),Oe=ut,++Ie,++Ve;if(Me=(1+2*Me)/(2*it),Qe=E[Me]*.5,Oe*=Qe,N.blocktype_old[se&1]==H.SHORT_TYPE){var yt=n*N.nb_1[se][ue];yt>0?Q[ue]=Math.min(Oe,yt):Q[ue]=Math.min(Oe,Z[ue]*h)}else{var De=s*N.nb_2[se][ue],ot=n*N.nb_1[se][ue],yt;De<=0&&(De=Oe),ot<=0&&(ot=Oe),N.blocktype_old[se&1]==H.NORM_TYPE?yt=Math.min(ot,De):yt=ot,Q[ue]=Math.min(Oe,yt)}N.nb_2[se][ue]=N.nb_1[se][ue],N.nb_1[se][ue]=Oe,we=W[ue],we*=N.minval_l[ue],we*=Qe,Q[ue]>we&&(Q[ue]=we),N.masking_lower>1&&(Q[ue]*=N.masking_lower),Q[ue]>Z[ue]&&(Q[ue]=Z[ue]),N.masking_lower<1&&(Q[ue]*=N.masking_lower),Mt(Q[ue]>=0)}for(;ue<H.CBANDS;++ue)Z[ue]=0,Q[ue]=0}function ae(N,j){var Z=N.internal_flags;N.short_blocks==lo.short_block_coupled&&!(j[0]!=0&&j[1]!=0)&&(j[0]=j[1]=0);for(var Q=0;Q<Z.channels_out;Q++)N.short_blocks==lo.short_block_dispensed&&(j[Q]=1),N.short_blocks==lo.short_block_forced&&(j[Q]=0)}function ge(N,j,Z){for(var Q=N.internal_flags,se=0;se<Q.channels_out;se++){var W=H.NORM_TYPE;j[se]!=0?(Mt(Q.blocktype_old[se]!=H.START_TYPE),Q.blocktype_old[se]==H.SHORT_TYPE&&(W=H.STOP_TYPE)):(W=H.SHORT_TYPE,Q.blocktype_old[se]==H.NORM_TYPE&&(Q.blocktype_old[se]=H.START_TYPE),Q.blocktype_old[se]==H.STOP_TYPE&&(Q.blocktype_old[se]=H.SHORT_TYPE)),Z[se]=Q.blocktype_old[se],Q.blocktype_old[se]=W}}function Be(N,j,Z,Q,se,W,fe){for(var ye=W*2,ue=W>0?Math.pow(10,se):1,Ie,we,Oe=0;Oe<fe;++Oe){var Qe=N[2][Oe],ut=N[3][Oe],Ve=j[0][Oe],ct=j[1][Oe],Me=j[2][Oe],it=j[3][Oe];if(Ve<=1.58*ct&&ct<=1.58*Ve){var yt=Z[Oe]*ut,De=Z[Oe]*Qe;we=Math.max(Me,Math.min(it,yt)),Ie=Math.max(it,Math.min(Me,De))}else we=Me,Ie=it;if(W>0){var ot,$e,ft=Q[Oe]*ue;if(ot=Math.min(Math.max(Ve,ft),Math.max(ct,ft)),Me=Math.max(we,ft),it=Math.max(Ie,ft),$e=Me+it,$e>0&&ot*ye<$e){var tn=ot*ye/$e;Me*=tn,it*=tn}we=Math.min(Me,we),Ie=Math.min(it,Ie)}we>Qe&&(we=Qe),Ie>ut&&(Ie=ut),j[2][Oe]=we,j[3][Oe]=Ie}}this.L3psycho_anal_vbr=function(N,j,Z,Q,se,W,fe,ye,ue,Ie){var we=N.internal_flags,Oe,Qe,ut=Cn(H.HBLKSIZE),Ve=Xr([3,H.HBLKSIZE_s]),ct=Xr([2,H.BLKSIZE]),Me=Xr([2,3,H.BLKSIZE_s]),it=Xr([4,H.CBANDS]),yt=Xr([4,H.CBANDS]),De=Xr([4,3]),ot=.6,$e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],ft=va(2),tn=N.mode==Yt.JOINT_STEREO?4:we.channels_out;G(N,j,Z,Q,se,W,ue,De,$e,ft),ae(N,ft);{for(var et=0;et<tn;et++){var pt=et&1;Oe=ct,Xe(N,j,Z,et,Q,ut,Oe,pt),O(N,Q,et,ut),ft[pt]!=0?ce(we,ut,it[et],yt[et],et):re(we,et)}ft[0]+ft[1]==2&&N.mode==Yt.JOINT_STEREO&&Be(it,yt,we.mld_cb_l,we.ATH.cb_l,N.ATHlower*we.ATH.adjust,N.msfix,we.npart_l);for(var et=0;et<tn;et++){var pt=et&1;ft[pt]!=0&&g(we,it[et],yt[et],et)}}{for(var St=0;St<3;St++){for(var et=0;et<tn;++et){var pt=et&1;ft[pt]!=0?ee(we,et,St):(Qe=Me,X(N,j,Z,et,St,Ve,Qe,pt),ve(N,Ve,it[et],yt[et],et,St))}ft[0]+ft[1]==0&&N.mode==Yt.JOINT_STEREO&&Be(it,yt,we.mld_cb_s,we.ATH.cb_s,N.ATHlower*we.ATH.adjust,N.msfix,we.npart_s);for(var et=0;et<tn;++et){var pt=et&1;ft[pt]==0&&te(we,it[et],yt[et],et,St)}}for(var et=0;et<tn;et++){var pt=et&1;if(ft[pt]==0)for(var vn=0;vn<H.SBMAX_s;vn++){for(var nr=Cn(3),St=0;St<3;St++){var yn=we.thm[et].s[vn][St];if(yn*=d,$e[et][St]>=2||$e[et][St+1]==1){var on=St!=0?St-1:2,Kn=he(we.thm[et].s[vn][on],yn,p*ot);yn=Math.min(yn,Kn)}else if($e[et][St]==1){var on=St!=0?St-1:2,Kn=he(we.thm[et].s[vn][on],yn,h*ot);yn=Math.min(yn,Kn)}else if(St!=0&&$e[et][St-1]==3||St==0&&we.nsPsy.lastAttacks[et]==3){var on=St!=2?St+1:0,Kn=he(we.thm[et].s[vn][on],yn,h*ot);yn=Math.min(yn,Kn)}yn*=De[et][St],nr[St]=yn}for(var St=0;St<3;St++)we.thm[et].s[vn][St]=nr[St]}}}for(var et=0;et<tn;et++)we.nsPsy.lastAttacks[et]=$e[et][2];ge(N,ft,Ie);for(var et=0;et<tn;et++){var rr,sr,Er,Mr;et>1?(rr=ye,sr=-2,Er=H.NORM_TYPE,(Ie[0]==H.SHORT_TYPE||Ie[1]==H.SHORT_TYPE)&&(Er=H.SHORT_TYPE),Mr=W[Q][et-2]):(rr=fe,sr=0,Er=Ie[et],Mr=se[Q][et]),Er==H.SHORT_TYPE?rr[sr+et]=Ke(Mr,we.masking_lower):rr[sr+et]=oe(Mr,we.masking_lower),N.analysis&&(we.pinfo.pe[Q][et]=rr[sr+et])}return 0};function Ce(N,j){var Z=N,Q;return Z>=0?Q=-Z*27:Q=Z*j,Q<=-72?0:Math.exp(Q*u)}function Pe(N){var j=0,Z=0;{var Q=0,se,W;for(Q=0;Ce(Q,N)>1e-20;Q-=1);for(se=Q,W=0;Math.abs(W-se)>1e-12;)Q=(W+se)/2,Ce(Q,N)>0?W=Q:se=Q;j=se}{var Q=0,se,W;for(Q=0;Ce(Q,N)>1e-20;Q+=1);for(se=0,W=Q;Math.abs(W-se)>1e-12;)Q=(W+se)/2,Ce(Q,N)>0?se=Q:W=Q;Z=W}{var fe=0,ye=1e3,ue;for(ue=0;ue<=ye;++ue){var Q=j+ue*(Z-j)/ye,Ie=Ce(Q,N);fe+=Ie}{var we=(ye+1)/(fe*(Z-j));return we}}}function We(N){var j,Z,Q,se;return j=N,j>=0?j*=3:j*=1.5,j>=.5&&j<=2.5?(se=j-.5,Z=8*(se*se-2*se)):Z=0,j+=.474,Q=15.811389+7.5*j-17.5*Math.sqrt(1+j*j),Q<=-60?0:(j=Math.exp((Z+Q)*u),j/=.6609193,j)}function nt(N){return N<0&&(N=0),N=N*.001,13*Math.atan(.76*N)+3.5*Math.atan(N*N/(7.5*7.5))}function be(N,j,Z,Q,se,W,fe,ye,ue,Ie,we,Oe){var Qe=Cn(H.CBANDS+1),ut=ye/(Oe>15?2*576:2*192),Ve=va(H.HBLKSIZE),ct;ye/=ue;var Me=0,it=0;for(ct=0;ct<H.CBANDS;ct++){var yt,De;for(yt=nt(ye*Me),Qe[ct]=ye*Me,De=Me;nt(ye*De)-yt<c&&De<=ue/2;De++);for(N[ct]=De-Me,it=ct+1;Me<De;)Ve[Me++]=ct;if(Me>ue/2){Me=ue/2,++ct;break}}Qe[ct]=ye*Me;for(var ot=0;ot<Oe;ot++){var $e,ft,tn,et,pt;tn=Ie[ot],et=Ie[ot+1],$e=0|Math.floor(.5+we*(tn-.5)),$e<0&&($e=0),ft=0|Math.floor(.5+we*(et-.5)),ft>ue/2&&(ft=ue/2),Z[ot]=(Ve[$e]+Ve[ft])/2,j[ot]=Ve[ft];var St=ut*et;fe[ot]=(St-Qe[j[ot]])/(Qe[j[ot]+1]-Qe[j[ot]]),fe[ot]<0?fe[ot]=0:fe[ot]>1&&(fe[ot]=1),pt=nt(ye*Ie[ot]*we),pt=Math.min(pt,15.5)/15.5,W[ot]=Math.pow(10,1.25*(1-Math.cos(Math.PI*pt))-2.5)}Me=0;for(var vn=0;vn<it;vn++){var nr=N[vn],yt,yn;yt=nt(ye*Me),yn=nt(ye*(Me+nr-1)),Q[vn]=.5*(yt+yn),yt=nt(ye*(Me-.5)),yn=nt(ye*(Me+nr-.5)),se[vn]=yn-yt,Me+=nr}return it}function Ne(N,j,Z,Q,se,W){var fe=Xr([H.CBANDS,H.CBANDS]),ye,ue=0;if(W)for(var Ie=0;Ie<j;Ie++)for(ye=0;ye<j;ye++){var we=We(Z[Ie]-Z[ye])*Q[ye];fe[Ie][ye]=we*se[Ie]}else for(ye=0;ye<j;ye++)for(var Oe=15+Math.min(21/Z[ye],12),Qe=Pe(Oe),Ie=0;Ie<j;Ie++){var we=Qe*Ce(Z[Ie]-Z[ye],Oe)*Q[ye];fe[Ie][ye]=we*se[Ie]}for(var Ie=0;Ie<j;Ie++){for(ye=0;ye<j&&!(fe[Ie][ye]>0);ye++);for(N[Ie][0]=ye,ye=j-1;ye>0&&!(fe[Ie][ye]>0);ye--);N[Ie][1]=ye,ue+=N[Ie][1]-N[Ie][0]+1}for(var ut=Cn(ue),Ve=0,Ie=0;Ie<j;Ie++)for(ye=N[Ie][0];ye<=N[Ie][1];ye++)ut[Ve++]=fe[Ie][ye];return ut}function me(N){var j=nt(N);return j=Math.min(j,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*j))-2.5)}this.psymodel_init=function(N){var j=N.internal_flags,Z,Q=!0,se=13,W=24,fe=0,ye=0,ue=-8.25,Ie=-4.5,we=Cn(H.CBANDS),Oe=Cn(H.CBANDS),Qe=Cn(H.CBANDS),ut=N.out_samplerate;switch(N.experimentalZ){default:case 0:Q=!0;break;case 1:Q=!(N.VBR==oo.vbr_mtrh||N.VBR==oo.vbr_mt);break;case 2:Q=!1;break;case 3:se=8,fe=-1.75,ye=-.0125,ue=-8.25,Ie=-2.25;break}for(j.ms_ener_ratio_old=.25,j.blocktype_old[0]=j.blocktype_old[1]=H.NORM_TYPE,Z=0;Z<4;++Z){for(var Me=0;Me<H.CBANDS;++Me)j.nb_1[Z][Me]=1e20,j.nb_2[Z][Me]=1e20,j.nb_s1[Z][Me]=j.nb_s2[Z][Me]=1;for(var Ve=0;Ve<H.SBMAX_l;Ve++)j.en[Z].l[Ve]=1e20,j.thm[Z].l[Ve]=1e20;for(var Me=0;Me<3;++Me){for(var Ve=0;Ve<H.SBMAX_s;Ve++)j.en[Z].s[Ve][Me]=1e20,j.thm[Z].s[Ve][Me]=1e20;j.nsPsy.lastAttacks[Z]=0}for(var Me=0;Me<9;Me++)j.nsPsy.last_en_subshort[Z][Me]=10}for(j.loudness_sq_save[0]=j.loudness_sq_save[1]=0,j.npart_l=be(j.numlines_l,j.bo_l,j.bm_l,we,Oe,j.mld_l,j.PSY.bo_l_weight,ut,H.BLKSIZE,j.scalefac_band.l,H.BLKSIZE/(2*576),H.SBMAX_l),Mt(j.npart_l<H.CBANDS),Z=0;Z<j.npart_l;Z++){var ct=fe;we[Z]>=se&&(ct=ye*(we[Z]-se)/(W-se)+fe*(W-we[Z])/(W-se)),Qe[Z]=Math.pow(10,ct/10),j.numlines_l[Z]>0?j.rnumlines_l[Z]=1/j.numlines_l[Z]:j.rnumlines_l[Z]=0}j.s3_ll=Ne(j.s3ind,j.npart_l,we,Oe,Qe,Q);var Me=0;for(Z=0;Z<j.npart_l;Z++){var it;it=R_.MAX_VALUE;for(var yt=0;yt<j.numlines_l[Z];yt++,Me++){var De=ut*Me/(1e3*H.BLKSIZE),ot;ot=this.ATHformula(De*1e3,N)-20,ot=Math.pow(10,.1*ot),ot*=j.numlines_l[Z],it>ot&&(it=ot)}j.ATH.cb_l[Z]=it,it=-20+we[Z]*20/10,it>6&&(it=100),it<-15&&(it=-15),it-=8,j.minval_l[Z]=Math.pow(10,it/10)*j.numlines_l[Z]}for(j.npart_s=be(j.numlines_s,j.bo_s,j.bm_s,we,Oe,j.mld_s,j.PSY.bo_s_weight,ut,H.BLKSIZE_s,j.scalefac_band.s,H.BLKSIZE_s/(2*192),H.SBMAX_s),Mt(j.npart_s<H.CBANDS),Me=0,Z=0;Z<j.npart_s;Z++){var it,ct=ue;we[Z]>=se&&(ct=Ie*(we[Z]-se)/(W-se)+ue*(W-we[Z])/(W-se)),Qe[Z]=Math.pow(10,ct/10),it=R_.MAX_VALUE;for(var yt=0;yt<j.numlines_s[Z];yt++,Me++){var De=ut*Me/(1e3*H.BLKSIZE_s),ot;ot=this.ATHformula(De*1e3,N)-20,ot=Math.pow(10,.1*ot),ot*=j.numlines_s[Z],it>ot&&(it=ot)}j.ATH.cb_s[Z]=it,it=-7+we[Z]*7/12,we[Z]>12&&(it*=1+Math.log(1+it)*3.1),we[Z]<12&&(it*=1+Math.log(1-it)*2.3),it<-15&&(it=-15),it-=8,j.minval_s[Z]=Math.pow(10,it/10)*j.numlines_s[Z]}j.s3_ss=Ne(j.s3ind_s,j.npart_s,we,Oe,Qe,Q),T(),e.init_fft(j),j.decay=Math.exp(-1*t/(m*ut/192));{var $e;$e=w,(N.exp_nspsytune&2)!=0&&($e=1),Math.abs(N.msfix)>0&&($e=N.msfix),N.msfix=$e;for(var ft=0;ft<j.npart_l;ft++)j.s3ind[ft][1]>j.npart_l-1&&(j.s3ind[ft][1]=j.npart_l-1)}var tn=576*j.mode_gr/ut;if(j.ATH.decay=Math.pow(10,-12/10*tn),j.ATH.adjust=.01,j.ATH.adjustLimit=1,Mt(j.bo_l[H.SBMAX_l-1]<=j.npart_l),Mt(j.bo_s[H.SBMAX_s-1]<=j.npart_s),N.ATHtype!=-1){var De,et=N.out_samplerate/H.BLKSIZE,pt=0;for(De=0,Z=0;Z<H.BLKSIZE/2;++Z)De+=et,j.ATH.eql_w[Z]=1/Math.pow(10,this.ATHformula(De,N)/10),pt+=j.ATH.eql_w[Z];for(pt=1/pt,Z=H.BLKSIZE/2;--Z>=0;)j.ATH.eql_w[Z]*=pt}{for(var ft=Me=0;ft<j.npart_s;++ft)for(Z=0;Z<j.numlines_s[ft];++Z)++Me;for(var ft=Me=0;ft<j.npart_l;++ft)for(Z=0;Z<j.numlines_l[ft];++Z)++Me}for(Me=0,Z=0;Z<j.npart_l;Z++){var De=ut*(Me+j.numlines_l[Z]/2)/(1*H.BLKSIZE);j.mld_cb_l[Z]=me(De),Me+=j.numlines_l[Z]}for(;Z<H.CBANDS;++Z)j.mld_cb_l[Z]=1;for(Me=0,Z=0;Z<j.npart_s;Z++){var De=ut*(Me+j.numlines_s[Z]/2)/(1*H.BLKSIZE_s);j.mld_cb_s[Z]=me(De),Me+=j.numlines_s[Z]}for(;Z<H.CBANDS;++Z)j.mld_cb_s[Z]=1;return 0};function Ze(N,j){N<-.3&&(N=3410),N/=1e3,N=Math.max(.1,N);var Z=3.64*Math.pow(N,-.8)-6.8*Math.exp(-.6*Math.pow(N-3.4,2))+6*Math.exp(-.15*Math.pow(N-8.7,2))+(.6+.04*j)*.001*Math.pow(N,4);return Z}this.ATHformula=function(N,j){var Z;switch(j.ATHtype){case 0:Z=Ze(N,9);break;case 1:Z=Ze(N,-1);break;case 2:Z=Ze(N,0);break;case 3:Z=Ze(N,1)+6;break;case 4:Z=Ze(N,j.ATHcurve);break;default:Z=Ze(N,0);break}return Z}}function uO(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Yt.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Vi={};Vi.SFBMAX=H.SBMAX_s*3;var fO=Je.new_float,_a=Je.new_int;function t1(){this.xr=fO(576),this.l3_enc=_a(576),this.scalefac=_a(Vi.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=_a(3),this.subblock_gain=_a(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=_a(Vi.SFBMAX),this.window=_a(Vi.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=_a(4),this.max_nonzero_coeff=0;var e=this;function t(s){return new Int32Array(s)}function n(s){return new Float32Array(s)}this.assign=function(s){e.xr=n(s.xr),e.l3_enc=t(s.l3_enc),e.scalefac=t(s.scalefac),e.xrpow_max=s.xrpow_max,e.part2_3_length=s.part2_3_length,e.big_values=s.big_values,e.count1=s.count1,e.global_gain=s.global_gain,e.scalefac_compress=s.scalefac_compress,e.block_type=s.block_type,e.mixed_block_flag=s.mixed_block_flag,e.table_select=t(s.table_select),e.subblock_gain=t(s.subblock_gain),e.region0_count=s.region0_count,e.region1_count=s.region1_count,e.preflag=s.preflag,e.scalefac_scale=s.scalefac_scale,e.count1table_select=s.count1table_select,e.part2_length=s.part2_length,e.sfb_lmax=s.sfb_lmax,e.sfb_smin=s.sfb_smin,e.psy_lmax=s.psy_lmax,e.sfbmax=s.sfbmax,e.psymax=s.psymax,e.sfbdivide=s.sfbdivide,e.width=t(s.width),e.window=t(s.window),e.count1bits=s.count1bits,e.sfb_partition_table=s.sfb_partition_table.slice(0),e.slen=t(s.slen),e.max_nonzero_coeff=s.max_nonzero_coeff}}var k_=Je.new_int;function dO(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[k_(4),k_(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new t1}var Mu=Je.System,Tu=Je.new_int;function ks(e,t,n,s){this.l=Tu(1+H.SBMAX_l),this.s=Tu(1+H.SBMAX_s),this.psfb21=Tu(1+H.PSFB21),this.psfb12=Tu(1+H.PSFB12);var o=this.l,a=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Mu.arraycopy(this.arrL,0,o,0,Math.min(this.arrL.length,this.l.length)),Mu.arraycopy(this.arrS,0,a,0,Math.min(this.arrS.length,this.s.length)),Mu.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Mu.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var g0=Je.new_float,hO=Je.new_float_n,mO=Je.new_int;function vO(){this.last_en_subshort=hO([4,9]),this.lastAttacks=mO(4),this.pefirbuf=g0(19),this.longfact=g0(H.SBMAX_l),this.shortfact=g0(H.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function _O(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var pO=Je.new_byte,gO=Je.new_double,Gr=Je.new_float,pa=Je.new_float_n,os=Je.new_int,Ru=Je.new_int_n;qt.MFSIZE=3*1152+H.ENCDELAY-H.MDCTDELAY;qt.MAX_HEADER_BUF=256;qt.MAX_BITS_PER_CHANNEL=4095;qt.MAX_BITS_PER_GRANULE=7680;qt.BPC=320;function qt(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=pa([2,qt.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new dO,this.ms_ratio=Gr(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=os(2),this.CurrentStep=os(2),this.masking_lower=0,this.bv_scf=os(576),this.pseudohalf=os(Vi.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*qt.BPC+1),this.itime=gO(2),this.sideinfo_len=0,this.sb_sample=pa([2,2,18,H.SBLIMIT]),this.amp_filter=Gr(32);function t(){this.write_timing=0,this.ptr=0,this.buf=pO(e)}this.header=new Array(qt.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new ks,this.minval_l=Gr(H.CBANDS),this.minval_s=Gr(H.CBANDS),this.nb_1=pa([4,H.CBANDS]),this.nb_2=pa([4,H.CBANDS]),this.nb_s1=pa([4,H.CBANDS]),this.nb_s2=pa([4,H.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Gr(4),this.loudness_sq=pa([2,2]),this.loudness_sq_save=Gr(2),this.mld_l=Gr(H.SBMAX_l),this.mld_s=Gr(H.SBMAX_s),this.bm_l=os(H.SBMAX_l),this.bo_l=os(H.SBMAX_l),this.bm_s=os(H.SBMAX_s),this.bo_s=os(H.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Ru([H.CBANDS,2]),this.s3ind_s=Ru([H.CBANDS,2]),this.numlines_s=os(H.CBANDS),this.numlines_l=os(H.CBANDS),this.rnumlines_l=Gr(H.CBANDS),this.mld_cb_l=Gr(H.CBANDS),this.mld_cb_s=Gr(H.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Gr(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=os(2),this.nsPsy=new vO,this.VBR_seek_table=new _O,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Ru([16,4+1]),this.bitrate_blockType_Hist=Ru([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new e1;for(var n=0;n<this.thm.length;n++)this.thm[n]=new e1;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var ga=Je.new_float;function bO(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=ga(H.SBMAX_l),this.s=ga(H.SBMAX_s),this.psfb21=ga(H.PSFB21),this.psfb12=ga(H.PSFB12),this.cb_l=ga(H.CBANDS),this.cb_s=ga(H.CBANDS),this.eql_w=ga(H.BLKSIZE/2)}var yr=Je.System,I_=Je.Arrays;Mn.STEPS_per_dB=100;Mn.MAX_dB=120;Mn.GAIN_NOT_ENOUGH_SAMPLES=-24601;Mn.GAIN_ANALYSIS_ERROR=0;Mn.GAIN_ANALYSIS_OK=1;Mn.INIT_GAIN_ANALYSIS_ERROR=0;Mn.INIT_GAIN_ANALYSIS_OK=1;Mn.YULE_ORDER=10;Mn.MAX_ORDER=Mn.YULE_ORDER;Mn.MAX_SAMP_FREQ=48e3;Mn.RMS_WINDOW_TIME_NUMERATOR=1;Mn.RMS_WINDOW_TIME_DENOMINATOR=20;Mn.MAX_SAMPLES_PER_WINDOW=Mn.MAX_SAMP_FREQ*Mn.RMS_WINDOW_TIME_NUMERATOR/Mn.RMS_WINDOW_TIME_DENOMINATOR+1;function Mn(){var e=64.82,t=.95,n=Mn.RMS_WINDOW_TIME_NUMERATOR,s=Mn.RMS_WINDOW_TIME_DENOMINATOR,o=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],a=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function c(h,w,M,u,$,U){for(;$--!=0;)M[u]=1e-10+h[w+0]*U[0]-M[u-1]*U[1]+h[w-1]*U[2]-M[u-2]*U[3]+h[w-2]*U[4]-M[u-3]*U[5]+h[w-3]*U[6]-M[u-4]*U[7]+h[w-4]*U[8]-M[u-5]*U[9]+h[w-5]*U[10]-M[u-6]*U[11]+h[w-6]*U[12]-M[u-7]*U[13]+h[w-7]*U[14]-M[u-8]*U[15]+h[w-8]*U[16]-M[u-9]*U[17]+h[w-9]*U[18]-M[u-10]*U[19]+h[w-10]*U[20],++u,++w}function f(h,w,M,u,$,U){for(;$--!=0;)M[u]=h[w+0]*U[0]-M[u-1]*U[1]+h[w-1]*U[2]-M[u-2]*U[3]+h[w-2]*U[4],++u,++w}function m(h,w){for(var M=0;M<MAX_ORDER;M++)h.linprebuf[M]=h.lstepbuf[M]=h.loutbuf[M]=h.rinprebuf[M]=h.rstepbuf[M]=h.routbuf[M]=0;switch(0|w){case 48e3:h.reqindex=0;break;case 44100:h.reqindex=1;break;case 32e3:h.reqindex=2;break;case 24e3:h.reqindex=3;break;case 22050:h.reqindex=4;break;case 16e3:h.reqindex=5;break;case 12e3:h.reqindex=6;break;case 11025:h.reqindex=7;break;case 8e3:h.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return h.sampleWindow=0|(w*n+s-1)/s,h.lsum=0,h.rsum=0,h.totsamp=0,I_.ill(h.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(h,w){return m(h,w)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(h.linpre=MAX_ORDER,h.rinpre=MAX_ORDER,h.lstep=MAX_ORDER,h.rstep=MAX_ORDER,h.lout=MAX_ORDER,h.rout=MAX_ORDER,I_.fill(h.B,0),INIT_GAIN_ANALYSIS_OK)};function d(h){return h*h}this.AnalyzeSamples=function(h,w,M,u,$,U,D){var b,C,F,L,V,v,E;if(U==0)return GAIN_ANALYSIS_OK;switch(E=0,V=U,D){case 1:u=w,$=M;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(U<MAX_ORDER?(yr.arraycopy(w,M,h.linprebuf,MAX_ORDER,U),yr.arraycopy(u,$,h.rinprebuf,MAX_ORDER,U)):(yr.arraycopy(w,M,h.linprebuf,MAX_ORDER,MAX_ORDER),yr.arraycopy(u,$,h.rinprebuf,MAX_ORDER,MAX_ORDER));V>0;){v=V>h.sampleWindow-h.totsamp?h.sampleWindow-h.totsamp:V,E<MAX_ORDER?(b=h.linpre+E,C=h.linprebuf,F=h.rinpre+E,L=h.rinprebuf,v>MAX_ORDER-E&&(v=MAX_ORDER-E)):(b=M+E,C=w,F=$+E,L=u),c(C,b,h.lstepbuf,h.lstep+h.totsamp,v,o[h.reqindex]),c(L,F,h.rstepbuf,h.rstep+h.totsamp,v,o[h.reqindex]),f(h.lstepbuf,h.lstep+h.totsamp,h.loutbuf,h.lout+h.totsamp,v,a[h.reqindex]),f(h.rstepbuf,h.rstep+h.totsamp,h.routbuf,h.rout+h.totsamp,v,a[h.reqindex]),b=h.lout+h.totsamp,C=h.loutbuf,F=h.rout+h.totsamp,L=h.routbuf;for(var T=v%8;T--!=0;)h.lsum+=d(C[b++]),h.rsum+=d(L[F++]);for(T=v/8;T--!=0;)h.lsum+=d(C[b+0])+d(C[b+1])+d(C[b+2])+d(C[b+3])+d(C[b+4])+d(C[b+5])+d(C[b+6])+d(C[b+7]),b+=8,h.rsum+=d(L[F+0])+d(L[F+1])+d(L[F+2])+d(L[F+3])+d(L[F+4])+d(L[F+5])+d(L[F+6])+d(L[F+7]),F+=8;if(V-=v,E+=v,h.totsamp+=v,h.totsamp==h.sampleWindow){var y=Mn.STEPS_per_dB*10*Math.log10((h.lsum+h.rsum)/h.totsamp*.5+1e-37),A=y<=0?0:0|y;A>=h.A.length&&(A=h.A.length-1),h.A[A]++,h.lsum=h.rsum=0,yr.arraycopy(h.loutbuf,h.totsamp,h.loutbuf,0,MAX_ORDER),yr.arraycopy(h.routbuf,h.totsamp,h.routbuf,0,MAX_ORDER),yr.arraycopy(h.lstepbuf,h.totsamp,h.lstepbuf,0,MAX_ORDER),yr.arraycopy(h.rstepbuf,h.totsamp,h.rstepbuf,0,MAX_ORDER),h.totsamp=0}if(h.totsamp>h.sampleWindow)return GAIN_ANALYSIS_ERROR}return U<MAX_ORDER?(yr.arraycopy(h.linprebuf,U,h.linprebuf,0,MAX_ORDER-U),yr.arraycopy(h.rinprebuf,U,h.rinprebuf,0,MAX_ORDER-U),yr.arraycopy(w,M,h.linprebuf,MAX_ORDER-U,U),yr.arraycopy(u,$,h.rinprebuf,MAX_ORDER-U,U)):(yr.arraycopy(w,M+U-MAX_ORDER,h.linprebuf,0,MAX_ORDER),yr.arraycopy(u,$+U-MAX_ORDER,h.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function p(h,w){var M,u=0;for(M=0;M<w;M++)u+=h[M];if(u==0)return GAIN_NOT_ENOUGH_SAMPLES;var $=0|Math.ceil(u*(1-t));for(M=w;M-- >0&&!(($-=h[M])<=0););return e-M/Mn.STEPS_per_dB}this.GetTitleGain=function(h){for(var w=p(h.A,h.A.length),M=0;M<h.A.length;M++)h.B[M]+=h.A[M],h.A[M]=0;for(var M=0;M<MAX_ORDER;M++)h.linprebuf[M]=h.lstepbuf[M]=h.loutbuf[M]=h.rinprebuf[M]=h.rstepbuf[M]=h.routbuf[M]=0;return h.totsamp=0,h.lsum=h.rsum=0,w}}var co=Je.new_float,O_=Je.new_int;function yO(){this.linprebuf=co(void 0*2),this.linpre=0,this.lstepbuf=co(void 0+void 0),this.lstep=0,this.loutbuf=co(void 0+void 0),this.lout=0,this.rinprebuf=co(void 0*2),this.rinpre=0,this.rstepbuf=co(void 0+void 0),this.rstep=0,this.routbuf=co(void 0+void 0),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=O_(0|void 0*void 0),this.B=O_(0|void 0*void 0)}function c4(e){this.bits=e}var C_=Je.new_float,wO=Je.new_int,L_=Je.assert;function xO(e){var t=e;this.quantize=t,this.iteration_loop=function(n,s,o,a){var c=n.internal_flags,f=C_(Vi.SFBMAX),m=C_(576),d=wO(2),p=0,h,w=c.l3_side,M=new c4(p);this.quantize.rv.ResvFrameBegin(n,M),p=M.bits;for(var u=0;u<c.mode_gr;u++){h=this.quantize.qupvt.on_pe(n,s,d,p,u,u),c.mode_ext==H.MPG_MD_MS_LR&&(this.quantize.ms_convert(c.l3_side,u),this.quantize.qupvt.reduce_side(d,o[u],p,h));for(var $=0;$<c.channels_out;$++){var U,D,b=w.tt[u][$];b.block_type!=H.SHORT_TYPE?(U=0,D=c.PSY.mask_adjust-U):(U=0,D=c.PSY.mask_adjust_short-U),c.masking_lower=Math.pow(10,D*.1),this.quantize.init_outer_loop(c,b),this.quantize.init_xrpow(c,b,m)&&(this.quantize.qupvt.calc_xmin(n,a[u][$],b,f),this.quantize.outer_loop(n,b,f,m,$,d[$])),this.quantize.iteration_finish_one(c,u,$),L_(b.part2_3_length<=qt.MAX_BITS_PER_CHANNEL),L_(b.part2_3_length<=d[$])}}this.quantize.rv.ResvFrameEnd(c,p)}}function Dt(e,t,n,s){this.xlen=e,this.linmax=t,this.table=n,this.hlen=s}var Re={};Re.t1HB=[1,1,1,0];Re.t2HB=[1,2,1,3,1,1,3,2,0];Re.t3HB=[3,2,1,1,1,1,3,2,0];Re.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];Re.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];Re.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];Re.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];Re.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];Re.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];Re.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];Re.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];Re.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];Re.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];Re.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];Re.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];Re.t32HB=[1<<0,5<<1,4<<1,5<<2,6<<1,5<<2,4<<2,4<<3,7<<1,3<<2,6<<2,0<<3,7<<2,2<<3,3<<3,1<<4];Re.t33HB=[15<<0,14<<1,13<<1,12<<2,11<<1,10<<2,9<<2,8<<3,7<<1,6<<2,5<<2,4<<3,3<<2,2<<3,1<<3,0<<4];Re.t1l=[1,4,3,5];Re.t2l=[1,4,7,4,5,7,6,7,8];Re.t3l=[2,3,7,4,4,7,6,7,8];Re.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];Re.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];Re.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];Re.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];Re.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];Re.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];Re.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];Re.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];Re.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];Re.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];Re.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];Re.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];Re.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];Re.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4];Re.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4];Re.ht=[new Dt(0,0,null,null),new Dt(2,0,Re.t1HB,Re.t1l),new Dt(3,0,Re.t2HB,Re.t2l),new Dt(3,0,Re.t3HB,Re.t3l),new Dt(0,0,null,null),new Dt(4,0,Re.t5HB,Re.t5l),new Dt(4,0,Re.t6HB,Re.t6l),new Dt(6,0,Re.t7HB,Re.t7l),new Dt(6,0,Re.t8HB,Re.t8l),new Dt(6,0,Re.t9HB,Re.t9l),new Dt(8,0,Re.t10HB,Re.t10l),new Dt(8,0,Re.t11HB,Re.t11l),new Dt(8,0,Re.t12HB,Re.t12l),new Dt(16,0,Re.t13HB,Re.t13l),new Dt(0,0,null,Re.t16_5l),new Dt(16,0,Re.t15HB,Re.t15l),new Dt(1,1,Re.t16HB,Re.t16l),new Dt(2,3,Re.t16HB,Re.t16l),new Dt(3,7,Re.t16HB,Re.t16l),new Dt(4,15,Re.t16HB,Re.t16l),new Dt(6,63,Re.t16HB,Re.t16l),new Dt(8,255,Re.t16HB,Re.t16l),new Dt(10,1023,Re.t16HB,Re.t16l),new Dt(13,8191,Re.t16HB,Re.t16l),new Dt(4,15,Re.t24HB,Re.t24l),new Dt(5,31,Re.t24HB,Re.t24l),new Dt(6,63,Re.t24HB,Re.t24l),new Dt(7,127,Re.t24HB,Re.t24l),new Dt(8,255,Re.t24HB,Re.t24l),new Dt(9,511,Re.t24HB,Re.t24l),new Dt(11,2047,Re.t24HB,Re.t24l),new Dt(13,8191,Re.t24HB,Re.t24l),new Dt(0,0,Re.t32HB,Re.t32l),new Dt(0,0,Re.t33HB,Re.t33l)];Re.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];Re.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];Re.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];Re.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];Re.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];Re.scfsi_band=[0,6,11,16,21];var ba=Je.VbrMode,ku=Je.Float,b0=Je.Util,ya=Je.new_float,SO=Je.new_int,ul=Je.assert;Gn.Q_MAX=256+1;Gn.Q_MAX2=116;Gn.LARGE_BITS=1e5;Gn.IXMAX_VAL=8206;function Gn(){var e=null,t=null,n=null;this.setModules=function(b,C,F){e=b,t=C,n=F};function s(b){return h[b+Gn.Q_MAX2]}this.IPOW20=function(b){return w[b]};var o=2220446049250313e-31,a=Gn.IXMAX_VAL,c=a+2,f=Gn.Q_MAX,m=Gn.Q_MAX2,d=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var p=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=p,this.sfBandIndex=[new ks([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ks([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var h=ya(f+m+1),w=ya(f),M=ya(c),u=ya(c);this.adj43=u;function $(b,C){var F=n.ATHformula(C,b);return F-=d,F=Math.pow(10,F/10+b.ATHlower),F}function U(b){for(var C=b.internal_flags.ATH.l,F=b.internal_flags.ATH.psfb21,L=b.internal_flags.ATH.s,V=b.internal_flags.ATH.psfb12,v=b.internal_flags,E=b.out_samplerate,T=0;T<H.SBMAX_l;T++){var y=v.scalefac_band.l[T],A=v.scalefac_band.l[T+1];C[T]=ku.MAX_VALUE;for(var S=y;S<A;S++){var x=S*E/1152,k=$(b,x);C[T]=Math.min(C[T],k)}}for(var T=0;T<H.PSFB21;T++){var y=v.scalefac_band.psfb21[T],A=v.scalefac_band.psfb21[T+1];F[T]=ku.MAX_VALUE;for(var S=y;S<A;S++){var x=S*E/1152,k=$(b,x);F[T]=Math.min(F[T],k)}}for(var T=0;T<H.SBMAX_s;T++){var y=v.scalefac_band.s[T],A=v.scalefac_band.s[T+1];L[T]=ku.MAX_VALUE;for(var S=y;S<A;S++){var x=S*E/384,k=$(b,x);L[T]=Math.min(L[T],k)}L[T]*=v.scalefac_band.s[T+1]-v.scalefac_band.s[T]}for(var T=0;T<H.PSFB12;T++){var y=v.scalefac_band.psfb12[T],A=v.scalefac_band.psfb12[T+1];V[T]=ku.MAX_VALUE;for(var S=y;S<A;S++){var x=S*E/384,k=$(b,x);V[T]=Math.min(V[T],k)}V[T]*=v.scalefac_band.s[13]-v.scalefac_band.s[12]}if(b.noATH){for(var T=0;T<H.SBMAX_l;T++)C[T]=1e-20;for(var T=0;T<H.PSFB21;T++)F[T]=1e-20;for(var T=0;T<H.SBMAX_s;T++)L[T]=1e-20;for(var T=0;T<H.PSFB12;T++)V[T]=1e-20}v.ATH.floor=10*Math.log10($(b,-1))}this.iteration_init=function(b){var C=b.internal_flags,F=C.l3_side,L;if(C.iteration_init_init==0){for(C.iteration_init_init=1,F.main_data_begin=0,U(b),M[0]=0,L=1;L<c;L++)M[L]=Math.pow(L,4/3);for(L=0;L<c-1;L++)u[L]=L+1-Math.pow(.5*(M[L]+M[L+1]),.75);for(u[L]=.5,L=0;L<f;L++)w[L]=Math.pow(2,(L-210)*-.1875);for(L=0;L<=f+m;L++)h[L]=Math.pow(2,(L-210-m)*.25);e.huffman_init(C);{var V,v,E,T;for(L=b.exp_nspsytune>>2&63,L>=32&&(L-=64),V=Math.pow(10,L/4/10),L=b.exp_nspsytune>>8&63,L>=32&&(L-=64),v=Math.pow(10,L/4/10),L=b.exp_nspsytune>>14&63,L>=32&&(L-=64),E=Math.pow(10,L/4/10),L=b.exp_nspsytune>>20&63,L>=32&&(L-=64),T=E*Math.pow(10,L/4/10),L=0;L<H.SBMAX_l;L++){var y;L<=6?y=V:L<=13?y=v:L<=20?y=E:y=T,C.nsPsy.longfact[L]=y}for(L=0;L<H.SBMAX_s;L++){var y;L<=5?y=V:L<=10?y=v:L<=11?y=E:y=T,C.nsPsy.shortfact[L]=y}}}},this.on_pe=function(b,C,F,L,V,v){var E=b.internal_flags,T=0,y,A=SO(2),S,x=new c4(T),k=t.ResvMaxBits(b,L,x,v);T=x.bits;var R=T+k;for(R>qt.MAX_BITS_PER_GRANULE&&(R=qt.MAX_BITS_PER_GRANULE),y=0,S=0;S<E.channels_out;++S)F[S]=Math.min(qt.MAX_BITS_PER_CHANNEL,T/E.channels_out),A[S]=0|F[S]*C[V][S]/700-F[S],A[S]>L*3/4&&(A[S]=L*3/4),A[S]<0&&(A[S]=0),A[S]+F[S]>qt.MAX_BITS_PER_CHANNEL&&(A[S]=Math.max(0,qt.MAX_BITS_PER_CHANNEL-F[S])),y+=A[S];if(y>k)for(S=0;S<E.channels_out;++S)A[S]=k*A[S]/y;for(S=0;S<E.channels_out;++S)F[S]+=A[S],k-=A[S];for(y=0,S=0;S<E.channels_out;++S)y+=F[S];if(y>qt.MAX_BITS_PER_GRANULE){var z=0;for(S=0;S<E.channels_out;++S)F[S]*=qt.MAX_BITS_PER_GRANULE,F[S]/=y,z+=F[S]}return R},this.reduce_side=function(b,C,F,L){ul(b[0]+b[1]<=qt.MAX_BITS_PER_GRANULE);var V=.33*(.5-C)/.5;V<0&&(V=0),V>.5&&(V=.5);var v=0|V*.5*(b[0]+b[1]);v>qt.MAX_BITS_PER_CHANNEL-b[0]&&(v=qt.MAX_BITS_PER_CHANNEL-b[0]),v<0&&(v=0),b[1]>=125&&(b[1]-v>125?(b[0]<F&&(b[0]+=v),b[1]-=v):(b[0]+=b[1]-125,b[1]=125)),v=b[0]+b[1],v>L&&(b[0]=L*b[0]/v,b[1]=L*b[1]/v),ul(b[0]<=qt.MAX_BITS_PER_CHANNEL),ul(b[1]<=qt.MAX_BITS_PER_CHANNEL),ul(b[0]+b[1]<=qt.MAX_BITS_PER_GRANULE)},this.athAdjust=function(b,C,F){var L=90.30873362,V=94.82444863,v=b0.FAST_LOG10_X(C,10),E=b*b,T=0;return v-=F,E>1e-20&&(T=1+b0.FAST_LOG10_X(E,10/L)),T<0&&(T=0),v*=T,v+=F+L-V,Math.pow(10,.1*v)},this.calc_xmin=function(b,C,F,L){var V=0,v=b.internal_flags,E,T=0,y=0,A=v.ATH,S=F.xr,x=b.VBR==ba.vbr_mtrh?1:0,k=v.masking_lower;for((b.VBR==ba.vbr_mtrh||b.VBR==ba.vbr_mt)&&(k=1),E=0;E<F.psy_lmax;E++){var R,z,ne,Y,te,g;b.VBR==ba.vbr_rh||b.VBR==ba.vbr_mtrh?z=athAdjust(A.adjust,A.l[E],A.floor):z=A.adjust*A.l[E],te=F.width[E],ne=z/te,Y=o,g=te>>1,R=0;do{var I,le;I=S[T]*S[T],R+=I,Y+=I<ne?I:ne,T++,le=S[T]*S[T],R+=le,Y+=le<ne?le:ne,T++}while(--g>0);if(R>z&&y++,E==H.SBPSY_l){var he=z*v.nsPsy.longfact[E];Y<he&&(Y=he)}if(x!=0&&(z=Y),!b.ATHonly){var He=C.en.l[E];if(He>0){var he;he=R*C.thm.l[E]*k/He,x!=0&&(he*=v.nsPsy.longfact[E]),z<he&&(z=he)}}x!=0?L[V++]=z:L[V++]=z*v.nsPsy.longfact[E]}var Ke=575;if(F.block_type!=H.SHORT_TYPE)for(var qe=576;qe--!=0&&Zr.EQ(S[qe],0);)Ke=qe;F.max_nonzero_coeff=Ke;for(var oe=F.sfb_smin;E<F.psymax;oe++,E+=3){var te,ke,Se;for(b.VBR==ba.vbr_rh||b.VBR==ba.vbr_mtrh?Se=athAdjust(A.adjust,A.s[oe],A.floor):Se=A.adjust*A.s[oe],te=F.width[E],ke=0;ke<3;ke++){var R=0,z,ne,Y,g=te>>1;ne=Se/te,Y=o;do{var I,le;I=S[T]*S[T],R+=I,Y+=I<ne?I:ne,T++,le=S[T]*S[T],R+=le,Y+=le<ne?le:ne,T++}while(--g>0);if(R>Se&&y++,oe==H.SBPSY_s){var he=Se*v.nsPsy.shortfact[oe];Y<he&&(Y=he)}if(x!=0?z=Y:z=Se,!b.ATHonly&&!b.ATHshort){var He=C.en.s[oe][ke];if(He>0){var he;he=R*C.thm.s[oe][ke]*k/He,x!=0&&(he*=v.nsPsy.shortfact[oe]),z<he&&(z=he)}}x!=0?L[V++]=z:L[V++]=z*v.nsPsy.shortfact[oe]}b.useTemporal&&(L[V-3]>L[V-3+1]&&(L[V-3+1]+=(L[V-3]-L[V-3+1])*v.decay),L[V-3+1]>L[V-3+2]&&(L[V-3+2]+=(L[V-3+1]-L[V-3+2])*v.decay))}return y};function D(b){this.s=b}this.calc_noise_core=function(b,C,F,L){var V=0,v=C.s,E=b.l3_enc;if(v>b.count1)for(;F--!=0;){var T;T=b.xr[v],v++,V+=T*T,T=b.xr[v],v++,V+=T*T}else if(v>b.big_values){var y=ya(2);for(y[0]=0,y[1]=L;F--!=0;){var T;T=Math.abs(b.xr[v])-y[E[v]],v++,V+=T*T,T=Math.abs(b.xr[v])-y[E[v]],v++,V+=T*T}}else for(;F--!=0;){var T;T=Math.abs(b.xr[v])-M[E[v]]*L,v++,V+=T*T,T=Math.abs(b.xr[v])-M[E[v]]*L,v++,V+=T*T}return C.s=v,V},this.calc_noise=function(b,C,F,L,V){var v=0,E=0,T,y,A=0,S=0,x=0,k=-20,R=0,z=b.scalefac,ne=0;for(L.over_SSD=0,T=0;T<b.psymax;T++){var Y=b.global_gain-(z[ne++]+(b.preflag!=0?p[T]:0)<<b.scalefac_scale+1)-b.subblock_gain[b.window[T]]*8,te=0;if(V!=null&&V.step[T]==Y)te=V.noise[T],R+=b.width[T],F[v++]=te/C[E++],te=V.noise_log[T];else{var g=s(Y);if(y=b.width[T]>>1,R+b.width[T]>b.max_nonzero_coeff){var I;I=b.max_nonzero_coeff-R+1,I>0?y=I>>1:y=0}var le=new D(R);te=this.calc_noise_core(b,le,y,g),R=le.s,V!=null&&(V.step[T]=Y,V.noise[T]=te),te=F[v++]=te/C[E++],te=b0.FAST_LOG10(Math.max(te,1e-20)),V!=null&&(V.noise_log[T]=te)}if(V!=null&&(V.global_gain=b.global_gain),x+=te,te>0){var he;he=Math.max(0|te*10+.5,1),L.over_SSD+=he*he,A++,S+=te}k=Math.max(k,te)}return L.over_count=A,L.tot_noise=x,L.over_noise=S,L.max_noise=k,A},this.set_pinfo=function(b,C,F,L,V){var v=b.internal_flags,E,T,y,A,S,x=C.scalefac_scale==0?.5:1,k=C.scalefac,R=ya(L3Side.SFBMAX),z=ya(L3Side.SFBMAX),ne=new CalcNoiseResult;calc_xmin(b,F,C,R),calc_noise(C,R,z,ne,null);var Y=0;for(T=C.sfb_lmax,C.block_type!=H.SHORT_TYPE&&C.mixed_block_flag==0&&(T=22),E=0;E<T;E++){var te=v.scalefac_band.l[E],g=v.scalefac_band.l[E+1],I=g-te;for(A=0;Y<g;Y++)A+=C.xr[Y]*C.xr[Y];A/=I,S=1e15,v.pinfo.en[L][V][E]=S*A,v.pinfo.xfsf[L][V][E]=S*R[E]*z[E]/I,F.en.l[E]>0&&!b.ATHonly?A=A/F.en.l[E]:A=0,v.pinfo.thr[L][V][E]=S*Math.max(A*F.thm.l[E],v.ATH.l[E]),v.pinfo.LAMEsfb[L][V][E]=0,C.preflag!=0&&E>=11&&(v.pinfo.LAMEsfb[L][V][E]=-x*p[E]),E<H.SBPSY_l&&(ul(k[E]>=0),v.pinfo.LAMEsfb[L][V][E]-=x*k[E])}if(C.block_type==H.SHORT_TYPE)for(T=E,E=C.sfb_smin;E<H.SBMAX_s;E++)for(var te=v.scalefac_band.s[E],g=v.scalefac_band.s[E+1],I=g-te,le=0;le<3;le++){for(A=0,y=te;y<g;y++)A+=C.xr[Y]*C.xr[Y],Y++;A=Math.max(A/I,1e-20),S=1e15,v.pinfo.en_s[L][V][3*E+le]=S*A,v.pinfo.xfsf_s[L][V][3*E+le]=S*R[T]*z[T]/I,F.en.s[E][le]>0?A=A/F.en.s[E][le]:A=0,(b.ATHonly||b.ATHshort)&&(A=0),v.pinfo.thr_s[L][V][3*E+le]=S*Math.max(A*F.thm.s[E][le],v.ATH.s[E]),v.pinfo.LAMEsfb_s[L][V][3*E+le]=-2*C.subblock_gain[le],E<H.SBPSY_s&&(v.pinfo.LAMEsfb_s[L][V][3*E+le]-=x*k[T]),T++}v.pinfo.LAMEqss[L][V]=C.global_gain,v.pinfo.LAMEmainbits[L][V]=C.part2_3_length+C.part2_length,v.pinfo.LAMEsfbits[L][V]=C.part2_length,v.pinfo.over[L][V]=ne.over_count,v.pinfo.max_noise[L][V]=ne.max_noise*10,v.pinfo.over_noise[L][V]=ne.over_noise*10,v.pinfo.tot_noise[L][V]=ne.tot_noise*10,v.pinfo.over_SSD[L][V]=ne.over_SSD}}var AO=Je.System,EO=Je.Arrays,fl=Je.new_int,y0=Je.assert;function tc(){var e=null;this.qupvt=null,this.setModules=function(y){this.qupvt=y,e=y};function t(y){this.bits=0|y}var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function s(y,A,S,x,k,R){var z=.5946/A;for(y=y>>1;y--!=0;)k[R++]=z>S[x++]?0:1,k[R++]=z>S[x++]?0:1}function o(y,A,S,x,k,R){y=y>>1;var z=y%2;for(y=y>>1;y--!=0;){var ne,Y,te,g,I,le,he,He;ne=S[x++]*A,Y=S[x++]*A,I=0|ne,te=S[x++]*A,le=0|Y,g=S[x++]*A,he=0|te,ne+=e.adj43[I],He=0|g,Y+=e.adj43[le],k[R++]=0|ne,te+=e.adj43[he],k[R++]=0|Y,g+=e.adj43[He],k[R++]=0|te,k[R++]=0|g}if(z!=0){var ne,Y,I,le;ne=S[x++]*A,Y=S[x++]*A,I=0|ne,le=0|Y,ne+=e.adj43[I],Y+=e.adj43[le],k[R++]=0|ne,k[R++]=0|Y}}function a(y,A,S,x,k){var R,z,ne=0,Y,te=0,g=0,I=0,le=A,he=0,He=le,Ke=0,qe=y,oe=0;for(Y=k!=null&&x.global_gain==k.global_gain,x.block_type==H.SHORT_TYPE?z=38:z=21,R=0;R<=z;R++){var ke=-1;if((Y||x.block_type==H.NORM_TYPE)&&(ke=x.global_gain-(x.scalefac[R]+(x.preflag!=0?e.pretab[R]:0)<<x.scalefac_scale+1)-x.subblock_gain[x.window[R]]*8),y0(x.width[R]>=0),Y&&k.step[R]==ke)te!=0&&(o(te,S,qe,oe,He,Ke),te=0),g!=0&&(s(g,S,qe,oe,He,Ke),g=0);else{var Se=x.width[R];if(ne+x.width[R]>x.max_nonzero_coeff){var Ae;Ae=x.max_nonzero_coeff-ne+1,EO.fill(A,x.max_nonzero_coeff,576,0),Se=Ae,Se<0&&(Se=0),R=z+1}if(te==0&&g==0&&(He=le,Ke=he,qe=y,oe=I),k!=null&&k.sfb_count1>0&&R>=k.sfb_count1&&k.step[R]>0&&ke>=k.step[R]?(te!=0&&(o(te,S,qe,oe,He,Ke),te=0,He=le,Ke=he,qe=y,oe=I),g+=Se):(g!=0&&(s(g,S,qe,oe,He,Ke),g=0,He=le,Ke=he,qe=y,oe=I),te+=Se),Se<=0){g!=0&&(s(g,S,qe,oe,He,Ke),g=0),te!=0&&(o(te,S,qe,oe,He,Ke),te=0);break}}R<=z&&(he+=x.width[R],I+=x.width[R],ne+=x.width[R])}te!=0&&(o(te,S,qe,oe,He,Ke),te=0),g!=0&&(s(g,S,qe,oe,He,Ke),g=0)}function c(y,A,S){var x=0,k=0;do{var R=y[A++],z=y[A++];x<R&&(x=R),k<z&&(k=z)}while(A<S);return x<k&&(x=k),x}function f(y,A,S,x,k,R){var z=Re.ht[x].xlen*65536+Re.ht[k].xlen,ne=0,Y;do{var te=y[A++],g=y[A++];te!=0&&(te>14&&(te=15,ne+=z),te*=16),g!=0&&(g>14&&(g=15,ne+=z),te+=g),ne+=Re.largetbl[te]}while(A<S);return Y=ne&65535,ne>>=16,ne>Y&&(ne=Y,x=k),R.bits+=ne,x}function m(y,A,S,x){var k=0,R=Re.ht[1].hlen;do{var z=y[A+0]*2+y[A+1];A+=2,k+=R[z]}while(A<S);return x.bits+=k,1}function d(y,A,S,x,k){var R=0,z,ne=Re.ht[x].xlen,Y;x==2?Y=Re.table23:Y=Re.table56;do{var te=y[A+0]*ne+y[A+1];A+=2,R+=Y[te]}while(A<S);return z=R&65535,R>>=16,R>z&&(R=z,x++),k.bits+=R,x}function p(y,A,S,x,k){var R=0,z=0,ne=0,Y=Re.ht[x].xlen,te=Re.ht[x].hlen,g=Re.ht[x+1].hlen,I=Re.ht[x+2].hlen;do{var le=y[A+0]*Y+y[A+1];A+=2,R+=te[le],z+=g[le],ne+=I[le]}while(A<S);var he=x;return R>z&&(R=z,he++),R>ne&&(R=ne,he=x+2),k.bits+=R,he}var h=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function w(y,A,S,x){var k=c(y,A,S);switch(k){case 0:return k;case 1:return m(y,A,S,x);case 2:case 3:return d(y,A,S,h[k-1],x);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return p(y,A,S,h[k-1],x);default:if(k>Gn.IXMAX_VAL)return x.bits=Gn.LARGE_BITS,-1;k-=15;var R;for(R=24;R<32&&!(Re.ht[R].linmax>=k);R++);var z;for(z=R-8;z<24&&!(Re.ht[z].linmax>=k);z++);return f(y,A,S,z,R,x)}}this.noquant_count_bits=function(y,A,S){var x=A.l3_enc,k=Math.min(576,A.max_nonzero_coeff+2>>1<<1);for(S!=null&&(S.sfb_count1=0);k>1&&(x[k-1]|x[k-2])==0;k-=2);A.count1=k;for(var R=0,z=0;k>3;k-=4){var ne;if(((x[k-1]|x[k-2]|x[k-3]|x[k-4])&2147483647)>1)break;ne=((x[k-4]*2+x[k-3])*2+x[k-2])*2+x[k-1],R+=Re.t32l[ne],z+=Re.t33l[ne]}var Y=R;if(A.count1table_select=0,R>z&&(Y=z,A.count1table_select=1),A.count1bits=Y,A.big_values=k,k==0)return Y;if(A.block_type==H.SHORT_TYPE)R=3*y.scalefac_band.s[3],R>A.big_values&&(R=A.big_values),z=A.big_values;else if(A.block_type==H.NORM_TYPE){if(R=A.region0_count=y.bv_scf[k-2],z=A.region1_count=y.bv_scf[k-1],z=y.scalefac_band.l[R+z+2],R=y.scalefac_band.l[R+1],z<k){var te=new t(Y);A.table_select[2]=w(x,z,k,te),Y=te.bits}}else A.region0_count=7,A.region1_count=H.SBMAX_l-1-7-1,R=y.scalefac_band.l[7+1],z=k,R>z&&(R=z);if(R=Math.min(R,k),z=Math.min(z,k),R>0){var te=new t(Y);A.table_select[0]=w(x,0,R,te),Y=te.bits}if(R<z){var te=new t(Y);A.table_select[1]=w(x,R,z,te),Y=te.bits}if(y.use_best_huffman==2&&(A.part2_3_length=Y,best_huffman_divide(y,A),Y=A.part2_3_length),S!=null&&A.block_type==H.NORM_TYPE){for(var g=0;y.scalefac_band.l[g]<A.big_values;)g++;S.sfb_count1=g}return Y},this.count_bits=function(y,A,S,x){var k=S.l3_enc,R=Gn.IXMAX_VAL/e.IPOW20(S.global_gain);if(S.xrpow_max>R)return Gn.LARGE_BITS;if(a(A,k,e.IPOW20(S.global_gain),S,x),(y.substep_shaping&2)!=0)for(var z=0,ne=S.global_gain+S.scalefac_scale,Y=.634521682242439/e.IPOW20(ne),te=0;te<S.sfbmax;te++){var g=S.width[te];if(y.pseudohalf[te]==0)z+=g;else{var I;for(I=z,z+=g;I<z;++I)k[I]=A[I]>=Y?k[I]:0}}return this.noquant_count_bits(y,S,x)};function M(y,A,S,x,k,R,z){for(var ne=A.big_values,Y=0;Y<=7+15;Y++)x[Y]=Gn.LARGE_BITS;for(var Y=0;Y<16;Y++){var te=y.scalefac_band.l[Y+1];if(te>=ne)break;var g=0,I=new t(g),le=w(S,0,te,I);g=I.bits;for(var he=0;he<8;he++){var He=y.scalefac_band.l[Y+he+2];if(He>=ne)break;var Ke=g;I=new t(Ke);var qe=w(S,te,He,I);Ke=I.bits,x[Y+he]>Ke&&(x[Y+he]=Ke,k[Y+he]=Y,R[Y+he]=le,z[Y+he]=qe)}}}function u(y,A,S,x,k,R,z,ne){for(var Y=A.big_values,te=2;te<H.SBMAX_l+1;te++){var g=y.scalefac_band.l[te];if(g>=Y)break;var I=k[te-2]+A.count1bits;if(S.part2_3_length<=I)break;var le=new t(I),he=w(x,g,Y,le);I=le.bits,!(S.part2_3_length<=I)&&(S.assign(A),S.part2_3_length=I,S.region0_count=R[te-2],S.region1_count=te-2-R[te-2],S.table_select[0]=z[te-2],S.table_select[1]=ne[te-2],S.table_select[2]=he)}}this.best_huffman_divide=function(y,A){var S=new t1,x=A.l3_enc,k=fl(7+15+1),R=fl(7+15+1),z=fl(7+15+1),ne=fl(7+15+1);if(!(A.block_type==H.SHORT_TYPE&&y.mode_gr==1)){S.assign(A),A.block_type==H.NORM_TYPE&&(M(y,A,x,k,R,z,ne),u(y,S,A,x,k,R,z,ne));var Y=S.big_values;if(!(Y==0||(x[Y-2]|x[Y-1])>1)&&(Y=A.count1+2,!(Y>576))){S.assign(A),S.count1=Y;for(var te=0,g=0;Y>S.big_values;Y-=4){var I=((x[Y-4]*2+x[Y-3])*2+x[Y-2])*2+x[Y-1];te+=Re.t32l[I],g+=Re.t33l[I]}if(S.big_values=Y,S.count1table_select=0,te>g&&(te=g,S.count1table_select=1),S.count1bits=te,S.block_type==H.NORM_TYPE)u(y,S,A,x,k,R,z,ne);else{if(S.part2_3_length=te,te=y.scalefac_band.l[7+1],te>Y&&(te=Y),te>0){var le=new t(S.part2_3_length);S.table_select[0]=w(x,0,te,le),S.part2_3_length=le.bits}if(Y>te){var le=new t(S.part2_3_length);S.table_select[1]=w(x,te,Y,le),S.part2_3_length=le.bits}A.part2_3_length>S.part2_3_length&&A.assign(S)}}}};var $=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],U=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],D=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],b=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];tc.slen1_tab=D,tc.slen2_tab=b;function C(y,A){for(var S,x=A.tt[1][y],k=A.tt[0][y],R=0;R<Re.scfsi_band.length-1;R++){for(S=Re.scfsi_band[R];S<Re.scfsi_band[R+1]&&!(k.scalefac[S]!=x.scalefac[S]&&x.scalefac[S]>=0);S++);if(S==Re.scfsi_band[R+1]){for(S=Re.scfsi_band[R];S<Re.scfsi_band[R+1];S++)x.scalefac[S]=-1;A.scfsi[y][R]=1}}var z=0,ne=0;for(S=0;S<11;S++)x.scalefac[S]!=-1&&(ne++,z<x.scalefac[S]&&(z=x.scalefac[S]));for(var Y=0,te=0;S<H.SBPSY_l;S++)x.scalefac[S]!=-1&&(te++,Y<x.scalefac[S]&&(Y=x.scalefac[S]));for(var R=0;R<16;R++)if(z<$[R]&&Y<U[R]){var g=D[R]*ne+b[R]*te;x.part2_length>g&&(x.part2_length=g,x.scalefac_compress=R)}}this.best_scalefac_store=function(y,A,S,x){var k=x.tt[A][S],R,z,ne,Y,te=0;for(ne=0,R=0;R<k.sfbmax;R++){var g=k.width[R];for(ne+=g,Y=-g;Y<0&&k.l3_enc[Y+ne]==0;Y++);Y==0&&(k.scalefac[R]=te=-2)}if(k.scalefac_scale==0&&k.preflag==0){var I=0;for(R=0;R<k.sfbmax;R++)k.scalefac[R]>0&&(I|=k.scalefac[R]);if((I&1)==0&&I!=0){for(R=0;R<k.sfbmax;R++)k.scalefac[R]>0&&(k.scalefac[R]>>=1);k.scalefac_scale=te=1}}if(k.preflag==0&&k.block_type!=H.SHORT_TYPE&&y.mode_gr==2){for(R=11;R<H.SBPSY_l&&!(k.scalefac[R]<e.pretab[R]&&k.scalefac[R]!=-2);R++);if(R==H.SBPSY_l){for(R=11;R<H.SBPSY_l;R++)k.scalefac[R]>0&&(k.scalefac[R]-=e.pretab[R]);k.preflag=te=1}}for(z=0;z<4;z++)x.scfsi[S][z]=0;for(y.mode_gr==2&&A==1&&x.tt[0][S].block_type!=H.SHORT_TYPE&&x.tt[1][S].block_type!=H.SHORT_TYPE&&(C(S,x),te=0),R=0;R<k.sfbmax;R++)k.scalefac[R]==-2&&(k.scalefac[R]=0);te!=0&&(y.mode_gr==2?this.scale_bitcount(k):this.scale_bitcount_lsf(y,k))};function F(y,A){for(var S=0;S<A;++S)if(y[S]<0)return!1;return!0}var L=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],V=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],v=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(y){var A,S,x=0,k=0,R,z=y.scalefac;if(y0(F(z,y.sfbmax)),y.block_type==H.SHORT_TYPE)R=L,y.mixed_block_flag!=0&&(R=V);else if(R=v,y.preflag==0){for(S=11;S<H.SBPSY_l&&!(z[S]<e.pretab[S]);S++);if(S==H.SBPSY_l)for(y.preflag=1,S=11;S<H.SBPSY_l;S++)z[S]-=e.pretab[S]}for(S=0;S<y.sfbdivide;S++)x<z[S]&&(x=z[S]);for(;S<y.sfbmax;S++)k<z[S]&&(k=z[S]);for(y.part2_length=Gn.LARGE_BITS,A=0;A<16;A++)x<$[A]&&k<U[A]&&y.part2_length>R[A]&&(y.part2_length=R[A],y.scalefac_compress=A);return y.part2_length==Gn.LARGE_BITS};var E=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(y,A){var S,x,k,R,z,ne,Y,te,g=fl(4),I=A.scalefac;for(A.preflag!=0?S=2:S=0,Y=0;Y<4;Y++)g[Y]=0;if(A.block_type==H.SHORT_TYPE){x=1;var le=e.nr_of_sfb_block[S][x];for(te=0,k=0;k<4;k++)for(R=le[k]/3,Y=0;Y<R;Y++,te++)for(z=0;z<3;z++)I[te*3+z]>g[k]&&(g[k]=I[te*3+z])}else{x=0;var le=e.nr_of_sfb_block[S][x];for(te=0,k=0;k<4;k++)for(R=le[k],Y=0;Y<R;Y++,te++)I[te]>g[k]&&(g[k]=I[te])}for(ne=!1,k=0;k<4;k++)g[k]>E[S][k]&&(ne=!0);if(!ne){var he,He,Ke,qe;for(A.sfb_partition_table=e.nr_of_sfb_block[S][x],k=0;k<4;k++)A.slen[k]=T[g[k]];switch(he=A.slen[0],He=A.slen[1],Ke=A.slen[2],qe=A.slen[3],S){case 0:A.scalefac_compress=(he*5+He<<4)+(Ke<<2)+qe;break;case 1:A.scalefac_compress=400+(he*5+He<<2)+Ke;break;case 2:A.scalefac_compress=500+he*3+He;break;default:AO.err.printf(`intensity stereo not implemented yet
`);break}}if(!ne)for(y0(A.sfb_partition_table!=null),A.part2_length=0,k=0;k<4;k++)A.part2_length+=A.slen[k]*A.sfb_partition_table[k];return ne};var T=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(y){for(var A=2;A<=576;A+=2){for(var S=0,x;y.scalefac_band.l[++S]<A;);for(x=n[S][0];y.scalefac_band.l[x+1]>A;)x--;for(x<0&&(x=n[S][0]),y.bv_scf[A-2]=x,x=n[S][1];y.scalefac_band.l[x+y.bv_scf[A-2]+2]>A;)x--;x<0&&(x=n[S][1]),y.bv_scf[A-1]=x}}}var Es=Je.System,MO=Je.Arrays,TO=Je.new_byte,RO=Je.new_float_n,kO=Je.new_int,Ln=Je.assert;Zr.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=Math.abs(e)*1e-6:Math.abs(e-t)<=Math.abs(t)*1e-6};Zr.NEQ=function(e,t){return!Zr.EQ(e,t)};function Zr(){var e=this,t=32773,n=null,s=null,o=null,a=null;this.setModules=function(E,T,y,A){n=E,s=T,o=y,a=A};var c=null,f=0,m=0,d=0;this.getframebits=function(E){var T=E.internal_flags,y;T.bitrate_index!=0?y=Re.bitrate_table[E.version][T.bitrate_index]:y=E.brate;var A=0|(E.version+1)*72e3*y/E.out_samplerate+T.padding;return 8*A};function p(E){Es.arraycopy(E.header[E.w_ptr].buf,0,c,m,E.sideinfo_len),m+=E.sideinfo_len,f+=E.sideinfo_len*8,E.w_ptr=E.w_ptr+1&qt.MAX_HEADER_BUF-1}function h(E,T,y){for(;y>0;){var A;d==0&&(d=8,m++,Ln(E.header[E.w_ptr].write_timing>=f),E.header[E.w_ptr].write_timing==f&&p(E),c[m]=0),A=Math.min(y,d),y-=A,d-=A,c[m]|=T>>y<<d,f+=A}}function w(E,T,y){for(;y>0;){var A;d==0&&(d=8,m++,c[m]=0),A=Math.min(y,d),y-=A,d-=A,c[m]|=T>>y<<d,f+=A}}function M(E,T){var y=E.internal_flags,A;if(T>=8&&(h(y,76,8),T-=8),T>=8&&(h(y,65,8),T-=8),T>=8&&(h(y,77,8),T-=8),T>=8&&(h(y,69,8),T-=8),T>=32){var S=o.getLameShortVersion();if(T>=32)for(A=0;A<S.length&&T>=8;++A)T-=8,h(y,S.charAt(A),8)}for(;T>=1;T-=1)h(y,y.ancillary_flag,1),y.ancillary_flag^=E.disable_reservoir?0:1}function u(E,T,y){for(var A=E.header[E.h_ptr].ptr;y>0;){var S=Math.min(y,8-(A&7));y-=S,E.header[E.h_ptr].buf[A>>3]|=T>>y<<8-(A&7)-S,A+=S}E.header[E.h_ptr].ptr=A}function $(E,T){E<<=8;for(var y=0;y<8;y++)E<<=1,T<<=1,((T^E)&65536)!=0&&(T^=t);return T}this.CRC_writeheader=function(E,T){var y=65535;y=$(T[2]&255,y),y=$(T[3]&255,y);for(var A=6;A<E.sideinfo_len;A++)y=$(T[A]&255,y);T[4]=byte(y>>8),T[5]=byte(y&255)};function U(E,T){var y=E.internal_flags,A,S,x;if(A=y.l3_side,y.header[y.h_ptr].ptr=0,MO.fill(y.header[y.h_ptr].buf,0,y.sideinfo_len,0),E.out_samplerate<16e3?u(y,4094,12):u(y,4095,12),u(y,E.version,1),u(y,4-3,2),u(y,E.error_protection?0:1,1),u(y,y.bitrate_index,4),u(y,y.samplerate_index,2),u(y,y.padding,1),u(y,E.extension,1),u(y,E.mode.ordinal(),2),u(y,y.mode_ext,2),u(y,E.copyright,1),u(y,E.original,1),u(y,E.emphasis,2),E.error_protection&&u(y,0,16),E.version==1){for(Ln(A.main_data_begin>=0),u(y,A.main_data_begin,9),y.channels_out==2?u(y,A.private_bits,3):u(y,A.private_bits,5),x=0;x<y.channels_out;x++){var k;for(k=0;k<4;k++)u(y,A.scfsi[x][k],1)}for(S=0;S<2;S++)for(x=0;x<y.channels_out;x++){var R=A.tt[S][x];u(y,R.part2_3_length+R.part2_length,12),u(y,R.big_values/2,9),u(y,R.global_gain,8),u(y,R.scalefac_compress,4),R.block_type!=H.NORM_TYPE?(u(y,1,1),u(y,R.block_type,2),u(y,R.mixed_block_flag,1),R.table_select[0]==14&&(R.table_select[0]=16),u(y,R.table_select[0],5),R.table_select[1]==14&&(R.table_select[1]=16),u(y,R.table_select[1],5),u(y,R.subblock_gain[0],3),u(y,R.subblock_gain[1],3),u(y,R.subblock_gain[2],3)):(u(y,0,1),R.table_select[0]==14&&(R.table_select[0]=16),u(y,R.table_select[0],5),R.table_select[1]==14&&(R.table_select[1]=16),u(y,R.table_select[1],5),R.table_select[2]==14&&(R.table_select[2]=16),u(y,R.table_select[2],5),Ln(R.region0_count>=0&&R.region0_count<16),Ln(R.region1_count>=0&&R.region1_count<8),u(y,R.region0_count,4),u(y,R.region1_count,3)),u(y,R.preflag,1),u(y,R.scalefac_scale,1),u(y,R.count1table_select,1)}}else for(Ln(A.main_data_begin>=0),u(y,A.main_data_begin,8),u(y,A.private_bits,y.channels_out),S=0,x=0;x<y.channels_out;x++){var R=A.tt[S][x];u(y,R.part2_3_length+R.part2_length,12),u(y,R.big_values/2,9),u(y,R.global_gain,8),u(y,R.scalefac_compress,9),R.block_type!=H.NORM_TYPE?(u(y,1,1),u(y,R.block_type,2),u(y,R.mixed_block_flag,1),R.table_select[0]==14&&(R.table_select[0]=16),u(y,R.table_select[0],5),R.table_select[1]==14&&(R.table_select[1]=16),u(y,R.table_select[1],5),u(y,R.subblock_gain[0],3),u(y,R.subblock_gain[1],3),u(y,R.subblock_gain[2],3)):(u(y,0,1),R.table_select[0]==14&&(R.table_select[0]=16),u(y,R.table_select[0],5),R.table_select[1]==14&&(R.table_select[1]=16),u(y,R.table_select[1],5),R.table_select[2]==14&&(R.table_select[2]=16),u(y,R.table_select[2],5),Ln(R.region0_count>=0&&R.region0_count<16),Ln(R.region1_count>=0&&R.region1_count<8),u(y,R.region0_count,4),u(y,R.region1_count,3)),u(y,R.scalefac_scale,1),u(y,R.count1table_select,1)}E.error_protection&&CRC_writeheader(y,y.header[y.h_ptr].buf);{var z=y.h_ptr;Ln(y.header[z].ptr==y.sideinfo_len*8),y.h_ptr=z+1&qt.MAX_HEADER_BUF-1,y.header[y.h_ptr].write_timing=y.header[z].write_timing+T,y.h_ptr==y.w_ptr&&Es.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function D(E,T){var y=Re.ht[T.count1table_select+32],A,S=0,x=T.big_values,k=T.big_values;for(Ln(T.count1table_select<2),A=(T.count1-T.big_values)/4;A>0;--A){var R=0,z=0,ne;ne=T.l3_enc[x+0],ne!=0&&(z+=8,T.xr[k+0]<0&&R++),ne=T.l3_enc[x+1],ne!=0&&(z+=4,R*=2,T.xr[k+1]<0&&R++),ne=T.l3_enc[x+2],ne!=0&&(z+=2,R*=2,T.xr[k+2]<0&&R++),ne=T.l3_enc[x+3],ne!=0&&(z++,R*=2,T.xr[k+3]<0&&R++),x+=4,k+=4,h(E,R+y.table[z],y.hlen[z]),S+=y.hlen[z]}return S}function b(E,T,y,A,S){var x=Re.ht[T],k=0;if(T==0)return k;for(var R=y;R<A;R+=2){var z=0,ne=0,Y=x.xlen,te=x.xlen,g=0,I=S.l3_enc[R],le=S.l3_enc[R+1];if(I!=0&&(S.xr[R]<0&&g++,z--),T>15){if(I>14){var he=I-15;Ln(he<=x.linmax),g|=he<<1,ne=Y,I=15}if(le>14){var He=le-15;Ln(He<=x.linmax),g<<=Y,g|=He,ne+=Y,le=15}te=16}le!=0&&(g<<=1,S.xr[R+1]<0&&g++,z--),I=I*te+le,ne-=z,z+=x.hlen[I],h(E,x.table[I],z),h(E,g,ne),k+=z+ne}return k}function C(E,T){var y=3*E.scalefac_band.s[3];y>T.big_values&&(y=T.big_values);var A=b(E,T.table_select[0],0,y,T);return A+=b(E,T.table_select[1],y,T.big_values,T),A}function F(E,T){var y,A,S,x;y=T.big_values;var k=T.region0_count+1;return Ln(k<E.scalefac_band.l.length),S=E.scalefac_band.l[k],k+=T.region1_count+1,Ln(k<E.scalefac_band.l.length),x=E.scalefac_band.l[k],S>y&&(S=y),x>y&&(x=y),A=b(E,T.table_select[0],0,S,T),A+=b(E,T.table_select[1],S,x,T),A+=b(E,T.table_select[2],x,y,T),A}function L(E){var T,y,A,S,x=0,k=E.internal_flags,R=k.l3_side;if(E.version==1)for(T=0;T<2;T++)for(y=0;y<k.channels_out;y++){var z=R.tt[T][y],ne=tc.slen1_tab[z.scalefac_compress],Y=tc.slen2_tab[z.scalefac_compress];for(S=0,A=0;A<z.sfbdivide;A++)z.scalefac[A]!=-1&&(h(k,z.scalefac[A],ne),S+=ne);for(;A<z.sfbmax;A++)z.scalefac[A]!=-1&&(h(k,z.scalefac[A],Y),S+=Y);Ln(S==z.part2_length),z.block_type==H.SHORT_TYPE?S+=C(k,z):S+=F(k,z),S+=D(k,z),Ln(S==z.part2_3_length+z.part2_length),x+=S}else for(T=0,y=0;y<k.channels_out;y++){var z=R.tt[T][y],te,g,I=0;if(Ln(z.sfb_partition_table!=null),S=0,A=0,g=0,z.block_type==H.SHORT_TYPE){for(;g<4;g++){var le=z.sfb_partition_table[g]/3,he=z.slen[g];for(te=0;te<le;te++,A++)h(k,Math.max(z.scalefac[A*3+0],0),he),h(k,Math.max(z.scalefac[A*3+1],0),he),h(k,Math.max(z.scalefac[A*3+2],0),he),I+=3*he}S+=C(k,z)}else{for(;g<4;g++){var le=z.sfb_partition_table[g],he=z.slen[g];for(te=0;te<le;te++,A++)h(k,Math.max(z.scalefac[A],0),he),I+=he}S+=F(k,z)}S+=D(k,z),Ln(S==z.part2_3_length),Ln(I==z.part2_length),x+=I+S}return x}function V(){this.total=0}function v(E,T){var y=E.internal_flags,A,S,x,k,R;return R=y.w_ptr,k=y.h_ptr-1,k==-1&&(k=qt.MAX_HEADER_BUF-1),A=y.header[k].write_timing-f,T.total=A,A>=0&&(S=1+k-R,k<R&&(S=1+k-R+qt.MAX_HEADER_BUF),A-=S*8*y.sideinfo_len),x=e.getframebits(E),A+=x,T.total+=x,T.total%8!=0?T.total=1+T.total/8:T.total=T.total/8,T.total+=m+1,A<0&&Es.err.println(`strange error flushing buffer ... 
`),A}this.flush_bitstream=function(E){var T=E.internal_flags,y,A,S=T.h_ptr-1;if(S==-1&&(S=qt.MAX_HEADER_BUF-1),y=T.l3_side,!((A=v(E,new V))<0)){if(M(E,A),Ln(T.header[S].write_timing+this.getframebits(E)==f),T.ResvSize=0,y.main_data_begin=0,T.findReplayGain){var x=n.GetTitleGain(T.rgdata);Ln(NEQ(x,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),T.RadioGain=Math.floor(x*10+.5)|0}T.findPeakSample&&(T.noclipGainChange=Math.ceil(Math.log10(T.PeakSample/32767)*20*10)|0,T.noclipGainChange>0&&(EQ(E.scale,1)||EQ(E.scale,0))?T.noclipScale=Math.floor(32767/T.PeakSample*100)/100:T.noclipScale=-1)}},this.add_dummy_byte=function(E,T,y){for(var A=E.internal_flags,S;y-- >0;)for(w(A,T,8),S=0;S<qt.MAX_HEADER_BUF;++S)A.header[S].write_timing+=8},this.format_bitstream=function(E){var T=E.internal_flags,y;y=T.l3_side;var A=this.getframebits(E);M(E,y.resvDrain_pre),U(E,A);var S=8*T.sideinfo_len;if(S+=L(E),M(E,y.resvDrain_post),S+=y.resvDrain_post,y.main_data_begin+=(A-S)/8,v(E,new V)!=T.ResvSize&&Es.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),y.main_data_begin*8!=T.ResvSize&&(Es.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*y.main_data_begin,T.ResvSize,y.resvDrain_post,y.resvDrain_pre,8*T.sideinfo_len,S-y.resvDrain_post-8*T.sideinfo_len,S,S%8,A),Es.err.println("This is a fatal error.  It has several possible causes:"),Es.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Es.err.println(" 9%%  Your system is overclocked"),Es.err.println(" 1%%  bug in LAME encoding library"),T.ResvSize=y.main_data_begin*8),f>1e9){var x;for(x=0;x<qt.MAX_HEADER_BUF;++x)T.header[x].write_timing-=f;f=0}return 0},this.copy_buffer=function(E,T,y,A,S){var x=m+1;if(x<=0)return 0;if(A!=0&&x>A)return-1;if(Es.arraycopy(c,0,T,y,x),m=-1,d=0,S!=0){var k=kO(1);if(k[0]=E.nMusicCRC,a.updateMusicCRC(k,T,y,x),E.nMusicCRC=k[0],x>0&&(E.VBR_seek_table.nBytesWritten+=x),E.decode_on_the_fly){for(var R=RO([2,1152]),z=x,ne=-1,Y;ne!=0;)if(ne=s.hip_decode1_unclipped(E.hip,T,y,z,R[0],R[1]),z=0,ne==-1&&(ne=0),ne>0){if(E.findPeakSample){for(Y=0;Y<ne;Y++)R[0][Y]>E.PeakSample?E.PeakSample=R[0][Y]:-R[0][Y]>E.PeakSample&&(E.PeakSample=-R[0][Y]);if(E.channels_out>1)for(Y=0;Y<ne;Y++)R[1][Y]>E.PeakSample?E.PeakSample=R[1][Y]:-R[1][Y]>E.PeakSample&&(E.PeakSample=-R[1][Y])}if(E.findReplayGain&&n.AnalyzeSamples(E.rgdata,R[0],0,R[1],0,ne,E.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return x},this.init_bit_stream_w=function(E){c=TO(wt.LAME_MAXMP3BUFFER),E.h_ptr=E.w_ptr=0,E.header[E.h_ptr].write_timing=0,m=-1,d=0,f=0}}var IO=Je.System,un=Je.VbrMode,w0=Je.ShortBlock,wa=Je.new_float,B_=Je.new_int_n,OO=Je.new_short_n,Ii=Je.assert;function wt(){var e=this,t=128*1024;wt.V9=410,wt.V8=420,wt.V7=430,wt.V6=440,wt.V5=450,wt.V4=460,wt.V3=470,wt.V2=480,wt.V1=490,wt.V0=500,wt.R3MIX=1e3,wt.STANDARD=1001,wt.EXTREME=1002,wt.INSANE=1003,wt.STANDARD_FAST=1004,wt.EXTREME_FAST=1005,wt.MEDIUM=1006,wt.MEDIUM_FAST=1007;var n=16384+t;wt.LAME_MAXMP3BUFFER=n;var s,o,a,c,f,m=new p0,d,p,h;this.enc=new H,this.setModules=function(g,I,le,he,He,Ke,qe,oe,ke){s=g,o=I,a=le,c=he,f=He,d=Ke,p=oe,h=ke,this.enc.setModules(o,m,c,d)};function w(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=wa(H.SBMAX_l),this.bo_s_weight=wa(H.SBMAX_s)}function M(){this.lowerlimit=0}function u(g,I){this.lowpass=I}var $=4294479419;function U(g){var I;return g.class_id=$,I=g.internal_flags=new qt,g.mode=Yt.NOT_SET,g.original=1,g.in_samplerate=44100,g.num_channels=2,g.num_samples=-1,g.bWriteVbrTag=!0,g.quality=-1,g.short_blocks=null,I.subblock_gain=-1,g.lowpassfreq=0,g.highpassfreq=0,g.lowpasswidth=-1,g.highpasswidth=-1,g.VBR=un.vbr_off,g.VBR_q=4,g.ATHcurve=-1,g.VBR_mean_bitrate_kbps=128,g.VBR_min_bitrate_kbps=0,g.VBR_max_bitrate_kbps=0,g.VBR_hard_min=0,I.VBR_min_bitrate=1,I.VBR_max_bitrate=13,g.quant_comp=-1,g.quant_comp_short=-1,g.msfix=-1,I.resample_ratio=1,I.OldValue[0]=180,I.OldValue[1]=180,I.CurrentStep[0]=4,I.CurrentStep[1]=4,I.masking_lower=1,I.nsPsy.attackthre=-1,I.nsPsy.attackthre_s=-1,g.scale=-1,g.athaa_type=-1,g.ATHtype=-1,g.athaa_loudapprox=-1,g.athaa_sensitivity=0,g.useTemporal=null,g.interChRatio=-1,I.mf_samples_to_encode=H.ENCDELAY+H.POSTDELAY,g.encoder_padding=0,I.mf_size=H.ENCDELAY-H.MDCTDELAY,g.findReplayGain=!1,g.decode_on_the_fly=!1,I.decode_on_the_fly=!1,I.findReplayGain=!1,I.findPeakSample=!1,I.RadioGain=0,I.AudiophileGain=0,I.noclipGainChange=0,I.noclipScale=-1,g.preset=0,g.write_id3tag_automatic=!0,0}this.lame_init=function(){var g=new uO;return U(g),g.lame_allocated_gfp=1,g};function D(g){return g>1?0:g<=0?1:Math.cos(Math.PI/2*g)}this.nearestBitrateFullIndex=function(g){var I=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],le=0,he=0,He=0,Ke=0;Ke=I[16],He=16,he=I[16],le=16;for(var qe=0;qe<16;qe++)if(Math.max(g,I[qe+1])!=g){Ke=I[qe+1],He=qe+1,he=I[qe],le=qe;break}return Ke-g>g-he?le:He};function b(g,I){var le=44100;return I>=48e3?le=48e3:I>=44100?le=44100:I>=32e3?le=32e3:I>=24e3?le=24e3:I>=22050?le=22050:I>=16e3?le=16e3:I>=12e3?le=12e3:I>=11025?le=11025:I>=8e3&&(le=8e3),g==-1?le:(g<=15960&&(le=44100),g<=15250&&(le=32e3),g<=11220&&(le=24e3),g<=9970&&(le=22050),g<=7230&&(le=16e3),g<=5420&&(le=12e3),g<=4510&&(le=11025),g<=3970&&(le=8e3),I<le?I>44100?48e3:I>32e3?44100:I>24e3?32e3:I>22050?24e3:I>16e3?22050:I>12e3?16e3:I>11025?12e3:I>8e3?11025:8e3:le)}function C(g,I){switch(g){case 44100:return I.version=1,0;case 48e3:return I.version=1,1;case 32e3:return I.version=1,2;case 22050:return I.version=0,0;case 24e3:return I.version=0,1;case 16e3:return I.version=0,2;case 11025:return I.version=0,0;case 12e3:return I.version=0,1;case 8e3:return I.version=0,2;default:return I.version=0,-1}}function F(g,I,le){le<16e3&&(I=2);for(var he=Re.bitrate_table[I][1],He=2;He<=14;He++)Re.bitrate_table[I][He]>0&&Math.abs(Re.bitrate_table[I][He]-g)<Math.abs(he-g)&&(he=Re.bitrate_table[I][He]);return he}function L(g,I,le){le<16e3&&(I=2);for(var he=0;he<=14;he++)if(Re.bitrate_table[I][he]>0&&Re.bitrate_table[I][he]==g)return he;return-1}function V(g,I){var le=[new u(8,2e3),new u(16,3700),new u(24,3900),new u(32,5500),new u(40,7e3),new u(48,7500),new u(56,1e4),new u(64,11e3),new u(80,13500),new u(96,15100),new u(112,15600),new u(128,17e3),new u(160,17500),new u(192,18600),new u(224,19400),new u(256,19700),new u(320,20500)],he=e.nearestBitrateFullIndex(I);g.lowerlimit=le[he].lowpass}function v(g){var I=g.internal_flags,le=32,he=-1;if(I.lowpass1>0){for(var He=999,Ke=0;Ke<=31;Ke++){var qe=Ke/31;qe>=I.lowpass2&&(le=Math.min(le,Ke)),I.lowpass1<qe&&qe<I.lowpass2&&(He=Math.min(He,Ke))}He==999?I.lowpass1=(le-.75)/31:I.lowpass1=(He-.75)/31,I.lowpass2=le/31}if(I.highpass2>0&&I.highpass2<.9*(.75/31)&&(I.highpass1=0,I.highpass2=0,IO.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),I.highpass2>0){for(var oe=-1,Ke=0;Ke<=31;Ke++){var qe=Ke/31;qe<=I.highpass1&&(he=Math.max(he,Ke)),I.highpass1<qe&&qe<I.highpass2&&(oe=Math.max(oe,Ke))}I.highpass1=he/31,oe==-1?I.highpass2=(he+.75)/31:I.highpass2=(oe+.75)/31}for(var Ke=0;Ke<32;Ke++){var ke,Se,qe=Ke/31;I.highpass2>I.highpass1?ke=D((I.highpass2-qe)/(I.highpass2-I.highpass1+1e-20)):ke=1,I.lowpass2>I.lowpass1?Se=D((qe-I.lowpass1)/(I.lowpass2-I.lowpass1+1e-20)):Se=1,I.amp_filter[Ke]=ke*Se}}function E(g){var I=g.internal_flags;switch(g.quality){default:case 9:I.psymodel=0,I.noise_shaping=0,I.noise_shaping_amp=0,I.noise_shaping_stop=0,I.use_best_huffman=0,I.full_outer_loop=0;break;case 8:g.quality=7;case 7:I.psymodel=1,I.noise_shaping=0,I.noise_shaping_amp=0,I.noise_shaping_stop=0,I.use_best_huffman=0,I.full_outer_loop=0;break;case 6:I.psymodel=1,I.noise_shaping==0&&(I.noise_shaping=1),I.noise_shaping_amp=0,I.noise_shaping_stop=0,I.subblock_gain==-1&&(I.subblock_gain=1),I.use_best_huffman=0,I.full_outer_loop=0;break;case 5:I.psymodel=1,I.noise_shaping==0&&(I.noise_shaping=1),I.noise_shaping_amp=0,I.noise_shaping_stop=0,I.subblock_gain==-1&&(I.subblock_gain=1),I.use_best_huffman=0,I.full_outer_loop=0;break;case 4:I.psymodel=1,I.noise_shaping==0&&(I.noise_shaping=1),I.noise_shaping_amp=0,I.noise_shaping_stop=0,I.subblock_gain==-1&&(I.subblock_gain=1),I.use_best_huffman=1,I.full_outer_loop=0;break;case 3:I.psymodel=1,I.noise_shaping==0&&(I.noise_shaping=1),I.noise_shaping_amp=1,I.noise_shaping_stop=1,I.subblock_gain==-1&&(I.subblock_gain=1),I.use_best_huffman=1,I.full_outer_loop=0;break;case 2:I.psymodel=1,I.noise_shaping==0&&(I.noise_shaping=1),I.substep_shaping==0&&(I.substep_shaping=2),I.noise_shaping_amp=1,I.noise_shaping_stop=1,I.subblock_gain==-1&&(I.subblock_gain=1),I.use_best_huffman=1,I.full_outer_loop=0;break;case 1:I.psymodel=1,I.noise_shaping==0&&(I.noise_shaping=1),I.substep_shaping==0&&(I.substep_shaping=2),I.noise_shaping_amp=2,I.noise_shaping_stop=1,I.subblock_gain==-1&&(I.subblock_gain=1),I.use_best_huffman=1,I.full_outer_loop=0;break;case 0:I.psymodel=1,I.noise_shaping==0&&(I.noise_shaping=1),I.substep_shaping==0&&(I.substep_shaping=2),I.noise_shaping_amp=2,I.noise_shaping_stop=1,I.subblock_gain==-1&&(I.subblock_gain=1),I.use_best_huffman=1,I.full_outer_loop=0;break}}function T(g){var I=g.internal_flags;g.frameNum=0,g.write_id3tag_automatic&&p.id3tag_write_v2(g),I.bitrate_stereoMode_Hist=B_([16,4+1]),I.bitrate_blockType_Hist=B_([16,4+1+1]),I.PeakSample=0,g.bWriteVbrTag&&d.InitVbrTag(g)}this.lame_init_params=function(g){var I=g.internal_flags;if(I.Class_ID=0,I.ATH==null&&(I.ATH=new bO),I.PSY==null&&(I.PSY=new w),I.rgdata==null&&(I.rgdata=new yO),I.channels_in=g.num_channels,I.channels_in==1&&(g.mode=Yt.MONO),I.channels_out=g.mode==Yt.MONO?1:2,I.mode_ext=H.MPG_MD_MS_LR,g.mode==Yt.MONO&&(g.force_ms=!1),g.VBR==un.vbr_off&&g.VBR_mean_bitrate_kbps!=128&&g.brate==0&&(g.brate=g.VBR_mean_bitrate_kbps),g.VBR==un.vbr_off||g.VBR==un.vbr_mtrh||g.VBR==un.vbr_mt||(g.free_format=!1),g.VBR==un.vbr_off&&g.brate==0&&Zr.EQ(g.compression_ratio,0)&&(g.compression_ratio=11.025),g.VBR==un.vbr_off&&g.compression_ratio>0&&(g.out_samplerate==0&&(g.out_samplerate=map2MP3Frequency(int(.97*g.in_samplerate))),g.brate=0|g.out_samplerate*16*I.channels_out/(1e3*g.compression_ratio),I.samplerate_index=C(g.out_samplerate,g),g.free_format||(g.brate=F(g.brate,g.version,g.out_samplerate))),g.out_samplerate!=0&&(g.out_samplerate<16e3?(g.VBR_mean_bitrate_kbps=Math.max(g.VBR_mean_bitrate_kbps,8),g.VBR_mean_bitrate_kbps=Math.min(g.VBR_mean_bitrate_kbps,64)):g.out_samplerate<32e3?(g.VBR_mean_bitrate_kbps=Math.max(g.VBR_mean_bitrate_kbps,8),g.VBR_mean_bitrate_kbps=Math.min(g.VBR_mean_bitrate_kbps,160)):(g.VBR_mean_bitrate_kbps=Math.max(g.VBR_mean_bitrate_kbps,32),g.VBR_mean_bitrate_kbps=Math.min(g.VBR_mean_bitrate_kbps,320))),g.lowpassfreq==0){var le=16e3;switch(g.VBR){case un.vbr_off:{var he=new M;V(he,g.brate),le=he.lowerlimit;break}case un.vbr_abr:{var he=new M;V(he,g.VBR_mean_bitrate_kbps),le=he.lowerlimit;break}case un.vbr_rh:{var He=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(g.VBR_q>=0&&g.VBR_q<=9){var Ke=He[g.VBR_q],qe=He[g.VBR_q+1],oe=g.VBR_q_frac;le=linear_int(Ke,qe,oe)}else le=19500;break}default:{var He=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(g.VBR_q>=0&&g.VBR_q<=9){var Ke=He[g.VBR_q],qe=He[g.VBR_q+1],oe=g.VBR_q_frac;le=linear_int(Ke,qe,oe)}else le=19500}}g.mode==Yt.MONO&&(g.VBR==un.vbr_off||g.VBR==un.vbr_abr)&&(le*=1.5),g.lowpassfreq=le|0}if(g.out_samplerate==0&&(2*g.lowpassfreq>g.in_samplerate&&(g.lowpassfreq=g.in_samplerate/2),g.out_samplerate=b(g.lowpassfreq|0,g.in_samplerate)),g.lowpassfreq=Math.min(20500,g.lowpassfreq),g.lowpassfreq=Math.min(g.out_samplerate/2,g.lowpassfreq),g.VBR==un.vbr_off&&(g.compression_ratio=g.out_samplerate*16*I.channels_out/(1e3*g.brate)),g.VBR==un.vbr_abr&&(g.compression_ratio=g.out_samplerate*16*I.channels_out/(1e3*g.VBR_mean_bitrate_kbps)),g.bWriteVbrTag||(g.findReplayGain=!1,g.decode_on_the_fly=!1,I.findPeakSample=!1),I.findReplayGain=g.findReplayGain,I.decode_on_the_fly=g.decode_on_the_fly,I.decode_on_the_fly&&(I.findPeakSample=!0),I.findReplayGain&&s.InitGainAnalysis(I.rgdata,g.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return g.internal_flags=null,-6;switch(I.decode_on_the_fly&&!g.decode_only&&(I.hip!=null&&h.hip_decode_exit(I.hip),I.hip=h.hip_decode_init()),I.mode_gr=g.out_samplerate<=24e3?1:2,g.framesize=576*I.mode_gr,g.encoder_delay=H.ENCDELAY,I.resample_ratio=g.in_samplerate/g.out_samplerate,g.VBR){case un.vbr_mt:case un.vbr_rh:case un.vbr_mtrh:{var ke=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];g.compression_ratio=ke[g.VBR_q]}break;case un.vbr_abr:g.compression_ratio=g.out_samplerate*16*I.channels_out/(1e3*g.VBR_mean_bitrate_kbps);break;default:g.compression_ratio=g.out_samplerate*16*I.channels_out/(1e3*g.brate);break}if(g.mode==Yt.NOT_SET&&(g.mode=Yt.JOINT_STEREO),g.highpassfreq>0?(I.highpass1=2*g.highpassfreq,g.highpasswidth>=0?I.highpass2=2*(g.highpassfreq+g.highpasswidth):I.highpass2=(1+0)*2*g.highpassfreq,I.highpass1/=g.out_samplerate,I.highpass2/=g.out_samplerate):(I.highpass1=0,I.highpass2=0),g.lowpassfreq>0?(I.lowpass2=2*g.lowpassfreq,g.lowpasswidth>=0?(I.lowpass1=2*(g.lowpassfreq-g.lowpasswidth),I.lowpass1<0&&(I.lowpass1=0)):I.lowpass1=(1-0)*2*g.lowpassfreq,I.lowpass1/=g.out_samplerate,I.lowpass2/=g.out_samplerate):(I.lowpass1=0,I.lowpass2=0),v(g),I.samplerate_index=C(g.out_samplerate,g),I.samplerate_index<0)return g.internal_flags=null,-1;if(g.VBR==un.vbr_off){if(g.free_format)I.bitrate_index=0;else if(g.brate=F(g.brate,g.version,g.out_samplerate),I.bitrate_index=L(g.brate,g.version,g.out_samplerate),I.bitrate_index<=0)return g.internal_flags=null,-1}else I.bitrate_index=1;g.analysis&&(g.bWriteVbrTag=!1),I.pinfo!=null&&(g.bWriteVbrTag=!1),o.init_bit_stream_w(I);for(var Se=I.samplerate_index+3*g.version+6*(g.out_samplerate<16e3?1:0),Ae=0;Ae<H.SBMAX_l+1;Ae++)I.scalefac_band.l[Ae]=c.sfBandIndex[Se].l[Ae];for(var Ae=0;Ae<H.PSFB21+1;Ae++){var Xe=(I.scalefac_band.l[22]-I.scalefac_band.l[21])/H.PSFB21,X=I.scalefac_band.l[21]+Ae*Xe;I.scalefac_band.psfb21[Ae]=X}I.scalefac_band.psfb21[H.PSFB21]=576;for(var Ae=0;Ae<H.SBMAX_s+1;Ae++)I.scalefac_band.s[Ae]=c.sfBandIndex[Se].s[Ae];for(var Ae=0;Ae<H.PSFB12+1;Ae++){var Xe=(I.scalefac_band.s[13]-I.scalefac_band.s[12])/H.PSFB12,X=I.scalefac_band.s[12]+Ae*Xe;I.scalefac_band.psfb12[Ae]=X}I.scalefac_band.psfb12[H.PSFB12]=192,g.version==1?I.sideinfo_len=I.channels_out==1?4+17:4+32:I.sideinfo_len=I.channels_out==1?4+9:4+17,g.error_protection&&(I.sideinfo_len+=2),T(g),I.Class_ID=$;{var O;for(O=0;O<19;O++)I.nsPsy.pefirbuf[O]=700*I.mode_gr*I.channels_out;g.ATHtype==-1&&(g.ATHtype=4)}switch(Ii(g.VBR_q<=9),Ii(g.VBR_q>=0),g.VBR){case un.vbr_mt:g.VBR=un.vbr_mtrh;case un.vbr_mtrh:{g.useTemporal==null&&(g.useTemporal=!1),a.apply_preset(g,500-g.VBR_q*10,0),g.quality<0&&(g.quality=LAME_DEFAULT_QUALITY),g.quality<5&&(g.quality=0),g.quality>5&&(g.quality=5),I.PSY.mask_adjust=g.maskingadjust,I.PSY.mask_adjust_short=g.maskingadjust_short,g.experimentalY?I.sfb21_extra=!1:I.sfb21_extra=g.out_samplerate>44e3,I.iteration_loop=new VBRNewIterationLoop(f);break}case un.vbr_rh:{a.apply_preset(g,500-g.VBR_q*10,0),I.PSY.mask_adjust=g.maskingadjust,I.PSY.mask_adjust_short=g.maskingadjust_short,g.experimentalY?I.sfb21_extra=!1:I.sfb21_extra=g.out_samplerate>44e3,g.quality>6&&(g.quality=6),g.quality<0&&(g.quality=LAME_DEFAULT_QUALITY),I.iteration_loop=new VBROldIterationLoop(f);break}default:{var P;I.sfb21_extra=!1,g.quality<0&&(g.quality=LAME_DEFAULT_QUALITY),P=g.VBR,P==un.vbr_off&&(g.VBR_mean_bitrate_kbps=g.brate),a.apply_preset(g,g.VBR_mean_bitrate_kbps,0),g.VBR=P,I.PSY.mask_adjust=g.maskingadjust,I.PSY.mask_adjust_short=g.maskingadjust_short,P==un.vbr_off?I.iteration_loop=new xO(f):I.iteration_loop=new ABRIterationLoop(f);break}}if(Ii(g.scale>=0),g.VBR!=un.vbr_off){if(I.VBR_min_bitrate=1,I.VBR_max_bitrate=14,g.out_samplerate<16e3&&(I.VBR_max_bitrate=8),g.VBR_min_bitrate_kbps!=0&&(g.VBR_min_bitrate_kbps=F(g.VBR_min_bitrate_kbps,g.version,g.out_samplerate),I.VBR_min_bitrate=L(g.VBR_min_bitrate_kbps,g.version,g.out_samplerate),I.VBR_min_bitrate<0)||g.VBR_max_bitrate_kbps!=0&&(g.VBR_max_bitrate_kbps=F(g.VBR_max_bitrate_kbps,g.version,g.out_samplerate),I.VBR_max_bitrate=L(g.VBR_max_bitrate_kbps,g.version,g.out_samplerate),I.VBR_max_bitrate<0))return-1;g.VBR_min_bitrate_kbps=Re.bitrate_table[g.version][I.VBR_min_bitrate],g.VBR_max_bitrate_kbps=Re.bitrate_table[g.version][I.VBR_max_bitrate],g.VBR_mean_bitrate_kbps=Math.min(Re.bitrate_table[g.version][I.VBR_max_bitrate],g.VBR_mean_bitrate_kbps),g.VBR_mean_bitrate_kbps=Math.max(Re.bitrate_table[g.version][I.VBR_min_bitrate],g.VBR_mean_bitrate_kbps)}return g.tune&&(I.PSY.mask_adjust+=g.tune_value_a,I.PSY.mask_adjust_short+=g.tune_value_a),E(g),Ii(g.scale>=0),g.athaa_type<0?I.ATH.useAdjust=3:I.ATH.useAdjust=g.athaa_type,I.ATH.aaSensitivityP=Math.pow(10,g.athaa_sensitivity/-10),g.short_blocks==null&&(g.short_blocks=w0.short_block_allowed),g.short_blocks==w0.short_block_allowed&&(g.mode==Yt.JOINT_STEREO||g.mode==Yt.STEREO)&&(g.short_blocks=w0.short_block_coupled),g.quant_comp<0&&(g.quant_comp=1),g.quant_comp_short<0&&(g.quant_comp_short=0),g.msfix<0&&(g.msfix=0),g.exp_nspsytune=g.exp_nspsytune|1,g.internal_flags.nsPsy.attackthre<0&&(g.internal_flags.nsPsy.attackthre=p0.NSATTACKTHRE),g.internal_flags.nsPsy.attackthre_s<0&&(g.internal_flags.nsPsy.attackthre_s=p0.NSATTACKTHRE_S),Ii(g.scale>=0),g.scale<0&&(g.scale=1),g.ATHtype<0&&(g.ATHtype=4),g.ATHcurve<0&&(g.ATHcurve=4),g.athaa_loudapprox<0&&(g.athaa_loudapprox=2),g.interChRatio<0&&(g.interChRatio=0),g.useTemporal==null&&(g.useTemporal=!0),I.slot_lag=I.frac_SpF=0,g.VBR==un.vbr_off&&(I.slot_lag=I.frac_SpF=(g.version+1)*72e3*g.brate%g.out_samplerate|0),c.iteration_init(g),m.psymodel_init(g),Ii(g.scale>=0),0};function y(g,I){(g.in_buffer_0==null||g.in_buffer_nsamples<I)&&(g.in_buffer_0=wa(I),g.in_buffer_1=wa(I),g.in_buffer_nsamples=I)}this.lame_encode_flush=function(g,I,le,he){var He=g.internal_flags,Ke=OO([2,1152]),qe=0,oe,ke,Se,Ae,Xe=He.mf_samples_to_encode-H.POSTDELAY,X=A(g);if(He.mf_samples_to_encode<1)return 0;for(oe=0,g.in_samplerate!=g.out_samplerate&&(Xe+=16*g.out_samplerate/g.in_samplerate),Se=g.framesize-Xe%g.framesize,Se<576&&(Se+=g.framesize),g.encoder_padding=Se,Ae=(Xe+Se)/g.framesize;Ae>0&&qe>=0;){var O=X-He.mf_size,P=g.frameNum;O*=g.in_samplerate,O/=g.out_samplerate,O>1152&&(O=1152),O<1&&(O=1),ke=he-oe,he==0&&(ke=0),qe=this.lame_encode_buffer(g,Ke[0],Ke[1],O,I,le,ke),le+=qe,oe+=qe,Ae-=P!=g.frameNum?1:0}if(He.mf_samples_to_encode=0,qe<0||(ke=he-oe,he==0&&(ke=0),o.flush_bitstream(g),qe=o.copy_buffer(He,I,le,ke,1),qe<0))return qe;if(le+=qe,oe+=qe,ke=he-oe,he==0&&(ke=0),g.write_id3tag_automatic){if(p.id3tag_write_v1(g),qe=o.copy_buffer(He,I,le,ke,0),qe<0)return qe;oe+=qe}return oe},this.lame_encode_buffer=function(g,I,le,he,He,Ke,qe){var oe=g.internal_flags,ke=[null,null];if(oe.Class_ID!=$)return-3;if(he==0)return 0;y(oe,he),ke[0]=oe.in_buffer_0,ke[1]=oe.in_buffer_1;for(var Se=0;Se<he;Se++)ke[0][Se]=I[Se],oe.channels_in>1&&(ke[1][Se]=le[Se]);return S(g,ke[0],ke[1],he,He,Ke,qe)};function A(g){var I=H.BLKSIZE+g.framesize-H.FFTOFFSET;return I=Math.max(I,512+g.framesize-32),I}function S(g,I,le,he,He,Ke,qe){var oe=g.internal_flags,ke=0,Se,Ae,Xe,X,O,P=[null,null],G=[null,null];if(oe.Class_ID!=$)return-3;if(he==0)return 0;if(O=o.copy_buffer(oe,He,Ke,qe,0),O<0)return O;if(Ke+=O,ke+=O,G[0]=I,G[1]=le,Zr.NEQ(g.scale,0)&&Zr.NEQ(g.scale,1))for(Ae=0;Ae<he;++Ae)G[0][Ae]*=g.scale,oe.channels_out==2&&(G[1][Ae]*=g.scale);if(Zr.NEQ(g.scale_left,0)&&Zr.NEQ(g.scale_left,1))for(Ae=0;Ae<he;++Ae)G[0][Ae]*=g.scale_left;if(Zr.NEQ(g.scale_right,0)&&Zr.NEQ(g.scale_right,1))for(Ae=0;Ae<he;++Ae)G[1][Ae]*=g.scale_right;if(g.num_channels==2&&oe.channels_out==1)for(Ae=0;Ae<he;++Ae)G[0][Ae]=.5*(G[0][Ae]+G[1][Ae]),G[1][Ae]=0;X=A(g),P[0]=oe.mfbuf[0],P[1]=oe.mfbuf[1];for(var ee=0;he>0;){var re=[null,null],pe=0,ve=0;re[0]=G[0],re[1]=G[1];var ce=new k;if(te(g,P,re,ee,he,ce),pe=ce.n_in,ve=ce.n_out,oe.findReplayGain&&!oe.decode_on_the_fly&&s.AnalyzeSamples(oe.rgdata,P[0],oe.mf_size,P[1],oe.mf_size,ve,oe.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(he-=pe,ee+=pe,oe.channels_out==2,oe.mf_size+=ve,Ii(oe.mf_size<=qt.MFSIZE),oe.mf_samples_to_encode<1&&(oe.mf_samples_to_encode=H.ENCDELAY+H.POSTDELAY),oe.mf_samples_to_encode+=ve,oe.mf_size>=X){var ae=qe-ke;if(qe==0&&(ae=0),Se=x(g,P[0],P[1],He,Ke,ae),Se<0)return Se;for(Ke+=Se,ke+=Se,oe.mf_size-=g.framesize,oe.mf_samples_to_encode-=g.framesize,Xe=0;Xe<oe.channels_out;Xe++)for(Ae=0;Ae<oe.mf_size;Ae++)P[Xe][Ae]=P[Xe][Ae+g.framesize]}}return ke}function x(g,I,le,he,He,Ke){var qe=e.enc.lame_encode_mp3_frame(g,I,le,he,He,Ke);return g.frameNum++,qe}function k(){this.n_in=0,this.n_out=0}function R(){this.num_used=0}function z(g,I){return I!=0?z(I,g%I):g}function ne(g,I,le){var he=Math.PI*I;g/=le,g<0&&(g=0),g>1&&(g=1);var He=g-.5,Ke=.42-.5*Math.cos(2*g*Math.PI)+.08*Math.cos(4*g*Math.PI);return Math.abs(He)<1e-9?he/Math.PI:Ke*Math.sin(le*he*He)/(Math.PI*le*He)}function Y(g,I,le,he,He,Ke,qe,oe,ke){var Se=g.internal_flags,Ae,Xe=0,X,O=g.out_samplerate/z(g.out_samplerate,g.in_samplerate);O>qt.BPC&&(O=qt.BPC);var P=Math.abs(Se.resample_ratio-Math.floor(.5+Se.resample_ratio))<1e-4?1:0,G=1/Se.resample_ratio;G>1&&(G=1);var ee=31;ee%2==0&&--ee,ee+=P;var re=ee+1;if(Se.fill_buffer_resample_init==0){for(Se.inbuf_old[0]=wa(re),Se.inbuf_old[1]=wa(re),Ae=0;Ae<=2*O;++Ae)Se.blackfilt[Ae]=wa(re);for(Se.itime[0]=0,Se.itime[1]=0,Xe=0;Xe<=2*O;Xe++){var pe=0,ve=(Xe-O)/(2*O);for(Ae=0;Ae<=ee;Ae++)pe+=Se.blackfilt[Xe][Ae]=ne(Ae-ve,G,ee);for(Ae=0;Ae<=ee;Ae++)Se.blackfilt[Xe][Ae]/=pe}Se.fill_buffer_resample_init=1}var ce=Se.inbuf_old[ke];for(X=0;X<he;X++){var ae,ge;if(ae=X*Se.resample_ratio,Xe=0|Math.floor(ae-Se.itime[ke]),ee+Xe-ee/2>=qe)break;var ve=ae-Se.itime[ke]-(Xe+.5*(ee%2));ge=0|Math.floor(ve*2*O+O+.5);var Be=0;for(Ae=0;Ae<=ee;++Ae){var Ce=0|Ae+Xe-ee/2,Pe;Pe=Ce<0?ce[re+Ce]:He[Ke+Ce],Be+=Pe*Se.blackfilt[ge][Ae]}I[le+X]=Be}if(oe.num_used=Math.min(qe,ee+Xe-ee/2),Se.itime[ke]+=oe.num_used-X*Se.resample_ratio,oe.num_used>=re)for(Ae=0;Ae<re;Ae++)ce[Ae]=He[Ke+oe.num_used+Ae-re];else{var We=re-oe.num_used;for(Ae=0;Ae<We;++Ae)ce[Ae]=ce[Ae+oe.num_used];for(Xe=0;Ae<re;++Ae,++Xe)ce[Ae]=He[Ke+Xe];Ii(Xe==oe.num_used)}return X}function te(g,I,le,he,He,Ke){var qe=g.internal_flags;if(qe.resample_ratio<.9999||qe.resample_ratio>1.0001)for(var oe=0;oe<qe.channels_out;oe++){var ke=new R;Ke.n_out=Y(g,I[oe],qe.mf_size,g.framesize,le[oe],he,He,ke,oe),Ke.n_in=ke.num_used}else{Ke.n_out=Math.min(g.framesize,He),Ke.n_in=Ke.n_out;for(var Se=0;Se<Ke.n_out;++Se)I[0][qe.mf_size+Se]=le[0][he+Se],qe.channels_out==2&&(I[1][qe.mf_size+Se]=le[1][he+Se])}}}var Ms=Je.VbrMode;function CO(){function e(d,p,h,w,M,u,$,U,D,b,C,F,L,V,v){this.vbr_q=d,this.quant_comp=p,this.quant_comp_s=h,this.expY=w,this.st_lrm=M,this.st_s=u,this.masking_adj=$,this.masking_adj_short=U,this.ath_lower=D,this.ath_curve=b,this.ath_sensitivity=C,this.interch=F,this.safejoint=L,this.sfb21mod=V,this.msfix=v}function t(d,p,h,w,M,u,$,U,D,b,C,F,L,V){this.quant_comp=p,this.quant_comp_s=h,this.safejoint=w,this.nsmsfix=M,this.st_lrm=u,this.st_s=$,this.nsbass=U,this.scale=D,this.masking_adj=b,this.ath_lower=C,this.ath_curve=F,this.interch=L,this.sfscale=V}var n;this.setModules=function(d){n=d};var s=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],o=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function a(d,p,h){var w=d.VBR==Ms.vbr_rh?s:o,M=d.VBR_q_frac,u=w[p],$=w[p+1],U=u;u.st_lrm=u.st_lrm+M*($.st_lrm-u.st_lrm),u.st_s=u.st_s+M*($.st_s-u.st_s),u.masking_adj=u.masking_adj+M*($.masking_adj-u.masking_adj),u.masking_adj_short=u.masking_adj_short+M*($.masking_adj_short-u.masking_adj_short),u.ath_lower=u.ath_lower+M*($.ath_lower-u.ath_lower),u.ath_curve=u.ath_curve+M*($.ath_curve-u.ath_curve),u.ath_sensitivity=u.ath_sensitivity+M*($.ath_sensitivity-u.ath_sensitivity),u.interch=u.interch+M*($.interch-u.interch),u.msfix=u.msfix+M*($.msfix-u.msfix),m(d,U.vbr_q),h!=0?d.quant_comp=U.quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=U.quant_comp),h!=0?d.quant_comp_short=U.quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=U.quant_comp_s),U.expY!=0&&(d.experimentalY=U.expY!=0),h!=0?d.internal_flags.nsPsy.attackthre=U.st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=U.st_lrm),h!=0?d.internal_flags.nsPsy.attackthre_s=U.st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=U.st_s),h!=0?d.maskingadjust=U.masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=U.masking_adj),h!=0?d.maskingadjust_short=U.masking_adj_short:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=U.masking_adj_short),h!=0?d.ATHlower=-U.ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-U.ath_lower/10),h!=0?d.ATHcurve=U.ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=U.ath_curve),h!=0?d.athaa_sensitivity=U.ath_sensitivity:Math.abs(d.athaa_sensitivity- -1)>0||(d.athaa_sensitivity=U.ath_sensitivity),U.interch>0&&(h!=0?d.interChRatio=U.interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=U.interch)),U.safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|U.safejoint),U.sfb21mod>0&&(d.exp_nspsytune=d.exp_nspsytune|U.sfb21mod<<20),h!=0?d.msfix=U.msfix:Math.abs(d.msfix- -1)>0||(d.msfix=U.msfix),h==0&&(d.VBR_q=p,d.VBR_q_frac=M)}var c=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function f(d,p,h){var w=p,M=n.nearestBitrateFullIndex(p);if(d.VBR=Ms.vbr_abr,d.VBR_mean_bitrate_kbps=w,d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,320),d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,8),d.brate=d.VBR_mean_bitrate_kbps,d.VBR_mean_bitrate_kbps>320&&(d.disable_reservoir=!0),c[M].safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|2),c[M].sfscale>0&&(d.internal_flags.noise_shaping=2),Math.abs(c[M].nsbass)>0){var u=int(c[M].nsbass*4);u<0&&(u+=64),d.exp_nspsytune=d.exp_nspsytune|u<<2}return h!=0?d.quant_comp=c[M].quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=c[M].quant_comp),h!=0?d.quant_comp_short=c[M].quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=c[M].quant_comp_s),h!=0?d.msfix=c[M].nsmsfix:Math.abs(d.msfix- -1)>0||(d.msfix=c[M].nsmsfix),h!=0?d.internal_flags.nsPsy.attackthre=c[M].st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=c[M].st_lrm),h!=0?d.internal_flags.nsPsy.attackthre_s=c[M].st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=c[M].st_s),h!=0?d.scale=c[M].scale:Math.abs(d.scale- -1)>0||(d.scale=c[M].scale),h!=0?d.maskingadjust=c[M].masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=c[M].masking_adj),c[M].masking_adj>0?h!=0?d.maskingadjust_short=c[M].masking_adj*.9:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=c[M].masking_adj*.9):h!=0?d.maskingadjust_short=c[M].masking_adj*1.1:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=c[M].masking_adj*1.1),h!=0?d.ATHlower=-c[M].ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-c[M].ath_lower/10),h!=0?d.ATHcurve=c[M].ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=c[M].ath_curve),h!=0?d.interChRatio=c[M].interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=c[M].interch),p}this.apply_preset=function(d,p,h){switch(p){case wt.R3MIX:{p=wt.V3,d.VBR=Ms.vbr_mtrh;break}case wt.MEDIUM:{p=wt.V4,d.VBR=Ms.vbr_rh;break}case wt.MEDIUM_FAST:{p=wt.V4,d.VBR=Ms.vbr_mtrh;break}case wt.STANDARD:{p=wt.V2,d.VBR=Ms.vbr_rh;break}case wt.STANDARD_FAST:{p=wt.V2,d.VBR=Ms.vbr_mtrh;break}case wt.EXTREME:{p=wt.V0,d.VBR=Ms.vbr_rh;break}case wt.EXTREME_FAST:{p=wt.V0,d.VBR=Ms.vbr_mtrh;break}case wt.INSANE:return p=320,d.preset=p,f(d,p,h),d.VBR=Ms.vbr_off,p}switch(d.preset=p,p){case wt.V9:return a(d,9,h),p;case wt.V8:return a(d,8,h),p;case wt.V7:return a(d,7,h),p;case wt.V6:return a(d,6,h),p;case wt.V5:return a(d,5,h),p;case wt.V4:return a(d,4,h),p;case wt.V3:return a(d,3,h),p;case wt.V2:return a(d,2,h),p;case wt.V1:return a(d,1,h),p;case wt.V0:return a(d,0,h),p}return p>=8&&p<=320?f(d,p,h):(d.preset=0,p)};function m(d,p){var h=0;return p<0&&(h=-1,p=0),p>9&&(h=-1,p=9),d.VBR_q=p,d.VBR_q_frac=0,h}}function LO(){this.setModules=function(e,t){}}function x0(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var N_=Je.new_float,BO=Je.new_int;function NO(){this.global_gain=0,this.sfb_count1=0,this.step=BO(39),this.noise=N_(39),this.noise_log=N_(39)}var Oi=Je.System,F_=Je.VbrMode,S0=Je.Util,uo=Je.Arrays,dl=Je.new_float,hl=Je.assert;function FO(){var e;this.rv=null;var t;this.qupvt=null;var n,s=new LO,o;this.setModules=function(D,b,C,F){e=D,t=b,this.rv=b,n=C,this.qupvt=C,o=F,s.setModules(n,o)},this.ms_convert=function(D,b){for(var C=0;C<576;++C){var F=D.tt[b][0].xr[C],L=D.tt[b][1].xr[C];D.tt[b][0].xr[C]=(F+L)*(S0.SQRT2*.5),D.tt[b][1].xr[C]=(F-L)*(S0.SQRT2*.5)}};function a(D,b,C,F){F=0;for(var L=0;L<=C;++L){var V=Math.abs(D.xr[L]);F+=V,b[L]=Math.sqrt(V*Math.sqrt(V)),b[L]>D.xrpow_max&&(D.xrpow_max=b[L])}return F}this.init_xrpow=function(D,b,C){var F=0,L=0|b.max_nonzero_coeff;if(b.xrpow_max=0,uo.fill(C,L,576,0),F=a(b,C,L,F),F>1e-20){var V=0;(D.substep_shaping&2)!=0&&(V=1);for(var v=0;v<b.psymax;v++)D.pseudohalf[v]=V;return!0}return uo.fill(b.l3_enc,0,576,0),!1};function c(D,b){var C=D.ATH,F=b.xr;if(b.block_type!=H.SHORT_TYPE)for(var L=!1,V=H.PSFB21-1;V>=0&&!L;V--){var v=D.scalefac_band.psfb21[V],E=D.scalefac_band.psfb21[V+1],T=n.athAdjust(C.adjust,C.psfb21[V],C.floor);D.nsPsy.longfact[21]>1e-12&&(T*=D.nsPsy.longfact[21]);for(var y=E-1;y>=v;y--)if(Math.abs(F[y])<T)F[y]=0;else{L=!0;break}}else for(var A=0;A<3;A++)for(var L=!1,V=H.PSFB12-1;V>=0&&!L;V--){var v=D.scalefac_band.s[12]*3+(D.scalefac_band.s[13]-D.scalefac_band.s[12])*A+(D.scalefac_band.psfb12[V]-D.scalefac_band.psfb12[0]),E=v+(D.scalefac_band.psfb12[V+1]-D.scalefac_band.psfb12[V]),S=n.athAdjust(C.adjust,C.psfb12[V],C.floor);D.nsPsy.shortfact[12]>1e-12&&(S*=D.nsPsy.shortfact[12]);for(var y=E-1;y>=v;y--)if(Math.abs(F[y])<S)F[y]=0;else{L=!0;break}}}this.init_outer_loop=function(D,b){b.part2_3_length=0,b.big_values=0,b.count1=0,b.global_gain=210,b.scalefac_compress=0,b.table_select[0]=0,b.table_select[1]=0,b.table_select[2]=0,b.subblock_gain[0]=0,b.subblock_gain[1]=0,b.subblock_gain[2]=0,b.subblock_gain[3]=0,b.region0_count=0,b.region1_count=0,b.preflag=0,b.scalefac_scale=0,b.count1table_select=0,b.part2_length=0,b.sfb_lmax=H.SBPSY_l,b.sfb_smin=H.SBPSY_s,b.psy_lmax=D.sfb21_extra?H.SBMAX_l:H.SBPSY_l,b.psymax=b.psy_lmax,b.sfbmax=b.sfb_lmax,b.sfbdivide=11;for(var C=0;C<H.SBMAX_l;C++)b.width[C]=D.scalefac_band.l[C+1]-D.scalefac_band.l[C],b.window[C]=3;if(b.block_type==H.SHORT_TYPE){var F=dl(576);b.sfb_smin=0,b.sfb_lmax=0,b.mixed_block_flag!=0&&(b.sfb_smin=3,b.sfb_lmax=D.mode_gr*2+4),b.psymax=b.sfb_lmax+3*((D.sfb21_extra?H.SBMAX_s:H.SBPSY_s)-b.sfb_smin),b.sfbmax=b.sfb_lmax+3*(H.SBPSY_s-b.sfb_smin),b.sfbdivide=b.sfbmax-18,b.psy_lmax=b.sfb_lmax;var L=D.scalefac_band.l[b.sfb_lmax];Oi.arraycopy(b.xr,0,F,0,576);for(var C=b.sfb_smin;C<H.SBMAX_s;C++)for(var V=D.scalefac_band.s[C],v=D.scalefac_band.s[C+1],E=0;E<3;E++)for(var T=V;T<v;T++)b.xr[L++]=F[3*T+E];for(var y=b.sfb_lmax,C=b.sfb_smin;C<H.SBMAX_s;C++)b.width[y]=b.width[y+1]=b.width[y+2]=D.scalefac_band.s[C+1]-D.scalefac_band.s[C],b.window[y]=0,b.window[y+1]=1,b.window[y+2]=2,y+=3}b.count1bits=0,b.sfb_partition_table=n.nr_of_sfb_block[0][0],b.slen[0]=0,b.slen[1]=0,b.slen[2]=0,b.slen[3]=0,b.max_nonzero_coeff=575,uo.fill(b.scalefac,0),c(D,b)};function f(D){this.ordinal=D}f.BINSEARCH_NONE=new f(0),f.BINSEARCH_UP=new f(1),f.BINSEARCH_DOWN=new f(2);function m(D,b,C,F,L){var V,v=D.CurrentStep[F],E=!1,T=D.OldValue[F],y=f.BINSEARCH_NONE;for(b.global_gain=T,C-=b.part2_length;;){var A;if(V=o.count_bits(D,L,b,null),v==1||V==C)break;V>C?(y==f.BINSEARCH_DOWN&&(E=!0),E&&(v/=2),y=f.BINSEARCH_UP,A=v):(y==f.BINSEARCH_UP&&(E=!0),E&&(v/=2),y=f.BINSEARCH_DOWN,A=-v),b.global_gain+=A,b.global_gain<0&&(b.global_gain=0,E=!0),b.global_gain>255&&(b.global_gain=255,E=!0)}for(hl(b.global_gain>=0),hl(b.global_gain<256);V>C&&b.global_gain<255;)b.global_gain++,V=o.count_bits(D,L,b,null);return D.CurrentStep[F]=T-b.global_gain>=4?4:2,D.OldValue[F]=b.global_gain,b.part2_3_length=V,V}this.trancate_smallspectrums=function(D,b,C,F){var L=dl(Vi.SFBMAX);if(!((D.substep_shaping&4)==0&&b.block_type==H.SHORT_TYPE||(D.substep_shaping&128)!=0)){n.calc_noise(b,C,L,new x0,null);for(var v=0;v<576;v++){var V=0;b.l3_enc[v]!=0&&(V=Math.abs(b.xr[v])),F[v]=V}var v=0,E=8;b.block_type==H.SHORT_TYPE&&(E=6);do{var T,y,A,S,x=b.width[E];if(v+=x,!(L[E]>=1)&&(uo.sort(F,v-x,x),!BitStream.EQ(F[v-1],0))){T=(1-L[E])*C[E],y=0,S=0;do{var k;for(A=1;S+A<x&&!BitStream.NEQ(F[S+v-x],F[S+v+A-x]);A++);if(k=F[S+v-x]*F[S+v-x]*A,T<k){S!=0&&(y=F[S+v-x-1]);break}T-=k,S+=A}while(S<x);if(!BitStream.EQ(y,0))do Math.abs(b.xr[v-x])<=y&&(b.l3_enc[v-x]=0);while(--x>0)}}while(++E<b.psymax);b.part2_3_length=o.noquant_count_bits(D,b,null)}};function d(D){for(var b=0;b<D.sfbmax;b++)if(D.scalefac[b]+D.subblock_gain[D.window[b]]==0)return!1;return!0}function p(D){return S0.FAST_LOG10(.368+.632*D*D*D)}function h(D,b){for(var C=1e-37,F=0;F<b.psymax;F++)C+=p(D[F]);return Math.max(1e-20,C)}function w(D,b,C,F,L){var V;switch(D){default:case 9:{b.over_count>0?(V=C.over_SSD<=b.over_SSD,C.over_SSD==b.over_SSD&&(V=C.bits<b.bits)):V=C.max_noise<0&&C.max_noise*10+C.bits<=b.max_noise*10+b.bits;break}case 0:V=C.over_count<b.over_count||C.over_count==b.over_count&&C.over_noise<b.over_noise||C.over_count==b.over_count&&BitStream.EQ(C.over_noise,b.over_noise)&&C.tot_noise<b.tot_noise;break;case 8:C.max_noise=h(L,F);case 1:V=C.max_noise<b.max_noise;break;case 2:V=C.tot_noise<b.tot_noise;break;case 3:V=C.tot_noise<b.tot_noise&&C.max_noise<b.max_noise;break;case 4:V=C.max_noise<=0&&b.max_noise>.2||C.max_noise<=0&&b.max_noise<0&&b.max_noise>C.max_noise-.2&&C.tot_noise<b.tot_noise||C.max_noise<=0&&b.max_noise>0&&b.max_noise>C.max_noise-.2&&C.tot_noise<b.tot_noise+b.over_noise||C.max_noise>0&&b.max_noise>-.05&&b.max_noise>C.max_noise-.1&&C.tot_noise+C.over_noise<b.tot_noise+b.over_noise||C.max_noise>0&&b.max_noise>-.1&&b.max_noise>C.max_noise-.15&&C.tot_noise+C.over_noise+C.over_noise<b.tot_noise+b.over_noise+b.over_noise;break;case 5:V=C.over_noise<b.over_noise||BitStream.EQ(C.over_noise,b.over_noise)&&C.tot_noise<b.tot_noise;break;case 6:V=C.over_noise<b.over_noise||BitStream.EQ(C.over_noise,b.over_noise)&&(C.max_noise<b.max_noise||BitStream.EQ(C.max_noise,b.max_noise)&&C.tot_noise<=b.tot_noise);break;case 7:V=C.over_count<b.over_count||C.over_noise<b.over_noise;break}return b.over_count==0&&(V=V&&C.bits<b.bits),V}function M(D,b,C,F,L){var V=D.internal_flags,v;b.scalefac_scale==0?v=1.2968395546510096:v=1.6817928305074292;for(var E=0,T=0;T<b.sfbmax;T++)E<C[T]&&(E=C[T]);var y=V.noise_shaping_amp;switch(y==3&&(L?y=2:y=1),y){case 2:break;case 1:E>1?E=Math.pow(E,.5):E*=.95;break;case 0:default:E>1?E=1:E*=.95;break}for(var A=0,T=0;T<b.sfbmax;T++){var S=b.width[T],x;if(A+=S,!(C[T]<E)){if((V.substep_shaping&2)!=0&&(V.pseudohalf[T]=V.pseudohalf[T]==0?1:0,V.pseudohalf[T]==0&&V.noise_shaping_amp==2))return;for(b.scalefac[T]++,x=-S;x<0;x++)F[A+x]*=v,F[A+x]>b.xrpow_max&&(b.xrpow_max=F[A+x]);if(V.noise_shaping_amp==2)return}}}function u(D,b){for(var C=1.2968395546510096,F=0,L=0;L<D.sfbmax;L++){var V=D.width[L],v=D.scalefac[L];if(D.preflag!=0&&(v+=n.pretab[L]),F+=V,(v&1)!=0){v++;for(var E=-V;E<0;E++)b[F+E]*=C,b[F+E]>D.xrpow_max&&(D.xrpow_max=b[F+E])}D.scalefac[L]=v>>1}D.preflag=0,D.scalefac_scale=1}function $(D,b,C){var F,L=b.scalefac;for(F=0;F<b.sfb_lmax;F++)if(L[F]>=16)return!0;for(var V=0;V<3;V++){var v=0,E=0;for(F=b.sfb_lmax+V;F<b.sfbdivide;F+=3)v<L[F]&&(v=L[F]);for(;F<b.sfbmax;F+=3)E<L[F]&&(E=L[F]);if(!(v<16&&E<8)){if(b.subblock_gain[V]>=7)return!0;b.subblock_gain[V]++;var T=D.scalefac_band.l[b.sfb_lmax];for(F=b.sfb_lmax+V;F<b.sfbmax;F+=3){var y,A=b.width[F],S=L[F];if(S=S-(4>>b.scalefac_scale),S>=0){L[F]=S,T+=A*3;continue}L[F]=0;{var x=210+(S<<b.scalefac_scale+1);y=n.IPOW20(x)}T+=A*(V+1);for(var k=-A;k<0;k++)C[T+k]*=y,C[T+k]>b.xrpow_max&&(b.xrpow_max=C[T+k]);T+=A*(3-V-1)}{var y=n.IPOW20(202);T+=b.width[F]*(V+1);for(var k=-b.width[F];k<0;k++)C[T+k]*=y,C[T+k]>b.xrpow_max&&(b.xrpow_max=C[T+k])}}}return!1}function U(D,b,C,F,L){var V=D.internal_flags;M(D,b,C,F,L);var v=d(b);return v?!1:(V.mode_gr==2?v=o.scale_bitcount(b):v=o.scale_bitcount_lsf(V,b),v?(V.noise_shaping>1&&(uo.fill(V.pseudohalf,0),b.scalefac_scale==0?(u(b,F),v=!1):b.block_type==H.SHORT_TYPE&&V.subblock_gain>0&&(v=$(V,b,F)||d(b))),v||(V.mode_gr==2?v=o.scale_bitcount(b):v=o.scale_bitcount_lsf(V,b)),!v):!0)}this.outer_loop=function(D,b,C,F,L,V){var v=D.internal_flags,E=new t1,T=dl(576),y=dl(Vi.SFBMAX),A=new x0,S,x=new NO,k=9999999,R=!1,z=!1,ne=0;if(m(v,b,V,L,F),v.noise_shaping==0)return 100;n.calc_noise(b,C,y,A,x),A.bits=b.part2_3_length,E.assign(b);var Y=0;for(Oi.arraycopy(F,0,T,0,576);!R;){do{var te=new x0,g,I=255;if((v.substep_shaping&2)!=0?g=20:g=3,v.sfb21_extra&&(y[E.sfbmax]>1||E.block_type==H.SHORT_TYPE&&(y[E.sfbmax+1]>1||y[E.sfbmax+2]>1))||!U(D,E,y,F,z))break;E.scalefac_scale!=0&&(I=254);var le=V-E.part2_length;if(le<=0)break;for(;(E.part2_3_length=o.count_bits(v,F,E,x))>le&&E.global_gain<=I;)E.global_gain++;if(E.global_gain>I)break;if(A.over_count==0){for(;(E.part2_3_length=o.count_bits(v,F,E,x))>k&&E.global_gain<=I;)E.global_gain++;if(E.global_gain>I)break}if(n.calc_noise(E,C,y,te,x),te.bits=E.part2_3_length,b.block_type!=H.SHORT_TYPE?S=D.quant_comp:S=D.quant_comp_short,S=w(S,A,te,E,y)?1:0,S!=0)k=b.part2_3_length,A=te,b.assign(E),Y=0,Oi.arraycopy(F,0,T,0,576);else if(v.full_outer_loop==0&&(++Y>g&&A.over_count==0||v.noise_shaping_amp==3&&z&&Y>30||v.noise_shaping_amp==3&&z&&E.global_gain-ne>15))break}while(E.global_gain+E.scalefac_scale<255);v.noise_shaping_amp==3?z?R=!0:(E.assign(b),Oi.arraycopy(T,0,F,0,576),Y=0,ne=E.global_gain,z=!0):R=!0}return hl(b.global_gain+b.scalefac_scale<=255),D.VBR==F_.vbr_rh||D.VBR==F_.vbr_mtrh?Oi.arraycopy(T,0,F,0,576):(v.substep_shaping&1)!=0&&trancate_smallspectrums(v,b,C,F),A.over_count},this.iteration_finish_one=function(D,b,C){var F=D.l3_side,L=F.tt[b][C];o.best_scalefac_store(D,b,C,F),D.use_best_huffman==1&&o.best_huffman_divide(D,L),t.ResvAdjust(D,L)},this.VBR_encode_granule=function(D,b,C,F,L,V,v){var E=D.internal_flags,T=new t1,y=dl(576),A=v,S=v+1,x=(v+V)/2,k,R,z=0,ne=E.sfb21_extra;hl(A<=LameInternalFlags.MAX_BITS_PER_CHANNEL),uo.fill(T.l3_enc,0);do x>A-42?E.sfb21_extra=!1:E.sfb21_extra=ne,R=outer_loop(D,b,C,F,L,x),R<=0?(z=1,S=b.part2_3_length,T.assign(b),Oi.arraycopy(F,0,y,0,576),v=S-32,k=v-V,x=(v+V)/2):(V=x+32,k=v-V,x=(v+V)/2,z!=0&&(z=2,b.assign(T),Oi.arraycopy(y,0,F,0,576)));while(k>12);E.sfb21_extra=ne,z==2&&Oi.arraycopy(T.l3_enc,0,b.l3_enc,0,576),hl(b.part2_3_length<=A)},this.get_framebits=function(D,b){var C=D.internal_flags;C.bitrate_index=C.VBR_min_bitrate;var F=e.getframebits(D);C.bitrate_index=1,F=e.getframebits(D);for(var L=1;L<=C.VBR_max_bitrate;L++){C.bitrate_index=L;var V=new MeanBits(F);b[L]=t.ResvFrameBegin(D,V),F=V.bits}},this.VBR_old_prepare=function(D,b,C,F,L,V,v,E,T){var y=D.internal_flags,A,S=0,x=1,k=0;y.bitrate_index=y.VBR_max_bitrate;var R=t.ResvFrameBegin(D,new MeanBits(0))/y.mode_gr;get_framebits(D,V);for(var z=0;z<y.mode_gr;z++){var ne=n.on_pe(D,b,E[z],R,z,0);y.mode_ext==H.MPG_MD_MS_LR&&(ms_convert(y.l3_side,z),n.reduce_side(E[z],C[z],R,ne));for(var Y=0;Y<y.channels_out;++Y){var te=y.l3_side.tt[z][Y];te.block_type!=H.SHORT_TYPE?(S=1.28/(1+Math.exp(3.5-b[z][Y]/300))-.05,A=y.PSY.mask_adjust-S):(S=2.56/(1+Math.exp(3.5-b[z][Y]/300))-.14,A=y.PSY.mask_adjust_short-S),y.masking_lower=Math.pow(10,A*.1),init_outer_loop(y,te),T[z][Y]=n.calc_xmin(D,F[z][Y],te,L[z][Y]),T[z][Y]!=0&&(x=0),v[z][Y]=126,k+=E[z][Y]}}for(var z=0;z<y.mode_gr;z++)for(var Y=0;Y<y.channels_out;Y++)k>V[y.VBR_max_bitrate]&&(E[z][Y]*=V[y.VBR_max_bitrate],E[z][Y]/=k),v[z][Y]>E[z][Y]&&(v[z][Y]=E[z][Y]);return x},this.bitpressure_strategy=function(D,b,C,F){for(var L=0;L<D.mode_gr;L++)for(var V=0;V<D.channels_out;V++){for(var v=D.l3_side.tt[L][V],E=b[L][V],T=0,y=0;y<v.psy_lmax;y++)E[T++]*=1+.029*y*y/H.SBMAX_l/H.SBMAX_l;if(v.block_type==H.SHORT_TYPE)for(var y=v.sfb_smin;y<H.SBMAX_s;y++)E[T++]*=1+.029*y*y/H.SBMAX_s/H.SBMAX_s,E[T++]*=1+.029*y*y/H.SBMAX_s/H.SBMAX_s,E[T++]*=1+.029*y*y/H.SBMAX_s/H.SBMAX_s;F[L][V]=0|Math.max(C[L][V],.9*F[L][V])}},this.VBR_new_prepare=function(D,b,C,F,L,V){var v=D.internal_flags,E=1,T=0,y=0,A;if(D.free_format){v.bitrate_index=0;var S=new MeanBits(T);A=t.ResvFrameBegin(D,S),T=S.bits,L[0]=A}else{v.bitrate_index=v.VBR_max_bitrate;var S=new MeanBits(T);t.ResvFrameBegin(D,S),T=S.bits,get_framebits(D,L),A=L[v.VBR_max_bitrate]}for(var x=0;x<v.mode_gr;x++){n.on_pe(D,b,V[x],T,x,0),v.mode_ext==H.MPG_MD_MS_LR&&ms_convert(v.l3_side,x);for(var k=0;k<v.channels_out;++k){var R=v.l3_side.tt[x][k];v.masking_lower=Math.pow(10,v.PSY.mask_adjust*.1),init_outer_loop(v,R),n.calc_xmin(D,C[x][k],R,F[x][k])!=0&&(E=0),y+=V[x][k]}}for(var x=0;x<v.mode_gr;x++)for(var k=0;k<v.channels_out;k++)y>A&&(V[x][k]*=A,V[x][k]/=y);return E},this.calc_target_bits=function(D,b,C,F,L,V){var v=D.internal_flags,E=v.l3_side,T,y,A,S,x=0;v.bitrate_index=v.VBR_max_bitrate;var k=new MeanBits(x);for(V[0]=t.ResvFrameBegin(D,k),x=k.bits,v.bitrate_index=1,x=e.getframebits(D)-v.sideinfo_len*8,L[0]=x/(v.mode_gr*v.channels_out),x=D.VBR_mean_bitrate_kbps*D.framesize*1e3,(v.substep_shaping&1)!=0&&(x*=1.09),x/=D.out_samplerate,x-=v.sideinfo_len*8,x/=v.mode_gr*v.channels_out,T=.93+.07*(11-D.compression_ratio)/(11-5.5),T<.9&&(T=.9),T>1&&(T=1),y=0;y<v.mode_gr;y++){var R=0;for(A=0;A<v.channels_out;A++){if(F[y][A]=int(T*x),b[y][A]>700){var z=int((b[y][A]-700)/1.4),ne=E.tt[y][A];F[y][A]=int(T*x),ne.block_type==H.SHORT_TYPE&&z<x/2&&(z=x/2),z>x*3/2?z=x*3/2:z<0&&(z=0),F[y][A]+=z}F[y][A]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(F[y][A]=LameInternalFlags.MAX_BITS_PER_CHANNEL),R+=F[y][A]}if(R>LameInternalFlags.MAX_BITS_PER_GRANULE)for(A=0;A<v.channels_out;++A)F[y][A]*=LameInternalFlags.MAX_BITS_PER_GRANULE,F[y][A]/=R}if(v.mode_ext==H.MPG_MD_MS_LR)for(y=0;y<v.mode_gr;y++)n.reduce_side(F[y],C[y],x*v.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(S=0,y=0;y<v.mode_gr;y++)for(A=0;A<v.channels_out;A++)F[y][A]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(F[y][A]=LameInternalFlags.MAX_BITS_PER_CHANNEL),S+=F[y][A];if(S>V[0])for(y=0;y<v.mode_gr;y++)for(A=0;A<v.channels_out;A++)F[y][A]*=V[0],F[y][A]/=S}}var P_=Je.assert;function PO(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var s=t.internal_flags,o,a=s.l3_side,c=e.getframebits(t);n.bits=(c-s.sideinfo_len*8)/s.mode_gr;var f=8*256*s.mode_gr-8;t.brate>320?o=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(o=8*1440,t.strict_ISO&&(o=8*int(32e4/(t.out_samplerate/1152)/8+.5))),s.ResvMax=o-c,s.ResvMax>f&&(s.ResvMax=f),(s.ResvMax<0||t.disable_reservoir)&&(s.ResvMax=0);var m=n.bits*s.mode_gr+Math.min(s.ResvSize,s.ResvMax);return m>o&&(m=o),P_(s.ResvMax%8==0),P_(s.ResvMax>=0),a.resvDrain_pre=0,s.pinfo!=null&&(s.pinfo.mean_bits=n.bits/2,s.pinfo.resvsize=s.ResvSize),m},this.ResvMaxBits=function(t,n,s,o){var a=t.internal_flags,c,f=a.ResvSize,m=a.ResvMax;o!=0&&(f+=n),(a.substep_shaping&1)!=0&&(m*=.9),s.bits=n,f*10>m*9?(c=f-m*9/10,s.bits+=c,a.substep_shaping|=128):(c=0,a.substep_shaping&=127,!t.disable_reservoir&&(a.substep_shaping&1)==0&&(s.bits-=.1*n));var d=f<a.ResvMax*6/10?f:a.ResvMax*6/10;return d-=c,d<0&&(d=0),d},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var s,o=t.l3_side;t.ResvSize+=n*t.mode_gr;var a=0;o.resvDrain_post=0,o.resvDrain_pre=0,(s=t.ResvSize%8)!=0&&(a+=s),s=t.ResvSize-a-t.ResvMax,s>0&&(a+=s);{var c=Math.min(o.main_data_begin*8,a)/8;o.resvDrain_pre+=8*c,a-=8*c,t.ResvSize-=8*c,o.main_data_begin-=c}o.resvDrain_post+=a,t.ResvSize-=a}}function HO(){var e="http://www.mp3dev.org/",t=3,n=98,s=4,o=0,a=93;this.getLameVersion=function(){return t+"."+n+"."+s},this.getLameShortVersion=function(){return t+"."+n+"."+s},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return o+"."+a},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var jO=Je.System,A0=Je.VbrMode,H_=Je.ShortBlock,UO=Je.Arrays,Iu=Je.new_byte,DO=Je.assert;nc.NUMTOCENTRIES=100;nc.MAXFRAMESIZE=2880;function nc(){var e,t,n;this.setModules=function(x,k,R){e=x,t=k,n=R};var s=1,o=2,a=4,c=8,f=nc.NUMTOCENTRIES,m=nc.MAXFRAMESIZE,d=f+4+4+4+4+4,p=d+9+1+1+8+1+1+3+1+1+2+4+2+2,h=128,w=64,M=32,u=null,$="Xing",U="Info",D=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function b(x,k){if(x.nVbrNumFrames++,x.sum+=k,x.seen++,!(x.seen<x.want)&&(x.pos<x.size&&(x.bag[x.pos]=x.sum,x.pos++,x.seen=0),x.pos==x.size)){for(var R=1;R<x.size;R+=2)x.bag[R/2]=x.bag[R];x.want*=2,x.pos/=2}}function C(x,k){if(!(x.pos<=0))for(var R=1;R<f;++R){var z=R/f,ne,Y,te=0|Math.floor(z*x.pos);te>x.pos-1&&(te=x.pos-1),ne=x.bag[te],Y=x.sum;var g=0|256*ne/Y;g>255&&(g=255),k[R]=255&g}}this.addVbrFrame=function(x){var k=x.internal_flags,R=Tables.bitrate_table[x.version][k.bitrate_index];DO(k.VBR_seek_table.bag!=null),b(k.VBR_seek_table,R)};function F(x,k){var R=x[k+0]&255;return R<<=8,R|=x[k+1]&255,R<<=8,R|=x[k+2]&255,R<<=8,R|=x[k+3]&255,R}function L(x,k,R){x[k+0]=255&(R>>24&255),x[k+1]=255&(R>>16&255),x[k+2]=255&(R>>8&255),x[k+3]=255&(R&255)}function V(x,k,R){x[k+0]=255&(R>>8&255),x[k+1]=255&(R&255)}function v(x,k){return new String(x,k,$.length(),u).equals($)||new String(x,k,U.length(),u).equals(U)}function E(x,k,R){return 255&(x<<k|R&~(-1<<k))}function T(x,k){var R=x.internal_flags;k[0]=E(k[0],8,255),k[1]=E(k[1],3,7),k[1]=E(k[1],1,x.out_samplerate<16e3?0:1),k[1]=E(k[1],1,x.version),k[1]=E(k[1],2,4-3),k[1]=E(k[1],1,x.error_protection?0:1),k[2]=E(k[2],4,R.bitrate_index),k[2]=E(k[2],2,R.samplerate_index),k[2]=E(k[2],1,0),k[2]=E(k[2],1,x.extension),k[3]=E(k[3],2,x.mode.ordinal()),k[3]=E(k[3],2,R.mode_ext),k[3]=E(k[3],1,x.copyright),k[3]=E(k[3],1,x.original),k[3]=E(k[3],2,x.emphasis),k[0]=255;var z=255&(k[1]&241),ne;x.version==1?ne=h:x.out_samplerate<16e3?ne=M:ne=w,x.VBR==A0.vbr_off&&(ne=x.brate);var Y;x.free_format?Y=0:Y=255&16*e.BitrateIndex(ne,x.version,x.out_samplerate),x.version==1?(k[1]=255&(z|10),z=255&(k[2]&13),k[2]=255&(Y|z)):(k[1]=255&(z|2),z=255&(k[2]&13),k[2]=255&(Y|z))}this.getVbrTag=function(x){var k=new VBRTagData,R=0;k.flags=0;var z=x[R+1]>>3&1,ne=x[R+2]>>2&3,Y=x[R+3]>>6&3,te=x[R+2]>>4&15;if(te=Tables.bitrate_table[z][te],x[R+1]>>4==14?k.samprate=Tables.samplerate_table[2][ne]:k.samprate=Tables.samplerate_table[z][ne],z!=0?Y!=3?R+=32+4:R+=17+4:Y!=3?R+=17+4:R+=9+4,!v(x,R))return null;R+=4,k.hId=z;var g=k.flags=F(x,R);if(R+=4,(g&s)!=0&&(k.frames=F(x,R),R+=4),(g&o)!=0&&(k.bytes=F(x,R),R+=4),(g&a)!=0){if(k.toc!=null)for(var I=0;I<f;I++)k.toc[I]=x[R+I];R+=f}k.vbrScale=-1,(g&c)!=0&&(k.vbrScale=F(x,R),R+=4),k.headersize=(z+1)*72e3*te/k.samprate,R+=21;var le=x[R+0]<<4;le+=x[R+1]>>4;var he=(x[R+1]&15)<<8;return he+=x[R+2]&255,(le<0||le>3e3)&&(le=-1),(he<0||he>3e3)&&(he=-1),k.encDelay=le,k.encPadding=he,k},this.InitVbrTag=function(x){var k=x.internal_flags,R;x.version==1?R=h:x.out_samplerate<16e3?R=M:R=w,x.VBR==A0.vbr_off&&(R=x.brate);var z=(x.version+1)*72e3*R/x.out_samplerate,ne=k.sideinfo_len+p;if(k.VBR_seek_table.TotalFrameSize=z,z<ne||z>m){x.bWriteVbrTag=!1;return}k.VBR_seek_table.nVbrNumFrames=0,k.VBR_seek_table.nBytesWritten=0,k.VBR_seek_table.sum=0,k.VBR_seek_table.seen=0,k.VBR_seek_table.want=1,k.VBR_seek_table.pos=0,k.VBR_seek_table.bag==null&&(k.VBR_seek_table.bag=new int[400],k.VBR_seek_table.size=400);var Y=Iu(m);T(x,Y);for(var te=k.VBR_seek_table.TotalFrameSize,g=0;g<te;++g)t.add_dummy_byte(x,Y[g]&255,1)};function y(x,k){var R=k^x;return k=k>>8^D[R&255],k}this.updateMusicCRC=function(x,k,R,z){for(var ne=0;ne<z;++ne)x[0]=y(k[R+ne],x[0])};function A(x,k,R,z,ne){var Y=x.internal_flags,te=0,g=x.encoder_delay,I=x.encoder_padding,le=100-10*x.VBR_q-x.quality,he=n.getLameVeryShortVersion(),He,Ke=0,qe,oe=[1,5,3,2,4,0,3],ke=0|(x.lowpassfreq/100+.5>255?255:x.lowpassfreq/100+.5),Se=0,Ae=0,Xe=0,X=x.internal_flags.noise_shaping,O=0,P=0,G=0,ee=0,re=0,pe=(x.exp_nspsytune&1)!=0,ve=(x.exp_nspsytune&2)!=0,ce=!1,ae=!1,ge=x.internal_flags.nogap_total,Be=x.internal_flags.nogap_current,Ce=x.ATHtype,Pe=0,We;switch(x.VBR){case vbr_abr:We=x.VBR_mean_bitrate_kbps;break;case vbr_off:We=x.brate;break;default:We=x.VBR_min_bitrate_kbps}switch(x.VBR.ordinal()<oe.length?He=oe[x.VBR.ordinal()]:He=0,qe=16*Ke+He,Y.findReplayGain&&(Y.RadioGain>510&&(Y.RadioGain=510),Y.RadioGain<-510&&(Y.RadioGain=-510),Ae=8192,Ae|=3072,Y.RadioGain>=0?Ae|=Y.RadioGain:(Ae|=512,Ae|=-Y.RadioGain)),Y.findPeakSample&&(Se=Math.abs(0|Y.PeakSample/32767*Math.pow(2,23)+.5)),ge!=-1&&(Be>0&&(ae=!0),Be<ge-1&&(ce=!0)),Pe=Ce+((pe?1:0)<<4)+((ve?1:0)<<5)+((ce?1:0)<<6)+((ae?1:0)<<7),le<0&&(le=0),x.mode){case MONO:O=0;break;case STEREO:O=1;break;case DUAL_CHANNEL:O=2;break;case JOINT_STEREO:x.force_ms?O=4:O=3;break;case NOT_SET:default:O=7;break}x.in_samplerate<=32e3?G=0:x.in_samplerate==48e3?G=2:x.in_samplerate>48e3?G=3:G=1,(x.short_blocks==H_.short_block_forced||x.short_blocks==H_.short_block_dispensed||x.lowpassfreq==-1&&x.highpassfreq==-1||x.scale_left<x.scale_right||x.scale_left>x.scale_right||x.disable_reservoir&&x.brate<320||x.noATH||x.ATHonly||Ce==0||x.in_samplerate<=32e3)&&(P=1),ee=X+(O<<2)+(P<<5)+(G<<6),re=Y.nMusicCRC,L(R,z+te,le),te+=4;for(var nt=0;nt<9;nt++)R[z+te+nt]=255&he.charAt(nt);te+=9,R[z+te]=255&qe,te++,R[z+te]=255&ke,te++,L(R,z+te,Se),te+=4,V(R,z+te,Ae),te+=2,V(R,z+te,Xe),te+=2,R[z+te]=255&Pe,te++,We>=255?R[z+te]=255:R[z+te]=255&We,te++,R[z+te]=255&g>>4,R[z+te+1]=255&(g<<4)+(I>>8),R[z+te+2]=255&I,te+=3,R[z+te]=255&ee,te++,R[z+te++]=0,V(R,z+te,x.preset),te+=2,L(R,z+te,k),te+=4,V(R,z+te,re),te+=2;for(var be=0;be<te;be++)ne=y(R[z+be],ne);return V(R,z+te,ne),te+=2,te}function S(x){x.seek(0);var k=Iu(10);x.readFully(k);var R;return new String(k,"ISO-8859-1").startsWith("ID3")?R=0:R=((k[6]&127)<<21|(k[7]&127)<<14|(k[8]&127)<<7|k[9]&127)+k.length,R}this.getLameTagFrame=function(x,k){var R=x.internal_flags;if(!x.bWriteVbrTag||R.Class_ID!=Lame.LAME_ID||R.VBR_seek_table.pos<=0)return 0;if(k.length<R.VBR_seek_table.TotalFrameSize)return R.VBR_seek_table.TotalFrameSize;UO.fill(k,0,R.VBR_seek_table.TotalFrameSize,0),T(x,k);var z=Iu(f);if(x.free_format)for(var ne=1;ne<f;++ne)z[ne]=255&255*ne/100;else C(R.VBR_seek_table,z);var Y=R.sideinfo_len;x.error_protection&&(Y-=2),x.VBR==A0.vbr_off?(k[Y++]=255&U.charAt(0),k[Y++]=255&U.charAt(1),k[Y++]=255&U.charAt(2),k[Y++]=255&U.charAt(3)):(k[Y++]=255&$.charAt(0),k[Y++]=255&$.charAt(1),k[Y++]=255&$.charAt(2),k[Y++]=255&$.charAt(3)),L(k,Y,s+o+a+c),Y+=4,L(k,Y,R.VBR_seek_table.nVbrNumFrames),Y+=4;var te=R.VBR_seek_table.nBytesWritten+R.VBR_seek_table.TotalFrameSize;L(k,Y,0|te),Y+=4,jO.arraycopy(z,0,k,Y,z.length),Y+=z.length,x.error_protection&&t.CRC_writeheader(R,k);for(var g=0,ne=0;ne<Y;ne++)g=y(k[ne],g);return Y+=A(x,te,k,Y,g),R.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(x,k){var R=x.internal_flags;if(R.VBR_seek_table.pos<=0||(k.seek(k.length()),k.length()==0))return-1;var z=S(k);k.seek(z);var ne=Iu(m),Y=getLameTagFrame(x,ne);return Y>ne.length?-1:(Y<1||k.write(ne,0,Y),0)}}var j_=Je.new_byte,$O=Je.assert;function qO(){this.setModules=function(e,t){}}function VO(){this.setModules=function(e,t,n){}}function zO(){}function KO(){this.setModules=function(e,t){}}function YO(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var s=new wt,o=new qO,a=new Mn,c=new Zr,f=new CO,m=new Gn,d=new FO,p=new nc,h=new HO,w=new KO,M=new PO,u=new tc,$=new VO,U=new zO;s.setModules(a,c,f,m,d,p,h,w,U),c.setModules(a,U,h,p),w.setModules(c,h),f.setModules(s),d.setModules(c,M,m,u),m.setModules(u,M,s.enc.psy),M.setModules(c),u.setModules(m),p.setModules(s,c,h),o.setModules($,U),$.setModules(h,w,f);var D=s.lame_init();D.num_channels=e,D.in_samplerate=t,D.brate=n,D.mode=Yt.STEREO,D.quality=3,D.bWriteVbrTag=!1,D.disable_reservoir=!0,D.write_id3tag_automatic=!1,s.lame_init_params(D);var b=1152,C=0|1.25*b+7200,F=j_(C);this.encodeBuffer=function(L,V){e==1&&(V=L),$O(L.length==V.length),L.length>b&&(b=L.length,C=0|1.25*b+7200,F=j_(C));var v=s.lame_encode_buffer(D,L,V,L.length,F,0,C);return new Int8Array(F.subarray(0,v))},this.flush=function(){var L=s.lame_encode_flush(D,F,0,C);return new Int8Array(F.subarray(0,L))}}function j1(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}j1("RIFF");j1("WAVE");j1("fmt ");j1("data");class WO{constructor(t){this.bitRate=t.bitRate,this.sampleRate=t.sampleRate,this.dataBuffer=[],this.encoder=new YO(1,this.sampleRate,this.bitRate)}encode(t){const s=this._convertBuffer(t);let o=s.length;for(let a=0;o>=0;a+=1152){const c=s.subarray(a,a+1152),f=this.encoder.encodeBuffer(c);this.dataBuffer.push(new Int8Array(f)),o-=1152}}finish(){this.dataBuffer.push(this.encoder.flush());const t=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:t,url:URL.createObjectURL(t)}}_floatTo16BitPCM(t,n){for(let s=0;s<t.length;s++){const o=Math.max(-1,Math.min(1,t[s]));n[s]=o<0?o*32768:o*32767}}_convertBuffer(t){const n=new Float32Array(t),s=new Int16Array(t.length);return this._floatTo16BitPCM(n,s),s}}class XO{constructor(t={}){this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0}start(){const t={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(t).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this.lameEncoder||(this.lameEncoder=new WO(this.encoderOptions))}stop(){this.stream.getTracks().forEach(n=>n.stop()),this.input.disconnect(),this.processor.disconnect(),this.context.close();let t=null;t=this.lameEncoder.finish(),t.duration=this.duration,this.records.push(t),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(t)}pause(){this.stream.getTracks().forEach(t=>t.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(t),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=t,this.processor.onaudioprocess=n=>{const s=n.inputBuffer.getChannelData(0);let o=0;this.lameEncoder&&this.lameEncoder.encode(s);for(let a=0;a<s.length;++a)o+=s[a]*s[a];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(o/s.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(t){this.micFailed&&this.micFailed(t)}}function U_(){var e=GO(),t=e.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(t)}function GO(){var e=navigator.userAgent||navigator.vendor||window.opera||null;if(!e)throw new Error("Failed to look for user agent information.");return e}const ZO={name:"RoomFooter",components:{SvgIcon:zn,EmojiPickerContainer:J3,RoomFiles:cI,RoomMessageReply:CI,RoomUsersTag:HI,RoomEmojis:$I,RoomTemplatesText:XI},directives:{clickOutside:F1},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new U3,emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(e=>e.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(e){this.getTextareaRef().value=e},roomMessage:{immediate:!0,handler(e){e&&(this.message=this.roomMessage)}},editedMessage(e){this.$emit("update-edited-message-id",e._id)},initReplyMessage(e){e&&this.replyMessage(e)},initEditMessage(e){e&&this.editMessage(e)},droppedFiles(e){e&&this.onFileChange(e)}},mounted(){const e=U_();let t=!0;this.getTextareaRef().addEventListener("keyup",n=>{n.key==="Enter"&&!n.shiftKey&&!this.fileDialog&&(e?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):t&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),t=!n.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{e&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),e&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(e){U_()&&e||!this.getTextareaRef()||(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{this.getTextareaRef().setSelectionRange(this.cursorRangePosition,this.cursorRangePosition),this.cursorRangePosition=null}))},onChangeInput(){var e,t,n;(((e=this.getTextareaRef())==null?void 0:e.value)||((t=this.getTextareaRef())==null?void 0:t.value)==="")&&(this.message=(n=this.getTextareaRef())==null?void 0:n.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const e=this.getTextareaRef();if(!e)return;const t=window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");e.style.height=0,e.style.height=e.scrollHeight-t*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(e){var t;const n=(t=e.clipboardData)==null?void 0:t.items;n&&Array.from(n).forEach(s=>{if(s.type.includes("image")){const o=s.getAsFile();this.onFileChange([o])}})},updateActiveUpOrDown(e){this.filteredEmojis.length?this.activeUpOrDownEmojis=e:this.filteredUsersTag.length?this.activeUpOrDownUsersTag=e:this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=e)},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(e){if(this.selectEmojiItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition(":");this.message=this.message.substr(0,t-1)+e+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t,this.focusTextarea()},selectTemplateText(e){if(this.selectTemplatesTextItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition("/"),s=this.message.substr(n,n).length?"":" ";this.message=this.message.substr(0,t-1)+e.text+s+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t+e.text.length+s.length+1,this.focusTextarea()},addEmoji(e){this.message+=e.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(e){this.fileDialog=!0,this.focusTextarea(),Array.from(e).forEach(async t=>{const n=URL.createObjectURL(t),s=t.name.lastIndexOf(".");this.files.push({loading:!0,name:t.name.substring(0,s),size:t.size,type:t.type,extension:t.name.substring(s+1),localUrl:n});const o=await fetch(n).then(c=>c.blob());let a=this.files.find(c=>c.localUrl===n);a&&(a.blob=o,a.loading=!1,delete a.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(e){this.files.splice(e,1),this.focusTextarea()},toggleRecorder(e){if(this.isRecording=e,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),200);else try{this.recorder.stop();const t=this.recorder.records[0];this.files.push({blob:t.blob,name:`audio.${this.format}`,size:t.blob.size,duration:t.duration,type:t.blob.type,audio:!0,localUrl:URL.createObjectURL(t.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var e;let t=this.message.trim();if(!this.files.length&&!t||this.isFileLoading)return;this.selectedUsersTag.forEach(s=>{t=t.replace(`@${s.username}`,`<usertag>${s._id}</usertag>`)});const n=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==t||((e=this.editedMessage.files)==null?void 0:e.length)||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(e){this.resetMessage(),this.editedMessage={...e};let t=e.content;const n=t,s="<usertag>",o="</usertag>";[...t.matchAll(new RegExp(s,"gi"))].map(c=>c.index).forEach(c=>{const f=n.substring(c+s.length,n.indexOf(o,c)),m=this.room.users.find(d=>d._id===f);t=t.replace(`${s}${f}${o}`,`@${(m==null?void 0:m.username)||"unknown"}`),this.selectUserTag(m,!0)}),this.message=t,e.files&&(this.files=[...e.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(e){this.editedMessage={},this.messageReply=e,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(e){if(!this.getTextareaRef()||e===":"&&!this.emojisSuggestionEnabled||e==="@"&&(!this.userTagsEnabled||!this.room.users)||e==="/"&&!this.templatesText)return;const t=this.getTextareaRef().selectionStart;let n=t;for(;n>0&&this.message.charAt(n-1)!==e&&(this.message.charAt(n-1)!==" "||e!==":");)n--;const s=this.message.charAt(n-2),o=!s.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(n-1)===e&&(!s||s===" "||o)){const a=this.message.substring(n,t);e===":"?this.updateEmojis(a):e==="@"?this.updateShowUsersTag(a):e==="/"&&this.updateShowTemplatesText(a)}else this.resetFooterList(e)},updateShowUsersTag(e){this.filteredUsersTag=ld(this.room.users,"username",e,!0).filter(t=>t._id!==this.currentUserId)},selectUserTag(e,t=!1){if(this.selectUsersTagItem=!1,!e)return;const{position:n,endPosition:s}=this.getCharPosition("@"),o=this.message.substr(s,s).length?"":" ";this.message=this.message.substr(0,n)+e.username+o+this.message.substr(s,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...e}],t||(this.cursorRangePosition=n+e.username.length+o.length+1),this.focusTextarea()},updateShowTemplatesText(e){this.filteredTemplatesText=ld(this.templatesText,"tag",e,!0)},getCharPosition(e){let n=this.getTextareaRef().selectionStart;for(;n>0&&this.message.charAt(n-1)!==e;)n--;const s=this.getTextareaRef().selectionEnd;return{position:n,endPosition:s}},async updateEmojis(e){if(!e)return;const t=await this.emojisDB.getEmojiBySearchQuery(e);this.filteredEmojis=t.map(n=>n.unicode)},resetFooterList(e=null){e===":"?this.filteredEmojis=[]:e==="@"?this.filteredUsersTag=[]:e==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(e=!1,t=!1){t||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!t)&&setTimeout(()=>this.focusTextarea(e))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new XO({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},QO={key:0,class:"vac-icon-textarea-left"},JO=ze("div",{class:"vac-dot-audio-record"},null,-1),eC={class:"vac-dot-audio-record-time"},tC=["placeholder"],nC={class:"vac-icon-textarea"},rC={key:1},sC=["accept"];function iC(e,t,n,s,o,a){const c=vt("room-emojis"),f=vt("room-users-tag"),m=vt("room-templates-text"),d=vt("room-message-reply"),p=vt("room-files"),h=vt("svg-icon"),w=vt("emoji-picker-container"),M=S1("click-outside");return oi((xe(),Le("div",{id:"room-footer",class:It(["vac-room-footer",{"vac-app-box-shadow":a.shadowFooter}])},[rt(c,{"filtered-emojis":o.filteredEmojis,"select-item":o.selectEmojiItem,"active-up-or-down":o.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=u=>a.selectEmoji(u)),onActivateItem:t[1]||(t[1]=u=>o.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),rt(f,{"filtered-users-tag":o.filteredUsersTag,"select-item":o.selectUsersTagItem,"active-up-or-down":o.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=u=>a.selectUserTag(u)),onActivateItem:t[3]||(t[3]=u=>o.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),rt(m,{"filtered-templates-text":o.filteredTemplatesText,"select-item":o.selectTemplatesTextItem,"active-up-or-down":o.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=u=>a.selectTemplateText(u)),onActivateItem:t[5]||(t[5]=u=>o.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),rt(d,{room:n.room,"message-reply":o.messageReply,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onResetMessage:a.resetMessage},an({_:2},[Tt(e.$slots,(u,$)=>({name:$,fn:mt(U=>[tt(e.$slots,$,sn(Jt(U)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),rt(p,{files:o.files,onRemoveFile:a.removeFile,onResetMessage:a.resetMessage},an({_:2},[Tt(e.$slots,(u,$)=>({name:$,fn:mt(U=>[tt(e.$slots,$,sn(Jt(U)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),ze("div",{class:It(["vac-box-footer",{"vac-box-footer-border":!o.files.length}])},[n.showAudio&&!o.files.length?(xe(),Le("div",QO,[o.isRecording?(xe(),Le(Vt,{key:0},[ze("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=(...u)=>a.stopRecorder&&a.stopRecorder(...u))},[tt(e.$slots,"audio-stop-icon",{},()=>[rt(h,{name:"close-outline"})])]),JO,ze("div",eC,xt(a.recordedTime),1),ze("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=u=>a.toggleRecorder(!1))},[tt(e.$slots,"audio-check-icon",{},()=>[rt(h,{name:"checkmark"})])])],64)):(xe(),Le("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=u=>a.toggleRecorder(!0))},[tt(e.$slots,"microphone-icon",{},()=>[rt(h,{name:"microphone",class:"vac-icon-microphone"})])]))])):st("",!0),ze("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:n.textMessages.TYPE_MESSAGE,class:It(["vac-textarea",{"vac-textarea-outline":o.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=(...u)=>a.onChangeInput&&a.onChangeInput(...u)),onKeydown:[t[10]||(t[10]=Qs((...u)=>a.escapeTextarea&&a.escapeTextarea(...u),["esc"])),t[11]||(t[11]=Qs(Qr((...u)=>a.selectItem&&a.selectItem(...u),["exact","prevent"]),["enter"])),t[13]||(t[13]=Qs(Qr(()=>{},["exact","prevent"]),["tab"])),t[14]||(t[14]=Qs((...u)=>a.selectItem&&a.selectItem(...u),["tab"])),t[15]||(t[15]=Qs(Qr(()=>{},["exact","prevent"]),["up"])),t[16]||(t[16]=Qs(u=>a.updateActiveUpOrDown(-1),["up"])),t[17]||(t[17]=Qs(Qr(()=>{},["exact","prevent"]),["down"])),t[18]||(t[18]=Qs(u=>a.updateActiveUpOrDown(1),["down"]))],onPaste:t[12]||(t[12]=(...u)=>a.onPasteImage&&a.onPasteImage(...u))},null,42,tC),ze("div",nC,[o.editedMessage._id?(xe(),Le("div",{key:0,class:"vac-svg-button",onClick:t[19]||(t[19]=(...u)=>a.resetMessage&&a.resetMessage(...u))},[tt(e.$slots,"edit-close-icon",{},()=>[rt(h,{name:"close-outline"})])])):st("",!0),n.showEmojis?oi((xe(),Le("div",rC,[tt(e.$slots,"emoji-picker",lh({emojiOpened:o.emojiOpened},{addEmoji:a.addEmoji}),()=>[rt(w,{"emoji-opened":o.emojiOpened,"position-top":!0,onAddEmoji:a.addEmoji,onOpenEmoji:t[20]||(t[20]=u=>o.emojiOpened=u)},{"emoji-picker-icon":mt(()=>[tt(e.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","onAddEmoji"])])])),[[M,()=>o.emojiOpened=!1]]):st("",!0),n.showFiles?(xe(),Le("div",{key:2,class:"vac-svg-button",onClick:t[21]||(t[21]=(...u)=>a.launchFilePicker&&a.launchFilePicker(...u))},[tt(e.$slots,"paperclip-icon",{},()=>[rt(h,{name:"paperclip"})])])):st("",!0),n.textareaActionEnabled?(xe(),Le("div",{key:3,class:"vac-svg-button",onClick:t[22]||(t[22]=(...u)=>a.textareaActionHandler&&a.textareaActionHandler(...u))},[tt(e.$slots,"custom-action-icon",{},()=>[rt(h,{name:"deleted"})])])):st("",!0),n.showFiles?(xe(),Le("input",{key:4,ref:"file",type:"file",multiple:"",accept:n.acceptedFiles,style:{display:"none"},onChange:t[23]||(t[23]=u=>a.onFileChange(u.target.files))},null,40,sC)):st("",!0),n.showSendIcon?(xe(),Le("div",{key:5,class:It(["vac-svg-button",{"vac-send-disabled":a.isMessageEmpty}]),onClick:t[24]||(t[24]=(...u)=>a.sendMessage&&a.sendMessage(...u))},[tt(e.$slots,"send-icon",{},()=>[rt(h,{name:"send",param:a.isMessageEmpty||a.isFileLoading?"disabled":""},null,8,["param"])])],2)):st("",!0)])],2)],2)),[[M1,Object.keys(n.room).length&&n.showFooter]])}var aC=hn(ZO,[["render",iC]]);const oC={name:"MessageReply",components:{AudioPlayer:Th,SvgIcon:zn,FormatMessage:hc},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:e}=this.message.replyMessage,t=this.roomUsers.find(n=>n._id===e);return t?t.username:""},firstFile(){var e,t;return(t=(e=this.message.replyMessage)==null?void 0:e.files)!=null&&t.length?this.message.replyMessage.files[0]:{}},isAudio(){return P1(this.firstFile)},isImage(){return Io(this.firstFile)},isVideo(){return mc(this.firstFile)},isOtherFile(){var e;return((e=this.message.replyMessage.files)==null?void 0:e.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},lC={class:"vac-reply-message"},cC={class:"vac-reply-username"},uC={key:0,class:"vac-image-reply-container"},fC={key:1,class:"vac-video-reply-container"},dC={controls:""},hC=["src"],mC={key:3,class:"vac-file-container"},vC={class:"vac-text-ellipsis"},_C={key:0,class:"vac-text-ellipsis vac-text-extension"},pC={class:"vac-reply-content"};function gC(e,t,n,s,o,a){const c=vt("audio-player"),f=vt("svg-icon"),m=vt("format-message");return xe(),Le("div",lC,[ze("div",cC,xt(a.replyUsername),1),a.isImage?(xe(),Le("div",uC,[ze("div",{class:"vac-message-image vac-message-image-reply",style:Wt({"background-image":`url('${a.firstFile.url}')`})},null,4)])):a.isVideo?(xe(),Le("div",fC,[ze("video",dC,[ze("source",{src:a.firstFile.url},null,8,hC)])])):a.isAudio?(xe(),en(c,{key:2,src:a.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:t[0]||(t[0]=d=>e.progressTime=d),onHoverAudioProgress:t[1]||(t[1]=d=>e.hoverAudioProgress=d)},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["src"])):a.isOtherFile?(xe(),Le("div",mC,[ze("div",null,[tt(e.$slots,"file-icon",{},()=>[rt(f,{name:"file"})])]),ze("div",vC,xt(a.firstFile.name),1),a.firstFile.extension?(xe(),Le("div",_C,xt(a.firstFile.extension),1)):st("",!0)])):st("",!0),ze("div",pC,[rt(m,{"message-id":n.message.replyMessage._id,content:n.message.replyMessage.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var bC=hn(oC,[["render",gC]]);const yC={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){return{radius:35,stroke:4,normalizedRadius:27,circumference:54*Math.PI}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},wC={ref:"progress",class:"vac-progress-wrapper"},xC=["height","width"],SC=["stroke-dasharray","stroke-width","r","cx","cy"],AC={class:"vac-progress-text"},EC=ze("span",{class:"vac-progress-pourcent"},"%",-1);function MC(e,t,n,s,o,a){return xe(),en(On,{name:"vac-fade-spinner",appear:""},{default:mt(()=>[ze("div",wC,[(xe(),Le("svg",{height:o.radius*2,width:o.radius*2},[ze("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":o.circumference+" "+o.circumference,style:Wt({strokeDashoffset:a.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":o.stroke,fill:"transparent",r:o.normalizedRadius,cx:o.radius,cy:o.radius},null,12,SC)],8,xC)),ze("div",{class:"vac-progress-content",style:Wt({height:o.radius*2-19+"px",width:o.radius*2-19+"px"})},[ze("div",AC,[Xi(xt(n.progress),1),EC])],4)],512)]),_:1})}var u4=hn(yC,[["render",MC]]);const TC={name:"MessageFile",components:{SvgIcon:zn,Loader:T1,ProgressBar:u4},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return Io(this.file)},isVideo(){return mc(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const e=this.$refs["imageRef"+this.index];e&&(this.imageResponsive={maxHeight:e.clientWidth-18,loaderTop:e.clientHeight/2-9})},methods:{checkImgLoad(){if(!Io(this.file))return;this.imageLoading=!0;const e=new Image;e.src=this.file.url,e.addEventListener("load",()=>this.imageLoading=!1)},openFile(e,t){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:this.file,action:t}))}}},RC={class:"vac-message-file-container"},kC={key:0,class:"vac-image-buttons"},IC={controls:""},OC=["src"];function CC(e,t,n,s,o,a){const c=vt("progress-bar"),f=vt("loader"),m=vt("svg-icon");return xe(),Le("div",RC,[a.isImage?(xe(),Le("div",{key:0,ref:"imageRef"+n.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=d=>o.imageHover=!0),onMouseleave:t[3]||(t[3]=d=>o.imageHover=!1),onClick:t[4]||(t[4]=d=>a.openFile(d,"preview"))},[n.file.progress>=0?(xe(),en(c,{key:0,progress:n.file.progress,style:Wt({top:`${o.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):(xe(),en(f,{key:1,show:a.isImageLoading,type:"message-file","message-id":n.message._id,style:Wt({top:`${o.imageResponsive.loaderTop}px`})},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["show","message-id","style"])),ze("div",{class:It(["vac-message-image",{"vac-blur-loading":a.isImageLoading&&n.message.senderId===n.currentUserId}]),style:Wt({"background-image":`url('${a.isImageLoading&&n.file.preview||n.file.url}')`,"max-height":`${o.imageResponsive.maxHeight}px`})},[rt(On,{name:"vac-fade-image"},{default:mt(()=>[!n.messageSelectionEnabled&&o.imageHover&&!a.isImageLoading?(xe(),Le("div",kC,[ze("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=d=>a.openFile(d,"preview"))},[tt(e.$slots,"eye-icon_"+n.message._id,{},()=>[rt(m,{name:"eye"})])]),ze("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=d=>a.openFile(d,"download"))},[tt(e.$slots,"document-icon_"+n.message._id,{},()=>[rt(m,{name:"document"})])])])):st("",!0)]),_:3})],6)],544)):a.isVideo?(xe(),Le("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=Qr(d=>a.openFile(d,"preview"),["prevent"]))},[n.file.progress>=0?(xe(),en(c,{key:0,progress:n.file.progress},null,8,["progress"])):st("",!0),ze("video",IC,[ze("source",{src:n.file.url},null,8,OC)])])):st("",!0)])}var LC=hn(TC,[["render",CC]]);const BC={name:"MessageFiles",components:{SvgIcon:zn,FormatMessage:hc,ProgressBar:u4,MessageFile:LC},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(e=>n_(e))},otherFiles(){return this.message.files.filter(e=>!n_(e))}},methods:{openFile(e,t,n){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:t,action:n}))}}},NC={class:"vac-message-files-container"},FC=["onClick"],PC={class:"vac-svg-button"},HC={class:"vac-text-ellipsis"},jC={key:0,class:"vac-text-ellipsis vac-text-extension"};function UC(e,t,n,s,o,a){const c=vt("message-file"),f=vt("progress-bar"),m=vt("svg-icon"),d=vt("format-message");return xe(),Le("div",NC,[(xe(!0),Le(Vt,null,Tt(a.imageVideoFiles,(p,h)=>(xe(),Le("div",{key:h+"iv"},[rt(c,{file:p,"current-user-id":n.currentUserId,message:n.message,index:h,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=w=>e.$emit("open-file",w))},an({_:2},[Tt(e.$slots,(w,M)=>({name:M,fn:mt(u=>[tt(e.$slots,M,sn(Jt(u)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),(xe(!0),Le(Vt,null,Tt(a.otherFiles,(p,h)=>(xe(),Le("div",{key:h+"a",class:"vac-file-wrapper"},[p.progress>=0?(xe(),en(f,{key:0,progress:p.progress,style:{top:"44px"}},null,8,["progress"])):st("",!0),ze("div",{class:It(["vac-file-container",{"vac-file-container-progress":p.progress>=0}]),onClick:w=>a.openFile(w,p,"download")},[ze("div",PC,[tt(e.$slots,"document-icon",{},()=>[rt(m,{name:"document"})])]),ze("div",HC,xt(p.name),1),p.extension?(xe(),Le("div",jC,xt(p.extension),1)):st("",!0)],10,FC)]))),128)),rt(d,{"message-id":n.message._id,content:n.message.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:t[1]||(t[1]=p=>e.$emit("open-user-tag",p))},null,8,["message-id","content","users","text-formatting","link-options"])])}var DC=hn(BC,[["render",UC]]);const $C={name:"MessageActions",components:{SvgIcon:zn,EmojiPickerContainer:J3},directives:{clickOutside:F1},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(e=>!e.onlyMe)}},watch:{emojiOpened(e){this.$emit("update-emoji-opened",e),e&&(this.optionsOpened=!1)},optionsOpened(e){this.$emit("update-options-opened",e)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer");if(!e||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const t=this.$refs.menuOptions.getBoundingClientRect().height,n=this.$refs.actionIcon.getBoundingClientRect().top;e.getBoundingClientRect().top-n>t+50?this.menuOptionsTop=30:this.menuOptionsTop=-t}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(e){this.closeOptions(),this.$emit("message-action-handler",e)},sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t}),this.closeEmoji()}}},qC={class:"vac-message-actions-wrapper"},VC={key:"3"},zC={class:"vac-menu-list"},KC=["onClick"];function YC(e,t,n,s,o,a){const c=vt("svg-icon"),f=vt("emoji-picker-container"),m=S1("click-outside");return xe(),Le("div",qC,[ze("div",{class:"vac-options-container",style:Wt({display:n.hoverAudioProgress?"none":"initial",width:a.filteredMessageActions.length&&n.showReactionEmojis?"70px":"45px"})},[rt(fh,{name:"vac-slide-left",tag:"span"},{default:mt(()=>[a.isMessageActions||a.isMessageReactions?(xe(),Le("div",{key:"1",class:It(["vac-blur-container",{"vac-options-me":n.message.senderId===n.currentUserId}])},null,2)):st("",!0),a.isMessageActions?(xe(),Le("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=(...d)=>a.openOptions&&a.openOptions(...d))},[tt(e.$slots,"dropdown-icon_"+n.message._id,{},()=>[rt(c,{name:"dropdown",param:"message"})])],512)):st("",!0),a.isMessageReactions?oi((xe(),Le("div",VC,[tt(e.$slots,"emoji-picker",lh({emojiOpened:o.emojiOpened},{addEmoji:a.sendMessageReaction}),()=>[rt(f,{class:"vac-message-emojis",style:Wt({right:a.isMessageActions?"30px":"5px"}),"emoji-opened":o.emojiOpened,"emoji-reaction":!0,"position-right":n.message.senderId===n.currentUserId,"message-id":n.message._id,onAddEmoji:a.sendMessageReaction,onOpenEmoji:a.openEmoji},an({_:2},[Tt(e.$slots,(d,p)=>({name:p,fn:mt(h=>[tt(e.$slots,p,sn(Jt(h)))])}))]),1032,["style","emoji-opened","position-right","message-id","onAddEmoji","onOpenEmoji"])])])),[[m,a.closeEmoji]]):st("",!0)]),_:3})],4),a.filteredMessageActions.length?(xe(),en(On,{key:0,name:n.message.senderId===n.currentUserId?"vac-slide-left":"vac-slide-right"},{default:mt(()=>[o.optionsOpened?oi((xe(),Le("div",{key:0,ref:"menuOptions",class:It(["vac-menu-options",{"vac-menu-left":n.message.senderId!==n.currentUserId}]),style:Wt({top:`${o.menuOptionsTop}px`})},[ze("div",zC,[(xe(!0),Le(Vt,null,Tt(a.filteredMessageActions,d=>(xe(),Le("div",{key:d.name},[ze("div",{class:"vac-menu-item",onClick:p=>a.messageActionHandler(d)},xt(d.title),9,KC)]))),128))])],6)),[[m,a.closeOptions]]):st("",!0)]),_:1},8,["name"])):st("",!0)])}var WC=hn($C,[["render",YC]]);const XC={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t})}}},GC=["onClick"];function ZC(e,t,n,s,o,a){return n.message.deleted?st("",!0):(xe(),en(fh,{key:0,name:"vac-slide-left",tag:"span"},{default:mt(()=>[(xe(!0),Le(Vt,null,Tt(n.message.reactions,(c,f)=>oi((xe(),Le("button",{key:f+0,class:It(["vac-button-reaction",{"vac-reaction-me":c.indexOf(n.currentUserId)!==-1}]),style:Wt({float:n.message.senderId===n.currentUserId?"right":"left"}),onClick:m=>a.sendMessageReaction({unicode:f},c)},[Xi(xt(f),1),ze("span",null,xt(c.length),1)],14,GC)),[[M1,c.length]])),128))]),_:1}))}var QC=hn(XC,[["render",ZC]]);function JC(e){if(!((s,o)=>o.every(a=>{let c=!1;return(a.type[0]==="array"&&Array.isArray(s[a.key])||a.type.find(f=>f===typeof s[a.key]))&&(c=!0),c&&Rh(s,a.key)}))(e,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain roomId[String, Number], roomName[String] and users[Array]")}function eL(e){if(!((s,o)=>o.every(a=>a.type.find(f=>f===typeof s[a.key])&&Rh(s,a.key)))(e,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain _id[String, Number] and username[String]")}function tL(e){if(!((s,o)=>o.every(a=>a.type.find(f=>f===typeof s[a.key])&&Rh(s,a.key)))(e,[{key:"_id",type:["string","number"]},{key:"content",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain _id[String, Number], content[String, Number] and senderId[String, Number]")}function Rh(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&e[t]!==void 0}const nL={name:"RoomMessage",components:{SvgIcon:zn,FormatMessage:hc,AudioPlayer:Th,MessageReply:bC,MessageFiles:DC,MessageActions:WC,MessageReactions:QC},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var e;return(e=this.message.files)==null?void 0:e.some(t=>P1(t))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(e=>e.senderId===this.currentUserId&&e.avatar)},hasSenderUserAvatar(){return this.messages.some(e=>e.senderId!==this.currentUserId&&e.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(e=>e._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(e){if(!e.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=e.reduce((t,n)=>n.index<t.index?n:t)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){tL(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(e){this.$emit("open-file",{message:this.message,file:e})},openUserTag(e){this.$emit("open-user-tag",{user:e})},messageActionHandler(e){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:e,message:this.message})},300)},sendMessageReaction({emoji:e,reaction:t}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:e,remove:t&&t.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},rL=["id"],sL={key:0,class:"vac-card-info vac-card-date"},iL={key:1,class:"vac-line-new"},aL={key:2,class:"vac-card-info vac-card-system"},oL={key:1,class:"vac-avatar-offset"},lL={key:0,class:"vac-progress-time"},cL={class:"vac-text-timestamp"},uL={key:0,class:"vac-icon-edited"},fL={key:1},dL=ze("div",{class:"vac-failure-text"},"!",-1),hL=[dL],mL={key:3,class:"vac-avatar-current-offset"};function vL(e,t,n,s,o,a){const c=vt("format-message"),f=vt("message-reply"),m=vt("message-files"),d=vt("audio-player"),p=vt("svg-icon"),h=vt("message-actions"),w=vt("message-reactions");return xe(),Le("div",{id:n.message._id,ref:"message",class:"vac-message-wrapper"},[a.showDate?(xe(),Le("div",sL,xt(n.message.date),1)):st("",!0),o.newMessage._id===n.message._id?(xe(),Le("div",iL,xt(n.textMessages.NEW_MESSAGES),1)):st("",!0),n.message.system?(xe(),Le("div",aL,[tt(e.$slots,"message_"+n.message._id,{},()=>[rt(c,{"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-messages":n.textMessages,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:a.openUserTag},an({_:2},[Tt(e.$slots,(M,u)=>({name:u,fn:mt($=>[tt(e.$slots,u,sn(Jt($)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):(xe(),Le("div",{key:3,class:It(["vac-message-box",{"vac-offset-current":n.message.senderId===n.currentUserId}]),onClick:t[8]||(t[8]=(...M)=>a.selectMessage&&a.selectMessage(...M))},[tt(e.$slots,"message_"+n.message._id,{},()=>[n.message.avatar&&n.message.senderId!==n.currentUserId?tt(e.$slots,"message-avatar_"+n.message._id,{key:0},()=>[ze("div",{class:"vac-avatar",style:Wt({"background-image":`url('${n.message.avatar}')`})},null,4)]):st("",!0),a.hasSenderUserAvatar&&!n.message.avatar?(xe(),Le("div",oL)):st("",!0),ze("div",{class:It(["vac-message-container",{"vac-message-container-offset":a.messageOffset}])},[ze("div",{class:It(["vac-message-card",{"vac-message-highlight":a.isMessageHover,"vac-message-current":n.message.senderId===n.currentUserId,"vac-message-deleted":n.message.deleted,"vac-item-clickable":n.messageSelectionEnabled,"vac-message-selected":a.isMessageSelected}]),onMouseover:t[5]||(t[5]=(...M)=>a.onHoverMessage&&a.onHoverMessage(...M)),onMouseleave:t[6]||(t[6]=(...M)=>a.onLeaveMessage&&a.onLeaveMessage(...M))},[a.showUsername?(xe(),Le("div",{key:0,class:It(["vac-text-username",{"vac-username-reply":!n.message.deleted&&n.message.replyMessage}])},[ze("span",null,xt(n.message.username),1)],2)):st("",!0),!n.message.deleted&&n.message.replyMessage?(xe(),en(f,{key:1,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions},an({_:2},[Tt(e.$slots,(M,u)=>({name:u,fn:mt($=>[tt(e.$slots,u,sn(Jt($)))])}))]),1032,["message","room-users","text-formatting","link-options"])):st("",!0),!!n.message.deleted||!n.message.files||!n.message.files.length?(xe(),en(c,{key:2,"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-formatting":n.textFormatting,"text-messages":n.textMessages,"link-options":n.linkOptions,onOpenUserTag:a.openUserTag},an({_:2},[Tt(e.$slots,(M,u)=>({name:u,fn:mt($=>[tt(e.$slots,u,sn(Jt($)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!a.isAudio||n.message.files.length>1?(xe(),en(m,{key:3,"current-user-id":n.currentUserId,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:a.openFile,onOpenUserTag:a.openUserTag},an({_:2},[Tt(e.$slots,(M,u)=>({name:u,fn:mt($=>[tt(e.$slots,u,sn(Jt($)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):(xe(),Le(Vt,{key:4},[rt(d,{"message-id":n.message._id,src:n.message.files[0].url,"message-selection-enabled":n.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=M=>o.progressTime=M),onHoverAudioProgress:t[1]||(t[1]=M=>o.hoverAudioProgress=M)},an({_:2},[Tt(e.$slots,(M,u)=>({name:u,fn:mt($=>[tt(e.$slots,u,sn(Jt($)))])}))]),1032,["message-id","src","message-selection-enabled"]),n.message.deleted?st("",!0):(xe(),Le("div",lL,xt(o.progressTime),1))],64)),ze("div",cL,[n.message.edited&&!n.message.deleted?(xe(),Le("div",uL,[tt(e.$slots,"pencil-icon_"+n.message._id,{},()=>[rt(p,{name:"pencil"})])])):st("",!0),ze("span",null,xt(n.message.timestamp),1),a.isCheckmarkVisible?(xe(),Le("span",fL,[tt(e.$slots,"checkmark-icon_"+n.message._id,{},()=>[rt(p,{name:n.message.distributed?"double-checkmark":"checkmark",param:n.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):st("",!0)]),rt(h,{"current-user-id":n.currentUserId,message:n.message,"message-actions":n.messageActions,"show-reaction-emojis":n.showReactionEmojis,"message-hover":o.messageHover,"hover-message-id":o.hoverMessageId,"hover-audio-progress":o.hoverAudioProgress,onUpdateMessageHover:t[2]||(t[2]=M=>o.messageHover=M),onUpdateOptionsOpened:t[3]||(t[3]=M=>o.optionsOpened=M),onUpdateEmojiOpened:t[4]||(t[4]=M=>o.emojiOpened=M),onMessageActionHandler:a.messageActionHandler,onSendMessageReaction:a.sendMessageReaction},an({_:2},[Tt(e.$slots,(M,u)=>({name:u,fn:mt($=>[tt(e.$slots,u,sn(Jt($)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","onMessageActionHandler","onSendMessageReaction"])],34),rt(w,{"current-user-id":n.currentUserId,message:n.message,onSendMessageReaction:a.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),tt(e.$slots,"message-failure_"+n.message._id,{},()=>[n.message.failure&&n.message.senderId===n.currentUserId?(xe(),Le("div",{key:0,class:It(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":n.message.avatar&&n.message.senderId===n.currentUserId}]),onClick:t[7]||(t[7]=M=>e.$emit("open-failed-message",{message:n.message}))},hL,2)):st("",!0)]),n.message.avatar&&n.message.senderId===n.currentUserId?tt(e.$slots,"message-avatar_"+n.message._id,{key:2},()=>[ze("div",{class:"vac-avatar vac-avatar-current",style:Wt({"background-image":`url('${n.message.avatar}')`})},null,4)]):st("",!0),a.hasCurrentUserAvatar&&!n.message.avatar?(xe(),Le("div",mL)):st("",!0)])],2))],8,rL)}var _L=hn(nL,[["render",vL]]);const pL={name:"ChatRoom",components:{Loader:T1,SvgIcon:zn,RoomHeader:gR,RoomFooter:aC,RoomMessage:_L},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(e=>e.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const e=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return e&&this.updateLoadingMessages(!1),e},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(e,t){e.forEach((n,s)=>{this.showNewMessagesDivider&&!n.seen&&n.senderId!==this.currentUserId&&this.newMessages.push({_id:n._id,index:s})}),(t==null?void 0:t.length)===(e==null?void 0:e.length)-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(e){e&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(e){this.loadingMessages=e,e||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("infinite-loader-messages");if(e){const t={root:document.querySelector("vue-advanced-chat").shadowRoot.getElementById("messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreMessages()},t),this.observer.observe(e)}},preventTopScroll(){const e=this.$refs.scrollContainer,t=e.scrollHeight,n=new ResizeObserver(o=>{e.scrollHeight!==t&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:e.scrollHeight-t}),n.disconnect())});for(var s=0;s<e.children.length;s++)n.observe(e.children[s])},touchStart(e){if(!this.singleRoom&&e.changedTouches.length===1){const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;addEventListener("touchend",s=>this.touchEnd(s,t,n),{once:!0})}},touchEnd(e,t,n){if(e.changedTouches.length===1){const s=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY,a=s-t>100,c=Math.abs(o-n)>50;a&&!c&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const e=this.$watch(()=>this.messages,t=>{if(!t||!t.length)return;const n=this.$refs.scrollContainer;!n||(e(),setTimeout(()=>{n.scrollTo({top:n.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(e){this.selectedMessages.push(e)},unselectMessage(e){this.selectedMessages=this.selectedMessages.filter(t=>t._id!==e)},onMessageAdded({message:e,index:t,ref:n}){if(t!==this.messages.length-1)return;const s=n.offsetHeight+60;setTimeout(()=>{const o=this.getBottomScroll(this.$refs.scrollContainer)>s;e.senderId===this.currentUserId?o?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():o?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(e){if(!e.target)return;const t=this.getBottomScroll(e.target);t<60&&(this.scrollMessagesCount=0),this.scrollIcon=t>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:e,message:t}){switch(e.name){case"replyMessage":this.initReplyMessage=t,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=t,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",t);case"selectMessages":this.selectedMessages=[t],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:e,message:t})}},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{action:e,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(e){this.$emit("send-message-reaction",e)},getBottomScroll(e){const{scrollHeight:t,clientHeight:n,scrollTop:s}=e;return t-n-s},scrollToBottom(){setTimeout(()=>{const e=this.$refs.scrollContainer;e.classList.add("vac-scroll-smooth"),e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),setTimeout(()=>e.classList.remove("vac-scroll-smooth"))},50)},openFile({message:e,file:t}){this.$emit("open-file",{message:e,file:t})},openUserTag(e){this.$emit("open-user-tag",e)},onDropFiles(e){this.droppedFiles=e.dataTransfer.files}}},gL={class:"vac-container-center vac-room-empty"},bL={class:"vac-messages-container"},yL={key:0,class:"vac-text-started"},wL={key:1,class:"vac-text-started"},xL={key:0,id:"infinite-loader-messages"},SL={key:2},AL={key:0,class:"vac-badge-counter vac-messages-count"};function EL(e,t,n,s,o,a){const c=vt("room-header"),f=vt("loader"),m=vt("room-message"),d=vt("svg-icon"),p=vt("room-footer");return oi((xe(),Le("div",{class:"vac-col-messages",onDrop:t[12]||(t[12]=Qr((...h)=>a.onDropFiles&&a.onDropFiles(...h),["prevent"])),onDragenter:t[13]||(t[13]=Qr(()=>{},["prevent"])),onDragover:t[14]||(t[14]=Qr(()=>{},["prevent"])),onDragleave:t[15]||(t[15]=Qr(()=>{},["prevent"])),onTouchstart:t[16]||(t[16]=(...h)=>a.touchStart&&a.touchStart(...h))},[a.showNoRoom?tt(e.$slots,"no-room-selected",{key:0},()=>[ze("div",gL,[ze("div",null,xt(n.textMessages.ROOM_EMPTY),1)])]):(xe(),en(c,{key:1,"current-user-id":n.currentUserId,"text-messages":n.textMessages,"single-room":n.singleRoom,"show-rooms-list":n.showRoomsList,"is-mobile":n.isMobile,"room-info-enabled":n.roomInfoEnabled,"menu-actions":n.menuActions,room:a.room,"message-selection-enabled":o.messageSelectionEnabled,"message-selection-actions":n.messageSelectionActions,"selected-messages-total":o.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=h=>e.$emit("toggle-rooms-list")),onRoomInfo:t[1]||(t[1]=h=>e.$emit("room-info")),onMenuActionHandler:t[2]||(t[2]=h=>e.$emit("menu-action-handler",h)),onMessageSelectionActionHandler:a.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=h=>o.messageSelectionEnabled=!1)},an({_:2},[Tt(e.$slots,(h,w)=>({name:w,fn:mt(M=>[tt(e.$slots,w,sn(Jt(M)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),ze("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=(...h)=>a.onContainerScroll&&a.onContainerScroll(...h))},[rt(f,{show:o.loadingMessages,type:"messages"},an({_:2},[Tt(e.$slots,(h,w)=>({name:w,fn:mt(M=>[tt(e.$slots,w,sn(Jt(M)))])}))]),1032,["show"]),ze("div",bL,[ze("div",{class:It({"vac-messages-hidden":o.loadingMessages})},[rt(On,{name:"vac-fade-message"},{default:mt(()=>[ze("div",null,[a.showNoMessages?(xe(),Le("div",yL,[tt(e.$slots,"messages-empty",{},()=>[Xi(xt(n.textMessages.MESSAGES_EMPTY),1)])])):st("",!0),a.showMessagesStarted?(xe(),Le("div",wL,xt(n.textMessages.CONVERSATION_STARTED)+" "+xt(n.messages[0].date),1)):st("",!0)])]),_:3}),n.messages.length&&!n.messagesLoaded?(xe(),Le("div",xL,[rt(f,{show:!0,infinite:!0,type:"infinite-messages"},an({_:2},[Tt(e.$slots,(h,w)=>({name:w,fn:mt(M=>[tt(e.$slots,w,sn(Jt(M)))])}))]),1024)])):st("",!0),(xe(),en(fh,{key:n.roomId,name:"vac-fade-message",tag:"span"},{default:mt(()=>[(xe(!0),Le(Vt,null,Tt(n.messages,(h,w)=>(xe(),Le("div",{key:h.indexId||h._id},[rt(m,{"current-user-id":n.currentUserId,message:h,index:w,messages:n.messages,"edited-message-id":o.editedMessageId,"message-actions":n.messageActions,"room-users":a.room.users,"text-messages":n.textMessages,"new-messages":o.newMessages,"show-reaction-emojis":n.showReactionEmojis,"show-new-messages-divider":n.showNewMessagesDivider,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"username-options":n.usernameOptions,"message-selection-enabled":o.messageSelectionEnabled,"selected-messages":o.selectedMessages,onMessageAdded:a.onMessageAdded,onMessageActionHandler:a.messageActionHandler,onOpenFile:a.openFile,onOpenUserTag:a.openUserTag,onOpenFailedMessage:t[4]||(t[4]=M=>e.$emit("open-failed-message",M)),onSendMessageReaction:a.sendMessageReaction,onSelectMessage:a.selectMessage,onUnselectMessage:a.unselectMessage},an({_:2},[Tt(e.$slots,(M,u)=>({name:u,fn:mt($=>[tt(e.$slots,u,sn(Jt($)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),o.loadingMessages?st("",!0):(xe(),Le("div",SL,[rt(On,{name:"vac-bounce"},{default:mt(()=>[o.scrollIcon?(xe(),Le("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=(...h)=>a.scrollToBottom&&a.scrollToBottom(...h))},[rt(On,{name:"vac-bounce"},{default:mt(()=>[o.scrollMessagesCount?(xe(),Le("div",AL,xt(o.scrollMessagesCount),1)):st("",!0)]),_:1}),tt(e.$slots,"scroll-icon",{},()=>[rt(d,{name:"dropdown",param:"scroll"})])])):st("",!0)]),_:3})])),rt(p,{room:a.room,"room-id":n.roomId,"room-message":n.roomMessage,"text-messages":n.textMessages,"show-send-icon":n.showSendIcon,"show-files":n.showFiles,"show-audio":n.showAudio,"show-emojis":n.showEmojis,"show-footer":n.showFooter,"accepted-files":n.acceptedFiles,"textarea-action-enabled":n.textareaActionEnabled,"textarea-auto-focus":n.textareaAutoFocus,"user-tags-enabled":n.userTagsEnabled,"emojis-suggestion-enabled":n.emojisSuggestionEnabled,"templates-text":n.templatesText,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"init-reply-message":o.initReplyMessage,"init-edit-message":o.initEditMessage,"dropped-files":o.droppedFiles,onUpdateEditedMessageId:t[7]||(t[7]=h=>o.editedMessageId=h),onEditMessage:t[8]||(t[8]=h=>e.$emit("edit-message",h)),onSendMessage:t[9]||(t[9]=h=>e.$emit("send-message",h)),onTypingMessage:t[10]||(t[10]=h=>e.$emit("typing-message",h)),onTextareaActionHandler:t[11]||(t[11]=h=>e.$emit("textarea-action-handler",h))},an({_:2},[Tt(e.$slots,(h,w)=>({name:w,fn:mt(M=>[tt(e.$slots,w,sn(Jt(M)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files"])],544)),[[M1,n.isMobile&&!n.showRoomsList||!n.isMobile||n.singleRoom]])}var ML=hn(pL,[["render",EL]]);const TL={name:"MediaPreview",components:{SvgIcon:zn},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return Io(this.file)},isVideo(){return mc(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},RL={key:0,class:"vac-media-preview-container"},kL={key:1,class:"vac-media-preview-container"},IL={controls:"",autoplay:""},OL=["src"],CL={class:"vac-svg-button"};function LL(e,t,n,s,o,a){const c=vt("svg-icon");return xe(),Le("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=Qr((...f)=>a.closeModal&&a.closeModal(...f),["stop"])),onKeydown:t[1]||(t[1]=Qs((...f)=>a.closeModal&&a.closeModal(...f),["esc"]))},[rt(On,{name:"vac-bounce-preview",appear:""},{default:mt(()=>[a.isImage?(xe(),Le("div",RL,[ze("div",{class:"vac-image-preview",style:Wt({"background-image":`url('${n.file.url}')`})},null,4)])):a.isVideo?(xe(),Le("div",kL,[ze("video",IL,[ze("source",{src:n.file.url},null,8,OL)])])):st("",!0)]),_:1}),ze("div",CL,[tt(e.$slots,"preview-close-icon",{},()=>[rt(c,{name:"close-outline",param:"preview"})])])],544)}var BL=hn(TL,[["render",LL]]),NL={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const FL={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},PL=({general:e,container:t,header:n,footer:s,sidemenu:o,content:a,dropdown:c,message:f,markdown:m,room:d,emoji:p,icons:h})=>({"--chat-color":e.color,"--chat-color-button-clear":e.colorButtonClear,"--chat-color-button":e.colorButton,"--chat-bg-color-button":e.backgroundColorButton,"--chat-bg-color-input":e.backgroundInput,"--chat-color-spinner":e.colorSpinner,"--chat-color-placeholder":e.colorPlaceholder,"--chat-color-caret":e.colorCaret,"--chat-border-style":e.borderStyle,"--chat-bg-scroll-icon":e.backgroundScrollIcon,"--chat-container-border":t.border,"--chat-container-border-radius":t.borderRadius,"--chat-container-box-shadow":t.boxShadow,"--chat-header-bg-color":n.background,"--chat-header-color-name":n.colorRoomName,"--chat-header-color-info":n.colorRoomInfo,"--chat-footer-bg-color":s.background,"--chat-border-style-input":s.borderStyleInput,"--chat-border-color-input-selected":s.borderInputSelected,"--chat-footer-bg-color-reply":s.backgroundReply,"--chat-footer-bg-color-tag-active":s.backgroundTagActive,"--chat-footer-bg-color-tag":s.backgroundTag,"--chat-content-bg-color":a.background,"--chat-sidemenu-bg-color":o.background,"--chat-sidemenu-bg-color-hover":o.backgroundHover,"--chat-sidemenu-bg-color-active":o.backgroundActive,"--chat-sidemenu-color-active":o.colorActive,"--chat-sidemenu-border-color-search":o.borderColorSearch,"--chat-dropdown-bg-color":c.background,"--chat-dropdown-bg-color-hover":c.backgroundHover,"--chat-message-bg-color":f.background,"--chat-message-bg-color-me":f.backgroundMe,"--chat-message-color-started":f.colorStarted,"--chat-message-bg-color-deleted":f.backgroundDeleted,"--chat-message-bg-color-selected":f.backgroundSelected,"--chat-message-color-deleted":f.colorDeleted,"--chat-message-color-username":f.colorUsername,"--chat-message-color-timestamp":f.colorTimestamp,"--chat-message-bg-color-date":f.backgroundDate,"--chat-message-color-date":f.colorDate,"--chat-message-bg-color-system":f.backgroundSystem,"--chat-message-color-system":f.colorSystem,"--chat-message-color":f.color,"--chat-message-bg-color-media":f.backgroundMedia,"--chat-message-bg-color-reply":f.backgroundReply,"--chat-message-color-reply-username":f.colorReplyUsername,"--chat-message-color-reply-content":f.colorReply,"--chat-message-color-tag":f.colorTag,"--chat-message-bg-color-image":f.backgroundImage,"--chat-message-color-new-messages":f.colorNewMessages,"--chat-message-bg-color-scroll-counter":f.backgroundScrollCounter,"--chat-message-color-scroll-counter":f.colorScrollCounter,"--chat-message-bg-color-reaction":f.backgroundReaction,"--chat-message-border-style-reaction":f.borderStyleReaction,"--chat-message-bg-color-reaction-hover":f.backgroundReactionHover,"--chat-message-border-style-reaction-hover":f.borderStyleReactionHover,"--chat-message-color-reaction-counter":f.colorReactionCounter,"--chat-message-bg-color-reaction-me":f.backgroundReactionMe,"--chat-message-border-style-reaction-me":f.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":f.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":f.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":f.colorReactionCounterMe,"--chat-message-bg-color-audio-record":f.backgroundAudioRecord,"--chat-message-bg-color-audio-line":f.backgroundAudioLine,"--chat-message-bg-color-audio-progress":f.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":f.backgroundAudioProgressSelector,"--chat-message-color-file-extension":f.colorFileExtension,"--chat-markdown-bg":m.background,"--chat-markdown-border":m.border,"--chat-markdown-color":m.color,"--chat-markdown-color-multi":m.colorMulti,"--chat-room-color-username":d.colorUsername,"--chat-room-color-message":d.colorMessage,"--chat-room-color-timestamp":d.colorTimestamp,"--chat-room-color-online":d.colorStateOnline,"--chat-room-color-offline":d.colorStateOffline,"--chat-room-bg-color-badge":d.backgroundCounterBadge,"--chat-room-color-badge":d.colorCounterBadge,"--chat-emoji-bg-color":p.background,"--chat-icon-color-search":h.search,"--chat-icon-color-add":h.add,"--chat-icon-color-toggle":h.toggle,"--chat-icon-color-menu":h.menu,"--chat-icon-color-close":h.close,"--chat-icon-color-close-image":h.closeImage,"--chat-icon-color-file":h.file,"--chat-icon-color-paperclip":h.paperclip,"--chat-icon-color-close-outline":h.closeOutline,"--chat-icon-color-close-preview":h.closePreview,"--chat-icon-color-send":h.send,"--chat-icon-color-send-disabled":h.sendDisabled,"--chat-icon-color-emoji":h.emoji,"--chat-icon-color-emoji-reaction":h.emojiReaction,"--chat-icon-color-document":h.document,"--chat-icon-color-pencil":h.pencil,"--chat-icon-color-checkmark":h.checkmark,"--chat-icon-color-checkmark-seen":h.checkmarkSeen,"--chat-icon-color-eye":h.eye,"--chat-icon-color-dropdown-message":h.dropdownMessage,"--chat-icon-bg-dropdown-message":h.dropdownMessageBackground,"--chat-icon-color-dropdown-room":h.dropdownRoom,"--chat-icon-color-dropdown-scroll":h.dropdownScroll,"--chat-icon-color-microphone":h.microphone,"--chat-icon-color-audio-play":h.audioPlay,"--chat-icon-color-audio-pause":h.audioPause,"--chat-icon-color-audio-cancel":h.audioCancel,"--chat-icon-color-audio-confirm":h.audioConfirm});var HL=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-bold{font-weight:700}.vac-text-italic{font-style:italic}.vac-text-strike{text-decoration:line-through}.vac-text-underline{text-decoration:underline}.vac-text-inline-code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-text-multiline-code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:absolute;display:flex;align-items:center;height:64px;width:100%;z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{height:20px;width:100%;line-height:20px;overflow:hidden;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;cursor:pointer;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-current{background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const jL={name:"ChatContainer",components:{RoomsList:nR,Room:ML,MediaPreview:BL},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:44100},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1,italic:"_",bold:"*",strike:"~",underline:"\xB0",multilineCode:"```",inlineCode:"`"})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{...NL,...this.textMessagesCasted}},cssVars(){const e=FL[this.theme],t={};return Object.keys(e).map(n=>{t[n]={...e[n],...this.stylesCasted[n]||{}}}),PL(t)},orderedRooms(){return this.roomsCasted.slice().sort((e,t)=>{const n=e.index||0,s=t.index||0;return this.roomsOrder==="asc"?n<s?-1:s<n?1:0:n>s?-1:s>n?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(e,t){if((!e[0]||!e.find(n=>n.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&e[0]&&(!t||e.length!==t.length))if(this.roomId){const n=e.find(s=>s.roomId===this.roomId)||{};this.fetchRoom({room:n})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(e){e&&(this.room={})},roomId:{immediate:!0,handler(e,t){if(e&&!this.loadingRoomsCasted&&this.roomsCasted.length){const n=this.roomsCasted.find(s=>s.roomId===e);this.fetchRoom({room:n})}else t&&!e&&(this.room={})}},room(e){!e||Object.entries(e).length===0||(JC(e),e.users.forEach(t=>{eL(t)}))},roomsListOpenedCasted:{immediate:!0,handler(e){this.showRoomsList=e}}},created(){this.updateResponsive(),window.addEventListener("resize",e=>{e.isTrusted&&this.updateResponsive()})},updated(){const e=document.querySelectorAll("[slot]");this.slots.length!==e.length&&(this.slots=e)},methods:{castBoolean(e){return e==="true"||e===!0},castArray(e){return e?Array.isArray(e)?e:JSON.parse(e):[]},castObject(e){return e?typeof e=="object"?e:JSON.parse(e):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:e}){this.room=e,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(e){this.$emit("search-room",{value:e,roomId:this.room.roomId})},fetchMessages(e){this.$emit("fetch-messages",{room:this.room,options:e})},sendMessage(e){this.$emit("send-message",{...e,roomId:this.room.roomId})},editMessage(e){this.$emit("edit-message",{...e,roomId:this.room.roomId})},deleteMessage(e){this.$emit("delete-message",{message:e,roomId:this.room.roomId})},openFile({message:e,file:t}){this.mediaPreviewEnabledCasted&&t.action==="preview"?(this.previewFile=t.file,this.showMediaPreview=!0):this.$emit("open-file",{message:e,file:t})},openUserTag({user:e}){this.$emit("open-user-tag",{user:e})},openFailedMessage({message:e}){this.$emit("open-failed-message",{message:e,roomId:this.room.roomId})},menuActionHandler(e){this.$emit("menu-action-handler",{action:e,roomId:this.room.roomId})},roomActionHandler({action:e,roomId:t}){this.$emit("room-action-handler",{action:e,roomId:t})},messageActionHandler(e){this.$emit("message-action-handler",{...e,roomId:this.room.roomId})},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{...e,roomId:this.room.roomId})},sendMessageReaction(e){this.$emit("send-message-reaction",{...e,roomId:this.room.roomId})},typingMessage(e){this.$emit("typing-message",{message:e,roomId:this.room.roomId})},textareaActionHandler(e){this.$emit("textarea-action-handler",{message:e,roomId:this.room.roomId})}}},UL={class:"vac-chat-container"};function DL(e,t,n,s,o,a){const c=vt("rooms-list"),f=vt("room"),m=vt("media-preview");return xe(),Le("div",{class:"vac-card-window",style:Wt([{height:n.height},a.cssVars])},[ze("div",UL,[a.singleRoomCasted?st("",!0):(xe(),en(c,{key:0,"current-user-id":n.currentUserId,rooms:a.orderedRooms,"loading-rooms":a.loadingRoomsCasted,"rooms-loaded":a.roomsLoadedCasted,room:o.room,"room-actions":a.roomActionsCasted,"custom-search-room-enabled":n.customSearchRoomEnabled,"text-messages":a.t,"show-search":a.showSearchCasted,"show-add-room":a.showAddRoomCasted,"show-rooms-list":o.showRoomsList&&a.roomsListOpenedCasted,"text-formatting":a.textFormattingCasted,"link-options":a.linkOptionsCasted,"is-mobile":o.isMobile,"scroll-distance":n.scrollDistance,onFetchRoom:a.fetchRoom,onFetchMoreRooms:a.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=d=>o.loadingMoreRooms=d),onAddRoom:a.addRoom,onSearchRoom:a.searchRoom,onRoomActionHandler:a.roomActionHandler},an({_:2},[Tt(o.slots,d=>({name:d.slot,fn:mt(p=>[tt(e.$slots,d.slot,sn(Jt(p)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),rt(f,{"current-user-id":n.currentUserId,rooms:a.roomsCasted,"room-id":o.room.roomId||"","load-first-room":a.loadFirstRoomCasted,messages:a.messagesCasted,"room-message":n.roomMessage,"messages-loaded":a.messagesLoadedCasted,"menu-actions":a.menuActionsCasted,"message-actions":a.messageActionsCasted,"message-selection-actions":a.messageSelectionActionsCasted,"auto-scroll":a.autoScrollCasted,"show-send-icon":a.showSendIconCasted,"show-files":a.showFilesCasted,"show-audio":a.showAudioCasted,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"show-emojis":a.showEmojisCasted,"show-reaction-emojis":a.showReactionEmojisCasted,"show-new-messages-divider":a.showNewMessagesDividerCasted,"show-footer":a.showFooterCasted,"text-messages":a.t,"single-room":a.singleRoomCasted,"show-rooms-list":o.showRoomsList&&a.roomsListOpenedCasted,"text-formatting":a.textFormattingCasted,"link-options":a.linkOptionsCasted,"is-mobile":o.isMobile,"loading-rooms":a.loadingRoomsCasted,"room-info-enabled":a.roomInfoEnabledCasted,"textarea-action-enabled":a.textareaActionEnabledCasted,"textarea-auto-focus":a.textareaAutoFocusCasted,"user-tags-enabled":a.userTagsEnabledCasted,"emojis-suggestion-enabled":a.emojisSuggestionEnabledCasted,"scroll-distance":n.scrollDistance,"accepted-files":n.acceptedFiles,"templates-text":a.templatesTextCasted,"username-options":a.usernameOptionsCasted,onToggleRoomsList:a.toggleRoomsList,onRoomInfo:a.roomInfo,onFetchMessages:a.fetchMessages,onSendMessage:a.sendMessage,onEditMessage:a.editMessage,onDeleteMessage:a.deleteMessage,onOpenFile:a.openFile,onOpenUserTag:a.openUserTag,onOpenFailedMessage:a.openFailedMessage,onMenuActionHandler:a.menuActionHandler,onMessageActionHandler:a.messageActionHandler,onMessageSelectionActionHandler:a.messageSelectionActionHandler,onSendMessageReaction:a.sendMessageReaction,onTypingMessage:a.typingMessage,onTextareaActionHandler:a.textareaActionHandler},an({_:2},[Tt(o.slots,d=>({name:d.slot,fn:mt(p=>[tt(e.$slots,d.slot,sn(Jt(p)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","templates-text","username-options","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),rt(On,{name:"vac-fade-preview",appear:""},{default:mt(()=>[o.showMediaPreview?(xe(),en(m,{key:0,file:o.previewFile,onCloseMediaPreview:t[1]||(t[1]=d=>o.showMediaPreview=!1)},an({_:2},[Tt(o.slots,d=>({name:d.slot,fn:mt(p=>[tt(e.$slots,d.slot,sn(Jt(p)))])}))]),1032,["file"])):st("",!0)]),_:3})],4)}var $L=hn(jL,[["render",DL],["styles",[HL]]]);const qL=ME($L),D_="vue-advanced-chat";function VL(){customElements.get(D_)||customElements.define(D_,qL)}var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var n,s="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",h=1,w=2,M=4,u=1,$=2,U=1,D=2,b=4,C=8,F=16,L=32,V=64,v=128,E=256,T=512,y=30,A="...",S=800,x=16,k=1,R=2,z=3,ne=1/0,Y=9007199254740991,te=17976931348623157e292,g=0/0,I=4294967295,le=I-1,he=I>>>1,He=[["ary",v],["bind",U],["bindKey",D],["curry",C],["curryRight",F],["flip",T],["partial",L],["partialRight",V],["rearg",E]],Ke="[object Arguments]",qe="[object Array]",oe="[object AsyncFunction]",ke="[object Boolean]",Se="[object Date]",Ae="[object DOMException]",Xe="[object Error]",X="[object Function]",O="[object GeneratorFunction]",P="[object Map]",G="[object Number]",ee="[object Null]",re="[object Object]",pe="[object Promise]",ve="[object Proxy]",ce="[object RegExp]",ae="[object Set]",ge="[object String]",Be="[object Symbol]",Ce="[object Undefined]",Pe="[object WeakMap]",We="[object WeakSet]",nt="[object ArrayBuffer]",be="[object DataView]",Ne="[object Float32Array]",me="[object Float64Array]",Ze="[object Int8Array]",N="[object Int16Array]",j="[object Int32Array]",Z="[object Uint8Array]",Q="[object Uint8ClampedArray]",se="[object Uint16Array]",W="[object Uint32Array]",fe=/\b__p \+= '';/g,ye=/\b(__p \+=) '' \+/g,ue=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ie=/&(?:amp|lt|gt|quot|#39);/g,we=/[&<>"']/g,Oe=RegExp(Ie.source),Qe=RegExp(we.source),ut=/<%-([\s\S]+?)%>/g,Ve=/<%([\s\S]+?)%>/g,ct=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/,yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,De=/[\\^$.*+?()[\]{}|]/g,ot=RegExp(De.source),$e=/^\s+/,ft=/\s/,tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,et=/\{\n\/\* \[wrapped with (.+)\] \*/,pt=/,? & /,St=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vn=/[()=,{}\[\]\/\s]/,nr=/\\(\\)?/g,yn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,on=/\w*$/,Kn=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,sr=/^\[object .+?Constructor\]$/,Er=/^0o[0-7]+$/i,Mr=/^(?:0|[1-9]\d*)$/,Pn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ir=/($^)/,di=/['\n\r\u2028\u2029\\]/g,hi="\\ud800-\\udfff",pc="\\u0300-\\u036f",gc="\\ufe20-\\ufe2f",bc="\\u20d0-\\u20ff",ln=pc+gc+bc,Uo="\\u2700-\\u27bf",Do="a-z\\xdf-\\xf6\\xf8-\\xff",$o="\\xac\\xb1\\xd7\\xf7",qo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yc="\\u2000-\\u206f",Zi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wc="A-Z\\xc0-\\xd6\\xd8-\\xde",Tn="\\ufe0e\\ufe0f",Va=$o+qo+yc+Zi,Qi="['\u2019]",Vo="["+hi+"]",Un="["+Va+"]",ps="["+ln+"]",gs="\\d+",zo="["+Uo+"]",bs="["+Do+"]",za="[^"+hi+Va+gs+Uo+Do+wc+"]",Us="\\ud83c[\\udffb-\\udfff]",Ji="(?:"+ps+"|"+Us+")",ea="[^"+hi+"]",mi="(?:\\ud83c[\\udde6-\\uddff]){2}",U1="[\\ud800-\\udbff][\\udc00-\\udfff]",Ka="["+wc+"]",kh="\\u200d",Ih="(?:"+bs+"|"+za+")",f4="(?:"+Ka+"|"+za+")",Oh="(?:"+Qi+"(?:d|ll|m|re|s|t|ve))?",Ch="(?:"+Qi+"(?:D|LL|M|RE|S|T|VE))?",Lh=Ji+"?",Bh="["+Tn+"]?",d4="(?:"+kh+"(?:"+[ea,mi,U1].join("|")+")"+Bh+Lh+")*",h4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",m4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nh=Bh+Lh+d4,v4="(?:"+[zo,mi,U1].join("|")+")"+Nh,_4="(?:"+[ea+ps+"?",ps,mi,U1,Vo].join("|")+")",p4=RegExp(Qi,"g"),g4=RegExp(ps,"g"),D1=RegExp(Us+"(?="+Us+")|"+_4+Nh,"g"),b4=RegExp([Ka+"?"+bs+"+"+Oh+"(?="+[Un,Ka,"$"].join("|")+")",f4+"+"+Ch+"(?="+[Un,Ka+Ih,"$"].join("|")+")",Ka+"?"+Ih+"+"+Oh,Ka+"+"+Ch,m4,h4,gs,v4].join("|"),"g"),y4=RegExp("["+kh+hi+ln+Tn+"]"),w4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,x4=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],S4=-1,gn={};gn[Ne]=gn[me]=gn[Ze]=gn[N]=gn[j]=gn[Z]=gn[Q]=gn[se]=gn[W]=!0,gn[Ke]=gn[qe]=gn[nt]=gn[ke]=gn[be]=gn[Se]=gn[Xe]=gn[X]=gn[P]=gn[G]=gn[re]=gn[ce]=gn[ae]=gn[ge]=gn[Pe]=!1;var _n={};_n[Ke]=_n[qe]=_n[nt]=_n[be]=_n[ke]=_n[Se]=_n[Ne]=_n[me]=_n[Ze]=_n[N]=_n[j]=_n[P]=_n[G]=_n[re]=_n[ce]=_n[ae]=_n[ge]=_n[Be]=_n[Z]=_n[Q]=_n[se]=_n[W]=!0,_n[Xe]=_n[X]=_n[Pe]=!1;var A4={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},E4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},M4={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},T4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},R4=parseFloat,k4=parseInt,Fh=typeof ml=="object"&&ml&&ml.Object===Object&&ml,I4=typeof self=="object"&&self&&self.Object===Object&&self,Dn=Fh||I4||Function("return this")(),$1=t&&!t.nodeType&&t,ta=$1&&!0&&e&&!e.nodeType&&e,Ph=ta&&ta.exports===$1,q1=Ph&&Fh.process,jr=function(){try{var de=ta&&ta.require&&ta.require("util").types;return de||q1&&q1.binding&&q1.binding("util")}catch{}}(),Hh=jr&&jr.isArrayBuffer,jh=jr&&jr.isDate,Uh=jr&&jr.isMap,Dh=jr&&jr.isRegExp,$h=jr&&jr.isSet,qh=jr&&jr.isTypedArray;function Tr(de,Fe,Te){switch(Te.length){case 0:return de.call(Fe);case 1:return de.call(Fe,Te[0]);case 2:return de.call(Fe,Te[0],Te[1]);case 3:return de.call(Fe,Te[0],Te[1],Te[2])}return de.apply(Fe,Te)}function O4(de,Fe,Te,lt){for(var At=-1,Kt=de==null?0:de.length;++At<Kt;){var Nn=de[At];Fe(lt,Nn,Te(Nn),de)}return lt}function Ur(de,Fe){for(var Te=-1,lt=de==null?0:de.length;++Te<lt&&Fe(de[Te],Te,de)!==!1;);return de}function C4(de,Fe){for(var Te=de==null?0:de.length;Te--&&Fe(de[Te],Te,de)!==!1;);return de}function Vh(de,Fe){for(var Te=-1,lt=de==null?0:de.length;++Te<lt;)if(!Fe(de[Te],Te,de))return!1;return!0}function vi(de,Fe){for(var Te=-1,lt=de==null?0:de.length,At=0,Kt=[];++Te<lt;){var Nn=de[Te];Fe(Nn,Te,de)&&(Kt[At++]=Nn)}return Kt}function xc(de,Fe){var Te=de==null?0:de.length;return!!Te&&Ya(de,Fe,0)>-1}function V1(de,Fe,Te){for(var lt=-1,At=de==null?0:de.length;++lt<At;)if(Te(Fe,de[lt]))return!0;return!1}function bn(de,Fe){for(var Te=-1,lt=de==null?0:de.length,At=Array(lt);++Te<lt;)At[Te]=Fe(de[Te],Te,de);return At}function _i(de,Fe){for(var Te=-1,lt=Fe.length,At=de.length;++Te<lt;)de[At+Te]=Fe[Te];return de}function z1(de,Fe,Te,lt){var At=-1,Kt=de==null?0:de.length;for(lt&&Kt&&(Te=de[++At]);++At<Kt;)Te=Fe(Te,de[At],At,de);return Te}function L4(de,Fe,Te,lt){var At=de==null?0:de.length;for(lt&&At&&(Te=de[--At]);At--;)Te=Fe(Te,de[At],At,de);return Te}function K1(de,Fe){for(var Te=-1,lt=de==null?0:de.length;++Te<lt;)if(Fe(de[Te],Te,de))return!0;return!1}var B4=Y1("length");function N4(de){return de.split("")}function F4(de){return de.match(St)||[]}function zh(de,Fe,Te){var lt;return Te(de,function(At,Kt,Nn){if(Fe(At,Kt,Nn))return lt=Kt,!1}),lt}function Sc(de,Fe,Te,lt){for(var At=de.length,Kt=Te+(lt?1:-1);lt?Kt--:++Kt<At;)if(Fe(de[Kt],Kt,de))return Kt;return-1}function Ya(de,Fe,Te){return Fe===Fe?W4(de,Fe,Te):Sc(de,Kh,Te)}function P4(de,Fe,Te,lt){for(var At=Te-1,Kt=de.length;++At<Kt;)if(lt(de[At],Fe))return At;return-1}function Kh(de){return de!==de}function Yh(de,Fe){var Te=de==null?0:de.length;return Te?X1(de,Fe)/Te:g}function Y1(de){return function(Fe){return Fe==null?n:Fe[de]}}function W1(de){return function(Fe){return de==null?n:de[Fe]}}function Wh(de,Fe,Te,lt,At){return At(de,function(Kt,Nn,cn){Te=lt?(lt=!1,Kt):Fe(Te,Kt,Nn,cn)}),Te}function H4(de,Fe){var Te=de.length;for(de.sort(Fe);Te--;)de[Te]=de[Te].value;return de}function X1(de,Fe){for(var Te,lt=-1,At=de.length;++lt<At;){var Kt=Fe(de[lt]);Kt!==n&&(Te=Te===n?Kt:Te+Kt)}return Te}function G1(de,Fe){for(var Te=-1,lt=Array(de);++Te<de;)lt[Te]=Fe(Te);return lt}function j4(de,Fe){return bn(Fe,function(Te){return[Te,de[Te]]})}function Xh(de){return de&&de.slice(0,Jh(de)+1).replace($e,"")}function Rr(de){return function(Fe){return de(Fe)}}function Z1(de,Fe){return bn(Fe,function(Te){return de[Te]})}function Ko(de,Fe){return de.has(Fe)}function Gh(de,Fe){for(var Te=-1,lt=de.length;++Te<lt&&Ya(Fe,de[Te],0)>-1;);return Te}function Zh(de,Fe){for(var Te=de.length;Te--&&Ya(Fe,de[Te],0)>-1;);return Te}function U4(de,Fe){for(var Te=de.length,lt=0;Te--;)de[Te]===Fe&&++lt;return lt}var D4=W1(A4),$4=W1(E4);function q4(de){return"\\"+T4[de]}function V4(de,Fe){return de==null?n:de[Fe]}function Wa(de){return y4.test(de)}function z4(de){return w4.test(de)}function K4(de){for(var Fe,Te=[];!(Fe=de.next()).done;)Te.push(Fe.value);return Te}function Q1(de){var Fe=-1,Te=Array(de.size);return de.forEach(function(lt,At){Te[++Fe]=[At,lt]}),Te}function Qh(de,Fe){return function(Te){return de(Fe(Te))}}function pi(de,Fe){for(var Te=-1,lt=de.length,At=0,Kt=[];++Te<lt;){var Nn=de[Te];(Nn===Fe||Nn===p)&&(de[Te]=p,Kt[At++]=Te)}return Kt}function Ac(de){var Fe=-1,Te=Array(de.size);return de.forEach(function(lt){Te[++Fe]=lt}),Te}function Y4(de){var Fe=-1,Te=Array(de.size);return de.forEach(function(lt){Te[++Fe]=[lt,lt]}),Te}function W4(de,Fe,Te){for(var lt=Te-1,At=de.length;++lt<At;)if(de[lt]===Fe)return lt;return-1}function X4(de,Fe,Te){for(var lt=Te+1;lt--;)if(de[lt]===Fe)return lt;return lt}function Xa(de){return Wa(de)?Z4(de):B4(de)}function rs(de){return Wa(de)?Q4(de):N4(de)}function Jh(de){for(var Fe=de.length;Fe--&&ft.test(de.charAt(Fe)););return Fe}var G4=W1(M4);function Z4(de){for(var Fe=D1.lastIndex=0;D1.test(de);)++Fe;return Fe}function Q4(de){return de.match(D1)||[]}function J4(de){return de.match(b4)||[]}var e5=function de(Fe){Fe=Fe==null?Dn:Ga.defaults(Dn.Object(),Fe,Ga.pick(Dn,x4));var Te=Fe.Array,lt=Fe.Date,At=Fe.Error,Kt=Fe.Function,Nn=Fe.Math,cn=Fe.Object,J1=Fe.RegExp,t5=Fe.String,Dr=Fe.TypeError,Ec=Te.prototype,n5=Kt.prototype,Za=cn.prototype,Mc=Fe["__core-js_shared__"],Tc=n5.toString,Qt=Za.hasOwnProperty,r5=0,em=function(){var r=/[^.]+$/.exec(Mc&&Mc.keys&&Mc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Rc=Za.toString,s5=Tc.call(cn),i5=Dn._,a5=J1("^"+Tc.call(Qt).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kc=Ph?Fe.Buffer:n,gi=Fe.Symbol,Ic=Fe.Uint8Array,tm=kc?kc.allocUnsafe:n,Oc=Qh(cn.getPrototypeOf,cn),nm=cn.create,rm=Za.propertyIsEnumerable,Cc=Ec.splice,sm=gi?gi.isConcatSpreadable:n,Yo=gi?gi.iterator:n,na=gi?gi.toStringTag:n,Lc=function(){try{var r=oa(cn,"defineProperty");return r({},"",{}),r}catch{}}(),o5=Fe.clearTimeout!==Dn.clearTimeout&&Fe.clearTimeout,l5=lt&&lt.now!==Dn.Date.now&&lt.now,c5=Fe.setTimeout!==Dn.setTimeout&&Fe.setTimeout,Bc=Nn.ceil,Nc=Nn.floor,ef=cn.getOwnPropertySymbols,u5=kc?kc.isBuffer:n,im=Fe.isFinite,f5=Ec.join,d5=Qh(cn.keys,cn),Fn=Nn.max,Yn=Nn.min,h5=lt.now,m5=Fe.parseInt,am=Nn.random,v5=Ec.reverse,tf=oa(Fe,"DataView"),Wo=oa(Fe,"Map"),nf=oa(Fe,"Promise"),Qa=oa(Fe,"Set"),Xo=oa(Fe,"WeakMap"),Go=oa(cn,"create"),Fc=Xo&&new Xo,Ja={},_5=la(tf),p5=la(Wo),g5=la(nf),b5=la(Qa),y5=la(Xo),Pc=gi?gi.prototype:n,Zo=Pc?Pc.valueOf:n,om=Pc?Pc.toString:n;function q(r){if(Sn(r)&&!Et(r)&&!(r instanceof Pt)){if(r instanceof $r)return r;if(Qt.call(r,"__wrapped__"))return lv(r)}return new $r(r)}var eo=function(){function r(){}return function(i){if(!wn(i))return{};if(nm)return nm(i);r.prototype=i;var l=new r;return r.prototype=n,l}}();function Hc(){}function $r(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}q.templateSettings={escape:ut,evaluate:Ve,interpolate:ct,variable:"",imports:{_:q}},q.prototype=Hc.prototype,q.prototype.constructor=q,$r.prototype=eo(Hc.prototype),$r.prototype.constructor=$r;function Pt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=I,this.__views__=[]}function w5(){var r=new Pt(this.__wrapped__);return r.__actions__=vr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=vr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=vr(this.__views__),r}function x5(){if(this.__filtered__){var r=new Pt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function S5(){var r=this.__wrapped__.value(),i=this.__dir__,l=Et(r),_=i<0,B=l?r.length:0,K=Nb(0,B,this.__views__),J=K.start,ie=K.end,_e=ie-J,je=_?ie:J-1,Ue=this.__iteratees__,Ye=Ue.length,at=0,dt=Yn(_e,this.__takeCount__);if(!l||!_&&B==_e&&dt==_e)return Om(r,this.__actions__);var gt=[];e:for(;_e--&&at<dt;){je+=i;for(var kt=-1,bt=r[je];++kt<Ye;){var Nt=Ue[kt],Ht=Nt.iteratee,Or=Nt.type,lr=Ht(bt);if(Or==R)bt=lr;else if(!lr){if(Or==k)continue e;break e}}gt[at++]=bt}return gt}Pt.prototype=eo(Hc.prototype),Pt.prototype.constructor=Pt;function ra(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var _=r[i];this.set(_[0],_[1])}}function A5(){this.__data__=Go?Go(null):{},this.size=0}function E5(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function M5(r){var i=this.__data__;if(Go){var l=i[r];return l===m?n:l}return Qt.call(i,r)?i[r]:n}function T5(r){var i=this.__data__;return Go?i[r]!==n:Qt.call(i,r)}function R5(r,i){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=Go&&i===n?m:i,this}ra.prototype.clear=A5,ra.prototype.delete=E5,ra.prototype.get=M5,ra.prototype.has=T5,ra.prototype.set=R5;function Ds(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var _=r[i];this.set(_[0],_[1])}}function k5(){this.__data__=[],this.size=0}function I5(r){var i=this.__data__,l=jc(i,r);if(l<0)return!1;var _=i.length-1;return l==_?i.pop():Cc.call(i,l,1),--this.size,!0}function O5(r){var i=this.__data__,l=jc(i,r);return l<0?n:i[l][1]}function C5(r){return jc(this.__data__,r)>-1}function L5(r,i){var l=this.__data__,_=jc(l,r);return _<0?(++this.size,l.push([r,i])):l[_][1]=i,this}Ds.prototype.clear=k5,Ds.prototype.delete=I5,Ds.prototype.get=O5,Ds.prototype.has=C5,Ds.prototype.set=L5;function $s(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var _=r[i];this.set(_[0],_[1])}}function B5(){this.size=0,this.__data__={hash:new ra,map:new(Wo||Ds),string:new ra}}function N5(r){var i=Zc(this,r).delete(r);return this.size-=i?1:0,i}function F5(r){return Zc(this,r).get(r)}function P5(r){return Zc(this,r).has(r)}function H5(r,i){var l=Zc(this,r),_=l.size;return l.set(r,i),this.size+=l.size==_?0:1,this}$s.prototype.clear=B5,$s.prototype.delete=N5,$s.prototype.get=F5,$s.prototype.has=P5,$s.prototype.set=H5;function sa(r){var i=-1,l=r==null?0:r.length;for(this.__data__=new $s;++i<l;)this.add(r[i])}function j5(r){return this.__data__.set(r,m),this}function U5(r){return this.__data__.has(r)}sa.prototype.add=sa.prototype.push=j5,sa.prototype.has=U5;function ss(r){var i=this.__data__=new Ds(r);this.size=i.size}function D5(){this.__data__=new Ds,this.size=0}function $5(r){var i=this.__data__,l=i.delete(r);return this.size=i.size,l}function q5(r){return this.__data__.get(r)}function V5(r){return this.__data__.has(r)}function z5(r,i){var l=this.__data__;if(l instanceof Ds){var _=l.__data__;if(!Wo||_.length<o-1)return _.push([r,i]),this.size=++l.size,this;l=this.__data__=new $s(_)}return l.set(r,i),this.size=l.size,this}ss.prototype.clear=D5,ss.prototype.delete=$5,ss.prototype.get=q5,ss.prototype.has=V5,ss.prototype.set=z5;function lm(r,i){var l=Et(r),_=!l&&ca(r),B=!l&&!_&&Si(r),K=!l&&!_&&!B&&so(r),J=l||_||B||K,ie=J?G1(r.length,t5):[],_e=ie.length;for(var je in r)(i||Qt.call(r,je))&&!(J&&(je=="length"||B&&(je=="offset"||je=="parent")||K&&(je=="buffer"||je=="byteLength"||je=="byteOffset")||Ks(je,_e)))&&ie.push(je);return ie}function cm(r){var i=r.length;return i?r[mf(0,i-1)]:n}function K5(r,i){return Qc(vr(r),ia(i,0,r.length))}function Y5(r){return Qc(vr(r))}function rf(r,i,l){(l!==n&&!is(r[i],l)||l===n&&!(i in r))&&qs(r,i,l)}function Qo(r,i,l){var _=r[i];(!(Qt.call(r,i)&&is(_,l))||l===n&&!(i in r))&&qs(r,i,l)}function jc(r,i){for(var l=r.length;l--;)if(is(r[l][0],i))return l;return-1}function W5(r,i,l,_){return bi(r,function(B,K,J){i(_,B,l(B),J)}),_}function um(r,i){return r&&ws(i,Hn(i),r)}function X5(r,i){return r&&ws(i,pr(i),r)}function qs(r,i,l){i=="__proto__"&&Lc?Lc(r,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[i]=l}function sf(r,i){for(var l=-1,_=i.length,B=Te(_),K=r==null;++l<_;)B[l]=K?n:jf(r,i[l]);return B}function ia(r,i,l){return r===r&&(l!==n&&(r=r<=l?r:l),i!==n&&(r=r>=i?r:i)),r}function qr(r,i,l,_,B,K){var J,ie=i&h,_e=i&w,je=i&M;if(l&&(J=B?l(r,_,B,K):l(r)),J!==n)return J;if(!wn(r))return r;var Ue=Et(r);if(Ue){if(J=Pb(r),!ie)return vr(r,J)}else{var Ye=Wn(r),at=Ye==X||Ye==O;if(Si(r))return Bm(r,ie);if(Ye==re||Ye==Ke||at&&!B){if(J=_e||at?{}:Jm(r),!ie)return _e?Mb(r,X5(J,r)):Eb(r,um(J,r))}else{if(!_n[Ye])return B?r:{};J=Hb(r,Ye,ie)}}K||(K=new ss);var dt=K.get(r);if(dt)return dt;K.set(r,J),Rv(r)?r.forEach(function(bt){J.add(qr(bt,i,l,bt,r,K))}):Mv(r)&&r.forEach(function(bt,Nt){J.set(Nt,qr(bt,i,l,Nt,r,K))});var gt=je?_e?Ef:Af:_e?pr:Hn,kt=Ue?n:gt(r);return Ur(kt||r,function(bt,Nt){kt&&(Nt=bt,bt=r[Nt]),Qo(J,Nt,qr(bt,i,l,Nt,r,K))}),J}function G5(r){var i=Hn(r);return function(l){return fm(l,r,i)}}function fm(r,i,l){var _=l.length;if(r==null)return!_;for(r=cn(r);_--;){var B=l[_],K=i[B],J=r[B];if(J===n&&!(B in r)||!K(J))return!1}return!0}function dm(r,i,l){if(typeof r!="function")throw new Dr(c);return il(function(){r.apply(n,l)},i)}function Jo(r,i,l,_){var B=-1,K=xc,J=!0,ie=r.length,_e=[],je=i.length;if(!ie)return _e;l&&(i=bn(i,Rr(l))),_?(K=V1,J=!1):i.length>=o&&(K=Ko,J=!1,i=new sa(i));e:for(;++B<ie;){var Ue=r[B],Ye=l==null?Ue:l(Ue);if(Ue=_||Ue!==0?Ue:0,J&&Ye===Ye){for(var at=je;at--;)if(i[at]===Ye)continue e;_e.push(Ue)}else K(i,Ye,_)||_e.push(Ue)}return _e}var bi=jm(ys),hm=jm(of,!0);function Z5(r,i){var l=!0;return bi(r,function(_,B,K){return l=!!i(_,B,K),l}),l}function Uc(r,i,l){for(var _=-1,B=r.length;++_<B;){var K=r[_],J=i(K);if(J!=null&&(ie===n?J===J&&!Ir(J):l(J,ie)))var ie=J,_e=K}return _e}function Q5(r,i,l,_){var B=r.length;for(l=Rt(l),l<0&&(l=-l>B?0:B+l),_=_===n||_>B?B:Rt(_),_<0&&(_+=B),_=l>_?0:Iv(_);l<_;)r[l++]=i;return r}function mm(r,i){var l=[];return bi(r,function(_,B,K){i(_,B,K)&&l.push(_)}),l}function $n(r,i,l,_,B){var K=-1,J=r.length;for(l||(l=Ub),B||(B=[]);++K<J;){var ie=r[K];i>0&&l(ie)?i>1?$n(ie,i-1,l,_,B):_i(B,ie):_||(B[B.length]=ie)}return B}var af=Um(),vm=Um(!0);function ys(r,i){return r&&af(r,i,Hn)}function of(r,i){return r&&vm(r,i,Hn)}function Dc(r,i){return vi(i,function(l){return Ys(r[l])})}function aa(r,i){i=wi(i,r);for(var l=0,_=i.length;r!=null&&l<_;)r=r[xs(i[l++])];return l&&l==_?r:n}function _m(r,i,l){var _=i(r);return Et(r)?_:_i(_,l(r))}function ar(r){return r==null?r===n?Ce:ee:na&&na in cn(r)?Bb(r):Yb(r)}function lf(r,i){return r>i}function J5(r,i){return r!=null&&Qt.call(r,i)}function eb(r,i){return r!=null&&i in cn(r)}function tb(r,i,l){return r>=Yn(i,l)&&r<Fn(i,l)}function cf(r,i,l){for(var _=l?V1:xc,B=r[0].length,K=r.length,J=K,ie=Te(K),_e=1/0,je=[];J--;){var Ue=r[J];J&&i&&(Ue=bn(Ue,Rr(i))),_e=Yn(Ue.length,_e),ie[J]=!l&&(i||B>=120&&Ue.length>=120)?new sa(J&&Ue):n}Ue=r[0];var Ye=-1,at=ie[0];e:for(;++Ye<B&&je.length<_e;){var dt=Ue[Ye],gt=i?i(dt):dt;if(dt=l||dt!==0?dt:0,!(at?Ko(at,gt):_(je,gt,l))){for(J=K;--J;){var kt=ie[J];if(!(kt?Ko(kt,gt):_(r[J],gt,l)))continue e}at&&at.push(gt),je.push(dt)}}return je}function nb(r,i,l,_){return ys(r,function(B,K,J){i(_,l(B),K,J)}),_}function el(r,i,l){i=wi(i,r),r=rv(r,i);var _=r==null?r:r[xs(zr(i))];return _==null?n:Tr(_,r,l)}function pm(r){return Sn(r)&&ar(r)==Ke}function rb(r){return Sn(r)&&ar(r)==nt}function sb(r){return Sn(r)&&ar(r)==Se}function tl(r,i,l,_,B){return r===i?!0:r==null||i==null||!Sn(r)&&!Sn(i)?r!==r&&i!==i:ib(r,i,l,_,tl,B)}function ib(r,i,l,_,B,K){var J=Et(r),ie=Et(i),_e=J?qe:Wn(r),je=ie?qe:Wn(i);_e=_e==Ke?re:_e,je=je==Ke?re:je;var Ue=_e==re,Ye=je==re,at=_e==je;if(at&&Si(r)){if(!Si(i))return!1;J=!0,Ue=!1}if(at&&!Ue)return K||(K=new ss),J||so(r)?Gm(r,i,l,_,B,K):Cb(r,i,_e,l,_,B,K);if(!(l&u)){var dt=Ue&&Qt.call(r,"__wrapped__"),gt=Ye&&Qt.call(i,"__wrapped__");if(dt||gt){var kt=dt?r.value():r,bt=gt?i.value():i;return K||(K=new ss),B(kt,bt,l,_,K)}}return at?(K||(K=new ss),Lb(r,i,l,_,B,K)):!1}function ab(r){return Sn(r)&&Wn(r)==P}function uf(r,i,l,_){var B=l.length,K=B,J=!_;if(r==null)return!K;for(r=cn(r);B--;){var ie=l[B];if(J&&ie[2]?ie[1]!==r[ie[0]]:!(ie[0]in r))return!1}for(;++B<K;){ie=l[B];var _e=ie[0],je=r[_e],Ue=ie[1];if(J&&ie[2]){if(je===n&&!(_e in r))return!1}else{var Ye=new ss;if(_)var at=_(je,Ue,_e,r,i,Ye);if(!(at===n?tl(Ue,je,u|$,_,Ye):at))return!1}}return!0}function gm(r){if(!wn(r)||$b(r))return!1;var i=Ys(r)?a5:sr;return i.test(la(r))}function ob(r){return Sn(r)&&ar(r)==ce}function lb(r){return Sn(r)&&Wn(r)==ae}function cb(r){return Sn(r)&&su(r.length)&&!!gn[ar(r)]}function bm(r){return typeof r=="function"?r:r==null?gr:typeof r=="object"?Et(r)?xm(r[0],r[1]):wm(r):Dv(r)}function ff(r){if(!sl(r))return d5(r);var i=[];for(var l in cn(r))Qt.call(r,l)&&l!="constructor"&&i.push(l);return i}function ub(r){if(!wn(r))return Kb(r);var i=sl(r),l=[];for(var _ in r)_=="constructor"&&(i||!Qt.call(r,_))||l.push(_);return l}function df(r,i){return r<i}function ym(r,i){var l=-1,_=_r(r)?Te(r.length):[];return bi(r,function(B,K,J){_[++l]=i(B,K,J)}),_}function wm(r){var i=Tf(r);return i.length==1&&i[0][2]?tv(i[0][0],i[0][1]):function(l){return l===r||uf(l,r,i)}}function xm(r,i){return kf(r)&&ev(i)?tv(xs(r),i):function(l){var _=jf(l,r);return _===n&&_===i?Uf(l,r):tl(i,_,u|$)}}function $c(r,i,l,_,B){r!==i&&af(i,function(K,J){if(B||(B=new ss),wn(K))fb(r,i,J,l,$c,_,B);else{var ie=_?_(Of(r,J),K,J+"",r,i,B):n;ie===n&&(ie=K),rf(r,J,ie)}},pr)}function fb(r,i,l,_,B,K,J){var ie=Of(r,l),_e=Of(i,l),je=J.get(_e);if(je){rf(r,l,je);return}var Ue=K?K(ie,_e,l+"",r,i,J):n,Ye=Ue===n;if(Ye){var at=Et(_e),dt=!at&&Si(_e),gt=!at&&!dt&&so(_e);Ue=_e,at||dt||gt?Et(ie)?Ue=ie:Rn(ie)?Ue=vr(ie):dt?(Ye=!1,Ue=Bm(_e,!0)):gt?(Ye=!1,Ue=Nm(_e,!0)):Ue=[]:al(_e)||ca(_e)?(Ue=ie,ca(ie)?Ue=Ov(ie):(!wn(ie)||Ys(ie))&&(Ue=Jm(_e))):Ye=!1}Ye&&(J.set(_e,Ue),B(Ue,_e,_,K,J),J.delete(_e)),rf(r,l,Ue)}function Sm(r,i){var l=r.length;if(!!l)return i+=i<0?l:0,Ks(i,l)?r[i]:n}function Am(r,i,l){i.length?i=bn(i,function(K){return Et(K)?function(J){return aa(J,K.length===1?K[0]:K)}:K}):i=[gr];var _=-1;i=bn(i,Rr(_t()));var B=ym(r,function(K,J,ie){var _e=bn(i,function(je){return je(K)});return{criteria:_e,index:++_,value:K}});return H4(B,function(K,J){return Ab(K,J,l)})}function db(r,i){return Em(r,i,function(l,_){return Uf(r,_)})}function Em(r,i,l){for(var _=-1,B=i.length,K={};++_<B;){var J=i[_],ie=aa(r,J);l(ie,J)&&nl(K,wi(J,r),ie)}return K}function hb(r){return function(i){return aa(i,r)}}function hf(r,i,l,_){var B=_?P4:Ya,K=-1,J=i.length,ie=r;for(r===i&&(i=vr(i)),l&&(ie=bn(r,Rr(l)));++K<J;)for(var _e=0,je=i[K],Ue=l?l(je):je;(_e=B(ie,Ue,_e,_))>-1;)ie!==r&&Cc.call(ie,_e,1),Cc.call(r,_e,1);return r}function Mm(r,i){for(var l=r?i.length:0,_=l-1;l--;){var B=i[l];if(l==_||B!==K){var K=B;Ks(B)?Cc.call(r,B,1):pf(r,B)}}return r}function mf(r,i){return r+Nc(am()*(i-r+1))}function mb(r,i,l,_){for(var B=-1,K=Fn(Bc((i-r)/(l||1)),0),J=Te(K);K--;)J[_?K:++B]=r,r+=l;return J}function vf(r,i){var l="";if(!r||i<1||i>Y)return l;do i%2&&(l+=r),i=Nc(i/2),i&&(r+=r);while(i);return l}function Ct(r,i){return Cf(nv(r,i,gr),r+"")}function vb(r){return cm(io(r))}function _b(r,i){var l=io(r);return Qc(l,ia(i,0,l.length))}function nl(r,i,l,_){if(!wn(r))return r;i=wi(i,r);for(var B=-1,K=i.length,J=K-1,ie=r;ie!=null&&++B<K;){var _e=xs(i[B]),je=l;if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return r;if(B!=J){var Ue=ie[_e];je=_?_(Ue,_e,ie):n,je===n&&(je=wn(Ue)?Ue:Ks(i[B+1])?[]:{})}Qo(ie,_e,je),ie=ie[_e]}return r}var Tm=Fc?function(r,i){return Fc.set(r,i),r}:gr,pb=Lc?function(r,i){return Lc(r,"toString",{configurable:!0,enumerable:!1,value:$f(i),writable:!0})}:gr;function gb(r){return Qc(io(r))}function Vr(r,i,l){var _=-1,B=r.length;i<0&&(i=-i>B?0:B+i),l=l>B?B:l,l<0&&(l+=B),B=i>l?0:l-i>>>0,i>>>=0;for(var K=Te(B);++_<B;)K[_]=r[_+i];return K}function bb(r,i){var l;return bi(r,function(_,B,K){return l=i(_,B,K),!l}),!!l}function qc(r,i,l){var _=0,B=r==null?_:r.length;if(typeof i=="number"&&i===i&&B<=he){for(;_<B;){var K=_+B>>>1,J=r[K];J!==null&&!Ir(J)&&(l?J<=i:J<i)?_=K+1:B=K}return B}return _f(r,i,gr,l)}function _f(r,i,l,_){var B=0,K=r==null?0:r.length;if(K===0)return 0;i=l(i);for(var J=i!==i,ie=i===null,_e=Ir(i),je=i===n;B<K;){var Ue=Nc((B+K)/2),Ye=l(r[Ue]),at=Ye!==n,dt=Ye===null,gt=Ye===Ye,kt=Ir(Ye);if(J)var bt=_||gt;else je?bt=gt&&(_||at):ie?bt=gt&&at&&(_||!dt):_e?bt=gt&&at&&!dt&&(_||!kt):dt||kt?bt=!1:bt=_?Ye<=i:Ye<i;bt?B=Ue+1:K=Ue}return Yn(K,le)}function Rm(r,i){for(var l=-1,_=r.length,B=0,K=[];++l<_;){var J=r[l],ie=i?i(J):J;if(!l||!is(ie,_e)){var _e=ie;K[B++]=J===0?0:J}}return K}function km(r){return typeof r=="number"?r:Ir(r)?g:+r}function kr(r){if(typeof r=="string")return r;if(Et(r))return bn(r,kr)+"";if(Ir(r))return om?om.call(r):"";var i=r+"";return i=="0"&&1/r==-ne?"-0":i}function yi(r,i,l){var _=-1,B=xc,K=r.length,J=!0,ie=[],_e=ie;if(l)J=!1,B=V1;else if(K>=o){var je=i?null:Ib(r);if(je)return Ac(je);J=!1,B=Ko,_e=new sa}else _e=i?[]:ie;e:for(;++_<K;){var Ue=r[_],Ye=i?i(Ue):Ue;if(Ue=l||Ue!==0?Ue:0,J&&Ye===Ye){for(var at=_e.length;at--;)if(_e[at]===Ye)continue e;i&&_e.push(Ye),ie.push(Ue)}else B(_e,Ye,l)||(_e!==ie&&_e.push(Ye),ie.push(Ue))}return ie}function pf(r,i){return i=wi(i,r),r=rv(r,i),r==null||delete r[xs(zr(i))]}function Im(r,i,l,_){return nl(r,i,l(aa(r,i)),_)}function Vc(r,i,l,_){for(var B=r.length,K=_?B:-1;(_?K--:++K<B)&&i(r[K],K,r););return l?Vr(r,_?0:K,_?K+1:B):Vr(r,_?K+1:0,_?B:K)}function Om(r,i){var l=r;return l instanceof Pt&&(l=l.value()),z1(i,function(_,B){return B.func.apply(B.thisArg,_i([_],B.args))},l)}function gf(r,i,l){var _=r.length;if(_<2)return _?yi(r[0]):[];for(var B=-1,K=Te(_);++B<_;)for(var J=r[B],ie=-1;++ie<_;)ie!=B&&(K[B]=Jo(K[B]||J,r[ie],i,l));return yi($n(K,1),i,l)}function Cm(r,i,l){for(var _=-1,B=r.length,K=i.length,J={};++_<B;){var ie=_<K?i[_]:n;l(J,r[_],ie)}return J}function bf(r){return Rn(r)?r:[]}function yf(r){return typeof r=="function"?r:gr}function wi(r,i){return Et(r)?r:kf(r,i)?[r]:ov(Xt(r))}var yb=Ct;function xi(r,i,l){var _=r.length;return l=l===n?_:l,!i&&l>=_?r:Vr(r,i,l)}var Lm=o5||function(r){return Dn.clearTimeout(r)};function Bm(r,i){if(i)return r.slice();var l=r.length,_=tm?tm(l):new r.constructor(l);return r.copy(_),_}function wf(r){var i=new r.constructor(r.byteLength);return new Ic(i).set(new Ic(r)),i}function wb(r,i){var l=i?wf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}function xb(r){var i=new r.constructor(r.source,on.exec(r));return i.lastIndex=r.lastIndex,i}function Sb(r){return Zo?cn(Zo.call(r)):{}}function Nm(r,i){var l=i?wf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}function Fm(r,i){if(r!==i){var l=r!==n,_=r===null,B=r===r,K=Ir(r),J=i!==n,ie=i===null,_e=i===i,je=Ir(i);if(!ie&&!je&&!K&&r>i||K&&J&&_e&&!ie&&!je||_&&J&&_e||!l&&_e||!B)return 1;if(!_&&!K&&!je&&r<i||je&&l&&B&&!_&&!K||ie&&l&&B||!J&&B||!_e)return-1}return 0}function Ab(r,i,l){for(var _=-1,B=r.criteria,K=i.criteria,J=B.length,ie=l.length;++_<J;){var _e=Fm(B[_],K[_]);if(_e){if(_>=ie)return _e;var je=l[_];return _e*(je=="desc"?-1:1)}}return r.index-i.index}function Pm(r,i,l,_){for(var B=-1,K=r.length,J=l.length,ie=-1,_e=i.length,je=Fn(K-J,0),Ue=Te(_e+je),Ye=!_;++ie<_e;)Ue[ie]=i[ie];for(;++B<J;)(Ye||B<K)&&(Ue[l[B]]=r[B]);for(;je--;)Ue[ie++]=r[B++];return Ue}function Hm(r,i,l,_){for(var B=-1,K=r.length,J=-1,ie=l.length,_e=-1,je=i.length,Ue=Fn(K-ie,0),Ye=Te(Ue+je),at=!_;++B<Ue;)Ye[B]=r[B];for(var dt=B;++_e<je;)Ye[dt+_e]=i[_e];for(;++J<ie;)(at||B<K)&&(Ye[dt+l[J]]=r[B++]);return Ye}function vr(r,i){var l=-1,_=r.length;for(i||(i=Te(_));++l<_;)i[l]=r[l];return i}function ws(r,i,l,_){var B=!l;l||(l={});for(var K=-1,J=i.length;++K<J;){var ie=i[K],_e=_?_(l[ie],r[ie],ie,l,r):n;_e===n&&(_e=r[ie]),B?qs(l,ie,_e):Qo(l,ie,_e)}return l}function Eb(r,i){return ws(r,Rf(r),i)}function Mb(r,i){return ws(r,Zm(r),i)}function zc(r,i){return function(l,_){var B=Et(l)?O4:W5,K=i?i():{};return B(l,r,_t(_,2),K)}}function to(r){return Ct(function(i,l){var _=-1,B=l.length,K=B>1?l[B-1]:n,J=B>2?l[2]:n;for(K=r.length>3&&typeof K=="function"?(B--,K):n,J&&or(l[0],l[1],J)&&(K=B<3?n:K,B=1),i=cn(i);++_<B;){var ie=l[_];ie&&r(i,ie,_,K)}return i})}function jm(r,i){return function(l,_){if(l==null)return l;if(!_r(l))return r(l,_);for(var B=l.length,K=i?B:-1,J=cn(l);(i?K--:++K<B)&&_(J[K],K,J)!==!1;);return l}}function Um(r){return function(i,l,_){for(var B=-1,K=cn(i),J=_(i),ie=J.length;ie--;){var _e=J[r?ie:++B];if(l(K[_e],_e,K)===!1)break}return i}}function Tb(r,i,l){var _=i&U,B=rl(r);function K(){var J=this&&this!==Dn&&this instanceof K?B:r;return J.apply(_?l:this,arguments)}return K}function Dm(r){return function(i){i=Xt(i);var l=Wa(i)?rs(i):n,_=l?l[0]:i.charAt(0),B=l?xi(l,1).join(""):i.slice(1);return _[r]()+B}}function no(r){return function(i){return z1(jv(Hv(i).replace(p4,"")),r,"")}}function rl(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var l=eo(r.prototype),_=r.apply(l,i);return wn(_)?_:l}}function Rb(r,i,l){var _=rl(r);function B(){for(var K=arguments.length,J=Te(K),ie=K,_e=ro(B);ie--;)J[ie]=arguments[ie];var je=K<3&&J[0]!==_e&&J[K-1]!==_e?[]:pi(J,_e);if(K-=je.length,K<l)return Km(r,i,Kc,B.placeholder,n,J,je,n,n,l-K);var Ue=this&&this!==Dn&&this instanceof B?_:r;return Tr(Ue,this,J)}return B}function $m(r){return function(i,l,_){var B=cn(i);if(!_r(i)){var K=_t(l,3);i=Hn(i),l=function(ie){return K(B[ie],ie,B)}}var J=r(i,l,_);return J>-1?B[K?i[J]:J]:n}}function qm(r){return zs(function(i){var l=i.length,_=l,B=$r.prototype.thru;for(r&&i.reverse();_--;){var K=i[_];if(typeof K!="function")throw new Dr(c);if(B&&!J&&Gc(K)=="wrapper")var J=new $r([],!0)}for(_=J?_:l;++_<l;){K=i[_];var ie=Gc(K),_e=ie=="wrapper"?Mf(K):n;_e&&If(_e[0])&&_e[1]==(v|C|L|E)&&!_e[4].length&&_e[9]==1?J=J[Gc(_e[0])].apply(J,_e[3]):J=K.length==1&&If(K)?J[ie]():J.thru(K)}return function(){var je=arguments,Ue=je[0];if(J&&je.length==1&&Et(Ue))return J.plant(Ue).value();for(var Ye=0,at=l?i[Ye].apply(this,je):Ue;++Ye<l;)at=i[Ye].call(this,at);return at}})}function Kc(r,i,l,_,B,K,J,ie,_e,je){var Ue=i&v,Ye=i&U,at=i&D,dt=i&(C|F),gt=i&T,kt=at?n:rl(r);function bt(){for(var Nt=arguments.length,Ht=Te(Nt),Or=Nt;Or--;)Ht[Or]=arguments[Or];if(dt)var lr=ro(bt),Cr=U4(Ht,lr);if(_&&(Ht=Pm(Ht,_,B,dt)),K&&(Ht=Hm(Ht,K,J,dt)),Nt-=Cr,dt&&Nt<je){var kn=pi(Ht,lr);return Km(r,i,Kc,bt.placeholder,l,Ht,kn,ie,_e,je-Nt)}var as=Ye?l:this,Xs=at?as[r]:r;return Nt=Ht.length,ie?Ht=Wb(Ht,ie):gt&&Nt>1&&Ht.reverse(),Ue&&_e<Nt&&(Ht.length=_e),this&&this!==Dn&&this instanceof bt&&(Xs=kt||rl(Xs)),Xs.apply(as,Ht)}return bt}function Vm(r,i){return function(l,_){return nb(l,r,i(_),{})}}function Yc(r,i){return function(l,_){var B;if(l===n&&_===n)return i;if(l!==n&&(B=l),_!==n){if(B===n)return _;typeof l=="string"||typeof _=="string"?(l=kr(l),_=kr(_)):(l=km(l),_=km(_)),B=r(l,_)}return B}}function xf(r){return zs(function(i){return i=bn(i,Rr(_t())),Ct(function(l){var _=this;return r(i,function(B){return Tr(B,_,l)})})})}function Wc(r,i){i=i===n?" ":kr(i);var l=i.length;if(l<2)return l?vf(i,r):i;var _=vf(i,Bc(r/Xa(i)));return Wa(i)?xi(rs(_),0,r).join(""):_.slice(0,r)}function kb(r,i,l,_){var B=i&U,K=rl(r);function J(){for(var ie=-1,_e=arguments.length,je=-1,Ue=_.length,Ye=Te(Ue+_e),at=this&&this!==Dn&&this instanceof J?K:r;++je<Ue;)Ye[je]=_[je];for(;_e--;)Ye[je++]=arguments[++ie];return Tr(at,B?l:this,Ye)}return J}function zm(r){return function(i,l,_){return _&&typeof _!="number"&&or(i,l,_)&&(l=_=n),i=Ws(i),l===n?(l=i,i=0):l=Ws(l),_=_===n?i<l?1:-1:Ws(_),mb(i,l,_,r)}}function Xc(r){return function(i,l){return typeof i=="string"&&typeof l=="string"||(i=Kr(i),l=Kr(l)),r(i,l)}}function Km(r,i,l,_,B,K,J,ie,_e,je){var Ue=i&C,Ye=Ue?J:n,at=Ue?n:J,dt=Ue?K:n,gt=Ue?n:K;i|=Ue?L:V,i&=~(Ue?V:L),i&b||(i&=~(U|D));var kt=[r,i,B,dt,Ye,gt,at,ie,_e,je],bt=l.apply(n,kt);return If(r)&&sv(bt,kt),bt.placeholder=_,iv(bt,r,i)}function Sf(r){var i=Nn[r];return function(l,_){if(l=Kr(l),_=_==null?0:Yn(Rt(_),292),_&&im(l)){var B=(Xt(l)+"e").split("e"),K=i(B[0]+"e"+(+B[1]+_));return B=(Xt(K)+"e").split("e"),+(B[0]+"e"+(+B[1]-_))}return i(l)}}var Ib=Qa&&1/Ac(new Qa([,-0]))[1]==ne?function(r){return new Qa(r)}:zf;function Ym(r){return function(i){var l=Wn(i);return l==P?Q1(i):l==ae?Y4(i):j4(i,r(i))}}function Vs(r,i,l,_,B,K,J,ie){var _e=i&D;if(!_e&&typeof r!="function")throw new Dr(c);var je=_?_.length:0;if(je||(i&=~(L|V),_=B=n),J=J===n?J:Fn(Rt(J),0),ie=ie===n?ie:Rt(ie),je-=B?B.length:0,i&V){var Ue=_,Ye=B;_=B=n}var at=_e?n:Mf(r),dt=[r,i,l,_,B,Ue,Ye,K,J,ie];if(at&&zb(dt,at),r=dt[0],i=dt[1],l=dt[2],_=dt[3],B=dt[4],ie=dt[9]=dt[9]===n?_e?0:r.length:Fn(dt[9]-je,0),!ie&&i&(C|F)&&(i&=~(C|F)),!i||i==U)var gt=Tb(r,i,l);else i==C||i==F?gt=Rb(r,i,ie):(i==L||i==(U|L))&&!B.length?gt=kb(r,i,l,_):gt=Kc.apply(n,dt);var kt=at?Tm:sv;return iv(kt(gt,dt),r,i)}function Wm(r,i,l,_){return r===n||is(r,Za[l])&&!Qt.call(_,l)?i:r}function Xm(r,i,l,_,B,K){return wn(r)&&wn(i)&&(K.set(i,r),$c(r,i,n,Xm,K),K.delete(i)),r}function Ob(r){return al(r)?n:r}function Gm(r,i,l,_,B,K){var J=l&u,ie=r.length,_e=i.length;if(ie!=_e&&!(J&&_e>ie))return!1;var je=K.get(r),Ue=K.get(i);if(je&&Ue)return je==i&&Ue==r;var Ye=-1,at=!0,dt=l&$?new sa:n;for(K.set(r,i),K.set(i,r);++Ye<ie;){var gt=r[Ye],kt=i[Ye];if(_)var bt=J?_(kt,gt,Ye,i,r,K):_(gt,kt,Ye,r,i,K);if(bt!==n){if(bt)continue;at=!1;break}if(dt){if(!K1(i,function(Nt,Ht){if(!Ko(dt,Ht)&&(gt===Nt||B(gt,Nt,l,_,K)))return dt.push(Ht)})){at=!1;break}}else if(!(gt===kt||B(gt,kt,l,_,K))){at=!1;break}}return K.delete(r),K.delete(i),at}function Cb(r,i,l,_,B,K,J){switch(l){case be:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case nt:return!(r.byteLength!=i.byteLength||!K(new Ic(r),new Ic(i)));case ke:case Se:case G:return is(+r,+i);case Xe:return r.name==i.name&&r.message==i.message;case ce:case ge:return r==i+"";case P:var ie=Q1;case ae:var _e=_&u;if(ie||(ie=Ac),r.size!=i.size&&!_e)return!1;var je=J.get(r);if(je)return je==i;_|=$,J.set(r,i);var Ue=Gm(ie(r),ie(i),_,B,K,J);return J.delete(r),Ue;case Be:if(Zo)return Zo.call(r)==Zo.call(i)}return!1}function Lb(r,i,l,_,B,K){var J=l&u,ie=Af(r),_e=ie.length,je=Af(i),Ue=je.length;if(_e!=Ue&&!J)return!1;for(var Ye=_e;Ye--;){var at=ie[Ye];if(!(J?at in i:Qt.call(i,at)))return!1}var dt=K.get(r),gt=K.get(i);if(dt&&gt)return dt==i&&gt==r;var kt=!0;K.set(r,i),K.set(i,r);for(var bt=J;++Ye<_e;){at=ie[Ye];var Nt=r[at],Ht=i[at];if(_)var Or=J?_(Ht,Nt,at,i,r,K):_(Nt,Ht,at,r,i,K);if(!(Or===n?Nt===Ht||B(Nt,Ht,l,_,K):Or)){kt=!1;break}bt||(bt=at=="constructor")}if(kt&&!bt){var lr=r.constructor,Cr=i.constructor;lr!=Cr&&"constructor"in r&&"constructor"in i&&!(typeof lr=="function"&&lr instanceof lr&&typeof Cr=="function"&&Cr instanceof Cr)&&(kt=!1)}return K.delete(r),K.delete(i),kt}function zs(r){return Cf(nv(r,n,fv),r+"")}function Af(r){return _m(r,Hn,Rf)}function Ef(r){return _m(r,pr,Zm)}var Mf=Fc?function(r){return Fc.get(r)}:zf;function Gc(r){for(var i=r.name+"",l=Ja[i],_=Qt.call(Ja,i)?l.length:0;_--;){var B=l[_],K=B.func;if(K==null||K==r)return B.name}return i}function ro(r){var i=Qt.call(q,"placeholder")?q:r;return i.placeholder}function _t(){var r=q.iteratee||qf;return r=r===qf?bm:r,arguments.length?r(arguments[0],arguments[1]):r}function Zc(r,i){var l=r.__data__;return Db(i)?l[typeof i=="string"?"string":"hash"]:l.map}function Tf(r){for(var i=Hn(r),l=i.length;l--;){var _=i[l],B=r[_];i[l]=[_,B,ev(B)]}return i}function oa(r,i){var l=V4(r,i);return gm(l)?l:n}function Bb(r){var i=Qt.call(r,na),l=r[na];try{r[na]=n;var _=!0}catch{}var B=Rc.call(r);return _&&(i?r[na]=l:delete r[na]),B}var Rf=ef?function(r){return r==null?[]:(r=cn(r),vi(ef(r),function(i){return rm.call(r,i)}))}:Kf,Zm=ef?function(r){for(var i=[];r;)_i(i,Rf(r)),r=Oc(r);return i}:Kf,Wn=ar;(tf&&Wn(new tf(new ArrayBuffer(1)))!=be||Wo&&Wn(new Wo)!=P||nf&&Wn(nf.resolve())!=pe||Qa&&Wn(new Qa)!=ae||Xo&&Wn(new Xo)!=Pe)&&(Wn=function(r){var i=ar(r),l=i==re?r.constructor:n,_=l?la(l):"";if(_)switch(_){case _5:return be;case p5:return P;case g5:return pe;case b5:return ae;case y5:return Pe}return i});function Nb(r,i,l){for(var _=-1,B=l.length;++_<B;){var K=l[_],J=K.size;switch(K.type){case"drop":r+=J;break;case"dropRight":i-=J;break;case"take":i=Yn(i,r+J);break;case"takeRight":r=Fn(r,i-J);break}}return{start:r,end:i}}function Fb(r){var i=r.match(et);return i?i[1].split(pt):[]}function Qm(r,i,l){i=wi(i,r);for(var _=-1,B=i.length,K=!1;++_<B;){var J=xs(i[_]);if(!(K=r!=null&&l(r,J)))break;r=r[J]}return K||++_!=B?K:(B=r==null?0:r.length,!!B&&su(B)&&Ks(J,B)&&(Et(r)||ca(r)))}function Pb(r){var i=r.length,l=new r.constructor(i);return i&&typeof r[0]=="string"&&Qt.call(r,"index")&&(l.index=r.index,l.input=r.input),l}function Jm(r){return typeof r.constructor=="function"&&!sl(r)?eo(Oc(r)):{}}function Hb(r,i,l){var _=r.constructor;switch(i){case nt:return wf(r);case ke:case Se:return new _(+r);case be:return wb(r,l);case Ne:case me:case Ze:case N:case j:case Z:case Q:case se:case W:return Nm(r,l);case P:return new _;case G:case ge:return new _(r);case ce:return xb(r);case ae:return new _;case Be:return Sb(r)}}function jb(r,i){var l=i.length;if(!l)return r;var _=l-1;return i[_]=(l>1?"& ":"")+i[_],i=i.join(l>2?", ":" "),r.replace(tn,`{
/* [wrapped with `+i+`] */
`)}function Ub(r){return Et(r)||ca(r)||!!(sm&&r&&r[sm])}function Ks(r,i){var l=typeof r;return i=i==null?Y:i,!!i&&(l=="number"||l!="symbol"&&Mr.test(r))&&r>-1&&r%1==0&&r<i}function or(r,i,l){if(!wn(l))return!1;var _=typeof i;return(_=="number"?_r(l)&&Ks(i,l.length):_=="string"&&i in l)?is(l[i],r):!1}function kf(r,i){if(Et(r))return!1;var l=typeof r;return l=="number"||l=="symbol"||l=="boolean"||r==null||Ir(r)?!0:it.test(r)||!Me.test(r)||i!=null&&r in cn(i)}function Db(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function If(r){var i=Gc(r),l=q[i];if(typeof l!="function"||!(i in Pt.prototype))return!1;if(r===l)return!0;var _=Mf(l);return!!_&&r===_[0]}function $b(r){return!!em&&em in r}var qb=Mc?Ys:Yf;function sl(r){var i=r&&r.constructor,l=typeof i=="function"&&i.prototype||Za;return r===l}function ev(r){return r===r&&!wn(r)}function tv(r,i){return function(l){return l==null?!1:l[r]===i&&(i!==n||r in cn(l))}}function Vb(r){var i=nu(r,function(_){return l.size===d&&l.clear(),_}),l=i.cache;return i}function zb(r,i){var l=r[1],_=i[1],B=l|_,K=B<(U|D|v),J=_==v&&l==C||_==v&&l==E&&r[7].length<=i[8]||_==(v|E)&&i[7].length<=i[8]&&l==C;if(!(K||J))return r;_&U&&(r[2]=i[2],B|=l&U?0:b);var ie=i[3];if(ie){var _e=r[3];r[3]=_e?Pm(_e,ie,i[4]):ie,r[4]=_e?pi(r[3],p):i[4]}return ie=i[5],ie&&(_e=r[5],r[5]=_e?Hm(_e,ie,i[6]):ie,r[6]=_e?pi(r[5],p):i[6]),ie=i[7],ie&&(r[7]=ie),_&v&&(r[8]=r[8]==null?i[8]:Yn(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=B,r}function Kb(r){var i=[];if(r!=null)for(var l in cn(r))i.push(l);return i}function Yb(r){return Rc.call(r)}function nv(r,i,l){return i=Fn(i===n?r.length-1:i,0),function(){for(var _=arguments,B=-1,K=Fn(_.length-i,0),J=Te(K);++B<K;)J[B]=_[i+B];B=-1;for(var ie=Te(i+1);++B<i;)ie[B]=_[B];return ie[i]=l(J),Tr(r,this,ie)}}function rv(r,i){return i.length<2?r:aa(r,Vr(i,0,-1))}function Wb(r,i){for(var l=r.length,_=Yn(i.length,l),B=vr(r);_--;){var K=i[_];r[_]=Ks(K,l)?B[K]:n}return r}function Of(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var sv=av(Tm),il=c5||function(r,i){return Dn.setTimeout(r,i)},Cf=av(pb);function iv(r,i,l){var _=i+"";return Cf(r,jb(_,Xb(Fb(_),l)))}function av(r){var i=0,l=0;return function(){var _=h5(),B=x-(_-l);if(l=_,B>0){if(++i>=S)return arguments[0]}else i=0;return r.apply(n,arguments)}}function Qc(r,i){var l=-1,_=r.length,B=_-1;for(i=i===n?_:i;++l<i;){var K=mf(l,B),J=r[K];r[K]=r[l],r[l]=J}return r.length=i,r}var ov=Vb(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(yt,function(l,_,B,K){i.push(B?K.replace(nr,"$1"):_||l)}),i});function xs(r){if(typeof r=="string"||Ir(r))return r;var i=r+"";return i=="0"&&1/r==-ne?"-0":i}function la(r){if(r!=null){try{return Tc.call(r)}catch{}try{return r+""}catch{}}return""}function Xb(r,i){return Ur(He,function(l){var _="_."+l[0];i&l[1]&&!xc(r,_)&&r.push(_)}),r.sort()}function lv(r){if(r instanceof Pt)return r.clone();var i=new $r(r.__wrapped__,r.__chain__);return i.__actions__=vr(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function Gb(r,i,l){(l?or(r,i,l):i===n)?i=1:i=Fn(Rt(i),0);var _=r==null?0:r.length;if(!_||i<1)return[];for(var B=0,K=0,J=Te(Bc(_/i));B<_;)J[K++]=Vr(r,B,B+=i);return J}function Zb(r){for(var i=-1,l=r==null?0:r.length,_=0,B=[];++i<l;){var K=r[i];K&&(B[_++]=K)}return B}function Qb(){var r=arguments.length;if(!r)return[];for(var i=Te(r-1),l=arguments[0],_=r;_--;)i[_-1]=arguments[_];return _i(Et(l)?vr(l):[l],$n(i,1))}var Jb=Ct(function(r,i){return Rn(r)?Jo(r,$n(i,1,Rn,!0)):[]}),e9=Ct(function(r,i){var l=zr(i);return Rn(l)&&(l=n),Rn(r)?Jo(r,$n(i,1,Rn,!0),_t(l,2)):[]}),t9=Ct(function(r,i){var l=zr(i);return Rn(l)&&(l=n),Rn(r)?Jo(r,$n(i,1,Rn,!0),n,l):[]});function n9(r,i,l){var _=r==null?0:r.length;return _?(i=l||i===n?1:Rt(i),Vr(r,i<0?0:i,_)):[]}function r9(r,i,l){var _=r==null?0:r.length;return _?(i=l||i===n?1:Rt(i),i=_-i,Vr(r,0,i<0?0:i)):[]}function s9(r,i){return r&&r.length?Vc(r,_t(i,3),!0,!0):[]}function i9(r,i){return r&&r.length?Vc(r,_t(i,3),!0):[]}function a9(r,i,l,_){var B=r==null?0:r.length;return B?(l&&typeof l!="number"&&or(r,i,l)&&(l=0,_=B),Q5(r,i,l,_)):[]}function cv(r,i,l){var _=r==null?0:r.length;if(!_)return-1;var B=l==null?0:Rt(l);return B<0&&(B=Fn(_+B,0)),Sc(r,_t(i,3),B)}function uv(r,i,l){var _=r==null?0:r.length;if(!_)return-1;var B=_-1;return l!==n&&(B=Rt(l),B=l<0?Fn(_+B,0):Yn(B,_-1)),Sc(r,_t(i,3),B,!0)}function fv(r){var i=r==null?0:r.length;return i?$n(r,1):[]}function o9(r){var i=r==null?0:r.length;return i?$n(r,ne):[]}function l9(r,i){var l=r==null?0:r.length;return l?(i=i===n?1:Rt(i),$n(r,i)):[]}function c9(r){for(var i=-1,l=r==null?0:r.length,_={};++i<l;){var B=r[i];_[B[0]]=B[1]}return _}function dv(r){return r&&r.length?r[0]:n}function u9(r,i,l){var _=r==null?0:r.length;if(!_)return-1;var B=l==null?0:Rt(l);return B<0&&(B=Fn(_+B,0)),Ya(r,i,B)}function f9(r){var i=r==null?0:r.length;return i?Vr(r,0,-1):[]}var d9=Ct(function(r){var i=bn(r,bf);return i.length&&i[0]===r[0]?cf(i):[]}),h9=Ct(function(r){var i=zr(r),l=bn(r,bf);return i===zr(l)?i=n:l.pop(),l.length&&l[0]===r[0]?cf(l,_t(i,2)):[]}),m9=Ct(function(r){var i=zr(r),l=bn(r,bf);return i=typeof i=="function"?i:n,i&&l.pop(),l.length&&l[0]===r[0]?cf(l,n,i):[]});function v9(r,i){return r==null?"":f5.call(r,i)}function zr(r){var i=r==null?0:r.length;return i?r[i-1]:n}function _9(r,i,l){var _=r==null?0:r.length;if(!_)return-1;var B=_;return l!==n&&(B=Rt(l),B=B<0?Fn(_+B,0):Yn(B,_-1)),i===i?X4(r,i,B):Sc(r,Kh,B,!0)}function p9(r,i){return r&&r.length?Sm(r,Rt(i)):n}var g9=Ct(hv);function hv(r,i){return r&&r.length&&i&&i.length?hf(r,i):r}function b9(r,i,l){return r&&r.length&&i&&i.length?hf(r,i,_t(l,2)):r}function y9(r,i,l){return r&&r.length&&i&&i.length?hf(r,i,n,l):r}var w9=zs(function(r,i){var l=r==null?0:r.length,_=sf(r,i);return Mm(r,bn(i,function(B){return Ks(B,l)?+B:B}).sort(Fm)),_});function x9(r,i){var l=[];if(!(r&&r.length))return l;var _=-1,B=[],K=r.length;for(i=_t(i,3);++_<K;){var J=r[_];i(J,_,r)&&(l.push(J),B.push(_))}return Mm(r,B),l}function Lf(r){return r==null?r:v5.call(r)}function S9(r,i,l){var _=r==null?0:r.length;return _?(l&&typeof l!="number"&&or(r,i,l)?(i=0,l=_):(i=i==null?0:Rt(i),l=l===n?_:Rt(l)),Vr(r,i,l)):[]}function A9(r,i){return qc(r,i)}function E9(r,i,l){return _f(r,i,_t(l,2))}function M9(r,i){var l=r==null?0:r.length;if(l){var _=qc(r,i);if(_<l&&is(r[_],i))return _}return-1}function T9(r,i){return qc(r,i,!0)}function R9(r,i,l){return _f(r,i,_t(l,2),!0)}function k9(r,i){var l=r==null?0:r.length;if(l){var _=qc(r,i,!0)-1;if(is(r[_],i))return _}return-1}function I9(r){return r&&r.length?Rm(r):[]}function O9(r,i){return r&&r.length?Rm(r,_t(i,2)):[]}function C9(r){var i=r==null?0:r.length;return i?Vr(r,1,i):[]}function L9(r,i,l){return r&&r.length?(i=l||i===n?1:Rt(i),Vr(r,0,i<0?0:i)):[]}function B9(r,i,l){var _=r==null?0:r.length;return _?(i=l||i===n?1:Rt(i),i=_-i,Vr(r,i<0?0:i,_)):[]}function N9(r,i){return r&&r.length?Vc(r,_t(i,3),!1,!0):[]}function F9(r,i){return r&&r.length?Vc(r,_t(i,3)):[]}var P9=Ct(function(r){return yi($n(r,1,Rn,!0))}),H9=Ct(function(r){var i=zr(r);return Rn(i)&&(i=n),yi($n(r,1,Rn,!0),_t(i,2))}),j9=Ct(function(r){var i=zr(r);return i=typeof i=="function"?i:n,yi($n(r,1,Rn,!0),n,i)});function U9(r){return r&&r.length?yi(r):[]}function D9(r,i){return r&&r.length?yi(r,_t(i,2)):[]}function $9(r,i){return i=typeof i=="function"?i:n,r&&r.length?yi(r,n,i):[]}function Bf(r){if(!(r&&r.length))return[];var i=0;return r=vi(r,function(l){if(Rn(l))return i=Fn(l.length,i),!0}),G1(i,function(l){return bn(r,Y1(l))})}function mv(r,i){if(!(r&&r.length))return[];var l=Bf(r);return i==null?l:bn(l,function(_){return Tr(i,n,_)})}var q9=Ct(function(r,i){return Rn(r)?Jo(r,i):[]}),V9=Ct(function(r){return gf(vi(r,Rn))}),z9=Ct(function(r){var i=zr(r);return Rn(i)&&(i=n),gf(vi(r,Rn),_t(i,2))}),K9=Ct(function(r){var i=zr(r);return i=typeof i=="function"?i:n,gf(vi(r,Rn),n,i)}),Y9=Ct(Bf);function W9(r,i){return Cm(r||[],i||[],Qo)}function X9(r,i){return Cm(r||[],i||[],nl)}var G9=Ct(function(r){var i=r.length,l=i>1?r[i-1]:n;return l=typeof l=="function"?(r.pop(),l):n,mv(r,l)});function vv(r){var i=q(r);return i.__chain__=!0,i}function Z9(r,i){return i(r),r}function Jc(r,i){return i(r)}var Q9=zs(function(r){var i=r.length,l=i?r[0]:0,_=this.__wrapped__,B=function(K){return sf(K,r)};return i>1||this.__actions__.length||!(_ instanceof Pt)||!Ks(l)?this.thru(B):(_=_.slice(l,+l+(i?1:0)),_.__actions__.push({func:Jc,args:[B],thisArg:n}),new $r(_,this.__chain__).thru(function(K){return i&&!K.length&&K.push(n),K}))});function J9(){return vv(this)}function e8(){return new $r(this.value(),this.__chain__)}function t8(){this.__values__===n&&(this.__values__=kv(this.value()));var r=this.__index__>=this.__values__.length,i=r?n:this.__values__[this.__index__++];return{done:r,value:i}}function n8(){return this}function r8(r){for(var i,l=this;l instanceof Hc;){var _=lv(l);_.__index__=0,_.__values__=n,i?B.__wrapped__=_:i=_;var B=_;l=l.__wrapped__}return B.__wrapped__=r,i}function s8(){var r=this.__wrapped__;if(r instanceof Pt){var i=r;return this.__actions__.length&&(i=new Pt(this)),i=i.reverse(),i.__actions__.push({func:Jc,args:[Lf],thisArg:n}),new $r(i,this.__chain__)}return this.thru(Lf)}function i8(){return Om(this.__wrapped__,this.__actions__)}var a8=zc(function(r,i,l){Qt.call(r,l)?++r[l]:qs(r,l,1)});function o8(r,i,l){var _=Et(r)?Vh:Z5;return l&&or(r,i,l)&&(i=n),_(r,_t(i,3))}function l8(r,i){var l=Et(r)?vi:mm;return l(r,_t(i,3))}var c8=$m(cv),u8=$m(uv);function f8(r,i){return $n(eu(r,i),1)}function d8(r,i){return $n(eu(r,i),ne)}function h8(r,i,l){return l=l===n?1:Rt(l),$n(eu(r,i),l)}function _v(r,i){var l=Et(r)?Ur:bi;return l(r,_t(i,3))}function pv(r,i){var l=Et(r)?C4:hm;return l(r,_t(i,3))}var m8=zc(function(r,i,l){Qt.call(r,l)?r[l].push(i):qs(r,l,[i])});function v8(r,i,l,_){r=_r(r)?r:io(r),l=l&&!_?Rt(l):0;var B=r.length;return l<0&&(l=Fn(B+l,0)),iu(r)?l<=B&&r.indexOf(i,l)>-1:!!B&&Ya(r,i,l)>-1}var _8=Ct(function(r,i,l){var _=-1,B=typeof i=="function",K=_r(r)?Te(r.length):[];return bi(r,function(J){K[++_]=B?Tr(i,J,l):el(J,i,l)}),K}),p8=zc(function(r,i,l){qs(r,l,i)});function eu(r,i){var l=Et(r)?bn:ym;return l(r,_t(i,3))}function g8(r,i,l,_){return r==null?[]:(Et(i)||(i=i==null?[]:[i]),l=_?n:l,Et(l)||(l=l==null?[]:[l]),Am(r,i,l))}var b8=zc(function(r,i,l){r[l?0:1].push(i)},function(){return[[],[]]});function y8(r,i,l){var _=Et(r)?z1:Wh,B=arguments.length<3;return _(r,_t(i,4),l,B,bi)}function w8(r,i,l){var _=Et(r)?L4:Wh,B=arguments.length<3;return _(r,_t(i,4),l,B,hm)}function x8(r,i){var l=Et(r)?vi:mm;return l(r,ru(_t(i,3)))}function S8(r){var i=Et(r)?cm:vb;return i(r)}function A8(r,i,l){(l?or(r,i,l):i===n)?i=1:i=Rt(i);var _=Et(r)?K5:_b;return _(r,i)}function E8(r){var i=Et(r)?Y5:gb;return i(r)}function M8(r){if(r==null)return 0;if(_r(r))return iu(r)?Xa(r):r.length;var i=Wn(r);return i==P||i==ae?r.size:ff(r).length}function T8(r,i,l){var _=Et(r)?K1:bb;return l&&or(r,i,l)&&(i=n),_(r,_t(i,3))}var R8=Ct(function(r,i){if(r==null)return[];var l=i.length;return l>1&&or(r,i[0],i[1])?i=[]:l>2&&or(i[0],i[1],i[2])&&(i=[i[0]]),Am(r,$n(i,1),[])}),tu=l5||function(){return Dn.Date.now()};function k8(r,i){if(typeof i!="function")throw new Dr(c);return r=Rt(r),function(){if(--r<1)return i.apply(this,arguments)}}function gv(r,i,l){return i=l?n:i,i=r&&i==null?r.length:i,Vs(r,v,n,n,n,n,i)}function bv(r,i){var l;if(typeof i!="function")throw new Dr(c);return r=Rt(r),function(){return--r>0&&(l=i.apply(this,arguments)),r<=1&&(i=n),l}}var Nf=Ct(function(r,i,l){var _=U;if(l.length){var B=pi(l,ro(Nf));_|=L}return Vs(r,_,i,l,B)}),yv=Ct(function(r,i,l){var _=U|D;if(l.length){var B=pi(l,ro(yv));_|=L}return Vs(i,_,r,l,B)});function wv(r,i,l){i=l?n:i;var _=Vs(r,C,n,n,n,n,n,i);return _.placeholder=wv.placeholder,_}function xv(r,i,l){i=l?n:i;var _=Vs(r,F,n,n,n,n,n,i);return _.placeholder=xv.placeholder,_}function Sv(r,i,l){var _,B,K,J,ie,_e,je=0,Ue=!1,Ye=!1,at=!0;if(typeof r!="function")throw new Dr(c);i=Kr(i)||0,wn(l)&&(Ue=!!l.leading,Ye="maxWait"in l,K=Ye?Fn(Kr(l.maxWait)||0,i):K,at="trailing"in l?!!l.trailing:at);function dt(kn){var as=_,Xs=B;return _=B=n,je=kn,J=r.apply(Xs,as),J}function gt(kn){return je=kn,ie=il(Nt,i),Ue?dt(kn):J}function kt(kn){var as=kn-_e,Xs=kn-je,$v=i-as;return Ye?Yn($v,K-Xs):$v}function bt(kn){var as=kn-_e,Xs=kn-je;return _e===n||as>=i||as<0||Ye&&Xs>=K}function Nt(){var kn=tu();if(bt(kn))return Ht(kn);ie=il(Nt,kt(kn))}function Ht(kn){return ie=n,at&&_?dt(kn):(_=B=n,J)}function Or(){ie!==n&&Lm(ie),je=0,_=_e=B=ie=n}function lr(){return ie===n?J:Ht(tu())}function Cr(){var kn=tu(),as=bt(kn);if(_=arguments,B=this,_e=kn,as){if(ie===n)return gt(_e);if(Ye)return Lm(ie),ie=il(Nt,i),dt(_e)}return ie===n&&(ie=il(Nt,i)),J}return Cr.cancel=Or,Cr.flush=lr,Cr}var I8=Ct(function(r,i){return dm(r,1,i)}),O8=Ct(function(r,i,l){return dm(r,Kr(i)||0,l)});function C8(r){return Vs(r,T)}function nu(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Dr(c);var l=function(){var _=arguments,B=i?i.apply(this,_):_[0],K=l.cache;if(K.has(B))return K.get(B);var J=r.apply(this,_);return l.cache=K.set(B,J)||K,J};return l.cache=new(nu.Cache||$s),l}nu.Cache=$s;function ru(r){if(typeof r!="function")throw new Dr(c);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function L8(r){return bv(2,r)}var B8=yb(function(r,i){i=i.length==1&&Et(i[0])?bn(i[0],Rr(_t())):bn($n(i,1),Rr(_t()));var l=i.length;return Ct(function(_){for(var B=-1,K=Yn(_.length,l);++B<K;)_[B]=i[B].call(this,_[B]);return Tr(r,this,_)})}),Ff=Ct(function(r,i){var l=pi(i,ro(Ff));return Vs(r,L,n,i,l)}),Av=Ct(function(r,i){var l=pi(i,ro(Av));return Vs(r,V,n,i,l)}),N8=zs(function(r,i){return Vs(r,E,n,n,n,i)});function F8(r,i){if(typeof r!="function")throw new Dr(c);return i=i===n?i:Rt(i),Ct(r,i)}function P8(r,i){if(typeof r!="function")throw new Dr(c);return i=i==null?0:Fn(Rt(i),0),Ct(function(l){var _=l[i],B=xi(l,0,i);return _&&_i(B,_),Tr(r,this,B)})}function H8(r,i,l){var _=!0,B=!0;if(typeof r!="function")throw new Dr(c);return wn(l)&&(_="leading"in l?!!l.leading:_,B="trailing"in l?!!l.trailing:B),Sv(r,i,{leading:_,maxWait:i,trailing:B})}function j8(r){return gv(r,1)}function U8(r,i){return Ff(yf(i),r)}function D8(){if(!arguments.length)return[];var r=arguments[0];return Et(r)?r:[r]}function $8(r){return qr(r,M)}function q8(r,i){return i=typeof i=="function"?i:n,qr(r,M,i)}function V8(r){return qr(r,h|M)}function z8(r,i){return i=typeof i=="function"?i:n,qr(r,h|M,i)}function K8(r,i){return i==null||fm(r,i,Hn(i))}function is(r,i){return r===i||r!==r&&i!==i}var Y8=Xc(lf),W8=Xc(function(r,i){return r>=i}),ca=pm(function(){return arguments}())?pm:function(r){return Sn(r)&&Qt.call(r,"callee")&&!rm.call(r,"callee")},Et=Te.isArray,X8=Hh?Rr(Hh):rb;function _r(r){return r!=null&&su(r.length)&&!Ys(r)}function Rn(r){return Sn(r)&&_r(r)}function G8(r){return r===!0||r===!1||Sn(r)&&ar(r)==ke}var Si=u5||Yf,Z8=jh?Rr(jh):sb;function Q8(r){return Sn(r)&&r.nodeType===1&&!al(r)}function J8(r){if(r==null)return!0;if(_r(r)&&(Et(r)||typeof r=="string"||typeof r.splice=="function"||Si(r)||so(r)||ca(r)))return!r.length;var i=Wn(r);if(i==P||i==ae)return!r.size;if(sl(r))return!ff(r).length;for(var l in r)if(Qt.call(r,l))return!1;return!0}function e6(r,i){return tl(r,i)}function t6(r,i,l){l=typeof l=="function"?l:n;var _=l?l(r,i):n;return _===n?tl(r,i,n,l):!!_}function Pf(r){if(!Sn(r))return!1;var i=ar(r);return i==Xe||i==Ae||typeof r.message=="string"&&typeof r.name=="string"&&!al(r)}function n6(r){return typeof r=="number"&&im(r)}function Ys(r){if(!wn(r))return!1;var i=ar(r);return i==X||i==O||i==oe||i==ve}function Ev(r){return typeof r=="number"&&r==Rt(r)}function su(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Y}function wn(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function Sn(r){return r!=null&&typeof r=="object"}var Mv=Uh?Rr(Uh):ab;function r6(r,i){return r===i||uf(r,i,Tf(i))}function s6(r,i,l){return l=typeof l=="function"?l:n,uf(r,i,Tf(i),l)}function i6(r){return Tv(r)&&r!=+r}function a6(r){if(qb(r))throw new At(a);return gm(r)}function o6(r){return r===null}function l6(r){return r==null}function Tv(r){return typeof r=="number"||Sn(r)&&ar(r)==G}function al(r){if(!Sn(r)||ar(r)!=re)return!1;var i=Oc(r);if(i===null)return!0;var l=Qt.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Tc.call(l)==s5}var Hf=Dh?Rr(Dh):ob;function c6(r){return Ev(r)&&r>=-Y&&r<=Y}var Rv=$h?Rr($h):lb;function iu(r){return typeof r=="string"||!Et(r)&&Sn(r)&&ar(r)==ge}function Ir(r){return typeof r=="symbol"||Sn(r)&&ar(r)==Be}var so=qh?Rr(qh):cb;function u6(r){return r===n}function f6(r){return Sn(r)&&Wn(r)==Pe}function d6(r){return Sn(r)&&ar(r)==We}var h6=Xc(df),m6=Xc(function(r,i){return r<=i});function kv(r){if(!r)return[];if(_r(r))return iu(r)?rs(r):vr(r);if(Yo&&r[Yo])return K4(r[Yo]());var i=Wn(r),l=i==P?Q1:i==ae?Ac:io;return l(r)}function Ws(r){if(!r)return r===0?r:0;if(r=Kr(r),r===ne||r===-ne){var i=r<0?-1:1;return i*te}return r===r?r:0}function Rt(r){var i=Ws(r),l=i%1;return i===i?l?i-l:i:0}function Iv(r){return r?ia(Rt(r),0,I):0}function Kr(r){if(typeof r=="number")return r;if(Ir(r))return g;if(wn(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=wn(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=Xh(r);var l=rr.test(r);return l||Er.test(r)?k4(r.slice(2),l?2:8):Kn.test(r)?g:+r}function Ov(r){return ws(r,pr(r))}function v6(r){return r?ia(Rt(r),-Y,Y):r===0?r:0}function Xt(r){return r==null?"":kr(r)}var _6=to(function(r,i){if(sl(i)||_r(i)){ws(i,Hn(i),r);return}for(var l in i)Qt.call(i,l)&&Qo(r,l,i[l])}),Cv=to(function(r,i){ws(i,pr(i),r)}),au=to(function(r,i,l,_){ws(i,pr(i),r,_)}),p6=to(function(r,i,l,_){ws(i,Hn(i),r,_)}),g6=zs(sf);function b6(r,i){var l=eo(r);return i==null?l:um(l,i)}var y6=Ct(function(r,i){r=cn(r);var l=-1,_=i.length,B=_>2?i[2]:n;for(B&&or(i[0],i[1],B)&&(_=1);++l<_;)for(var K=i[l],J=pr(K),ie=-1,_e=J.length;++ie<_e;){var je=J[ie],Ue=r[je];(Ue===n||is(Ue,Za[je])&&!Qt.call(r,je))&&(r[je]=K[je])}return r}),w6=Ct(function(r){return r.push(n,Xm),Tr(Lv,n,r)});function x6(r,i){return zh(r,_t(i,3),ys)}function S6(r,i){return zh(r,_t(i,3),of)}function A6(r,i){return r==null?r:af(r,_t(i,3),pr)}function E6(r,i){return r==null?r:vm(r,_t(i,3),pr)}function M6(r,i){return r&&ys(r,_t(i,3))}function T6(r,i){return r&&of(r,_t(i,3))}function R6(r){return r==null?[]:Dc(r,Hn(r))}function k6(r){return r==null?[]:Dc(r,pr(r))}function jf(r,i,l){var _=r==null?n:aa(r,i);return _===n?l:_}function I6(r,i){return r!=null&&Qm(r,i,J5)}function Uf(r,i){return r!=null&&Qm(r,i,eb)}var O6=Vm(function(r,i,l){i!=null&&typeof i.toString!="function"&&(i=Rc.call(i)),r[i]=l},$f(gr)),C6=Vm(function(r,i,l){i!=null&&typeof i.toString!="function"&&(i=Rc.call(i)),Qt.call(r,i)?r[i].push(l):r[i]=[l]},_t),L6=Ct(el);function Hn(r){return _r(r)?lm(r):ff(r)}function pr(r){return _r(r)?lm(r,!0):ub(r)}function B6(r,i){var l={};return i=_t(i,3),ys(r,function(_,B,K){qs(l,i(_,B,K),_)}),l}function N6(r,i){var l={};return i=_t(i,3),ys(r,function(_,B,K){qs(l,B,i(_,B,K))}),l}var F6=to(function(r,i,l){$c(r,i,l)}),Lv=to(function(r,i,l,_){$c(r,i,l,_)}),P6=zs(function(r,i){var l={};if(r==null)return l;var _=!1;i=bn(i,function(K){return K=wi(K,r),_||(_=K.length>1),K}),ws(r,Ef(r),l),_&&(l=qr(l,h|w|M,Ob));for(var B=i.length;B--;)pf(l,i[B]);return l});function H6(r,i){return Bv(r,ru(_t(i)))}var j6=zs(function(r,i){return r==null?{}:db(r,i)});function Bv(r,i){if(r==null)return{};var l=bn(Ef(r),function(_){return[_]});return i=_t(i),Em(r,l,function(_,B){return i(_,B[0])})}function U6(r,i,l){i=wi(i,r);var _=-1,B=i.length;for(B||(B=1,r=n);++_<B;){var K=r==null?n:r[xs(i[_])];K===n&&(_=B,K=l),r=Ys(K)?K.call(r):K}return r}function D6(r,i,l){return r==null?r:nl(r,i,l)}function $6(r,i,l,_){return _=typeof _=="function"?_:n,r==null?r:nl(r,i,l,_)}var Nv=Ym(Hn),Fv=Ym(pr);function q6(r,i,l){var _=Et(r),B=_||Si(r)||so(r);if(i=_t(i,4),l==null){var K=r&&r.constructor;B?l=_?new K:[]:wn(r)?l=Ys(K)?eo(Oc(r)):{}:l={}}return(B?Ur:ys)(r,function(J,ie,_e){return i(l,J,ie,_e)}),l}function V6(r,i){return r==null?!0:pf(r,i)}function z6(r,i,l){return r==null?r:Im(r,i,yf(l))}function K6(r,i,l,_){return _=typeof _=="function"?_:n,r==null?r:Im(r,i,yf(l),_)}function io(r){return r==null?[]:Z1(r,Hn(r))}function Y6(r){return r==null?[]:Z1(r,pr(r))}function W6(r,i,l){return l===n&&(l=i,i=n),l!==n&&(l=Kr(l),l=l===l?l:0),i!==n&&(i=Kr(i),i=i===i?i:0),ia(Kr(r),i,l)}function X6(r,i,l){return i=Ws(i),l===n?(l=i,i=0):l=Ws(l),r=Kr(r),tb(r,i,l)}function G6(r,i,l){if(l&&typeof l!="boolean"&&or(r,i,l)&&(i=l=n),l===n&&(typeof i=="boolean"?(l=i,i=n):typeof r=="boolean"&&(l=r,r=n)),r===n&&i===n?(r=0,i=1):(r=Ws(r),i===n?(i=r,r=0):i=Ws(i)),r>i){var _=r;r=i,i=_}if(l||r%1||i%1){var B=am();return Yn(r+B*(i-r+R4("1e-"+((B+"").length-1))),i)}return mf(r,i)}var Z6=no(function(r,i,l){return i=i.toLowerCase(),r+(l?Pv(i):i)});function Pv(r){return Df(Xt(r).toLowerCase())}function Hv(r){return r=Xt(r),r&&r.replace(Pn,D4).replace(g4,"")}function Q6(r,i,l){r=Xt(r),i=kr(i);var _=r.length;l=l===n?_:ia(Rt(l),0,_);var B=l;return l-=i.length,l>=0&&r.slice(l,B)==i}function J6(r){return r=Xt(r),r&&Qe.test(r)?r.replace(we,$4):r}function ey(r){return r=Xt(r),r&&ot.test(r)?r.replace(De,"\\$&"):r}var ty=no(function(r,i,l){return r+(l?"-":"")+i.toLowerCase()}),ny=no(function(r,i,l){return r+(l?" ":"")+i.toLowerCase()}),ry=Dm("toLowerCase");function sy(r,i,l){r=Xt(r),i=Rt(i);var _=i?Xa(r):0;if(!i||_>=i)return r;var B=(i-_)/2;return Wc(Nc(B),l)+r+Wc(Bc(B),l)}function iy(r,i,l){r=Xt(r),i=Rt(i);var _=i?Xa(r):0;return i&&_<i?r+Wc(i-_,l):r}function ay(r,i,l){r=Xt(r),i=Rt(i);var _=i?Xa(r):0;return i&&_<i?Wc(i-_,l)+r:r}function oy(r,i,l){return l||i==null?i=0:i&&(i=+i),m5(Xt(r).replace($e,""),i||0)}function ly(r,i,l){return(l?or(r,i,l):i===n)?i=1:i=Rt(i),vf(Xt(r),i)}function cy(){var r=arguments,i=Xt(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var uy=no(function(r,i,l){return r+(l?"_":"")+i.toLowerCase()});function fy(r,i,l){return l&&typeof l!="number"&&or(r,i,l)&&(i=l=n),l=l===n?I:l>>>0,l?(r=Xt(r),r&&(typeof i=="string"||i!=null&&!Hf(i))&&(i=kr(i),!i&&Wa(r))?xi(rs(r),0,l):r.split(i,l)):[]}var dy=no(function(r,i,l){return r+(l?" ":"")+Df(i)});function hy(r,i,l){return r=Xt(r),l=l==null?0:ia(Rt(l),0,r.length),i=kr(i),r.slice(l,l+i.length)==i}function my(r,i,l){var _=q.templateSettings;l&&or(r,i,l)&&(i=n),r=Xt(r),i=au({},i,_,Wm);var B=au({},i.imports,_.imports,Wm),K=Hn(B),J=Z1(B,K),ie,_e,je=0,Ue=i.interpolate||ir,Ye="__p += '",at=J1((i.escape||ir).source+"|"+Ue.source+"|"+(Ue===ct?yn:ir).source+"|"+(i.evaluate||ir).source+"|$","g"),dt="//# sourceURL="+(Qt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++S4+"]")+`
`;r.replace(at,function(bt,Nt,Ht,Or,lr,Cr){return Ht||(Ht=Or),Ye+=r.slice(je,Cr).replace(di,q4),Nt&&(ie=!0,Ye+=`' +
__e(`+Nt+`) +
'`),lr&&(_e=!0,Ye+=`';
`+lr+`;
__p += '`),Ht&&(Ye+=`' +
((__t = (`+Ht+`)) == null ? '' : __t) +
'`),je=Cr+bt.length,bt}),Ye+=`';
`;var gt=Qt.call(i,"variable")&&i.variable;if(!gt)Ye=`with (obj) {
`+Ye+`
}
`;else if(vn.test(gt))throw new At(f);Ye=(_e?Ye.replace(fe,""):Ye).replace(ye,"$1").replace(ue,"$1;"),Ye="function("+(gt||"obj")+`) {
`+(gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ie?", __e = _.escape":"")+(_e?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ye+`return __p
}`;var kt=Uv(function(){return Kt(K,dt+"return "+Ye).apply(n,J)});if(kt.source=Ye,Pf(kt))throw kt;return kt}function vy(r){return Xt(r).toLowerCase()}function _y(r){return Xt(r).toUpperCase()}function py(r,i,l){if(r=Xt(r),r&&(l||i===n))return Xh(r);if(!r||!(i=kr(i)))return r;var _=rs(r),B=rs(i),K=Gh(_,B),J=Zh(_,B)+1;return xi(_,K,J).join("")}function gy(r,i,l){if(r=Xt(r),r&&(l||i===n))return r.slice(0,Jh(r)+1);if(!r||!(i=kr(i)))return r;var _=rs(r),B=Zh(_,rs(i))+1;return xi(_,0,B).join("")}function by(r,i,l){if(r=Xt(r),r&&(l||i===n))return r.replace($e,"");if(!r||!(i=kr(i)))return r;var _=rs(r),B=Gh(_,rs(i));return xi(_,B).join("")}function yy(r,i){var l=y,_=A;if(wn(i)){var B="separator"in i?i.separator:B;l="length"in i?Rt(i.length):l,_="omission"in i?kr(i.omission):_}r=Xt(r);var K=r.length;if(Wa(r)){var J=rs(r);K=J.length}if(l>=K)return r;var ie=l-Xa(_);if(ie<1)return _;var _e=J?xi(J,0,ie).join(""):r.slice(0,ie);if(B===n)return _e+_;if(J&&(ie+=_e.length-ie),Hf(B)){if(r.slice(ie).search(B)){var je,Ue=_e;for(B.global||(B=J1(B.source,Xt(on.exec(B))+"g")),B.lastIndex=0;je=B.exec(Ue);)var Ye=je.index;_e=_e.slice(0,Ye===n?ie:Ye)}}else if(r.indexOf(kr(B),ie)!=ie){var at=_e.lastIndexOf(B);at>-1&&(_e=_e.slice(0,at))}return _e+_}function wy(r){return r=Xt(r),r&&Oe.test(r)?r.replace(Ie,G4):r}var xy=no(function(r,i,l){return r+(l?" ":"")+i.toUpperCase()}),Df=Dm("toUpperCase");function jv(r,i,l){return r=Xt(r),i=l?n:i,i===n?z4(r)?J4(r):F4(r):r.match(i)||[]}var Uv=Ct(function(r,i){try{return Tr(r,n,i)}catch(l){return Pf(l)?l:new At(l)}}),Sy=zs(function(r,i){return Ur(i,function(l){l=xs(l),qs(r,l,Nf(r[l],r))}),r});function Ay(r){var i=r==null?0:r.length,l=_t();return r=i?bn(r,function(_){if(typeof _[1]!="function")throw new Dr(c);return[l(_[0]),_[1]]}):[],Ct(function(_){for(var B=-1;++B<i;){var K=r[B];if(Tr(K[0],this,_))return Tr(K[1],this,_)}})}function Ey(r){return G5(qr(r,h))}function $f(r){return function(){return r}}function My(r,i){return r==null||r!==r?i:r}var Ty=qm(),Ry=qm(!0);function gr(r){return r}function qf(r){return bm(typeof r=="function"?r:qr(r,h))}function ky(r){return wm(qr(r,h))}function Iy(r,i){return xm(r,qr(i,h))}var Oy=Ct(function(r,i){return function(l){return el(l,r,i)}}),Cy=Ct(function(r,i){return function(l){return el(r,l,i)}});function Vf(r,i,l){var _=Hn(i),B=Dc(i,_);l==null&&!(wn(i)&&(B.length||!_.length))&&(l=i,i=r,r=this,B=Dc(i,Hn(i)));var K=!(wn(l)&&"chain"in l)||!!l.chain,J=Ys(r);return Ur(B,function(ie){var _e=i[ie];r[ie]=_e,J&&(r.prototype[ie]=function(){var je=this.__chain__;if(K||je){var Ue=r(this.__wrapped__),Ye=Ue.__actions__=vr(this.__actions__);return Ye.push({func:_e,args:arguments,thisArg:r}),Ue.__chain__=je,Ue}return _e.apply(r,_i([this.value()],arguments))})}),r}function Ly(){return Dn._===this&&(Dn._=i5),this}function zf(){}function By(r){return r=Rt(r),Ct(function(i){return Sm(i,r)})}var Ny=xf(bn),Fy=xf(Vh),Py=xf(K1);function Dv(r){return kf(r)?Y1(xs(r)):hb(r)}function Hy(r){return function(i){return r==null?n:aa(r,i)}}var jy=zm(),Uy=zm(!0);function Kf(){return[]}function Yf(){return!1}function Dy(){return{}}function $y(){return""}function qy(){return!0}function Vy(r,i){if(r=Rt(r),r<1||r>Y)return[];var l=I,_=Yn(r,I);i=_t(i),r-=I;for(var B=G1(_,i);++l<r;)i(l);return B}function zy(r){return Et(r)?bn(r,xs):Ir(r)?[r]:vr(ov(Xt(r)))}function Ky(r){var i=++r5;return Xt(r)+i}var Yy=Yc(function(r,i){return r+i},0),Wy=Sf("ceil"),Xy=Yc(function(r,i){return r/i},1),Gy=Sf("floor");function Zy(r){return r&&r.length?Uc(r,gr,lf):n}function Qy(r,i){return r&&r.length?Uc(r,_t(i,2),lf):n}function Jy(r){return Yh(r,gr)}function e7(r,i){return Yh(r,_t(i,2))}function t7(r){return r&&r.length?Uc(r,gr,df):n}function n7(r,i){return r&&r.length?Uc(r,_t(i,2),df):n}var r7=Yc(function(r,i){return r*i},1),s7=Sf("round"),i7=Yc(function(r,i){return r-i},0);function a7(r){return r&&r.length?X1(r,gr):0}function o7(r,i){return r&&r.length?X1(r,_t(i,2)):0}return q.after=k8,q.ary=gv,q.assign=_6,q.assignIn=Cv,q.assignInWith=au,q.assignWith=p6,q.at=g6,q.before=bv,q.bind=Nf,q.bindAll=Sy,q.bindKey=yv,q.castArray=D8,q.chain=vv,q.chunk=Gb,q.compact=Zb,q.concat=Qb,q.cond=Ay,q.conforms=Ey,q.constant=$f,q.countBy=a8,q.create=b6,q.curry=wv,q.curryRight=xv,q.debounce=Sv,q.defaults=y6,q.defaultsDeep=w6,q.defer=I8,q.delay=O8,q.difference=Jb,q.differenceBy=e9,q.differenceWith=t9,q.drop=n9,q.dropRight=r9,q.dropRightWhile=s9,q.dropWhile=i9,q.fill=a9,q.filter=l8,q.flatMap=f8,q.flatMapDeep=d8,q.flatMapDepth=h8,q.flatten=fv,q.flattenDeep=o9,q.flattenDepth=l9,q.flip=C8,q.flow=Ty,q.flowRight=Ry,q.fromPairs=c9,q.functions=R6,q.functionsIn=k6,q.groupBy=m8,q.initial=f9,q.intersection=d9,q.intersectionBy=h9,q.intersectionWith=m9,q.invert=O6,q.invertBy=C6,q.invokeMap=_8,q.iteratee=qf,q.keyBy=p8,q.keys=Hn,q.keysIn=pr,q.map=eu,q.mapKeys=B6,q.mapValues=N6,q.matches=ky,q.matchesProperty=Iy,q.memoize=nu,q.merge=F6,q.mergeWith=Lv,q.method=Oy,q.methodOf=Cy,q.mixin=Vf,q.negate=ru,q.nthArg=By,q.omit=P6,q.omitBy=H6,q.once=L8,q.orderBy=g8,q.over=Ny,q.overArgs=B8,q.overEvery=Fy,q.overSome=Py,q.partial=Ff,q.partialRight=Av,q.partition=b8,q.pick=j6,q.pickBy=Bv,q.property=Dv,q.propertyOf=Hy,q.pull=g9,q.pullAll=hv,q.pullAllBy=b9,q.pullAllWith=y9,q.pullAt=w9,q.range=jy,q.rangeRight=Uy,q.rearg=N8,q.reject=x8,q.remove=x9,q.rest=F8,q.reverse=Lf,q.sampleSize=A8,q.set=D6,q.setWith=$6,q.shuffle=E8,q.slice=S9,q.sortBy=R8,q.sortedUniq=I9,q.sortedUniqBy=O9,q.split=fy,q.spread=P8,q.tail=C9,q.take=L9,q.takeRight=B9,q.takeRightWhile=N9,q.takeWhile=F9,q.tap=Z9,q.throttle=H8,q.thru=Jc,q.toArray=kv,q.toPairs=Nv,q.toPairsIn=Fv,q.toPath=zy,q.toPlainObject=Ov,q.transform=q6,q.unary=j8,q.union=P9,q.unionBy=H9,q.unionWith=j9,q.uniq=U9,q.uniqBy=D9,q.uniqWith=$9,q.unset=V6,q.unzip=Bf,q.unzipWith=mv,q.update=z6,q.updateWith=K6,q.values=io,q.valuesIn=Y6,q.without=q9,q.words=jv,q.wrap=U8,q.xor=V9,q.xorBy=z9,q.xorWith=K9,q.zip=Y9,q.zipObject=W9,q.zipObjectDeep=X9,q.zipWith=G9,q.entries=Nv,q.entriesIn=Fv,q.extend=Cv,q.extendWith=au,Vf(q,q),q.add=Yy,q.attempt=Uv,q.camelCase=Z6,q.capitalize=Pv,q.ceil=Wy,q.clamp=W6,q.clone=$8,q.cloneDeep=V8,q.cloneDeepWith=z8,q.cloneWith=q8,q.conformsTo=K8,q.deburr=Hv,q.defaultTo=My,q.divide=Xy,q.endsWith=Q6,q.eq=is,q.escape=J6,q.escapeRegExp=ey,q.every=o8,q.find=c8,q.findIndex=cv,q.findKey=x6,q.findLast=u8,q.findLastIndex=uv,q.findLastKey=S6,q.floor=Gy,q.forEach=_v,q.forEachRight=pv,q.forIn=A6,q.forInRight=E6,q.forOwn=M6,q.forOwnRight=T6,q.get=jf,q.gt=Y8,q.gte=W8,q.has=I6,q.hasIn=Uf,q.head=dv,q.identity=gr,q.includes=v8,q.indexOf=u9,q.inRange=X6,q.invoke=L6,q.isArguments=ca,q.isArray=Et,q.isArrayBuffer=X8,q.isArrayLike=_r,q.isArrayLikeObject=Rn,q.isBoolean=G8,q.isBuffer=Si,q.isDate=Z8,q.isElement=Q8,q.isEmpty=J8,q.isEqual=e6,q.isEqualWith=t6,q.isError=Pf,q.isFinite=n6,q.isFunction=Ys,q.isInteger=Ev,q.isLength=su,q.isMap=Mv,q.isMatch=r6,q.isMatchWith=s6,q.isNaN=i6,q.isNative=a6,q.isNil=l6,q.isNull=o6,q.isNumber=Tv,q.isObject=wn,q.isObjectLike=Sn,q.isPlainObject=al,q.isRegExp=Hf,q.isSafeInteger=c6,q.isSet=Rv,q.isString=iu,q.isSymbol=Ir,q.isTypedArray=so,q.isUndefined=u6,q.isWeakMap=f6,q.isWeakSet=d6,q.join=v9,q.kebabCase=ty,q.last=zr,q.lastIndexOf=_9,q.lowerCase=ny,q.lowerFirst=ry,q.lt=h6,q.lte=m6,q.max=Zy,q.maxBy=Qy,q.mean=Jy,q.meanBy=e7,q.min=t7,q.minBy=n7,q.stubArray=Kf,q.stubFalse=Yf,q.stubObject=Dy,q.stubString=$y,q.stubTrue=qy,q.multiply=r7,q.nth=p9,q.noConflict=Ly,q.noop=zf,q.now=tu,q.pad=sy,q.padEnd=iy,q.padStart=ay,q.parseInt=oy,q.random=G6,q.reduce=y8,q.reduceRight=w8,q.repeat=ly,q.replace=cy,q.result=U6,q.round=s7,q.runInContext=de,q.sample=S8,q.size=M8,q.snakeCase=uy,q.some=T8,q.sortedIndex=A9,q.sortedIndexBy=E9,q.sortedIndexOf=M9,q.sortedLastIndex=T9,q.sortedLastIndexBy=R9,q.sortedLastIndexOf=k9,q.startCase=dy,q.startsWith=hy,q.subtract=i7,q.sum=a7,q.sumBy=o7,q.template=my,q.times=Vy,q.toFinite=Ws,q.toInteger=Rt,q.toLength=Iv,q.toLower=vy,q.toNumber=Kr,q.toSafeInteger=v6,q.toString=Xt,q.toUpper=_y,q.trim=py,q.trimEnd=gy,q.trimStart=by,q.truncate=yy,q.unescape=wy,q.uniqueId=Ky,q.upperCase=xy,q.upperFirst=Df,q.each=_v,q.eachRight=pv,q.first=dv,Vf(q,function(){var r={};return ys(q,function(i,l){Qt.call(q.prototype,l)||(r[l]=i)}),r}(),{chain:!1}),q.VERSION=s,Ur(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){q[r].placeholder=q}),Ur(["drop","take"],function(r,i){Pt.prototype[r]=function(l){l=l===n?1:Fn(Rt(l),0);var _=this.__filtered__&&!i?new Pt(this):this.clone();return _.__filtered__?_.__takeCount__=Yn(l,_.__takeCount__):_.__views__.push({size:Yn(l,I),type:r+(_.__dir__<0?"Right":"")}),_},Pt.prototype[r+"Right"]=function(l){return this.reverse()[r](l).reverse()}}),Ur(["filter","map","takeWhile"],function(r,i){var l=i+1,_=l==k||l==z;Pt.prototype[r]=function(B){var K=this.clone();return K.__iteratees__.push({iteratee:_t(B,3),type:l}),K.__filtered__=K.__filtered__||_,K}}),Ur(["head","last"],function(r,i){var l="take"+(i?"Right":"");Pt.prototype[r]=function(){return this[l](1).value()[0]}}),Ur(["initial","tail"],function(r,i){var l="drop"+(i?"":"Right");Pt.prototype[r]=function(){return this.__filtered__?new Pt(this):this[l](1)}}),Pt.prototype.compact=function(){return this.filter(gr)},Pt.prototype.find=function(r){return this.filter(r).head()},Pt.prototype.findLast=function(r){return this.reverse().find(r)},Pt.prototype.invokeMap=Ct(function(r,i){return typeof r=="function"?new Pt(this):this.map(function(l){return el(l,r,i)})}),Pt.prototype.reject=function(r){return this.filter(ru(_t(r)))},Pt.prototype.slice=function(r,i){r=Rt(r);var l=this;return l.__filtered__&&(r>0||i<0)?new Pt(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),i!==n&&(i=Rt(i),l=i<0?l.dropRight(-i):l.take(i-r)),l)},Pt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Pt.prototype.toArray=function(){return this.take(I)},ys(Pt.prototype,function(r,i){var l=/^(?:filter|find|map|reject)|While$/.test(i),_=/^(?:head|last)$/.test(i),B=q[_?"take"+(i=="last"?"Right":""):i],K=_||/^find/.test(i);!B||(q.prototype[i]=function(){var J=this.__wrapped__,ie=_?[1]:arguments,_e=J instanceof Pt,je=ie[0],Ue=_e||Et(J),Ye=function(Nt){var Ht=B.apply(q,_i([Nt],ie));return _&&at?Ht[0]:Ht};Ue&&l&&typeof je=="function"&&je.length!=1&&(_e=Ue=!1);var at=this.__chain__,dt=!!this.__actions__.length,gt=K&&!at,kt=_e&&!dt;if(!K&&Ue){J=kt?J:new Pt(this);var bt=r.apply(J,ie);return bt.__actions__.push({func:Jc,args:[Ye],thisArg:n}),new $r(bt,at)}return gt&&kt?r.apply(this,ie):(bt=this.thru(Ye),gt?_?bt.value()[0]:bt.value():bt)})}),Ur(["pop","push","shift","sort","splice","unshift"],function(r){var i=Ec[r],l=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",_=/^(?:pop|shift)$/.test(r);q.prototype[r]=function(){var B=arguments;if(_&&!this.__chain__){var K=this.value();return i.apply(Et(K)?K:[],B)}return this[l](function(J){return i.apply(Et(J)?J:[],B)})}}),ys(Pt.prototype,function(r,i){var l=q[i];if(l){var _=l.name+"";Qt.call(Ja,_)||(Ja[_]=[]),Ja[_].push({name:i,func:l})}}),Ja[Kc(n,D).name]=[{name:"wrapper",func:n}],Pt.prototype.clone=w5,Pt.prototype.reverse=x5,Pt.prototype.value=S5,q.prototype.at=Q9,q.prototype.chain=J9,q.prototype.commit=e8,q.prototype.next=t8,q.prototype.plant=r8,q.prototype.reverse=s8,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=i8,q.prototype.first=q.prototype.head,Yo&&(q.prototype[Yo]=n8),q},Ga=e5();ta?((ta.exports=Ga)._=Ga,$1._=Ga):Dn._=Ga}).call(ml)})(vd,vd.exports);const vl=window.SupportChat.path+"/api/v1",zL={index(){return axios.get(vl+"/rooms")},store(e){return axios.post(vl+"/rooms",e)},show(e){return axios.get(vl+"/rooms/"+e)},update(e,t){return axios.put(vl+"/rooms/"+e,t)},destroy(e){return axios.delete(vl+"/rooms/"+e)}},_l=window.SupportChat.path+"/api/v1",KL={index(e){return axios.get(`${_l}/rooms/${e}/messages`)},store(e,t){return axios.post(`${_l}/rooms/${e}/messages`,t)},show(e){return axios.get(`${_l}/messages/${e}`)},update(e,t){return axios.put(`${_l}/messages/${e}`,t)},destroy(e){return axios.delete(`${_l}/messages/${e}`)}},$_=window.SupportChat.path+"/api/v1",YL={store(e,t){return axios.post(`${$_}/messages/${e}/reactions`,t,{headers:{"Content-Type":"text/plain"}})},destroy(e,t){return axios.delete(`${$_}/messages/${e}/reactions/${t}`)}},E0=window.SupportChat.path+"/api/v1",WL={store(e,t,n){return axios.post(`${E0}/messages/${e}/attachments`,t,n)},show(e,t){return axios.get(`${E0}/messages/${e}/attachments/${t}`)},destroy(e,t){return axios.delete(`${E0}/messages/${e}/attachments/${t}`)}},Gs={rooms:zL,messages:KL,messageReactions:YL,attachments:WL},XL=zx("support-chat",()=>{const e=ei(null),t=ei([]),n=ei(!1),s=ei(null),o=ei(1),a=ei([]),c=Ma(()=>oe=>a.value.findIndex(ke=>ke._id===oe)),f=Ma(()=>oe=>a.value.findIndex(ke=>ke.indexId===oe)),m=Ma(()=>oe=>oe.indexId!==null?globalThis.findMessageIndexByIndexId(oe.indexId):globalThis.findMessageIndexById(oe._id)),d=Ma(()=>oe=>{const ke=a.value.findIndex(Se=>Se._id===oe);return a.value[ke]}),p=Ma(()=>t.value.filter(oe=>oe.users.some(ke=>ke._id===e.value)));function h(oe){e.value=+oe}function w(oe){n.value=oe}function M(oe){t.value=oe}function u(oe){t.value=[...t.value,oe]}function $(oe){t.value=t.value.filter(ke=>ke.roomId!==oe)}function U(oe){s.value=oe}function D(oe,ke){const Se=t.value.findIndex(Ae=>Ae.roomId===oe);t.value[Se].users=ke,t.value=[...t.value]}function b(oe,ke){const Se=t.value.findIndex(Ae=>Ae.roomId===oe);t.value[Se].users=[...t.value[Se].users,ke],t.value=[...t.value]}function C(oe,ke){const Se=t.value.findIndex(Xe=>Xe.roomId===oe),Ae=t.value[Se].users.filter(Xe=>Xe._id!==ke._id);t.value[Se].users=[...Ae],t.value=[...t.value]}function F(oe){a.value=oe}function L(oe=null){const ke=Math.max.apply(Math,[0,...a.value.map(Se=>Se._id)]);o.value=oe!=null?oe:ke+1}function V(){o.value++}function v(oe,ke,Se,Ae){let Xe={_id:oe,content:ke,senderId:e.value,username:"",system:!1,saved:!1,distributed:!1,seen:!1,deleted:!1,failure:!1,disableActions:!1,disableReactions:!1,files:[],reactions:{},replyMessage:Se};for(const X of Ae||[])Xe.files.push({name:X.name,size:X.size,type:X.extension,audio:!1,duration:0,url:X.localURL,preview:null,progress:0});a.value=[...a.value,Xe]}function E(oe){a.value=[...a.value,oe]}function T(oe,ke){a.value[oe]=ke,a.value=[...a.value]}function y(oe,ke){a.value[oe]=ke,a.value=[...a.value]}function A(oe){a.value[oe]={...a.value[oe],failure:!0},a.value=[...a.value]}function S(oe){a.value[oe]={...a.value[oe],deleted:!0},a.value=[...a.value]}function x(oe,ke,Se){const Ae=a.value[oe].files.findIndex(Xe=>Xe.name+"."+Xe.type===ke);a.value[oe].files[Ae].progress=Se}function k(oe,ke,Se){var Xe;let Ae=(Xe=a.value[oe].reactions[Se])!=null?Xe:[];Ae.push(ke),a.value[oe].reactions[Se]=[...new Set(Ae)]}function R(oe,ke,Se){var X;let Ae=(X=a.value[oe].reactions[Se])!=null?X:[];const Xe=Ae.indexOf(ke);Xe>-1&&Ae.splice(Xe,1),a.value[oe].reactions[Se]=[...new Set(Ae)]}async function z(){w(!1);const oe=await Gs.rooms.index();M(oe.data.data),w(!0);for(const ke of this.joinedRooms)window.roomChannel=window.Echo.join(`support-chat.room.${ke.roomId}`).here(Se=>{D(ke.roomId,Se)}).joining(Se=>{b(ke.roomId,Se)}).leaving(Se=>{C(ke.roomId,Se)}).error(Se=>{console.error(Se)}).listen(".message.posted",Se=>{ke.roomId===s.value&&E(Se),L()}).listen(".message.edited",Se=>{const Ae=this.findMessageIndex(Se);ke.roomId===s.value&&y(Ae,Se)}).listen(".message.deleted",Se=>{const Ae=this.findMessageIndex(Se);ke.roomId===s.value&&S(Ae)}).listen(".reaction.left",({messageIndexId:Se,userId:Ae,emoji:Xe})=>{const X=this.findMessageIndexByIndexId(Se);k(X,Ae,Xe)}).listen(".reaction.removed",({messageIndexId:Se,userId:Ae,emoji:Xe})=>{const X=this.findMessageIndexByIndexId(Se);R(X,Ae,Xe)}).listenForWhisper("attachment.uploading",({messageIndexId:Se,filename:Ae,progress:Xe})=>{const X=this.findMessageIndexByIndexId(Se);X>-1&&x(X,Ae,Xe)}).listen(".attachment.uploaded",({messageIndexId:Se,filename:Ae})=>{const Xe=this.findMessageIndexByIndexId(Se);x(Xe,Ae,-1)})}async function ne(oe={}){const ke=await Gs.rooms.store(oe);u(ke.data.data)}async function Y(oe){await Gs.rooms.destroy(oe),$(oe)}async function te({room:oe,options:ke}){U(oe.roomId);const Se=await Gs.messages.index(oe.roomId);F(Se.data.data),L()}async function g({roomId:oe,content:ke,files:Se,replyMessage:Ae,usersTag:Xe}){const X=o.value;V();const O={_id:X,content:ke,replyMessage:Ae,files:Se};v(O),await I({roomId:oe,message:O})}async function I({roomId:oe,message:ke}){var Ae,Xe,X;const Se=this.findMessageIndex(ke);try{const P=(await Gs.messages.store(oe,{content:ke.content,parent_id:(Ae=ke.replyMessage)==null?void 0:Ae.indexId,attachments:(X=(Xe=ke.files)==null?void 0:Xe.map(G=>({name:G.name+"."+G.extension,type:G.type,size:G.size})))!=null?X:[]})).data.data;T(Se,{...P,_id:ke._id});for(let G of ke.files||[])await he({message:P,file:G}),x(Se,G.name+"."+G.extension,-1)}catch{A(Se)}}async function le({messageId:oe,files:ke}){}async function he({message:oe,file:ke}){let Se=new FormData;Se.append("attachment",ke.blob,ke.name+"."+ke.extension);const Ae=this.findMessageIndex(oe);await Gs.attachments.store(oe.indexId,Se,{onUploadProgress:vd.exports.throttle(Xe=>{const X={messageIndexId:oe.indexId,filename:ke.name+"."+ke.extension,progress:Math.round(Xe.loaded*100/Xe.total)};window.roomChannel.whisper("attachment.uploading",X),x(Ae,X.filename,X.progress)},100)})}async function He({roomId:oe,messageId:ke,newContent:Se,files:Ae,replyMessage:Xe,usersTag:X}){const P=(await Gs.messages.update(ke,{content:Se,replyMessage:Xe!=null?Xe:this.getMessage(ke).replyMessage})).data.data,G=this.findMessageIndex(P);y(G,P)}async function Ke({roomId:oe,message:ke}){await Gs.messages.destroy(ke.indexId);const Se=this.findMessageIndex(ke);S(Se)}async function qe({roomId:oe,messageId:ke,reaction:Se,remove:Ae}){await Gs.messageReactions[Ae?"destroy":"store"](ke,Se.unicode)(Ae?R:k)(ke,e.value,Se.unicode)}return{currentUserId:e,rooms:t,roomsLoaded:n,roomId:s,nextMessageId:o,messages:a,findMessageIndexById:c,findMessageIndexByIndexId:f,findMessageIndex:m,getMessage:d,joinedRooms:p,_setUserId:h,_setRoomsLoadedState:w,_setRooms:M,_addRoom:u,_deleteRoom:$,_setRoomId:U,_roomSetUsers:D,_roomJoinUser:b,_roomLeaveUser:C,_setMessages:F,_setNextMsgId:L,_incrementNextMsgId:V,_initMessage:v,_addMessage:E,_updateMessage:T,_editMessage:y,_failMessage:A,_deleteMessage:S,_uploadProgress:x,_leaveReaction:k,_removeReaction:R,fetchRooms:z,addRoom:ne,deleteRoom:Y,fetchMessages:te,sendMessage:g,trySendMessage:I,syncAttachments:le,uploadAttachment:he,editMessage:He,deleteMessage:Ke,sendMessageReaction:qe}}),GL=["current-user-id","rooms","rooms-loaded","messages","room-actions","menu-actions"],ZL={__name:"SupportChat",props:["userId"],setup(e){VL();const t=XL(),n=ei([{name:"deleteRoom",title:"Delete Room"}]);Cd(()=>{this.store._setUserId(this.userId),this.store.fetchRooms()});function s({message:a,file:c}){window.location=c.file.url}function o({roomId:a,action:c}){switch(c.name){case"deleteRoom":this.store.deleteRoom(a)}}return(a,c)=>En(t).currentUserId?(Cp(),Qw("vue-advanced-chat",{key:0,"current-user-id":En(t).currentUserId,rooms:En(t).rooms,"rooms-loaded":En(t).roomsLoaded,messages:En(t).messages,"messages-loaded":!0,"room-actions":n.value,"menu-actions":n.value,onFetchMessages:c[0]||(c[0]=(...f)=>En(t).fetchMessages&&En(t).fetchMessages(...f)),onFetchMoreRooms:c[1]||(c[1]=(...f)=>En(t).fetchRooms&&En(t).fetchRooms(...f)),onSendMessage:c[2]||(c[2]=(...f)=>En(t).sendMessage&&En(t).sendMessage(...f)),onEditMessage:c[3]||(c[3]=(...f)=>En(t).editMessage&&En(t).editMessage(...f)),onDeleteMessage:c[4]||(c[4]=(...f)=>En(t).deleteMessage&&En(t).deleteMessage(...f)),onOpenFile:s,onOpenFailedMessage:c[5]||(c[5]=(...f)=>En(t).trySendMessage&&En(t).trySendMessage(...f)),onAddRoom:c[6]||(c[6]=(...f)=>En(t).addRoom&&En(t).addRoom(...f)),onRoomActionHandler:o,onMenuActionHandler:o,onSendMessageReaction:c[7]||(c[7]=(...f)=>En(t).sendMessageReaction&&En(t).sendMessageReaction(...f))},null,40,GL)):sx("",!0)}};Px(ZL).use(Ux()).mount("#support-chat");
